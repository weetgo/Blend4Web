var b4w="object"===typeof b4w?b4w:function(a){var u={};a.module=u;var m={};a.Ja=function(a,b){var c=u[a];c&&(c.sq=null);m[b||"__b4w_default"]=null};a.register=function(a,b){u[a]||(u[a]=b)};a.require=function(a,b){if(!u[a])throw Error('Module "'+a+'" not found');b=b||"__b4w_default";m[b]||(m[b]=function(a){return function(b){var c=u[b];if(!c)throw Error('Module "'+b+'" not found');c.sq||(c.sq={});c.sq[a]||(c.sq[a]={},c(c.sq[a],m[a]));return c.sq[a]}}(b));return m[b](a)};a.module_check=function(a){return u[a]?
!0:!1};a.get_namespace=function(a){for(var b in m)if(m[b]==a)return b;return""};a.worker_listeners=[];a.worker_namespaces=[];return a}({});b4w.module.app=function(a,u){function m(){var a=F.pr();document.addEventListener("visibilitychange",function(){document.hidden?(a=F.pr(),F.pause()):a||F.resume()},!1)}function c(){var a=0,b=k.qe(),d=F.pr(),f=!0;F.Dt(function(){if(!(a%10)){var c=b.getBoundingClientRect();c.top>window.innerHeight||0>c.bottom?(f&&(d=F.pr()),F.pause(),f=!1):d||f||(F.resume(),f=!0)}a++})}function b(a,b,d,f){var c=document.createElement("canvas"),n=document.getElementById(a);n||(C.error('Warning: canvas container "'+a+
'" not found, appending to body'),n=document.body);c.style.position="absolute";c.style.left=0;c.style.top=0;c.style.width=n.offsetWidth+"px";c.style.height=n.offsetHeight+"px";c.width=n.offsetWidth*window.devicePixelRatio;c.height=n.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",c.style.left=0,c.style.top=0,a.style.pointerEvents="none"):a=null;n.appendChild(c);if(!F.Mf(c,a))return d&&L("Browser could not initialize WebGL","For more info visit",
"https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",f),!1;a&&k.Xu(a,"LAST");return!0}function p(a,b){a?(b&&(document.getElementById(b).style.display="block"),R=document.getElementById(a)):(R=document.createElement("div"),R.innerHTML=0,R.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",k.Xu(R,"JUST_AFTER_CANVAS"))}function h(a,b){var d=
String(a);b&&(d+="/"+String(b));R.innerHTML=d}function G(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function q(a,b,f){var c=Math.max(I.f0(a),1),E=W.Rj(a,ea);b=d.Jc(E,b,B);b[2]=0;n.normalize(b,b);n.scale(b,c*f,b);f=W.Me(a,Z);n.add(f,b,f);I.je(a,f)}function w(a,b){var d=I.nO(a,da);if(d.up!=d.down){var f=I.jl(a,ga)[1],d=(d.down-f)/(d.down-d.up),f=I.mO(a,da),d=Math.max(d,2/f.max);I.Dc(a,0,d*b)}}function A(a,b,d,f){W.yg(a,5*b,5*d,5*f)}function g(a,b,d){var f=
I.tI(a),c=Math.abs(b);d=Math.pow(c*d,1-Math.pow(c*d,.15));W.yg(a,0,0,0>b?.001<f?-f*d:0:d/(1-d)*f)}function e(a,b,d,f){for(var c=d*b;0<a;--a)d+=c,f+=c,c=d*b;return f}function y(a,b,d,f,c){c?(c=I.v4(a,B),a=I.Me(a),a=n.dist(c,a)+f,f=0<b?e(b,-d,a,f):e(-b,d/(1-d),a,f)):f-=2*b*d;return f}function x(a,b,c,E,e,l){function r(a,b,d,f){if(1==d){I.Sj(a,F);var c=x?.003*F.trans:.003*F.rot;d=D.kd(a,b,0);D.jf(a,b,0).gesture===D.nx?(Ra+="X"==f?-d*c:0,Jb+="Y"==f?-d*c:0):D.jf(a,b,0).gesture===D.lx&&(a=x?.003*F.rot:
7.5E-4*F.trans,xb+="X"==f?-d*a:0,Pa+="Y"==f?-d*a:0)}}function h(a,b,d,f){if(1==d){d=D.kd(a,b,1);I.Sj(a,F);if(x)c=.003*F.trans,N=7.5E-4*F.rot;else var c=.003*F.rot,N=7.5E-4*F.trans;if(1===D.jf(a,b,0).which)sa+="X"==f?-d*c:0,Da+="Y"==f?-d*c:0;else if(2===D.jf(a,b,0).which||3===D.jf(a,b,0).which)ra+="X"==f?-d*N:0,U+="Y"==f?-d*N:0}}function C(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function k(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function M(a){return a[0]&&(a[1]||-.1>a[2])}function v(a){return a[0]&&(a[1]||
.1<a[2])}function p(a){return a[0]&&(a[1]||a[2]||a[3])}function R(a,b,f){if(1==f)switch(f=D.kd(a,b,0),I.Sj(a,F),b){case "FORWARD":Y?Ka[0]=1:x?(b=I.jl(a,ga)[1],b=Math.abs(b)>=Math.PI/4?d.Fe:d.mc,q(a,b,.5*F.trans*f)):L?g(a,-F.zoom,f):A(a,0,0,-F.trans*f);break;case "BACKWARD":Y?Ka[0]=-1:x?(b=I.jl(a,ga)[1],b=Math.abs(b)>=Math.PI/4?d.Bh:d.fc,q(a,b,.5*F.trans*f)):L?g(a,F.zoom,f):A(a,0,0,F.trans*f);break;case "UP":x?w(a,30*-F.zoom*f):Y||A(a,0,F.trans*f,0);break;case "DOWN":x?w(a,30*F.zoom*f):Y||A(a,0,-F.trans*
f,0);break;case "LEFT":Y?Ka[1]=1:x?q(a,d.Xs,.5*F.trans*f):A(a,-F.trans*f,0,0);break;case "RIGHT":Y?Ka[1]=-1:x?q(a,d.Bf,.5*F.trans*f):A(a,F.trans*f,0,0);break;case "ROT_LEFT":L?I.Dc(a,.75*-F.rot*f,0):I.Dc(a,.75*F.rot*f,0);break;case "ROT_RIGHT":L?I.Dc(a,.75*F.rot*f,0):I.Dc(a,.75*-F.rot*f,0);break;case "ROT_UP":L?I.Dc(a,0,.75*-F.rot*f):I.Dc(a,0,.75*F.rot*f);break;case "ROT_DOWN":L?I.Dc(a,0,.75*F.rot*f):I.Dc(a,0,.75*-F.rot*f)}else switch(b){case "FORWARD":case "BACKWARD":Y&&(Ka[0]=0);break;case "LEFT":case "RIGHT":Y&&
(Ka[1]=0)}Y&&(z.LH(Y,Ka[0],Ka[1]),a=I.qz(a,ua),z.JB(Y,a[0],a[1]))}t=a;fa=b;la=c;H=E;za=e;ha=l;var m=f.il();P(m);var L=!1,Y=null,x=!1;switch(I.Ti(m)){case I.Ob:L=!a;break;case I.Vc:Y=f.uz();break;case I.Ie:return;case I.dd:x=!0}var F=I.Sj(m,Aa);a=D.um();if(z.ZF(m)){var Ba=D.NE(m,null,!0);D.ga(m,"CAMERA_COLLISION",D.Qg,[Ba],null,function(a,b){var d=D.jf(a,b,0).coll_dist;if(0>d){var f=D.jf(a,b,0).coll_norm,c=B;n.scale(f,-.25*d,c);d=W.Me(a,Z);n.add(d,c,d);W.RB(a,d)}})}if(Y){var Ba=W.Me(m),Fa=W.Rj(m),
Fa=d.sE(Fa);Ba[2]-=.5;z.PB(Y,Ba,Fa);K.TV(m,Y);var Ka=new Float32Array(2),V=!0;z.IB(Y,z.cJ);D.Iq(m,"TOGGLE_CHAR_MOVE_TYPE",D.Ch,D.yT,function(){V=!V;z.IB(Y,V?z.cJ:z.cT)})}var J,G,N,Ga,ea,da,u,T,ba,aa,wa,ma,ja;l?Ba=Fa=aa=wa=ma=ja=D.nu(0):(ja=S.ZW(),Fa=ja.length?ja[ja.length-1]:0,Ba=D.bc(S.Ln,Fa),Fa=D.bc(S.Mn,Fa),aa=D.le(S.cm,ja),wa=D.le(S.Jn,ja),ma=D.le(S.dm,ja),ja=D.le(S.Kn,ja));b?b=J=G=N=Ga=ea=da=u=T=ba=D.nu(0):(b=D.sd(D.zJ),J=D.sd(D.xJ),G=D.sd(D.sJ),N=D.sd(D.tJ),Ga=D.sd(D.ET),ea=D.sd(D.zT),da=D.sd(D.yJ),
u=D.sd(D.uJ),T=D.sd(D.vJ),ba=D.sd(D.wJ));x||(D.ga(m,"FORWARD",D.kb,[a,b,wa],M,R),D.ga(m,"BACKWARD",D.kb,[a,J,wa],v,R));L?(D.ga(m,"ROT_UP",D.kb,[a,da,Ga,ja],C,R),D.ga(m,"ROT_DOWN",D.kb,[a,u,ea,ja],k,R),D.ga(m,"ROT_LEFT",D.kb,[a,T,G,ma],C,R),D.ga(m,"ROT_RIGHT",D.kb,[a,ba,N,ma],k,R)):x?(D.ga(m,"LEFT",D.kb,[a,T,G,aa],C,R),D.ga(m,"RIGHT",D.kb,[a,ba,N,aa],k,R),D.ga(m,"FORWARD",D.kb,[a,da,b,wa],C,R),D.ga(m,"BACKWARD",D.kb,[a,u,J,wa],k,R),D.ga(m,"UP",D.kb,[a,ea,ja],v,R),D.ga(m,"DOWN",D.kb,[a,Ga,ja],M,R)):
(D.ga(m,"UP",D.kb,[a,Ga,Ba],p,R),D.ga(m,"DOWN",D.kb,[a,ea,Fa],p,R),D.ga(m,"LEFT",D.kb,[a,G,aa],M,R),D.ga(m,"RIGHT",D.kb,[a,N,aa],v,R),D.ga(m,"ROT_UP",D.kb,[a,da,ja],M,R),D.ga(m,"ROT_DOWN",D.kb,[a,u,ja],v,R),D.ga(m,"ROT_LEFT",D.kb,[a,T,ma],M,R),D.ga(m,"ROT_RIGHT",D.kb,[a,ba,ma],v,R));if(!c){var Ma=0;c=D.TE(E);var Ca=0;wa=D.zy(E);D.ga(m,"MOUSE_WHEEL",D.Tp,[c],null,function(a,b,d){1==d&&(b=D.kd(a,b,0),I.Sj(a,F),L||x?Ma=y(a,b,F.zoom,Ma,L):(F.trans*=1+b*F.zoom,I.H3(a,F)))});D.ga(m,"TOUCH_ZOOM",D.Tp,[wa],
null,function(a,b,d){1==d&&(d=D.kd(a,b,0),I.Sj(a,F),D.jf(a,b,0)===D.mx&&(Ca=y(a,d,.03*F.zoom,Ca,L)))});D.ga(m,"ZOOM_INTERPOL",D.Qg,[a],null,function(a,b){if(L||x)if(1E-5<Math.abs(Ma)||1E-5<Math.abs(Ca)){var f=D.kd(a,b,0),c=d.Rc(Ma,0,f,.1*X);Ma-=c;f=d.Rc(Ca,0,f,.15*X);Ca-=f;x?w(a,-(c+f)):(c=I.tI(a)+c+f,c=Math.max(c,.001),I.x4(a,c))}else Ca=Ma=0})}var sa=0,Da=0,ra=0,U=0,bb=0,Za=0;l||(l=function(a){I.Sj(a,F);bb+=.002*F.trans},c=function(a){I.Sj(a,F);Za+=.05*F.zoom},wa=function(a){I.Sj(a,F);bb-=.002*
F.trans},ja=function(a){I.Sj(a,F);Za-=.05*F.zoom},L?(D.ga(m,"GMPD_PAN_Y_POS",D.kb,[Ba],null,c),D.ga(m,"GMPD_PAN_Y_NEG",D.kb,[Fa],null,ja),D.ga(m,"GMPD_PAN_X_POS",D.kb,[aa],function(a){return-.1>a[0]},wa),D.ga(m,"GMPD_PAN_X_NEG",D.kb,[aa],function(a){return.1<a[0]},l)):x&&(D.ga(m,"GMPD_PAN_X_POS",D.kb,[ma],function(a){return-.1>a[0]},wa),D.ga(m,"GMPD_PAN_X_NEG",D.kb,[ma],function(a){return.1<a[0]},l)));if(e){e=D.Vk("X",window);l=D.Vk("Y",window);Ba=D.po(E);c=D.po(window);var Ea=!1,Fa=function(a){a[2]?
Ea=!0:a[0]||(Ea=!1);return Ea&&a[0]};D.ga(m,"MOUSE_X",D.Qg,[c,e,Ba],Fa,h,"X");D.ga(m,"MOUSE_Y",D.Qg,[c,l,Ba],Fa,h,"Y");e=S.$(S.Uc,window);S.jw(e,!1)}else e=D.Vk("X",E),l=D.Vk("Y",E),Ba=D.po(E),D.ga(m,"MOUSE_X",D.Qg,[Ba,e],null,h,"X"),D.ga(m,"MOUSE_Y",D.Qg,[Ba,l],null,h,"Y");var Ra=0,Jb=0,xb=0,Pa=0;e=D.pu("X",E);E=D.pu("Y",E);D.ga(m,"TOUCH_X",D.Qg,[e],null,r,"X");D.ga(m,"TOUCH_Y",D.Qg,[E],null,r,"Y");D.ga(m,"ROT_TRANS_INTERPOL",D.Qg,[a],null,function(a,b){if(1E-5<Math.abs(sa)||1E-5<Math.abs(Da)||1E-5<
Math.abs(Ra)||1E-5<Math.abs(Jb)||1E-5<Math.abs(ra)||1E-5<Math.abs(U)||1E-5<Math.abs(xb)||1E-5<Math.abs(Pa)||1E-5<Math.abs(bb)||1E-5<Math.abs(Za)){var f=D.kd(a,b,0),c=d.Rc(sa,0,f,.08*X),N=d.Rc(Da,0,f,.08*X);sa-=c;Da-=N;var n=d.Rc(Ra,0,f,.12*X),E=d.Rc(Jb,0,f,.12*X);Ra-=n;Jb-=E;var t=d.Rc(ra,0,f,.08*X),e=d.Rc(U,0,f,.08*X);ra-=t;U-=e;var g=d.Rc(xb,0,f,.12*X),l=d.Rc(Pa,0,f,.12*X);xb-=g;Pa-=l;var r=d.Rc(bb,0,f,.08*X),f=d.Rc(Za,0,f,.08*X);bb-=r;Za-=f;L?(I.Dc(a,c+n,N+E),N=I.tI(a),I.w4(a,N*(t+g+r),N*(e+l+
f))):x?(c+n&&q(a,d.Bf,.2*(c+n)),N+E&&(e=I.jl(a,ga)[1],q(a,Math.abs(e)>Math.PI/4?d.Bh:d.fc,.2*(N+E))),I.Dc(a,t+g+r,0)):(I.Dc(a,.5*(c+n),.5*(N+E)),Y&&(t=I.qz(a,ua),z.JB(Y,t[0],t[1])))}});D.Iq(m,"DEC_STEREO_DIST",D.Ch,D.CT,function(a){var b=I.ON(a);I.gR(a,.9*b)});D.Iq(m,"INC_STEREO_DIST",D.Ch,D.FT,function(a){var b=I.ON(a);I.gR(a,1.1*b)})}function P(a){var b=I.Ti(a),d=D.ME(function(){var d=I.Ti(a),f=d!=b;b=d;return f});D.ga(a,"CHANGE_MOVE_STYLE",D.Qg,[d],null,function(){J();x(t,fa,la,H,za,ha)})}function J(){var a=
f.il();D.om(a,"TOGGLE_CHAR_MOVE_TYPE")&&f.uz()&&K.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),d=0;d<b.length;d++)D.Cg(a,b[d])}function L(a,b,d,f){var c=document.createElement("div"),n=document.createElement("div"),E=document.createElement("div");if(f)for(var t=0;t<f.length;t++){var e=document.getElementById(f[t]);
e&&e.parentNode.removeChild(e)}c.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";n.style.cssText="color:#fff;font-size:24px;";E.style.cssText="color:#fff;font-size:20px;";n.innerHTML=a;E.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+d+'">'+d.replace("https://www.","")+"</a>";c.appendChild(n);c.appendChild(E);document.body.appendChild(c)}function l(a,b,d,f,c){function n(){var t=performance.now()-E;c(b+t*(d-b)/
f);(t>=f||!a.parentNode)&&F.u2(n)}var E=performance.now();F.Dt(n)}var I=u("camera"),v=u("config"),K=u("constraints"),k=u("container"),D=u("controls"),M=u("data"),E=u("debug"),S=u("input"),F=u("main"),z=u("physics"),C=u("print"),r=u("screen"),f=u("scenes"),W=u("transform"),d=u("util"),n=u("vec3"),X=1,R=null,t=!1,fa=!1,la=!1,H=null,za=!1,ha=!1,ua=new Float32Array(2),ga=new Float32Array(2),B=new Float32Array(3),Z=new Float32Array(3),ea=new Float32Array(4),Aa={},da={};a.Mf=function(a){function d(){var a=
b(e,Fa,R,g),d=k.Xh();if(a){var f=k.qe();k.Gl();K&&(p(l,B),F.l3(h));z&&(m(),c());r&&F.Dt(function(){f.style.height=f.clientWidth/r+"px"});t&&F.Dt(function(){k.Gl()});w&&F.Dt(function(){k.uF()});X&&v.AH();y==v.tt?E.UR(function(a,b){0==a?(C.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),v.xq(v.Ak)):1.5>b?(C.log("QUALITY TEST RESULT: LOW ("+b.toFixed(1)+" GB/s)"),v.xq(v.gm)):(C.log("QUALITY TEST RESULT: HIGH ("+b.toFixed(1)+" GB/s)"),v.xq(v.Ak));n(d,!0)}):n(d,!0)}else n(d,!1)}function f(a){a.keyCode==
D.DT&&(F.pr()?F.resume():F.pause())}function n(){}a=a||{};var t=!1,e=null,g=null,l=null,r=0,B=null,H=!0,X=!1,z=!0,R=!0,L=!1,K=!1,q=!1,w=!1,y=v.get("quality"),Ba;for(Ba in a)switch(Ba){case "canvas_container_id":e=a.canvas_container_id;break;case "callback":n=a.callback;break;case "autoresize":t=a.autoresize;break;case "show_hud_debug_info":q=a.show_hud_debug_info;break;case "sfx_mix_mode":L=a.sfx_mix_mode;break;case "show_fps":K=a.show_fps;break;case "track_container_position":w=a.track_container_position;
C.va("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":B=a.fps_wrapper_id;break;case "fps_elem_id":l=a.fps_elem_id;break;case "error_purge_elements":g=a.error_purge_elements;break;case "report_init_failure":R=a.report_init_failure;break;case "pause_invisible":z=a.pause_invisible;break;case "key_pause_enabled":H=a.key_pause_enabled;break;case "force_container_ratio":r=a.force_container_ratio;break;case "min_capabilities":X=
a.min_capabilities;break;case "quality":y=a.quality;break;default:v.set(Ba,a[Ba])}y!=v.tt&&v.set("quality",y);H&&document.addEventListener("keydown",f,!1);v.set("show_hud_debug_info",q);v.set("sfx_mix_mode",L);var Fa=q||L||null;"complete"==document.readyState?window.setTimeout(d,0):window.addEventListener("load",d,!1);window.addEventListener("unload",function(){M.Ja()},!1)};a.xda=function(a,b){var d=G(a);d.addEventListener("mouseup",function(){b(d.value)},!1)};a.wda=function(a,b){var d=G(a);d.addEventListener("change",
function(){var a=d.checked;b(void 0!=a?a:d.value)},!1)};a.yda=function(a,b){var d=G(a);d.addEventListener("keypress",function(a){b(a.keyCode,d.value)},!1)};a.hZ=x;a.N9=J;a.y$=function(a){function b(a){return a[0]&&(a[1]||a[2])}function d(a,b,d){if(1==d)switch(d=D.kd(a,b,0),b){case "FORWARD":f?z.Ns(a,1):W.yg(a,0,-1*d,0);break;case "BACKWARD":f?z.Ns(a,-1):W.yg(a,0,1*d,0);break;case "LEFT":f?z.Ms(a,-1):W.yg(a,1*d,0,0);break;case "RIGHT":f?z.Ms(a,1):W.yg(a,-1*d,0,0)}else switch(b){case "FORWARD":case "BACKWARD":f&&
z.Ns(a,0);break;case "LEFT":case "RIGHT":f&&z.Ms(a,0)}}var f=z.vg(a)||z.wg(a),c=D.um(),n=D.sd(D.zJ),E=D.sd(D.xJ),t=D.sd(D.sJ),e=D.sd(D.tJ),g=D.sd(D.yJ),l=D.sd(D.uJ),r=D.sd(D.vJ),h=D.sd(D.wJ);D.ga(a,"FORWARD",D.kb,[c,n,g],b,d);D.ga(a,"BACKWARD",D.kb,[c,E,l],b,d);D.ga(a,"LEFT",D.kb,[c,t,r],b,d);D.ga(a,"RIGHT",D.kb,[c,e,h],b,d)};a.P9=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],d=0;d<b.length;d++)D.Cg(a,b[d])};a.x$=function(){D.Iq(null,"CAMERA_SHOT",D.Ch,D.AT,function(){E.i1()});D.Iq(null,
"LIGHT_SHOT",D.Ch,D.BT,function(){E.k1()});D.Iq(null,"TELEMETRY",D.Ch,D.GT,function(){E.jH()})};a.yH=function(a,b,d){C.Jf("request_fullscreen","screen.request_fullscreen");r.yH(a,b,d)};a.oF=function(){C.Jf("exit_fullscreen","screen.exit_fullscreen");r.oF()};a.Eq=function(){C.Jf("check_fullscreen","screen.check_fullscreen");return r.Eq()};a.Rca=L;a.Jz=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),d={},f=0;f<
b.length;f++){var c=b[f].split("="),n=c[0];1<c.length?(c=c[1],a?n in d?d[n].push(c):d[n]=[c]:d[n]=c):a?n in d||(d[n]=[]):d[n]=""}return d};a.Oh=function(a,b,d,f,c,n,E,t){if(a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)){n=n||"";E=E||"";t=t||function(){};var e=a.style,g=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==e[b])if(void 0!=e["webkit"+g])b="webkit"+g;else if(void 0!=e["ms"+g])b="ms"+g;else if(void 0!=e["moz"+g])b="moz"+g;else return;l(a,d,f,c,function(c){a&&(e[b]=n+c+E,d>f&&c<=f||d<f&&c>=f)&&
(e[b]=n+f+E,t())})}};a.jW=function(a,b,d,f,c,n){a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)&&(n=n||function(){},l(a,d,f,c,function(c){a&&(0<=c&&a.setAttribute(b,c),d>f&&c<=f||d<f&&c>=f)&&(a.setAttribute(b,f),n())}))};a.aQ=function(b){if(b.length){var d=b.shift(),f=d.elem,c=d.prop,n=d.from,E=d.to,t=d.duration,e=d.opt_prefix,g=d.opt_suffix,l=function(){d.cb&&d.cb();a.aQ(b)};"css"==d.type?a.Oh(f,c,n,E,t,e,g,l):"attr"==d.type&&a.jW(f,c,n,E,t,l)}};a.fda=function(a){X=a};a.jaa=function(){return X}};b4w.module.camera=function(a,u){function m(a,b){if(!G.pb(a))return w.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=e.ha(a.v.C);y.Jc(c,y.mc,b);return b}var c=u("__camera"),b=u("__container"),p=u("__mat4"),h=u("__math"),G=u("__obj_util"),q=u("__physics"),w=u("__print"),A=u("__scenes"),g=u("__transform"),e=u("__tsr"),y=u("__util"),x=u("__vec3"),P=u("__vec4"),J=u("__quat"),L=new Float32Array(2),l=new Float32Array(3),I=new Float32Array(3),v=new Float32Array(4),K=J.create(),
k={},D={};a.Ie=c.Ie;a.Ob=c.Ob;a.Vc=c.Vc;a.dd=c.dd;a.l4=function(a,b){if(G.pb(a)){c.Hw(a);a.v.yb=c.Ie;if(b){var E=b.pos||e.W(a.v.C);b.look_at?c.ZQ(a,E,b.look_at):g.je(a,E)}g.V(a);q.Z(a);c.kr(a)}else w.error("static_setup(): Wrong camera object")};a.dea=function(a,b,l){c.Yo(a)?(b=b||e.W(a.v.C),l?c.ZQ(a,b,l):g.je(a,b),g.V(a),q.Z(a)):w.error("static_set_look_at(): Wrong camera object or camera move style")};a.eea=function(a,b){c.Yo(a)?(g.Ll(a,b),g.V(a),q.Z(a)):w.error("static_set_rotation(): Wrong camera object or camera move style")};
a.cea=function(a,b){if(!c.Yo(a))return w.error("static_get_rotation(): Wrong camera object or camera move style"),null;b=b||new Float32Array(4);return g.Rj(a,b)};a.yZ=function(a){G.pb(a)?(c.Hw(a),a.v.yb=c.Vc,g.V(a),q.Z(a),c.kr(a)):w.error("eye_setup(): Wrong camera object")};a.sF=function(a,b){c.Ne(a)?(b=b||e.W(a.v.C),g.je(a,b),c.ny(a,a.v.Ve,!0),g.V(a),q.Z(a)):w.error("eye_set_look_at(): Wrong camera object or camera move style")};a.I$=function(b,e,g,l){w.Jf("eye_rotate","rotate_camera");c.Ne(b)?
a.Dc(b,e,g,l||!1):w.error("eye_rotate(): Wrong camera object or camera move style")};a.K$=function(a,b){c.Ne(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.TB(a,b),g.V(a),q.Z(a)):w.error("eye_set_vertical_limits(): Incorrect limits object."):w.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};a.H$=function(a,b,e){if(!c.Ne(a))return w.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.v;return a.Ya?(b=b||{},e?(b.down=a.Ya.Sq,
b.up=a.Ya.Cs):(b.down=a.Ya.down,b.up=a.Ya.up),b.camera_space=e||!1,b):null};a.J$=function(a,b){c.Ne(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.MB(a,b),g.V(a),q.Z(a)):w.error("eye_set_horizontal_limits(): Incorrect limits object."):w.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};a.xZ=function(a,b){if(!c.Ne(a))return w.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),null;var e=a.v;return e.hc?(b=b||{},b.left=e.hc.left,
b.right=e.hc.right,b.camera_space=!1,b):null};a.y4=function(a,b){if(G.pb(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){w.error("target_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=
Math.max(b.dist_lim.max,0)}if(b.Av&&("number"!=typeof b.Av.min_y||"number"!=typeof b.Av.max_y||b.Av.min_y>b.Av.max_y))w.error("target_setup(): Wrong pivot limits object");else{c.Hw(a);a.v.yb=c.Ob;var E=b.pos||e.W(a.v.C),h=b.pivot;h||(h=m(a,l),h=x.add(E,h,h));c.nR(a,E,h,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.Av,b.use_panning||!1);g.V(a);q.Z(a);c.kr(a)}}else w.error("target_setup(): Wrong vertical limits object");else w.error("target_setup(): Wrong horizontal limits object");else w.error("target_setup(): Wrong camera object")};
a.lea=function(b,e,g,l){w.Jf("target_rotate","rotate_camera");c.Ic(b)?a.Dc(b,e,g,l||!1):w.error("target_rotate(): Wrong camera object or camera move style")};a.qea=function(a,b,l){c.Ic(a)?(b=b||e.W(a.v.C),l=l||a.v.pivot,c.XH(a,b,l),g.V(a),q.Z(a)):w.error("target_set_trans_pivot(): Wrong camera object or camera move style")};a.pea=function(a,b){c.Ic(a)?(c.E3(a,b),g.V(a),q.Z(a)):w.error("target_set_pivot_translation(): Wrong camera object or camera move style")};a.x4=function(a,b){if(c.Ic(a)){var e=
g.tv(a,a.v.pivot);g.yg(a,0,0,Math.max(0,b)-e);g.V(a);q.Z(a)}else w.error("target_set_distance(): Wrong camera object or camera move style")};a.tI=function(a){return c.Ic(a)?g.tv(a,a.v.pivot):(w.error("target_get_distance(): Wrong camera object or camera move style"),0)};a.tea=function(a,b){if(c.Ic(a)){var E=g.Dz(b,!1,l),h=g.LF(b),k=A.N(),k=G.La(a,k).na[0],k=c.c_(k)/2,h=h/Math.sin(k),k=g.tv(a,E);c.XH(a,e.W(a.v.C),E);g.V(a);g.yg(a,0,0,h-k);g.V(a);q.Z(a)}else w.error("target_zoom_object(): Wrong camera object or camera move style")};
a.v4=function(a,b){if(!c.Ic(a))return w.error("target_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);x.copy(a.v.pivot,b);return b};a.mea=function(a,b){if(c.Ic(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){w.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.JQ(a,b);g.V(a);q.Z(a)}else w.error("target_set_distance_limits(): Wrong camera object or camera move style")};a.iea=
function(a,b){if(!c.Ic(a))return w.error("target_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.v;return e.Kb?(b=b||{},b.min=e.Kb.min,b.max=e.Kb.max,b):null};a.rea=function(a,b){c.Ic(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.TB(a,b),g.V(a),q.Z(a)):w.error("target_set_vertical_limits(): Wrong limits object"):w.error("target_set_vertical_limits(): Wrong camera object or camera move style")};a.kea=function(a,b,e){if(!c.Ic(a))return w.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.v;return a.Ya?(b=b||{},e?(b.down=a.Ya.Sq,b.up=a.Ya.Cs):(b.down=a.Ya.down,b.up=a.Ya.up),b.camera_space=e||!1,b):null};a.nea=function(a,b){c.Ic(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.MB(a,b),g.V(a),q.Z(a)):w.error("target_set_horizontal_limits(): Wrong limits object"):w.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};a.u4=function(a,b){if(!c.Ic(a))return w.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;var e=a.v;return e.hc?(b=b||{},b.left=e.hc.left,b.right=e.hc.right,b.camera_space=!1,b):null};a.oea=function(a,b){c.Ic(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?w.error("target_set_pivot_limits(): Wrong limits object"):(c.cR(a,b),g.V(a),q.Z(a)):w.error("target_set_pivot_limits(): Wrong camera object or camera move style")};a.jea=function(a,b){if(!c.Ic(a))return w.error("target_get_pivot_limits(): Wrong camera object or camera move style"),null;var e=a.v;return e.he?
(b=b||{},b.min_z=e.he.min_z,b.max_z=e.he.max_z,b):null};a.w4=function(a,b,h){if(c.Ic(a)){var E=a.v;E.use_panning&&(l[0]=b,l[1]=-h,l[2]=0,e.Td(l,E.C,l),x.add(E.pivot,l,E.pivot),b=e.W(E.C),x.add(b,l,b),g.V(a),q.Z(a))}else w.error("target_pan_pivot(): wrong object")};a.sea=function(a,b){if(!c.Ic(a))return w.error("target_switch_panning(): Wrong camera object or camera move style"),null;a.v.use_panning=b};a.Mba=function(b,e){a.oO(b,{pos:e.pos,pivot:e.pivot});var l="undefined"==typeof e.dist_interval?
0:Math.max(e.dist_interval,0),h="undefined"==typeof e.angle_interval?0:Math.max(e.angle_interval,0),E="undefined"==typeof e.t?.5:y.ja(e.t,0,1),C=a.mO(b,k);C.min=Math.max(C.min-E*l,0);C.max+=(1-E)*l;l=a.nO(b,D);l.down=y.ja(l.down+E*h,-Math.PI/2,0);l.up=y.ja(l.up-(1-E)*h,-Math.PI/2,0);c.aA(b,C);c.bA(b,l);g.V(b);q.Z(b);c.kr(b)};a.oO=function(a,b){if(G.pb(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){w.error("hover_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<b.hover_angle_lim.up))w.error("hover_setup(): Wrong hover angle limits object");else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))w.error("hover_setup(): Wrong horizontal translation limits object");
else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))w.error("hover_setup(): Wrong vertical translation limits object");else{c.Hw(a);a.v.yb=c.dd;var l=b.pos||e.W(a.v.C);c.mR(a,l,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);g.V(a);q.Z(a);c.kr(a)}}else w.error("hover_setup(): Wrong camera object")};a.Iba=function(b,e,g,l){w.Jf("hover_rotate","rotate_camera");
c.ld(b)?a.Dc(b,e,g,l||!1):w.error("hover_rotate(): Wrong camera object or camera move style")};a.Kba=function(a,b){c.ld(a)?(c.YQ(a,b),g.V(a),q.Z(a)):w.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};a.Gba=function(a,b){if(!c.ld(a))return w.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);x.copy(a.v.Hc,b);return b};a.f0=function(a){return c.ld(a)?g.tv(a,a.v.Hc):(w.error("hover_get_distance(): Wrong camera object or camera move style"),
0)};a.bA=function(a,b){c.ld(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?w.error("hover_set_vertical_limits(): Wrong limits object"):(c.bA(a,b),g.V(a),q.Z(a)):w.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};a.nO=function(a,b){if(!c.ld(a))return w.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var e=a.v;b=b||{};b.down=e.Ya.down;b.up=e.Ya.up;return b};a.aA=function(a,b){c.ld(a)?"number"!=typeof b.min||"number"!=
typeof b.max||b.min>b.max?w.error("hover_set_distance_limits(): Wrong limits object"):(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.aA(a,b),g.V(a),q.Z(a)):w.error("hover_set_distance_limits(): Wrong camera object or camera move style")};a.mO=function(a,b){if(!c.ld(a))return w.error("hover_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.v;b=b||{};b.min=e.Kb.min;b.max=e.Kb.max;return b};a.Lba=function(a,b){c.ld(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||
b.min>b.max)?w.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.iR(a,b),g.V(a),q.Z(a)):w.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};a.Hba=function(a,b){if(!c.ld(a))return w.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),null;var e=a.v;return e.xd?(b=b||{},b.min=e.xd.min,b.max=e.xd.max,b):null};a.Jba=function(a,b){c.ld(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?w.error("hover_set_horiz_trans_limits(): Wrong limits object"):
(c.XQ(a,b),g.V(a),q.Z(a)):w.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};a.Fba=function(a,b){if(!c.ld(a))return w.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),null;var e=a.v;return e.wd?(b=b||{},b.min=e.wd.min,b.max=e.wd.max,b):null};a.Nba=function(a,b){if(!c.ld(a))return w.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.v.Qh=b};a.Yo=c.Yo;a.Ic=c.Ic;a.Ne=c.Ne;a.ld=c.ld;a.Ti=function(a){return G.pb(a)?
c.Ti(a):(w.error("get_move_style(): Wrong camera object"),null)};a.je=function(a,b){if(G.pb(a)){var h=a.v;if(c.Ic(a)){var k=e.W(h.C),k=x.subtract(b,k,l);x.add(k,h.pivot,h.pivot)}else c.ld(a)&&(k=e.W(h.C),k=x.subtract(b,k,l),x.add(k,h.Hc,h.Hc));g.je(a,b);g.V(a);q.Z(a)}else w.error("set_translation(): Wrong camera object")};a.Me=function(a,b){if(!G.pb(a))return w.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return g.Me(a,b)};a.Dc=function(a,b,e,l){G.pb(a)?(l?c.B3(a,
b,e):c.M2(a,b,e),g.V(a),q.Z(a)):w.error("rotate_camera(): Wrong camera object")};a.H3=function(a,b){if(G.pb(a)){var c=a.v;"number"==typeof b.trans&&(c.Ps=y.ja(b.trans,0,Infinity));"number"==typeof b.rot&&(c.Os=y.ja(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.Qs=y.ja(b.zoom,0,.99))}else w.error("set_velocities(): Wrong camera object")};a.Sj=function(a,b){if(!G.pb(a))return w.error("get_velocities(): Wrong camera object"),null;var c=a.v;b=b||{};b.trans=c.Ps;b.rot=c.Os;b.zoom=c.Qs;return b};a.dca=
function(a){if(!G.pb(a))return w.error("is_look_up(): Wrong camera object"),!1;a=e.ha(a.v.C);return 0<=y.Jc(a,y.mc,l)[1]};a.jl=function(a,b){if(!G.pb(a))return w.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.jl(a,b);return b};a.qz=function(a,b){if(!G.pb(a))return w.error("get_camera_angles_char(): Wrong camera object"),null;b=b||new Float32Array(2);c.qz(a,b);return b};a.j_=function(a,b){b=b||new Float32Array(2);var e=x.normalize(a,l),e=y.rQ(y.mc,e,K);y.KE(e,!0);
c.CF(e,b);return b};a.gR=function(a,b){if(G.pb(a))for(var e=A.N(),e=G.La(a,e).na,g=0;g<e.length;g++){var l=e[g];l.type!=c.Xc&&l.type!=c.ed&&l.type!=c.bg&&l.type!=c.Df||c.D3(l,b,l.Gg)}else w.error("set_stereo_distance(): Wrong camera object")};a.ON=function(a){if(!G.pb(a))return w.error("get_stereo_distance(): Wrong camera object"),0;var b=A.N();a=G.La(a,b).na;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Xc||e.type==c.ed)return e.qn}return 0};a.KB=function(a,b){if(G.pb(a)){var e=A.N(),e=G.La(a,
e).na;c.KB(e,b)}else w.error("set_eye_distance(): Wrong camera object")};a.uaa=function(a){if(!G.pb(a))return w.error("get_eye_distance(): Wrong camera object"),0;var b=A.N();a=G.La(a,b).na;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Xc||e.type==c.ed||e.type==c.bg||e.type==c.Df)return e.Gg}return 0};a.YH=function(a,b){G.pb(a)?(x.copy(b,a.v.Ve),g.V(a),q.Z(a)):w.error("set_vertical_axis(): Wrong camera object")};a.Q_=function(a,b){if(G.pb(a))return b||(b=x.create()),x.copy(a.v.Ve,b),b;w.error("get_vertical_axis(): Wrong camera object")};
a.zea=function(a,b,e,g){if(G.pb(a)){var h=A.N();a=G.La(a,h).na;for(h=0;h<a.length;h++){var C=a[h];C.Kc||c.Kl(C,!1);var r=l;r[0]=-b;r[1]=-e;r[2]=0;p.translate(C.Fb,r,C.Fb);p.rotateZ(C.Fb,g,C.Fb);c.eL(C);c.qE(C)}}else w.error("translate_view(): Wrong camera object")};a.lba=m;a.sN=function(a){if(!G.pb(a))return w.error("get_fov(): Wrong camera object"),0;var b=A.N();a=G.La(a,b).na;return c.sN(a[0])};a.QQ=function(a,b){if(G.pb(a))for(var e=A.N(),e=G.La(a,e).na,g=0;g<e.length;g++){var l=e[g];c.QQ(l,b);
l.Kc||c.Kl(l,!1);c.eL(l);c.qE(l)}else w.error("set_fov(): Wrong camera object")};a.PH=function(){w.va("set_hmd_fov() deprecated")};a.ny=function(a,b,e){G.pb(a)?(b=b||a.v.Ve,c.ny(a,b,e||!1),g.V(a),q.Z(a)):w.error("correct_up(): Wrong camera object")};a.zda=function(a,b){if(G.pb(a)&&c.mA(a)){var g=a.v;if(c.Ic(a)){var l=e.W(g.C),l=x.dist(l,g.pivot);g.Km=b/2*g.Jm/l}else c.ld(a)?(l=e.W(g.C),l=x.distance(l,g.Hc),g.Km=b/2*g.Jm/l):(g=A.N(),G.La(a,g).na[0].top=b/2);c.j5(a)}else w.error("set_ortho_scale(): Wrong camera object")};
a.Maa=function(a){if(!G.pb(a)||!c.mA(a))return w.error("get_ortho_scale(): Wrong camera object"),0;var b=A.N();return 2*G.La(a,b).na[0].top};a.mA=function(a){return G.pb(a)?c.mA(a):(w.error("is_ortho_camera(): Wrong camera object"),!1)};a.c9=function(a,k,p,m){if(!G.pb(a))return w.error("calc_ray(): Wrong camera object"),null;var z=A.N(),C=G.La(a,z).na[0];m&&3==m.length?w.va('dest parameter in the function "calc_ray" should be type of parametric line.'):m=m||new Float32Array(6);switch(C.type){case c.od:case c.cg:case c.Xc:case c.ed:var r=
Math.tan(c.R_(C)/2),f=r*C.Ab,z=l;k=b.Vt(k,p,L,C);z[0]=(2*k[0]/C.width-1)*f;z[1]=(1-2*k[1]/C.height)*r;z[2]=-1;e.Td(z,a.v.C,z);x.normalize(z,z);3==m.length?x.copy(z,m):(a=g.Me(a,I),h.dR(m,a),h.SH(m,z));return m;case c.Ze:return z=l,k=b.Vt(k,p,L,C),z[0]=(2*k[0]/C.width-1)*C.top*C.Ab,z[1]=(1-2*k[1]/C.height)*C.top,z[2]=0,e.Lc(z,a.v.C,z),x.copy(z,m),a=e.ha(a.v.C,v),x.transformQuat(y.mc,a,z),h.SH(m,z),m;default:return w.error("calc_ray(): Non-compatible camera"),m}};a.mH=function(a,b,e){if(!G.pb(a))return w.error("project_point(): Wrong camera object"),
null;e=e||new Float32Array(2);return c.mH(a,b,e)};a.sba=function(a){return(c.Ic(a)||c.ld(a))&&null!==a.v.Kb};a.yba=function(a){return(c.Ne(a)||c.Ic(a)||c.ld(a))&&null!==a.v.Ya};a.a0=function(a){return(c.Ic(a)||c.Ne(a))&&null!==a.v.hc};a.zba=function(a){return c.ld(a)&&null!==a.v.xd};a.tba=function(a){return c.ld(a)&&null!==a.v.wd};a.zaa=function(a,b){if(!G.pb(a))return w.error("get_frustum_planes(): Wrong camera object"),null;var c=A.N(),c=G.La(a,c).na[0].Qi;P.copy(c.left,b.left);P.copy(c.right,b.right);
P.copy(c.top,b.top);P.copy(c.bottom,b.bottom);P.copy(c.near,b.near);P.copy(c.far,b.far);return b};a.Kl=function(a,b){G.pb(a)?c.w3(a,b):w.error("set_projection(): Wrong camera object")}};b4w.module.__camera=function(a,u){function m(a,b,d,f,c){Na.je(a,b);d&&K(a,b,d);S(a,f);F(a,c)}function c(a,b,d,c,e,N,n,t){var g=a.v;Na.je(a,b);g.pivot.set(d);K(a,b,d);S(a,c);F(a,e);f(a,N);W(a,n);g.use_panning=t}function b(a,b,f,c,e,N,g,t){var l=a.v;Na.je(a,b);l.Hc.set(f);K(a,b,f);r(a,c);z(a,e);d(a,N);n(a,g);l.Qh=t}function p(a,b,d){var f=a.v,c=ta.W(f.C),e=ta.ha(f.C),f=La;f.set(Y.fc);f[3]=0;a=x(a,va)[1];e=Y.Jc(e,Y.mc,qa);pa.dR(Ca,c);pa.SH(Ca,e);if(!Y.X0(f,-b,Ca,d)||Math.abs(a)<Fa)xa.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),
d[0]=c[0],d[1]=c[1],d[2]=0;return d}function h(b){for(var d=b.v,f=0;f<b.P.length;f++){var c=b.P[f].na[0];if(c.type==a.Ze)switch(d.yb){case a.Ob:var e=ta.W(d.C);d.Jm=ia.dist(e,d.pivot);d.Km=c.Fc;break;case a.dd:e=ta.W(d.C),d.Jm=ia.dist(e,d.Hc),d.Km=c.Fc}}}function G(a){a={type:a,name:"",wR:1,width:0,height:0,Lf:null,Ju:null,tc:null,mg:null,Ab:0,Fc:0,Wq:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Od:ka.create(),C:new Float32Array(9),ec:new Float32Array(16),jD:new Float32Array(16),Fb:new Float32Array(16),
Wd:new Float32Array(16),iD:new Float32Array(16),lH:new Float32Array(16),ti:new Float32Array(16),direction:new Float32Array(3),Lg:ta.oo(),kD:ta.oo(),Lv:ta.oo(),xB:ta.oo(),$v:ta.oo(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,oe:!1,dof_on:!1,CA:new Float32Array(3),Qi:w(),qn:0,Gg:0,Kc:null,Jj:null,ru:null,Ay:new Float32Array(4),Sr:new Float32Array(4)};a.Od[0]=a.Od[2]=0;a.Od[1]=a.Od[3]=0;return a}function q(a,
b){var d=G(a.type);d.name=a.name;d.wR=a.wR;d.width=a.width;d.height=a.height;b||(d.Lf=a.Lf,d.Ju=a.Ju,d.tc=a.tc,d.mg=a.mg);d.Ab=a.Ab;d.Wq=a.Wq;d.Fc=a.Fc;d.near=a.near;d.far=a.far;d.left=a.left;d.right=a.right;d.top=a.top;d.bottom=a.bottom;ka.copy(a.Od,d.Od);ta.copy(a.C,d.C);oa.copy(a.ec,d.ec);oa.copy(a.Fb,d.Fb);oa.copy(a.Wd,d.Wd);oa.copy(a.iD,d.iD);oa.copy(a.lH,d.lH);oa.copy(a.ti,d.ti);ta.copy(a.Lg,d.Lg);ta.copy(a.kD,d.kD);ta.copy(a.Lv,d.Lv);ta.copy(a.xB,d.xB);ta.copy(a.$v,d.$v);d.dof_distance=a.dof_distance;
d.dof_front_start=a.dof_front_start;d.dof_front_end=a.dof_front_end;d.dof_rear_start=a.dof_rear_start;d.dof_rear_end=a.dof_rear_end;d.dof_power=a.dof_power;d.dof_bokeh_intensity=a.dof_bokeh_intensity;d.dof_object=a.dof_object;d.dof_bokeh=a.dof_bokeh;d.oe=a.oe;d.dof_on=a.dof_on;ia.copy(a.CA,d.CA);A(a.Qi,d.Qi);d.qn=a.qn;d.Gg=a.Gg;a.Kc&&(d.Kc=ka.clone(a.Kc));if(a.Jj){var f=a.Jj.length;d.Jj=Array(f);for(var c=0;c<f;c++)d.Jj[c]=ia.clone(a.Jj[c]);d.ru=new Float32Array(a.ru)}ka.copy(a.Ay,d.Ay);ka.copy(a.Sr,
d.Sr);return d}function w(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function A(a,b){ka.copy(a.left,b.left);ka.copy(a.right,b.right);ka.copy(a.top,b.top);ka.copy(a.bottom,b.bottom);ka.copy(a.near,b.near);ka.copy(a.far,b.far)}function g(b){switch(b){case "STATIC":return a.Ie;case "TARGET":return a.Ob;case "EYE":return a.Vc;case "HOVER":return a.dd;
default:Y.J("Unknown move style")}}function e(b){var d=G(b);if(b==a.Wc)return d;switch(b){case a.od:L(d,Ba,.1,1E3);break;case a.Ze:L(d,2.5,.1,1E3);break;case a.cg:break;case a.Di:break;case a.Ck:break;case a.Xc:case a.ed:case a.bg:case a.Df:Y.J("Stereo camera may only be created from perspective one");break;default:Y.J("Unknown camera type")}return d}function y(b,d,f){b.type!=a.Xc&&b.type!=a.ed&&b.type!=a.bg&&b.type!=a.Df&&Y.J("set_stereo_params(): wrong camera type");if(b.type==a.Xc||b.type==a.ed)b.qn=
d;b.Gg=f;Z(b,!1);if(O.Ua()&&(d=O.N(),b=d.I.Cd))for(d=Q.La(O.Fm(d),d).na,f=0;f<d.length;f++)ba(d[f],b)}function x(a,b){var d=ta.ha(a.v.C);return P(d,b)}function P(a,b){var d=Y.Jc(a,Y.fc,qa),f=Y.Jc(a,Y.Bh,Qa),c=-Math.asin(d[2]/ia.length(d)),d=Math.abs(c)>Math.PI/4?ia.scale(f,-Y.sign(c),Va):ia.scale(d,-Y.sign(f[2]),Va),e=Math.atan(Math.abs(d[0]/d[1]));0<f[2]&&(c=Y.sign(c)*Math.PI-c);f=e;0<d[1]&&(f=Math.PI-f);0>d[0]&&(f=2*Math.PI-f);b[0]=f;b[1]=c;return b}function J(a){switch(a.Wq){case "AUTO":return 1<
a.Ab?ma(a)?a.Fc/a.Ab:2*Math.atan(Math.tan(a.Fc/2)/a.Ab):a.Fc;case "HORIZONTAL":return ma(a)?a.Fc/a.Ab:2*Math.atan(Math.tan(a.Fc/2)/a.Ab);case "VERTICAL":return a.Fc}}function L(b,d,f,c){switch(b.type){case a.od:case a.Xc:case a.ed:b.Fc=d;b.Ab=1;break;case a.Ze:b.Fc=d;b.Ab=1;break;case a.bg:case a.Df:break;default:Y.J("set_frustum(): Unsupported camera type: "+b.type)}b.near=f;b.far=c}function l(b,d){var f=ta.Yb(d.v.C,qa),c=ta.Db(d.v.C,Ua),e=oa.fromRotationTranslation(c,f,Sa);oa.invert(e,b.ec);if(O.Ua())var e=
O.N(),N=O.Xb(e,Oa.Eh);if(b.type==a.Xc||N&&N.enable_hmd_stereo&&b.type==a.bg)b.ec[12]+=b.Gg/2;else if(b.type==a.ed||N&&N.enable_hmd_stereo&&b.type==a.Df)b.ec[12]-=b.Gg/2;if(b.Kc){ta.Wh(b.ec,b.Lv);ta.invert(b.Lv,b.xB);var e=b.Kc[0],N=b.Kc[1],n=b.Kc[2],g=b.Kc[3],t=b.jD;t[0]=1-2*e*e;t[1]=-2*e*N;t[2]=-2*e*n;t[3]=0;t[4]=-2*e*N;t[5]=1-2*N*N;t[6]=-2*N*n;t[7]=0;t[8]=-2*e*n;t[9]=-2*N*n;t[10]=1-2*n*n;t[11]=0;t[12]=-2*e*g;t[13]=-2*N*g;t[14]=-2*n*g;t[15]=1;oa.multiply(b.ec,b.jD,b.ec);Z(b,!0);e=La;N=Sa;oa.invert(b.ec,
N);oa.transpose(N,N);ka.transformMat4(b.Kc,N,e);N=Ha;N[0]=(Y.sign(e[0])+b.Fb[8])/b.Fb[0];N[1]=(Y.sign(e[1])+b.Fb[9])/b.Fb[5];N[2]=-1;N[3]=(1+b.Fb[10])/b.Fb[14];ka.scale(e,2/(e[0]*N[0]+e[1]*N[1]+e[2]*N[2]+e[3]*N[3]),e);b.Fb[2]=e[0];b.Fb[6]=e[1];b.Fb[10]=e[2]+1;b.Fb[14]=e[3];ia.transformMat4(f,b.jD,f)}ta.Wh(b.ec,b.Lg);ta.invert(b.Lg,b.kD);Aa(b);ea(b);ta.si(f,1,c,b.C)}function I(b,d,f,c){oa.lookAt(d,f,c,b.ec);f=O.N();f=O.Xb(f,Oa.Eh);if(b.type==a.Xc||f&&f.enable_hmd_stereo&&b.type==a.bg)b.ec[12]+=b.Gg/
2;else if(b.type==a.ed||f&&f.enable_hmd_stereo&&b.type==a.Df)b.ec[12]-=b.Gg/2;ta.Wh(b.ec,b.Lg);Aa(b);ea(b);ta.Bd(d,b.C)}function v(a,b,d){d=ia.subtract(d,b,qa);ia.length(d)&&(ia.normalize(d,d),d=Y.rQ(Y.mc,d,Ua),Na.Ll(a,d));Na.je(a,b)}function K(a,b,d){var f=a.v,c=E(a);v(a,b,d);c?(b=ia.copy(f.Ve,qa),ia.negate(b,b),D(a,b,!0)):D(a,f.Ve,!0)}function k(a,b){for(var d=a.v,f=b.na,c=ta.Db(d.C,Ua),c=Y.Jc(c,Y.mc,qa),e=ta.Yb(d.C,Qa),N=b.rR,n=0;n<N.length;n++){var t=N[n];ia.copy(c,t.direction);ta.Yb(d.C,t.CA)}for(n=
0;n<f.length;n++)t=f[n],l(t,a),ia.copy(c,t.direction),Y.zo(t.Wd,t.Qi),t.dof_object&&t.dof_on&&(d=Na.Me(t.dof_object,Va),d=ia.dist(e,d),t.dof_distance=d)}function D(b,d,f){var c=b.v,e=ta.ha(c.C),N=Y.Jc(e,Y.fc,qa);ia.normalize(N,N);if(.999999<Math.abs(ia.dot(d,N)))N=na.identity(Ua);else{var n=ia.cross(d,N,Qa);ia.normalize(n,n);c.yb==a.Ob?c.pk&&ia.negate(n,n):(c=Y.Jc(e,Y.Bh,Va),0<ia.dot(c,d)&&ia.negate(n,n));c=Y.Jc(e,Y.Bf,Va);ia.normalize(c,c);var t=Y.ja(ia.dot(c,n),-1,1),N=-.999999>=t?na.setAxisAngle(N,
Math.acos(t),Ua):na.rotationTo(c,n,Ua);na.normalize(N,N)}na.multiply(N,e,e);f&&(f=Y.Jc(e,Y.Fe,qa),0>ia.dot(d,f)&&na.rotateZ(e,Math.PI,e));M(b)}function M(b){var d=b.v;d.yb==a.Ob&&(d.pk=E(b))}function E(a){a=ta.ha(a.v.C);return 0>Y.Jc(a,Y.Fe,qa)[2]}function S(b,d){var f=b.v;if(d){f.hc=f.hc||{};f.hc.left=d.left;f.hc.right=d.right;f.hc.wA=d.left;f.hc.zB=d.right;f.hc.camera_space=!!d.camera_space;var c=b.v;!(f=c.hc)||c.yb!=a.Vc&&c.yb!=a.Ob||(c=x(b,va),f.camera_space?(f.left+=c[0],f.right+=c[0]):(f.wA-=
c[0],f.zB-=c[0]),f.left=Y.Ih(f.left),f.right=Y.Ih(f.right),f.wA=Y.Ih(f.wA),f.zB=Y.Ih(f.zB))}else f.hc=null}function F(a,b){var d=a.v;b?(d.Ya=d.Ya||{},d.Ya.down=b.down,d.Ya.up=b.up,d.Ya.Sq=b.down,d.Ya.Cs=b.up,d.Ya.camera_space=!!b.camera_space,C(a)):d.Ya=null}function z(a,b){var d=a.v;if(!b){var f=x(a,va);b={down:f[1],up:f[1]}}d.Ya=d.Ya||{};d.Ya.down=b.down;d.Ya.up=b.up;C(a);d.Kb&&d.Ya&&B(a)}function C(b){var d=b.v,f=d.Ya;if(f)switch(d.yb){case a.Vc:case a.Ob:b=x(b,va);f.camera_space?(f.up+=b[1],f.down+=
b[1]):(f.Cs-=b[1],f.Sq-=b[1]);f.up=Y.Ei(f.up,-Math.PI,Math.PI);f.down=Y.Ei(f.down,-Math.PI,Math.PI);f.Cs=Y.Ei(f.Cs,-Math.PI,Math.PI);f.Sq=Y.Ei(f.Sq,-Math.PI,Math.PI);break;case a.dd:f.up=Y.Ei(f.up,-Math.PI,Math.PI),f.down=Y.Ei(f.down,-Math.PI,Math.PI),f.up=Y.ja(f.up,-Math.PI/2,0),f.down=Y.ja(f.down,-Math.PI/2,0)}}function r(a,b){var d=a.v;if(!b){var f=Na.tv(a,d.Hc);b={min:f,max:f}}d.Kb=d.Kb||{};d.Kb.min=b.min;d.Kb.max=b.max;d.Kb&&d.Ya&&B(a)}function f(a,b){var d=a.v;b?(d.Kb=d.Kb||{},d.Kb.min=b.min,
d.Kb.max=b.max):d.Kb=null}function W(a,b){var d=a.v;b?(d.he=d.he||{},d.he.min_z=b.min_z,d.he.max_z=b.max_z):d.he=null}function d(a,b){var d=a.v;b?(d.wd=d.wd||{},d.wd.min=b.min,d.wd.max=b.max):d.wd=null}function n(a,b){var d=a.v;b?(d.xd=d.xd||{},d.xd.min=b.min,d.xd.max=b.max):d.xd=null}function X(b){var d=b.v;if(Q.pb(b))for(var f=b.P,c=0;c<f.length;c++){var e=f[c].na;if(e[0].type===a.Ze){switch(d.yb){case a.Ob:var N=ta.W(d.C),N=ia.dist(N,d.pivot),N=N/d.Jm*d.Km;break;case a.dd:N=ta.W(d.C);N=ia.distance(N,
d.Hc);N=N/d.Jm*d.Km;break;default:N=e[0].Fc}for(var n=0;n<e.length;n++){var t=e[n];t.Fc=N;Z(t,!1)}k(b,f[c])}}}function R(b){var d=b.v,f=d.yb;if(f===a.Ob||f===a.Vc){if(d.hc){var c=d.hc.left,e=d.hc.right,N=x(b,va);(N=f==a.Ob?Y.ho(N[0],c,e):Y.ho(N[0],e,c))&&(f==a.Ob?fa(b,N,0):H(b,N,0))}d.Ya&&(c=d.Ya.down,e=d.Ya.up,N=x(b,va),(N=f==a.Ob?Y.ho(N[1],e,c):Y.ho(N[1],c,e))&&(f==a.Ob?fa(b,0,N):H(b,0,N)));if(f===a.Ob&&d.Kb){var N=b.v,c=ta.W(N.C),e=ia.subtract(c,N.pivot,qa),n=ia.length(e);n>N.Kb.max?(ia.scale(e,
N.Kb.max/n,e),ia.add(N.pivot,e,c)):n<N.Kb.min&&(n=ta.ha(N.C),n=Y.Jc(n,Y.mc,Qa),ia.scale(n,100*N.Kb.min,n),ia.add(e,n,e),ia.scale(e,-N.Kb.min/ia.length(e),e),ia.add(N.pivot,e,c))}}f===a.Ob&&d.he&&(d=b.v,N=d.pivot[2],c=Y.ja(d.pivot[2],d.he.min_z,d.he.max_z),c!=N&&(N=ia.set(0,0,c-N,qa),ia.add(d.pivot,N,d.pivot),d=ta.W(d.C),ia.add(d,N,d)));f===a.dd&&(f=b.v,f.wd&&(N=Y.ja(f.Hc[0],f.wd.min,f.wd.max)-f.Hc[0],f.Hc[0]+=N,d=ta.W(f.C),d[0]+=N),f.xd&&(N=Y.ja(f.Hc[1],f.xd.min,f.xd.max)-f.Hc[1],f.Hc[1]+=N,d=ta.W(f.C),
d[1]+=N),f=b.v,d=x(b,va)[1],(f=Y.ho(d,f.Ya.up,f.Ya.down))&&ha(b,0,f))}function t(a,b,d,f){a=x(a,Ga);f[0]=b-a[0];f[1]=d-a[1];return f}function fa(a,b,d){var f=a.v;ga(a,a.v.pivot,b,d);a=x(a,N);a=Y.Ei(a[1],-Math.PI,Math.PI);f.pk=Math.abs(a)>Math.PI/2}function la(a,b,d){b=t(a,b,d,N);fa(a,b[0],b[1])}function H(a,b,d){var f=a.v;if(b||d)a=na.identity(Ua),b&&(b=na.setAxisAngle(f.Ve,b,ya),na.multiply(a,b,a)),b=ta.ha(f.C),d&&(f=Y.Jc(b,Y.Bf,qa),d=na.setAxisAngle(f,d,ya),na.normalize(d,d),na.multiply(a,d,a)),
na.multiply(a,b,b),na.normalize(b,b)}function za(a,b,d){var f=ta.Db(a.v.C,Ua),f=P(f,va);H(a,b-f[0],d-f[1])}function ha(a,b,d){var f=a.v;f.Qh||(b=0);ga(a,f.Hc,b,d);d&&B(a)}function ua(a,b,d){b=t(a,b,d,N);ha(a,b[0],b[1])}function ga(a,b,d,f){var c=a.v;if(d||f){a=na.identity(Ua);d&&(d=na.setAxisAngle(Y.fc,d,ya),na.multiply(a,d,a));d=ta.ha(c.C);if(f){var N=Y.Jc(d,Y.Bf,qa);f=na.setAxisAngle(N,f,ya);na.normalize(f,f);na.multiply(a,f,a)}f=ta.W(c.C);Y.N2(f,b,a,f);na.multiply(a,d,d);na.normalize(d,d)}}function B(a){var b=
a.v,d=x(a,va)[1],f=a.v;a=f.Ya;f=f.Kb;a.down-a.up?(d=(a.down-d)/(a.down-a.up),d=Math.max(d,0)):d=0;d=d*(f.max-f.min)+f.min;a=ta.W(b.C);f=ta.ha(b.C);f=Y.Jc(f,Y.mc,qa);ia.normalize(f,f);ia.scale(f,d,f);ia.subtract(b.Hc,f,a)}function Z(b,d){switch(b.type){case a.od:case a.cg:oa.perspective(J(b),b.Ab,b.near,b.far,b.Fb);break;case a.Ze:case a.Di:var f=J(b),c=f*b.Ab;oa.ortho(-c,c,-f,f,b.near,b.far,b.Fb);break;case a.Ck:oa.ortho(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Fb);break;case a.Xc:case a.ed:var c=
Math.tan(J(b)/2),f=b.near*c,N=b.Ab*b.qn*c;b.type==a.Xc?(c=N-b.Gg/2,N+=b.Gg/2):(c=N+b.Gg/2,N-=b.Gg/2);c=-(b.near/b.qn*c);N*=b.near/b.qn;oa.frustum(c,N,-f,f,b.near,b.far,b.Fb);b.left=c;b.right=N;break;case a.bg:case a.Df:O.Ua()&&(f=O.N(),(f=O.Xb(f,Oa.Eh))&&f.enable_hmd_stereo?(f=Math.tan(b.Od[1]),c=Math.tan(b.Od[2]),N=Math.tan(b.Od[3]),b.top=b.near*Math.tan(b.Od[0]),b.right=b.near*f,b.bottom=-b.near*c,b.left=-b.near*N,oa.frustum(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Fb)):(b.top=b.near*Math.tan(J(b)/
2),b.bottom=-b.top,b.right=b.top*b.Ab,b.left=-b.right,oa.perspective(J(b),b.Ab,b.near,b.far,b.Fb)));break;case a.Wc:return;default:Y.J("Wrong camera type: "+b.type)}d||(Aa(b),ea(b))}function ea(a){oa.copy(a.ec,a.ti);a.ti[12]=0;a.ti[13]=0;a.ti[14]=0;a.ti[15]=1;oa.multiply(a.Fb,a.ti,a.ti);oa.invert(a.ti,a.ti)}function Aa(a){oa.copy(a.ec,a.Wd);oa.multiply(a.Fb,a.Wd,a.Wd);oa.invert(a.Wd,a.iD)}function da(b,d,f,c,N){c||(c=new Float32Array(24));d||(d=b.near);f||(f=b.far);var e,n,t,g,l,r,h,k;switch(b.type){case a.Wc:Y.J("Extraction from NONE camera is not possible");
break;case a.od:case a.cg:e=d*Math.tan(J(b)/2);g=-e;n=e*b.Ab;t=-n;l=f/d*e;k=-l;r=l*b.Ab;h=-r;break;case a.Ze:case a.Di:g=J(b);t=g*b.Ab;e=l=g;n=r=t;g=k=-g;t=h=-t;break;case a.Ck:e=l=b.top;n=r=b.right;g=k=b.bottom;t=h=b.left;break;case a.Xc:case a.ed:l=d/b.near;e=d*Math.tan(J(b)/2);g=-e;n=b.right*l;t=b.left*l;h=f/d;l=e*h;k=-l;r=n*h;h*=t;break;case a.bg:case a.Df:l=d/b.near;e=b.top*l;g=b.bottom*l;n=b.right*l;t=b.left*l;h=f/d;l=e*h;k=g*h;r=n*h;h*=t;break;default:Y.J("Wrong camera type: "+b.type)}c[0]=
t;c[1]=g;c[2]=-d;c[3]=n;c[4]=g;c[5]=-d;c[6]=n;c[7]=e;c[8]=-d;c[9]=t;c[10]=e;c[11]=-d;c[12]=h;c[13]=k;c[14]=-f;c[15]=h;c[16]=l;c[17]=-f;c[18]=r;c[19]=l;c[20]=-f;c[21]=r;c[22]=k;c[23]=-f;N&&(d=Sa,oa.invert(b.ec,d),Y.Ur(c,d,c,0));return c}function ba(a,b){if(b.enable_csm){var d=b.csm_num;if(!a.Jj){var f=b.csm_num;a.Jj=Array(f);for(var c=0;c<f;c++)a.Jj[c]=new Float32Array(3);a.ru=new Float32Array(f)}for(f=0;f<d;f++){var c=f?wa(b,a,f-1):a.near,N=wa(b,a,f),c=da(a,c,N,Ia),c=ja.z_(c);a.Jj[f].set(c.T);a.ru[f]=
c.ub;a.Ay[f]=ia.length(c.T);a.Sr[f]=T(b.first_cascade_blur_radius,b.last_cascade_blur_radius,d,f)}}else a.Sr[0]=b.first_cascade_blur_radius}function wa(a,b,d){var f=a.csm_num,c=Y.ja(a.csm_first_cascade_border,b.near,b.far);a=Y.ja(a.csm_last_cascade_border,b.near,b.far);return Y.ja(T(c,a,f,d),b.near,b.far)}function T(a,b,d,f){switch(f){case 0:break;case d-1:a=b;break;default:a=0==a?0:a*Math.pow(b/a,f/(d-1))}return a}function ma(b){switch(b.type){case a.Ze:case a.Di:case a.Ck:return!0;default:return!1}}
function aa(a,b){b||(b=new Float32Array(3));var d=ta.W(a.v.C);ia.copy(d,b);return b}var ja=u("__boundings"),ca=u("__container"),oa=u("__mat4"),pa=u("__math"),Q=u("__obj_util"),xa=u("__print"),na=u("__quat"),O=u("__scenes"),Oa=u("__subscene"),Na=u("__transform"),ta=u("__tsr"),Y=u("__util"),ia=u("__vec3"),ka=u("__vec4");a.Wc=10;a.od=20;a.Ze=30;a.cg=40;a.Di=50;a.Ck=60;a.Xc=70;a.ed=80;a.bg=90;a.Df=100;a.Ie=0;a.Ob=2;a.Vc=3;a.dd=4;var Ba=Y.cf(40),Fa=Y.cf(.5),Ka=new Float32Array([1,1,1,1]),V=new Float32Array([-1,
-1,1,1]),Ya=new Float32Array([0,0,-1,1]),va=new Float32Array(2),N=new Float32Array(2),Ga=new Float32Array(2),qa=new Float32Array(3),Qa=new Float32Array(3),Va=new Float32Array(3),Ua=new Float32Array(4),ya=new Float32Array(4),La=new Float32Array(4),Ha=new Float32Array(4),Sa=new Float32Array(16),Ia=new Float32Array(24),Ma=w(),Ca=new Float32Array(6);a.MW=function(d,f){var N=f.v,n=d.data;switch(n.type){case "PERSP":var t=e(a.od);t.Wq=n.sensor_fit;L(t,n.angle,n.clip_start,n.clip_end);break;case "ORTHO":t=
e(a.Ze),t.Wq=n.sensor_fit,L(t,n.ortho_scale/2,n.clip_start,n.clip_end)}t.name=f.name;var l=f.P;l[0].na.push(t);for(var r=1;r<l.length;r++){var k=q(t,!1);l[r].na.push(k)}N.yb=g(n.b4w_move_style);N.dof_distance=n.dof_distance;t=n.dof_object;N.dof_object=t?t.Oa:null;N.dof_front_start=n.b4w_dof_front_start;N.dof_front_end=n.b4w_dof_front_end;N.dof_rear_start=n.b4w_dof_rear_start;N.dof_rear_end=n.b4w_dof_rear_end;N.dof_power=n.b4w_dof_power;N.dof_bokeh=n.b4w_dof_bokeh;N.dof_bokeh_intensity=n.b4w_dof_bokeh_intensity;
N.oe=n.b4w_dof_foreground_blur;N.Ps=n.b4w_trans_velocity;N.Os=n.b4w_rot_velocity;N.Qs=n.b4w_zoom_velocity;t=f.v.yb;l=d.data;r=null;t!=a.Ob&&t!=a.Vc||!l.b4w_use_horizontal_clamping||(r={left:l.b4w_rotation_left_limit,right:l.b4w_rotation_right_limit,camera_space:"LOCAL"==l.b4w_horizontal_clamping_type},t==a.Vc&&(r.left*=-1,r.right*=-1));t=r;l=f.v.yb;r=d.data;k=null;l!=a.Ob&&l!=a.Vc||!r.b4w_use_vertical_clamping?l==a.dd&&r.b4w_use_zooming&&(r.b4w_hover_angle_min<=r.b4w_hover_angle_max?(k={down:r.b4w_hover_angle_min,
up:r.b4w_hover_angle_max},k.down*=-1,k.up*=-1):xa.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):(k={down:r.b4w_rotation_down_limit,up:r.b4w_rotation_up_limit,camera_space:"LOCAL"==r.b4w_vertical_clamping_type},l==a.Ob&&(k.down*=-1,k.up*=-1));var l=k,r=f.v.yb,k=d.data,C=null;r==a.Ob&&k.b4w_use_target_distance_limits&&k.b4w_distance_min<=k.b4w_distance_max?C={min:k.b4w_distance_min,max:k.b4w_distance_max}:r===a.dd&&k.b4w_use_zooming&&(k.b4w_distance_min<=k.b4w_distance_max?
C={min:k.b4w_distance_min,max:k.b4w_distance_max}:xa.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));r=C;k=d.data;C=null;f.v.yb==a.dd&&k.b4w_use_horizontal_clamping&&k.b4w_horizontal_translation_min<=k.b4w_horizontal_translation_max&&(C={min:k.b4w_horizontal_translation_min,max:k.b4w_horizontal_translation_max});var k=C,C=d.data,B=null;f.v.yb==a.dd&&C.b4w_use_vertical_clamping&&C.b4w_vertical_translation_min<=C.b4w_vertical_translation_max&&(B={min:C.b4w_vertical_translation_min,
max:C.b4w_vertical_translation_max});var C=B,B=d.data,V=null;f.v.yb==a.Ob&&B.b4w_use_pivot_limits&&(V={min_z:B.b4w_pivot_z_min,max_z:B.b4w_pivot_z_max});B=V;switch(N.yb){case a.Vc:N=ta.W(f.v.C);m(f,N,null,t,l);break;case a.Ob:N=ta.W(f.v.C);c(f,N,n.b4w_target,t,l,r,B,n.b4w_use_panning);break;case a.dd:N=ta.W(f.v.C),t=p(f,d.data.b4w_hover_zero_level,Qa),b(f,N,t,r,l,k,C,n.b4w_enable_hover_hor_rotation)}R(f);h(f)};a.M3=m;a.nR=c;a.mR=b;a.kr=h;a.fd=q;a.MX=w;a.uca=g;a.Ld=e;a.e9=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.tc;
case "DEPTH":return!!a.mg;case "SCREEN":return!a.tc&&!a.mg;default:Y.J("Wrong attachment type: "+b)}};a.HB=function(a,b,d){switch(b){case "COLOR":case "CUBEMAP":a.tc=d;break;case "DEPTH":a.mg=d;break;case "SCREEN":a.tc=null;a.mg=null;break;default:Y.J("Wrong attachment type: "+b)}};a.haa=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.tc;case "DEPTH":return a.mg;case "SCREEN":return null;default:Y.J("Wrong attachment type: "+b)}};a.HA=function(b,d){(b.type!=a.od||d!=a.Xc&&d!=a.ed&&d!=
a.bg&&d!=a.Df)&&Y.J("make_stereo(): wrong camera type");b.type=d;y(b,6,.065)};a.D3=y;a.jl=x;a.CF=P;a.qz=function(a,b){x(a,b);b[0]=Y.Ih(b[0]+Math.PI);b[1]*=-1;return b};a.QQ=function(b,d){switch(b.type){case a.od:case a.cg:case a.Xc:case a.ed:b.Fc=d}};a.sN=function(b){switch(b.type){case a.od:case a.cg:case a.Xc:case a.ed:return b.Fc;default:return 0}};a.R_=J;a.RQ=L;a.SQ=function(b,d,f,c,N){switch(b.type){case a.od:case a.Xc:case a.ed:case a.Ze:b.Fc=f;b.Ab=1;break;case a.cg:case a.Di:b.Fc=f;b.Ab=d/
f;break;case a.bg:case a.Df:break;default:Y.J("set_frustum2(): Unsupported camera type: "+b.type)}b.near=c;b.far=N};a.o3=function(b,d,f,c,N,e,n){switch(b.type){case a.Ck:b.left=d;b.right=f;b.bottom=c;b.top=N;b.near=e;b.far=n;break;default:Y.J("set_frustum_asymmetric(): Unsupported camera type: "+b.type)}};a.Ti=function(a){return a.v.yb};a.J3=l;a.Pda=I;a.ZH=function(a,b,d){var f=qa;f[0]=0;f[1]=0;f[2]=-1;ia.transformQuat(f,d,f);f[0]+=b[0];f[1]+=b[1];f[2]+=b[2];var c=Qa;c[0]=0;c[1]=1;c[2]=0;ia.transformQuat(c,
d,c);I(a,b,f,c)};a.ZQ=v;a.qda=K;a.V4=k;a.U4=function(b){var d=b.v;R(b);X(b);switch(d.yb){case a.Ob:var f=ta.W(d.C),c=ta.ha(d.C);Y.uB(f,c,d.pivot,Y.mc);for(c=0;c<b.P.length;c++)for(var N=b.P[c].na,e=0;e<N.length;e++){var n=N[e];n.type!=a.Xc&&n.type!=a.ed||y(n,ia.dist(f,d.pivot),n.Gg)}D(b,d.Ve);break;case a.Vc:b.zc||D(b,d.Ve)}M(b)};a.ny=D;a.kS=M;a.MB=S;a.TB=F;a.bA=z;a.aA=r;a.JQ=f;a.cR=W;a.XQ=d;a.iR=n;a.j5=X;a.Zca=fa;a.Gda=la;a.Wca=function(a,b,d){H(a,b,d)};a.Dda=function(a,b,d){za(a,b,d)};a.Yca=H;a.Fda=
za;a.Xca=ha;a.C3=ua;a.M2=function(b,d,f){var c=b.v.yb;c===a.Ob?fa(b,d,f):c===a.Vc?H(b,d,f):c===a.dd?ha(b,d,f):c===a.Ie&&H(b,d,f)};a.B3=function(b,d,f){var c=b.v.yb;c===a.Ob?la(b,d,f):c===a.Vc?za(b,d,f):c===a.dd?ua(b,d,f):c===a.Ie&&za(b,d,f)};a.aca=function(b){switch(b.type){case a.od:case a.Ze:case a.Xc:case a.ed:return!0;default:return!1}};a.c_=function(b){switch(b.type){case a.od:case a.cg:case a.Xc:case a.ed:var d;a:{switch(b.Wq){case "AUTO":d=1<b.Ab?b.Fc:ma(b)?b.Fc*b.Ab:2*Math.atan(Math.tan(b.Fc/
2)*b.Ab);break a;case "HORIZONTAL":d=b.Fc;break a;case "VERTICAL":d=ma(b)?b.Fc*b.Ab:2*Math.atan(Math.tan(b.Fc/2)*b.Ab);break a}d=void 0}return Math.min(J(b),d);default:return xa.error("get_angular_diameter(): Unsupported camera type: "+b.type),0}};a.Z2=function(b,d){switch(b.type){case a.cg:case a.Di:xa.error("set_aspect(): Unsupported camera type: "+b.type);break;default:b.Ab=d}};a.gaa=function(a){return a.Ab};a.Kl=Z;a.c3=function(b,d,f,c,N){var e=1/Math.max(N,c);switch(b.type){case a.Wc:case a.od:case a.cg:N/=
2;c/=2;f=-(f-N)/N*Math.tan(J(b)/2);d=(d-c)/c*Math.tan(J(b)/2)*b.Ab;c=b.near*(f+e);N=b.near*(d+e);f=b.near*(f-e);d=b.near*(d-e);oa.frustum(d,N,f,c,b.near,b.far,b.Fb);break;case a.Ze:case a.Di:f=-f/N;d/=c;c=J(b);N=c*b.Ab;oa.ortho(-N+(d-e)*(N+N),-N+(d+e)*(N+N),c+(f-e)*(c+c),c+(f+e)*(c+c),b.near,b.far,b.Fb);break;case a.Ck:f=-f/N,d/=c,c=b.top+(f+e)*(b.top-b.bottom),N=b.left+(d+e)*(b.right-b.left),f=b.top+(f-e)*(b.top-b.bottom),d=b.left+(d-e)*(b.right-b.left),oa.ortho(d,N,f,c,b.near,b.far,b.Fb)}oa.copy(b.ec,
b.Wd);oa.multiply(b.Fb,b.Wd,b.Wd);Y.zo(b.Wd,b.Qi)};a.qE=ea;a.eL=Aa;a.tZ=da;a.dW=function(a){a=a.v;var b=ja.Gf();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.Aa=b;var d=ja.aL(1,Y.Rh([0,0,0]));a.yc=d;a.Jt=ja.OK(1,b);a.Lt=ja.QK(1,b);a.Kt=ja.PK(1,b)};a.Yo=function(b){return Q.pb(b)&&b.v&&b.v.yb==a.Ie};a.Ic=function(b){return Q.pb(b)&&b.v&&b.v.yb==a.Ob};a.Ne=function(b){return Q.pb(b)&&b.v&&b.v.yb==a.Vc};a.ld=function(b){return Q.pb(b)&&b.v&&b.v.yb==a.dd};a.mA=function(b){return Q.pb(b)&&
b.v&&b.P[0].na[0].type==a.Ze};a.NI=ba;a.GY=wa;a.mH=function(b,d,f){b=b.P[0].na[0];switch(b.type){case a.od:case a.cg:case a.Ze:case a.Di:case a.Xc:case a.ed:case a.bg:case a.Df:case a.Wc:var c=La;c.set(d);c[3]=1;ka.transformMat4(c,b.Wd,c);d=-c[1]/c[3];f[0]=(c[0]/c[3]+1)/2*b.width;f[1]=(d+1)/2*b.height;ca.J5(f[0],f[1],f,b);2<f.length&&(f[2]=(c[2]/Math.abs(c[3])+1)/2);return f;default:return xa.error("Non-compatible camera"),f}};a.t_=function(a){return a.P[0].na[0]};a.sz=function(b,d){switch(b.type){case a.od:case a.cg:case a.Xc:case a.ed:var f=
Math.tan(J(b)/2);switch(d){case "LEFT":return-f*b.Ab;case "RIGHT":return f*b.Ab;case "TOP":return f;case "BOTTOM":return-f}break;case a.Ze:case a.Di:switch(d){case "LEFT":return-J(b)*b.Ab;case "RIGHT":return J(b)*b.Ab;case "TOP":return J(b);case "BOTTOM":return-J(b)}break;case a.Ck:switch(d){case "LEFT":return b.left;case "RIGHT":return b.right;case "TOP":return b.top;case "BOTTOM":return b.bottom}break;case a.bg:case a.Df:f=O.N();if((f=O.Xb(f,Oa.Eh))&&f.enable_hmd_stereo)switch(d){case "LEFT":return-Math.tan(Math.min(b.Od[1],
b.Od[3]));case "RIGHT":return Math.tan(Math.min(b.Od[1],b.Od[3]));case "TOP":return Math.tan(Math.min(b.Od[0],b.Od[2]));case "BOTTOM":return-Math.tan(Math.min(b.Od[0],b.Od[2]))}else switch(f=Math.tan(J(b)/2),d){case "LEFT":return-f*b.Ab;case "RIGHT":return f*b.Ab;case "TOP":return f;case "BOTTOM":return-f}break;default:Y.J("Unknown camera type")}};a.D0=ma;a.XH=function(a,b,d){a=a.v;ta.Bd(b,a.C);ia.copy(d,a.pivot)};a.YQ=function(a,b){var d=a.v,f=ia.subtract(b,d.Hc,qa),c=ta.W(d.C),f=ia.add(f,c,f);Na.je(a,
f);ia.copy(b,d.Hc)};a.E3=function(a,b){var d=a.v,f=ia.subtract(b,d.pivot,qa),c=ta.W(d.C),f=ia.add(f,c,f);Na.je(a,f);ia.copy(b,d.pivot)};a.taa=aa;a.uda=function(d,f){d.v.yb=f;d.v.hc=null;d.v.Ya=null;d.v.Kb=null;d.v.wd=null;d.v.xd=null;h(d);switch(f){case a.dd:var c=ta.W(d.v.C),N=p(d,0,Qa);b(d,c,N,null,null,null,null,d.v.Qh);break;case a.Ob:c=aa(d,qa),N=ta.ha(d.v.C),N=Y.Jc(N,Y.mc,Qa),N=ia.scaleAndAdd(c,N,10,N),ia.copy(N,d.v.pivot)}};a.Hw=function(a){a=a.v;a.yb=0;ia.set(0,0,0,a.pivot);ia.set(0,0,0,a.Hc);
a.pk=!1;a.use_panning=!1;a.hc=null;a.Ya=null;a.Kb=null;a.wd=null;a.xd=null;a.he=null;a.Qh=!0};a.KB=function(a,b){for(var d=0;d<a.length;d++){var f=a[d];70!=f.type&&80!=f.type&&90!=f.type&&100!=f.type||y(f,f.qn,b)}};a.PH=function(a,b,d){var f=O.N();a=Q.La(a,f).na;for(f=0;f<a.length;f++){var c=a[f];if(90==c.type||100==c.type)90==c.type&&ka.copy(b,c.Od),100==c.type&&ka.copy(d,c.Od),c.Kc||Z(c,!1),Aa(c),ea(c)}};a.mda=function(a,b,d){var f=O.N();a=Q.La(a,f).na;for(f=0;f<a.length;f++){var c=a[f];if(90==
c.type||100==c.type)90==c.type&&b&&oa.copy(b,c.Fb),100==c.type&&d&&oa.copy(d,c.Fb),Aa(c),ea(c)}};a.w3=function(b,d){for(var f=O.N(),f=Q.La(b,f).na,c,N,e,n,t,g,l,r,h=0;h<f.length;h++){var k=f[h];if(k.type==a.Wc&&k.near||k.type==a.od||k.type==a.cg){c=k.near;N=oa.invert(d,Sa);n=ka.transformMat4(Ka,N,La);e=n[0]*c;n=n[1]*c;g=ka.transformMat4(V,N,La);t=g[0]*c;g=g[1]*c;N=ka.transformMat4(Ya,N,La);N=-N[2]*N[3];l=oa.frustum(t,e,g,n,c,N,Sa);Y.zo(l,Ma);r=(e-t)/(n-g);break}}for(h=0;h<f.length;h++)if(k=f[h],k.type==
a.Wc||k.type==a.od||k.type==a.cg)k.far=N,k.near=c,k.right=e,k.top=n,k.left=t,k.bottom=g,k.Ab=r,k.Fc=Math.atan(n/c)-Math.atan(g/c),oa.copy(l,k.Fb),A(Ma,k.Qi),Aa(k),ea(k)}};b4w.module.__boundings=function(a,u){function m(){return{max_x:0,min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function c(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function b(){return{T:new Float32Array(3),Za:new Float32Array(3),$a:new Float32Array(3),ab:new Float32Array(3)}}function p(a,b){var f=a.max_y,c=a.max_z,d=a.min_x,e=a.min_y,g=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,f);a.max_z=Math.max(b.max_z,c);a.min_x=
Math.min(b.min_x,d);a.min_y=Math.min(b.min_y,e);a.min_z=Math.min(b.min_z,g);return a}function h(a,b,f,c){var d=a[b],e=a[b+1],g=a[b+2],l=a[b],t=a[b+1],k=a[b+2];for(b+=3;b<f;b+=3)var h=a[b],r=a[b+1],C=a[b+2],d=Math.max(d,h),e=Math.max(e,r),g=Math.max(g,C),l=Math.min(l,h),t=Math.min(t,r),k=Math.min(k,C);c.max_x=d;c.max_y=e;c.max_z=g;c.min_x=l;c.min_y=t;c.min_z=k;return c}function G(a,b){b||(b=new Float32Array(24));var f=a.max_x,c=a.max_y,d=a.max_z,e=a.min_x,g=a.min_y,l=a.min_z;b[0]=e;b[1]=g;b[2]=l;b[3]=
f;b[4]=g;b[5]=l;b[6]=f;b[7]=c;b[8]=l;b[9]=e;b[10]=c;b[11]=l;b[12]=e;b[13]=g;b[14]=d;b[15]=f;b[16]=g;b[17]=d;b[18]=f;b[19]=c;b[20]=d;b[21]=e;b[22]=c;b[23]=d;return b}function q(){return{T:new Float32Array(3),ub:0}}function w(a,b){b.T[0]=a.T[0];b.T[1]=a.T[1];b.T[2]=a.T[2];b.ub=a.ub;return b}function A(){return{Za:new Float32Array(3),$a:new Float32Array(3),ab:new Float32Array(3),T:new Float32Array(3)}}function g(a,b){l.copy(a.Za,b.Za);l.copy(a.$a,b.$a);l.copy(a.ab,b.ab);l.copy(a.T,b.T);return b}function e(a,
b,f,c){return{Za:new Float32Array(a),$a:new Float32Array(b),ab:new Float32Array(f),T:new Float32Array([c[0],c[1],c[2]])}}function y(a,b){var f=I.KW(a,E),f=b?I.FW(a,f,F):v.identity(F),f=I.CZ(f,S);l.copy(a,k);l.transformMat3(k,f,k);for(var c=k[0],d=c,n=k[1],g=n,h=k[2],t=h,r,C,H,m,p=3;p<a.length;p+=3)k[0]=a[p],k[1]=a[p+1],k[2]=a[p+2],l.transformMat3(k,f,k),r=k[0],C=k[1],H=k[2],r>c&&(c=r),r<d&&(d=r),C>n&&(n=C),C<g&&(g=C),H>h&&(h=H),H<t&&(t=H);c=Math.max(c-d,.001);n=Math.max(n-g,.001);h=Math.max(h-t,.001);
t=v.identity(F);t[0]=c?1/c:2E3;t[4]=n?1/n:2E3;t[8]=h?1/h:2E3;v.transpose(f,z);k[0]=a[0];k[1]=a[1];k[2]=a[2];l.transformMat3(k,f,k);l.transformMat3(k,t,k);l.transformMat3(k,z,k);g=k[0];d=k[0];r=k[1];C=k[1];H=k[2];m=k[2];for(p=3;p<a.length;p+=3)k[0]=a[p],k[1]=a[p+1],k[2]=a[p+2],l.transformMat3(k,f,k),l.transformMat3(k,t,k),l.transformMat3(k,z,k),g=Math.max(g,k[0]),d=Math.min(d,k[0]),r=Math.max(r,k[1]),C=Math.min(C,k[1]),H=Math.max(H,k[2]),m=Math.min(m,k[2]);p=Math.sqrt((g-d)*(g-d)+(r-C)*(r-C)+(H-m)*
(H-m))/2;p=Math.min(p,1);M[0]=(g+d)/2;M[1]=(r+C)/2;M[2]=(H+m)/2;g=M;t=v.identity(F);t[0]=c;t[4]=n;t[8]=h;l.transformMat3(g,f,g);l.transformMat3(g,t,g);l.transformMat3(g,z,g);t=[f[0],f[3],f[6]];d=[f[1],f[4],f[7]];f=[f[2],f[5],f[8]];l.scale(t,c*p,t);l.scale(d,n*p,d);l.scale(f,h*p,f);return e(t,d,f,g)}function x(){return{ub:0,height:0,T:new Float32Array(3)}}function P(a,b,f){l.add(b,f,a.T);l.scale(a.T,.5,a.T);a.ub=l.distance(a.T,b);return a}var J=u("__tsr"),L=u("__util"),l=u("__vec3"),I=u("__math"),
v=u("__mat3"),K=new Float32Array(24),k=new Float32Array(3),D=new Float32Array(3),M=new Float32Array(3),E=new Float32Array(3),S=new Float32Array(9),F=new Float32Array(9),z=new Float32Array(9);a.sO=function(){return{Ef:m(),fg:A(),ig:q()}};a.SL=function(a,b){c(a.Ef,b.Ef);g(a.fg,b.fg);w(a.ig,b.ig)};a.Gf=m;a.Gj=c;a.vy=b;a.xX=function(a,b){l.copy(a.T,b.T);l.copy(a.Za,b.Za);l.copy(a.$a,b.$a);l.copy(a.ab,b.ab)};a.Y8=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};
a.W5=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0};a.fy=function(a){var b=m();c(a,b);return b};a.GW=function(a){var b=a.max_x-a.min_x,f=a.max_y-a.min_y;f<b&&(b=f);a=a.max_z-a.min_z;a<b&&(b=a);return b};a.az=p;a.fE=h;a.Dq=function(a,b,f){f||(f=m());a=G(a,K);J.wn(a,b,a);return h(a,0,a.length,f)};a.HM=G;a.Wda=function(a,b,f){f||(f=m());var c=b.min_x,d=b.max_x,e=b.min_y,g=b.max_y,l=b.min_z;b=b.max_z;if(c>=a.max_x||d<=a.min_x||e>=a.max_y||g<=a.min_y||l>=a.max_z||b<=a.min_z)return f.min_x=
-.1,f.max_x=.1,f.min_y=-.1,f.max_y=.1,f.min_z=-.2,f.max_z=-.1,f;f.min_x=Math.max(a.min_x,c);f.max_x=Math.min(a.max_x,d);f.min_y=Math.max(a.min_y,e);f.max_y=Math.min(a.max_y,g);f.min_z=Math.max(a.min_z,l);f.max_z=Math.min(a.max_z,b);return f};a.hea=function(a,b,f){f||(f=m());var c=a.max_x-a.min_x,d=a.max_y-a.min_y,e=a.max_z-a.min_z;f.min_x=a.min_x-.5*(b-1)*c;f.max_x=a.max_x+.5*(b-1)*c;f.min_y=a.min_y-.5*(b-1)*d;f.max_y=a.max_y+.5*(b-1)*d;f.min_z=a.min_z-.5*(b-1)*e;f.max_z=a.max_z+.5*(b-1)*e;return f};
a.Vx=function(a,b,f){f||(f=q());J.Lc(a.T,b,f.T);b=J.ge(b);f.ub=a.ub*(0>b?-b:b);return f};a.mE=function(a,b,f){f||(f=A());J.Lc(a.T,b,f.T);l.copy(a.Za,f.Za);l.copy(a.$a,f.$a);l.copy(a.ab,f.ab);J.Td(f.Za,b,f.Za);J.Td(f.$a,b,f.$a);J.Td(f.ab,b,f.ab);return f};a.nE=function(a,c,f){f||(f=b());J.Lc(a.T,c,f.T);l.copy(a.Za,f.Za);l.copy(a.$a,f.$a);l.copy(a.ab,f.ab);J.Td(f.Za,c,f.Za);J.Td(f.$a,c,f.$a);J.Td(f.ab,c,f.ab);return f};a.aL=function(a,b){var f=q();l.copy(b,f.T);f.ub=a;return f};a.L2=function(a,c,f,
e,d){var n=b();l.copy(a,n.T);l.copy(c,n.Za);l.copy(f,n.$a);l.copy(e,n.ab);l.scale(n.Za,d[0],n.Za);l.scale(n.$a,d[1],n.$a);l.scale(n.ab,d[2],n.ab);return n};a.py=q;a.tm=w;a.mu=A;a.Gq=g;a.v9=function(a){var b=A();g(a,b);return b};a.w9=function(a){var b=q();w(a,b);return b};a.gE=e;a.oW=function(){var a;a||(a=q());l.set(0,0,0,a.T);a.ub=1E12;return a};a.pZ=function(a,b){var f=l.subtract(b.T,a.T,l.create());0==l.length(f)&&l.set(1,0,0,f);var c=l.normalize(f,l.create()),f=l.scale(c,a.ub,l.create());l.add(f,
a.T,f);var d=l.scale(c,-a.ub,l.create());l.add(d,a.T,d);var e=l.scale(c,b.ub,l.create());l.add(e,b.T,e);var g=l.scale(c,-b.ub,l.create());l.add(g,b.T,g);f=[f,d,e,g];c=l.normalize(c,l.create());d=f[0];e=f[0];for(g=1;g<f.length;g++){var k=l.dot(f[g],c);k<l.dot(d,c)&&(d=f[g]);k>l.dot(e,c)&&(e=f[g])}c=[d,e];f=c[0];c=c[1];a.T=l.scale(l.add(f,c,l.create()),.5,l.create());a.ub=l.length(l.subtract(c,f,l.create()))/2};a.rF=function(a,b){l.add(a.T,a.$a,k);l.add(k,a.Za,k);l.add(k,a.ab,k);b.push(k[0],k[1],k[2]);
l.add(a.T,a.$a,k);l.add(k,a.Za,k);l.subtract(k,a.ab,k);b.push(k[0],k[1],k[2]);l.add(a.T,a.$a,k);l.subtract(k,a.Za,k);l.add(k,a.ab,k);b.push(k[0],k[1],k[2]);l.add(a.T,a.$a,k);l.subtract(k,a.Za,k);l.subtract(k,a.ab,k);b.push(k[0],k[1],k[2]);l.subtract(a.T,a.$a,k);l.add(k,a.Za,k);l.add(k,a.ab,k);b.push(k[0],k[1],k[2]);l.subtract(a.T,a.$a,k);l.add(k,a.Za,k);l.subtract(k,a.ab,k);b.push(k[0],k[1],k[2]);l.subtract(a.T,a.$a,k);l.subtract(k,a.Za,k);l.add(k,a.ab,k);b.push(k[0],k[1],k[2]);l.subtract(a.T,a.$a,
k);l.subtract(k,a.Za,k);l.subtract(k,a.ab,k);b.push(k[0],k[1],k[2])};a.oy=y;a.DX=function(a){var c=b();l.copy(a.Za,c.Za);l.copy(a.$a,c.$a);l.copy(a.ab,c.ab);l.copy(a.T,c.T);return c};a.qy=function(a){var b=q(),f;f=l.length(a.Za);var c=l.length(a.$a),d=l.length(a.ab);f=f>c?f:c;b.T=a.T;b.ub=d>f?d:f;return b};a.yO=function(a,b){var f=l.length(a.Za),c=l.length(a.$a),d=l.length(a.ab);return.75*b.ub*b.ub*b.ub>f*c*d};a.l0=a.n0=a.m0=x;a.OK=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c-2*a),e=x();
e.ub=a;e.height=d;e.T[0]=0;e.T[1]=0;e.T[2]=(f+c)/2;return e};a.QK=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=x();e.ub=a;e.height=d;e.T[0]=0;e.T[1]=0;e.T[2]=(f+c)/2;return e};a.PK=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=x();e.ub=a;e.height=d;e.T[0]=0;e.T[1]=0;e.T[2]=(f+c)/2;return e};a.uX=a.wX=a.vX=function(a,b){b.ub=a.ub;b.height=a.height;b.T.set(a.T);return b};a.g9=function(a,b){return a.min_x>b.max_x||a.max_x<b.min_x?!1:a.min_y>b.max_y||a.max_y<b.min_y?!1:a.min_z>
b.max_z||a.max_z<b.min_z?!1:!0};a.r2=function(a){for(var b=0,f=0,e=m(),d=0;d<a.submeshes.length;d++){for(var n=a.submeshes[d],g=n.position,l=0;l<g.length/3;l++)var t=g[3*l],k=g[3*l+1],v=g[3*l+2],b=Math.max(Math.sqrt(t*t+k*k+v*v),b),f=Math.max(Math.sqrt(t*t+k*k),f);l=n.boundings.bb;g=h(g,0,g.length,m());l.max_x=g.max_x;l.min_x=g.min_x;l.max_y=g.max_y;l.min_y=g.min_y;l.max_z=g.max_z;l.min_z=g.min_z;l=G(g,K);l=y(l,!1);n.boundings.be_cen=l.T;n.boundings.be_ax=[l.Za[0],l.$a[1],l.ab[2]];d?p(e,g):c(g,e)}d=
a.b4w_boundings.bb;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;d=a.b4w_boundings.bb_src;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;a.b4w_boundings.bs_rad=b;a.b4w_boundings.bc_rad=f;l=G(e,K);l=y(l,!1);a.b4w_boundings.be_cen=l.T;a.b4w_boundings.be_ax=[l.Za[0],l.$a[1],l.ab[2]]};a.z_=function(a){var b=a.subarray(0,3),f=a.subarray(6,9),c=a.subarray(12,15),d=a.subarray(18,21);a=l.subtract(f,b,k);l.normalize(a,
a);var e=L.L_(b,f,c,D),e=l.cross(e,a,e);l.normalize(e,e);var g=l.create(),h=l.create();l.subtract(f,b,M);h[0]=l.dot(M,a);h[1]=l.dot(M,e);f=l.create();l.subtract(c,b,M);f[0]=l.dot(M,a);f[1]=l.dot(M,e);c=l.create();l.subtract(d,b,M);c[0]=l.dot(M,a);c[1]=l.dot(M,e);d=q();c=[g,h,f,c];g=P(d,c[0],c[1]);for(d=2;d<c.length;d++)if(l.distance(g.T,c[d])>g.ub){for(var t=g,g=c,h=c[d],f=d-1,t=P(t,h,g[0]),v=1;v<=f;v++)if(l.distance(t.T,g[v])>t.ub){for(var p=t,t=g,H=h,m=g[v],z=v-1,p=P(p,H,m),E=0;E<=z;E++)if(l.distance(p.T,
t[E])>p.ub){var K=H,B=m,C=t[E],w=l.subtract(B,C,M),w=l.squaredLength(w),y=l.subtract(K,C,M),x=l.squaredLength(y),y=l.subtract(K,B,M),F=l.squaredLength(y),y=w*(x+F-w),J=x*(F+w-x),w=F*(w+x-F),x=y+J+w;l.copy(K,p.T);l.scale(p.T,y/x,p.T);l.scaleAndAdd(p.T,B,J/x,p.T);l.scaleAndAdd(p.T,C,w/x,p.T);p.ub=l.distance(p.T,K)}t=p}g=t}d=g;a=l.scale(a,d.T[0],M);l.scaleAndAdd(a,e,d.T[1],a);l.add(a,b,d.T);return d}};b4w.module.__tsr=function(a,u){function m(){var a=new Float32Array(8);a[3]=1;a[7]=1;return a}function c(){var a=new Float32Array(9);a[3]=1;a[7]=1;return a}function b(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b}function p(a,b,c,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=b;e[4]=c[0];e[5]=c[1];e[6]=c[2];e[7]=c[3];return e}function h(a,b){b[0]=a[4];b[1]=a[5];b[2]=a[6];b[3]=a[7];return b}function G(a,b,c){var e=b[0],g=b[1],l=b[2],h=b[3],p=b[4],m=b[5],q=b[6];
b=b[7];var w=a[0]*h,z=a[1]*h,C=a[2]*h;a=b*w+m*C-q*z;var h=b*z+q*w-p*C,r=b*C+p*z-m*w,w=-p*w-m*z-q*C;c[0]=a*b+w*-p+h*-q-r*-m;c[1]=h*b+w*-m+r*-p-a*-q;c[2]=r*b+w*-q+a*-m-h*-p;c[0]+=e;c[1]+=g;c[2]+=l;return c}var q=u("__mat4"),w=u("__quat"),A=u("__util"),g=u("__vec3"),e=Math.sin(-Math.PI/4),y=-e,x=new Float32Array(3),P=new Float32Array(4),J=new Float32Array(16);a.create=m;a.clone=function(a){var c=m();b(a,c);return c};a.lz=function(a,b,c,e,g,h,p,q){var l=m();l[0]=a;l[1]=b;l[2]=c;l[3]=e;l[4]=g;l[5]=h;l[6]=
p;l[7]=q;return l};a.oo=c;a.x9=function(a){var e=c();b(a,e);return e};a.W$=function(a,b,e,g,h,k,p,m){var l=c();l[0]=a;l[1]=b;l[2]=e;l[3]=g;l[4]=h;l[5]=k;l[6]=p;l[7]=m;return l};a.copy=b;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=1;return a};a.si=p;a.Bd=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.Ue=function(a,b){b[3]=a;return b};a.jn=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.Ec=function(a,b){b[4]=a[0];b[5]=a[1];b[6]=a[2];b[7]=a[3];
return b};a.W=function(a){return a.subarray(0,3)};a.Yb=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.ge=function(a){return a[3]};a.cr=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.ha=function(a){return a.subarray(4,8)};a.Db=h;a.invert=function(a,b){var c=1/a[3];if(!c)return null;var e=a[0],g=a[1],l=a[2];P[0]=a[4];P[1]=a[5];P[2]=a[6];P[3]=a[7];w.invert(P,P);var h=P[0],p=P[1],m=P[2],q=P[3],e=e*c,g=g*c,y=l*c,l=q*e+p*y-m*g,z=q*g+m*e-h*y,C=q*y+h*g-p*e,e=-h*e-p*g-m*y;b[0]=
-(l*q+e*-h+z*-m-C*-p);b[1]=-(z*q+e*-p+C*-h-l*-m);b[2]=-(C*q+e*-m+l*-p-z*-h);b[3]=c;b[4]=h;b[5]=p;b[6]=m;b[7]=q;return b};a.NC=function(a,b){var c=a[3];q.fromRotationTranslation(a.subarray(4,8),a.subarray(0,3),b);for(var e=0;12>e;e++)b[e]*=c;return b};a.Wh=function(a,b){var c=A.zG(a,x),e=A.kP(a),g=A.yG(a,P);p(c,e,g,b);return b};a.multiply=function(a,b,c){G(b,a,c);c[3]=a[3]*b[3];var e=a[4],g=a[5],l=a[6];a=a[7];var h=b[4],p=b[5],m=b[6];b=b[7];c[4]=e*b+a*h+g*m-l*p;c[5]=g*b+a*p+l*h-e*m;c[6]=l*b+a*m+e*
p-g*h;c[7]=a*b-e*h-g*p-l*m;return c};a.E4=function(a,b,c){var e=b[3];b=q.fromRotationTranslation(b.subarray(4,8),b.subarray(0,3),J);for(var g=0;12>g;g++)b[g]*=e;q.multiply(b,a,c);return c};a.Lc=G;a.bS=function(a,b,c){var e=b[3],g=a[0]-b[0],h=a[1]-b[1],l=a[2]-b[2];a=b[4];var p=b[5],m=b[6];b=b[7];var q=a*a+p*p+m*m+b*b,q=q?1/q:0;a=-a*q;p=-p*q;m=-m*q;b*=q;var q=b*g+p*l-m*h,w=b*h+m*g-a*l,z=b*l+a*h-p*g,g=-a*g-p*h-m*l;c[0]=q*b+g*-a+w*-m-z*-p;c[1]=w*b+g*-p+z*-a-q*-m;c[2]=z*b+g*-m+q*-p-w*-a;c[0]/=e;c[1]/=
e;c[2]/=e;return c};a.wn=function(a,b,c,e){e||(e=0);var g=a.length,h=b[0],l=b[1],p=b[2],m=b[3],v=b[4],q=b[5],z=b[6];b=b[7];for(var w=0;w<g;w+=3){var r=a[w]*m,f=a[w+1]*m,y=a[w+2]*m,d=b*r+q*y-z*f,n=b*f+z*r-v*y,X=b*y+v*f-q*r,r=-v*r-q*f-z*y;c[e+w]=d*b+r*-v+n*-z-X*-q;c[e+w+1]=n*b+r*-q+X*-v-d*-z;c[e+w+2]=X*b+r*-z+d*-q-n*-v;c[e+w]+=h;c[e+w+1]+=l;c[e+w+2]+=p}return c};a.II=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],l=b[4],p=b[5],m=b[6];b=b[7];for(var v=0;v<g;v+=3){var q=a[v]*h,z=a[v+1]*h,w=a[v+2]*h,
r=b*q+p*w-m*z,f=b*z+m*q-l*w,y=b*w+l*z-p*q,q=-l*q-p*z-m*w;c[e+v]=r*b+q*-l+f*-m-y*-p;c[e+v+1]=f*b+q*-p+y*-l-r*-m;c[e+v+2]=y*b+q*-m+r*-p-f*-l}return c};a.Td=function(a,b,c){var e=b[3],g=b[4],h=b[5],l=b[6];b=b[7];var p=a[0]*e,m=a[1]*e,q=a[2]*e;a=b*p+h*q-l*m;var e=b*m+l*p-g*q,w=b*q+g*m-h*p,p=-g*p-h*m-l*q;c[0]=a*b+p*-g+e*-l-w*-h;c[1]=e*b+p*-h+w*-g-a*-l;c[2]=w*b+p*-l+a*-h-e*-g;return c};a.JI=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],l=b[4],p=b[5],m=b[6];b=b[7];for(var v=0;v<g;v+=4){var q=a[v]*h,z=
a[v+1]*h,w=a[v+2]*h,r=b*q+p*w-m*z,f=b*z+m*q-l*w,y=b*w+l*z-p*q,q=-l*q-p*z-m*w;c[e+v]=r*b+q*-l+f*-m-y*-p;c[e+v+1]=f*b+q*-p+y*-l-r*-m;c[e+v+2]=y*b+q*-m+r*-p-f*-l;c[e+v+3]=a[v+3]}return c};a.aS=function(a,b,c){b=h(b,P);w.multiply(b,a,c)};a.F4=function(a,b,c,e){e=e||0;b=h(b,P);A.p2(a,b,c,e)};a.translate=function(a,b,c){var e=a[3],g=a[4],h=a[5],l=a[6],p=a[7],m=b[0]*e,q=b[1]*e,w=b[2]*e;b=p*m+h*w-l*q;var e=p*q+l*m-g*w,z=p*w+g*q-h*m,m=-g*m-h*q-l*w;c[0]=a[0]+b*p+m*-g+e*-l-z*-h;c[1]=a[1]+e*p+m*-h+z*-g-b*-l;
c[2]=a[2]+z*p+m*-l+b*-h-e*-g;c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];return c};a.lr=function(a,b,c,e){g.lerp(a.subarray(0,3),b.subarray(0,3),c,e.subarray(0,3));var h=a[3];e[3]=h+c*(b[3]-h);w.slerp(a.subarray(4,8),b.subarray(4,8),c,e.subarray(4,8));return e};a.G$=function(a,b,c,e){var g=a.subarray(0,3),h=b.subarray(0,3),l=e.subarray(0,3);l[0]=h[0]*(c+1)-g[0]*c;l[1]=h[1]*(c+1)-g[1]*c;l[2]=h[2]*(c+1)-g[2]*c;e[3]=b[3]*(c+1)-a[3]*c;a=a.subarray(4,8);b=b.subarray(4,8);g=e.subarray(4,8);g[0]=b[0]*
(c+1)-a[0]*c;g[1]=b[1]*(c+1)-a[1]*c;g[2]=b[2]*(c+1)-a[2]*c;g[3]=b[3]*(c+1)-a[3]*c;w.normalize(g,g);return e};a.t0=function(a,b,c,e,g){g[0]=a[0]+b*c[0];g[1]=a[1]+b*c[1];g[2]=a[2]+b*c[2];g[3]=a[3];c=e[0];var h=e[1];e=e[2];var l=a[4],p=a[5],m=a[6],v=a[7];g[4]=.5*(c*v+h*m-e*p);g[5]=.5*(h*v+e*l-c*m);g[6]=.5*(e*v+c*p-h*l);g[7]=.5*(-c*l-h*p-e*m);g[4]=a[4]+g[4]*b;g[5]=a[5]+g[5]*b;g[6]=a[6]+g[6]*b;g[7]=a[7]+g[7]*b;a=g[4];b=g[5];c=g[6];h=g[7];a=a*a+b*b+c*c+h*h;0<a&&(a=1/Math.sqrt(a),g[4]*=a,g[5]*=a,g[6]*=a,
g[7]*=a)};a.vea=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];var c=a[4],g=a[5],h=a[6],l=a[7];b[4]=c*y+l*e;b[5]=g*y+h*e;b[6]=h*y-g*e;b[7]=l*y-c*e};a.uea=function(a,b){b[0]=a[0];b[1]=-a[2];b[2]=a[1];b[3]=a[3];b[4]=a[4];b[5]=-a[6];b[6]=a[5];b[7]=a[7]}};b4w.module.__vec3=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array,m=Math.random;a.create=function(){var a=new u(3);a[0]=0;a[1]=0;a[2]=0;return a};a.clone=function(a){var b=new u(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=function(a,b,p){var c=new u(3);c[0]=a;c[1]=b;c[2]=p;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set=function(a,b,p,h){h[0]=a;h[1]=b;h[2]=p;return h};a.add=function(a,b,p){p[0]=a[0]+b[0];p[1]=a[1]+b[1];p[2]=a[2]+b[2];
return p};a.subtract=function(a,b,p){p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];return p};a.sub=a.subtract;a.multiply=function(a,b,p){p[0]=a[0]*b[0];p[1]=a[1]*b[1];p[2]=a[2]*b[2];return p};a.mul=a.multiply;a.divide=function(a,b,p){p[0]=a[0]/b[0];p[1]=a[1]/b[1];p[2]=a[2]/b[2];return p};a.div=a.divide;a.min=function(a,b,p){p[0]=Math.min(a[0],b[0]);p[1]=Math.min(a[1],b[1]);p[2]=Math.min(a[2],b[2]);return p};a.max=function(a,b,p){p[0]=Math.max(a[0],b[0]);p[1]=Math.max(a[1],b[1]);p[2]=Math.max(a[2],
b[2]);return p};a.scale=function(a,b,p){p[0]=a[0]*b;p[1]=a[1]*b;p[2]=a[2]*b;return p};a.scaleAndAdd=function(a,b,p,h){h[0]=a[0]+b[0]*p;h[1]=a[1]+b[1]*p;h[2]=a[2]+b[2]*p;return h};a.distance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],m=b[2]-a[2];return Math.sqrt(c*c+h*h+m*m)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],m=b[2]-a[2];return c*c+h*h+m*m};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;
a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=function(a,b){var c=a[0],h=a[1],m=a[2],c=c*c+h*h+m*m;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};a.cross=function(a,b,m){var c=a[0],p=a[1];a=a[2];var q=b[0],w=b[1];b=b[2];
m[0]=p*b-a*w;m[1]=a*q-c*b;m[2]=c*w-p*q;return m};a.lerp=function(a,b,m,h){var c=a[0],p=a[1];a=a[2];h[0]=c+m*(b[0]-c);h[1]=p+m*(b[1]-p);h[2]=a+m*(b[2]-a);return h};a.Bba=function(a,b,m,h,G,q){var c=G*G,p=c*(2*G-3)+1,g=c*(G-2)+G,e=c*(G-1);G=c*(3-2*G);q[0]=a[0]*p+b[0]*g+m[0]*e+h[0]*G;q[1]=a[1]*p+b[1]*g+m[1]*e+h[1]*G;q[2]=a[2]*p+b[2]*g+m[2]*e+h[2]*G;return q};a.RK=function(a,b,m,h,G,q){var c=1-G,p=c*c,g=G*G,e=p*c,p=3*G*p,c=3*g*c;G=g*G;q[0]=a[0]*e+b[0]*p+m[0]*c+h[0]*G;q[1]=a[1]*e+b[1]*p+m[1]*c+h[1]*G;
q[2]=a[2]*e+b[2]*p+m[2]*c+h[2]*G;return q};a.random=function(a,b){a=a||1;var c=2*m()*Math.PI,h=2*m()-1,G=Math.sqrt(1-h*h)*a;b[0]=Math.cos(c)*G;b[1]=Math.sin(c)*G;b[2]=h*a;return b};a.transformMat4=function(a,b,m){var c=a[0],p=a[1];a=a[2];var q=b[3]*c+b[7]*p+b[11]*a+b[15],q=q||1;m[0]=(b[0]*c+b[4]*p+b[8]*a+b[12])/q;m[1]=(b[1]*c+b[5]*p+b[9]*a+b[13])/q;m[2]=(b[2]*c+b[6]*p+b[10]*a+b[14])/q;return m};a.transformMat3=function(a,b,m){var c=a[0],p=a[1];a=a[2];m[0]=c*b[0]+p*b[3]+a*b[6];m[1]=c*b[1]+p*b[4]+a*
b[7];m[2]=c*b[2]+p*b[5]+a*b[8];return m};a.transformQuat=function(a,b,m){var c=a[0],p=a[1],q=a[2];a=b[0];var w=b[1],A=b[2];b=b[3];var g=b*c+w*q-A*p,e=b*p+A*c-a*q,y=b*q+a*p-w*c,c=-a*c-w*p-A*q;m[0]=g*b+c*-a+e*-A-y*-w;m[1]=e*b+c*-w+y*-a-g*-A;m[2]=y*b+c*-A+g*-w-e*-a;return m};a.rotateX=function(a,b,m,h){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[0];p[1]=c[1]*Math.cos(m)-c[2]*Math.sin(m);p[2]=c[1]*Math.sin(m)+c[2]*Math.cos(m);h[0]=p[0]+b[0];h[1]=p[1]+b[1];h[2]=p[2]+b[2];return h};
a.rotateY=function(a,b,m,h){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[2]*Math.sin(m)+c[0]*Math.cos(m);p[1]=c[1];p[2]=c[2]*Math.cos(m)-c[0]*Math.sin(m);h[0]=p[0]+b[0];h[1]=p[1]+b[1];h[2]=p[2]+b[2];return h};a.rotateZ=function(a,b,m,h){var c=[],p=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];p[0]=c[0]*Math.cos(m)-c[1]*Math.sin(m);p[1]=c[0]*Math.sin(m)+c[1]*Math.cos(m);p[2]=c[2];h[0]=p[0]+b[0];h[1]=p[1]+b[1];h[2]=p[2]+b[2];return h};a.forEach=function(){var c=a.create();return function(a,
m,h,G,q,w){var b;m||(m=3);h||(h=0);for(G?b=Math.min(G*m+h,a.length):b=a.length;h<b;h+=m)c[0]=a[h],c[1]=a[h+1],c[2]=a[h+2],q(c,w,c),a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2];return a}}();a.angle=function(c,b){var m=a.fromValues(c[0],c[1],c[2]),h=a.fromValues(b[0],b[1],b[2]);a.normalize(m,m);a.normalize(h,h);m=a.dot(m,h);return 1<m?0:Math.acos(m)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}};b4w.module.vec3=b4w.module.__vec3;
b4w.module.__vec4=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array,m=Math.random;a.create=function(){var a=new u(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.clone=function(a){var b=new u(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,m,h){var c=new u(4);c[0]=a;c[1]=b;c[2]=m;c[3]=h;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,b,m,h,G){G[0]=a;G[1]=b;G[2]=m;G[3]=h;return G};a.add=function(a,b,m){m[0]=
a[0]+b[0];m[1]=a[1]+b[1];m[2]=a[2]+b[2];m[3]=a[3]+b[3];return m};a.subtract=function(a,b,m){m[0]=a[0]-b[0];m[1]=a[1]-b[1];m[2]=a[2]-b[2];m[3]=a[3]-b[3];return m};a.sub=a.subtract;a.multiply=function(a,b,m){m[0]=a[0]*b[0];m[1]=a[1]*b[1];m[2]=a[2]*b[2];m[3]=a[3]*b[3];return m};a.mul=a.multiply;a.divide=function(a,b,m){m[0]=a[0]/b[0];m[1]=a[1]/b[1];m[2]=a[2]/b[2];m[3]=a[3]/b[3];return m};a.div=a.divide;a.min=function(a,b,m){m[0]=Math.min(a[0],b[0]);m[1]=Math.min(a[1],b[1]);m[2]=Math.min(a[2],b[2]);m[3]=
Math.min(a[3],b[3]);return m};a.max=function(a,b,m){m[0]=Math.max(a[0],b[0]);m[1]=Math.max(a[1],b[1]);m[2]=Math.max(a[2],b[2]);m[3]=Math.max(a[3],b[3]);return m};a.scale=function(a,b,m){m[0]=a[0]*b;m[1]=a[1]*b;m[2]=a[2]*b;m[3]=a[3]*b;return m};a.scaleAndAdd=function(a,b,m,h){h[0]=a[0]+b[0]*m;h[1]=a[1]+b[1]*m;h[2]=a[2]+b[2]*m;h[3]=a[3]+b[3]*m;return h};a.distance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],m=b[2]-a[2],q=b[3]-a[3];return Math.sqrt(c*c+h*h+m*m+q*q)};a.dist=a.distance;a.squaredDistance=
function(a,b){var c=b[0]-a[0],h=b[1]-a[1],m=b[2]-a[2],q=b[3]-a[3];return c*c+h*h+m*m+q*q};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1],h=a[2];a=a[3];return Math.sqrt(b*b+c*c+h*h+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1],h=a[2];a=a[3];return b*b+c*c+h*h+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=
function(a,b){var c=a[0],h=a[1],m=a[2],q=a[3],w=c*c+h*h+m*m+q*q;0<w&&(w=1/Math.sqrt(w),b[0]=c*w,b[1]=h*w,b[2]=m*w,b[3]=q*w);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,m,h){var c=a[0],p=a[1],w=a[2];a=a[3];h[0]=c+m*(b[0]-c);h[1]=p+m*(b[1]-p);h[2]=w+m*(b[2]-w);h[3]=a+m*(b[3]-a);return h};a.random=function(c,b){c=c||1;b[0]=m();b[1]=m();b[2]=m();b[3]=m();a.normalize(b,b);a.scale(b,c,b);return b};a.transformMat4=function(a,b,m){var c=a[0],p=a[1],q=
a[2];a=a[3];m[0]=b[0]*c+b[4]*p+b[8]*q+b[12]*a;m[1]=b[1]*c+b[5]*p+b[9]*q+b[13]*a;m[2]=b[2]*c+b[6]*p+b[10]*q+b[14]*a;m[3]=b[3]*c+b[7]*p+b[11]*q+b[15]*a;return m};a.transformQuat=function(a,b,m){var c=a[0],p=a[1],q=a[2],w=b[0],A=b[1],g=b[2];b=b[3];var e=b*c+A*q-g*p,y=b*p+g*c-w*q,x=b*q+w*p-A*c,c=-w*c-A*p-g*q;m[0]=e*b+c*-w+y*-g-x*-A;m[1]=y*b+c*-A+x*-w-e*-g;m[2]=x*b+c*-g+e*-A-y*-w;m[3]=a[3];return m};a.forEach=function(){var c=a.create();return function(a,m,h,G,q,w){var b;m||(m=4);h||(h=0);for(G?b=Math.min(G*
m+h,a.length):b=a.length;h<b;h+=m)c[0]=a[h],c[1]=a[h+1],c[2]=a[h+2],c[3]=a[h+3],q(c,w,c),a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2],a[h+3]=c[3];return a}}();a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.vec4=b4w.module.__vec4;
b4w.module.__quat=function(a,u){var m=u("__vec3"),c=u("__vec4"),b=u("__mat3"),p="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new p(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.rotationTo=function(){var b=m.create(),c=m.fromValues(1,0,0),p=m.fromValues(0,1,0);return function(h,q,g){var e=m.dot(h,q);if(-.9999999>e)return m.cross(c,h,b),1E-6>m.length(b)&&m.cross(p,h,b),m.normalize(b,b),a.setAxisAngle(b,Math.PI,g),g;if(.9999999<e)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;m.cross(h,
q,b);g[0]=b[0];g[1]=b[1];g[2]=b[2];g[3]=1+e;return a.normalize(g,g)}}();a.setAxes=function(){var c=b.create();return function(b,m,h,p){c[0]=m[0];c[3]=m[1];c[6]=m[2];c[1]=h[0];c[4]=h[1];c[7]=h[2];c[2]=-b[0];c[5]=-b[1];c[8]=-b[2];return a.normalize(a.fromMat3(c,p),p)}}();a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=function(a,b,c){b*=.5;var m=Math.sin(b);c[0]=m*a[0];c[1]=m*a[1];c[2]=m*a[2];c[3]=Math.cos(b);
return c};a.add=c.add;a.multiply=function(a,b,c){var m=a[0],h=a[1],g=a[2];a=a[3];var e=b[0],p=b[1],q=b[2];b=b[3];c[0]=m*b+a*e+h*q-g*p;c[1]=h*b+a*p+g*e-m*q;c[2]=g*b+a*q+m*p-h*e;c[3]=a*b-m*e-h*p-g*q;return c};a.mul=a.multiply;a.scale=c.scale;a.rotateX=function(a,b,c){b*=.5;var m=a[0],h=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=m*b+a*e;c[1]=h*b+g*e;c[2]=g*b-h*e;c[3]=a*b-m*e;return c};a.rotateY=function(a,b,c){b*=.5;var m=a[0],h=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=m*
b-g*e;c[1]=h*b+a*e;c[2]=g*b+m*e;c[3]=a*b-h*e;return c};a.rotateZ=function(a,b,c){b*=.5;var m=a[0],h=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=m*b+h*e;c[1]=h*b-m*e;c[2]=g*b+a*e;c[3]=a*b-g*e;return c};a.calculateW=function(a,b){var c=a[0],m=a[1],h=a[2];b[0]=c;b[1]=m;b[2]=h;b[3]=Math.sqrt(Math.abs(1-c*c-m*m-h*h));return b};a.dot=c.dot;a.lerp=c.lerp;a.slerp=function(a,b,c,m){var h=a[0],g=a[1],e=a[2];a=a[3];var p=b[0],q=b[1],w=b[2];b=b[3];var J,L,l;L=h*p+g*q+e*w+a*b;0>L&&(L=-L,p=-p,q=-q,
w=-w,b=-b);1E-6<1-L?(J=Math.acos(L),l=Math.sin(J),L=Math.sin((1-c)*J)/l,c=Math.sin(c*J)/l):L=1-c;m[0]=L*h+c*p;m[1]=L*g+c*q;m[2]=L*e+c*w;m[3]=L*a+c*b;return m};a.$da=function(){var b=a.create(),c=a.create();return function(m,h,p,g,e,y){a.slerp(m,g,e,b);a.slerp(h,p,e,c);a.slerp(b,c,2*e*(1-e),y);return y}}();a.invert=function(a,b){var c=a[0],m=a[1],h=a[2],g=a[3],e=c*c+m*m+h*h+g*g,e=e?1/e:0;b[0]=-c*e;b[1]=-m*e;b[2]=-h*e;b[3]=g*e;return b};a.conjugate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=
a[3];return b};a.length=c.length;a.len=a.length;a.squaredLength=c.squaredLength;a.sqrLen=a.squaredLength;a.normalize=c.normalize;a.fromMat3=function(a,b){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var m=0;a[4]>a[0]&&(m=1);a[8]>a[3*m+m]&&(m=2);var h=(m+1)%3,g=(m+2)%3,c=Math.sqrt(a[3*m+m]-a[3*h+h]-a[3*g+g]+1);b[m]=.5*c;c=.5/c;b[3]=(a[3*h+g]-a[3*g+h])*c;b[h]=(a[3*h+m]+a[3*m+h])*c;b[g]=(a[3*g+m]+a[3*m+g])*c}return b};a.str=
function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.quat=b4w.module.__quat;
b4w.module.__mat3=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new u(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat4=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c};a.clone=function(a){var c=new u(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.copy=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=
a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],m=a[2],h=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=m;c[7]=h}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c};a.invert=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=a[4],w=a[5],A=a[6],g=a[7],e=a[8],y=e*q-w*g,x=-e*G+w*A,P=
g*G-q*A,J=b*y+m*x+h*P;if(!J)return null;J=1/J;c[0]=y*J;c[1]=(-e*m+h*g)*J;c[2]=(w*m-h*q)*J;c[3]=x*J;c[4]=(e*b-h*A)*J;c[5]=(-w*b+h*G)*J;c[6]=P*J;c[7]=(-g*b+m*A)*J;c[8]=(q*b-m*G)*J;return c};a.adjoint=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=a[4],w=a[5],A=a[6],g=a[7],e=a[8];c[0]=q*e-w*g;c[1]=h*g-m*e;c[2]=m*w-h*q;c[3]=w*A-G*e;c[4]=b*e-h*A;c[5]=h*G-b*w;c[6]=G*g-q*A;c[7]=m*A-b*g;c[8]=b*q-m*G;return c};a.determinant=function(a){var c=a[3],b=a[4],m=a[5],h=a[6],G=a[7],q=a[8];return a[0]*(q*b-m*G)+a[1]*
(-q*c+m*h)+a[2]*(G*c-b*h)};a.multiply=function(a,c,b){var m=a[0],h=a[1],G=a[2],q=a[3],w=a[4],A=a[5],g=a[6],e=a[7];a=a[8];var y=c[0],x=c[1],P=c[2],J=c[3],L=c[4],l=c[5],I=c[6],v=c[7];c=c[8];b[0]=y*m+x*q+P*g;b[1]=y*h+x*w+P*e;b[2]=y*G+x*A+P*a;b[3]=J*m+L*q+l*g;b[4]=J*h+L*w+l*e;b[5]=J*G+L*A+l*a;b[6]=I*m+v*q+c*g;b[7]=I*h+v*w+c*e;b[8]=I*G+v*A+c*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var m=a[0],h=a[1],G=a[2],q=a[3],w=a[4],A=a[5],g=a[6],e=a[7];a=a[8];var y=c[0];c=c[1];b[0]=m;b[1]=h;b[2]=G;
b[3]=q;b[4]=w;b[5]=A;b[6]=y*m+c*q+g;b[7]=y*h+c*w+e;b[8]=y*G+c*A+a;return b};a.rotate=function(a,c,b){var m=a[0],h=a[1],G=a[2],q=a[3],w=a[4],A=a[5],g=a[6],e=a[7];a=a[8];var y=Math.sin(c);c=Math.cos(c);b[0]=c*m+y*q;b[1]=c*h+y*w;b[2]=c*G+y*A;b[3]=c*q-y*m;b[4]=c*w-y*h;b[5]=c*A-y*G;b[6]=g;b[7]=e;b[8]=a;return b};a.scale=function(a,c,b){var m=c[0];c=c[1];b[0]=m*a[0];b[1]=m*a[1];b[2]=m*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.NZ=function(a,c){c[0]=1;c[1]=0;c[2]=
0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};a.LZ=function(a,c){var b=Math.sin(a),m=Math.cos(a);c[0]=m;c[1]=b;c[2]=0;c[3]=-b;c[4]=m;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.MZ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.fromMat2d=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};a.fromQuat=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=b+b,w=m+m,A=h+h,b=b*q,g=m*q,m=m*w,e=h*q,y=
h*w,h=h*A,q=G*q,w=G*w,G=G*A;c[0]=1-m-h;c[3]=g-G;c[6]=e+w;c[1]=g+G;c[4]=1-b-h;c[7]=y-q;c[2]=e-w;c[5]=y+q;c[8]=1-b-m;return c};a.normalFromMat4=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=a[4],w=a[5],A=a[6],g=a[7],e=a[8],y=a[9],x=a[10],P=a[11],J=a[12],L=a[13],l=a[14],I=a[15],v=b*w-m*q,K=b*A-h*q,k=b*g-G*q,D=m*A-h*w,M=m*g-G*w,E=h*g-G*A,u=e*L-y*J,F=e*l-x*J,e=e*I-P*J,z=y*l-x*L,y=y*I-P*L,x=x*I-P*l,P=v*x-K*y+k*z+D*e-M*F+E*u;if(!P)return null;P=1/P;c[0]=(w*x-A*y+g*z)*P;c[1]=(A*e-q*x-g*F)*P;c[2]=(q*y-w*
e+g*u)*P;c[3]=(h*y-m*x-G*z)*P;c[4]=(b*x-h*e+G*F)*P;c[5]=(m*e-b*y-G*u)*P;c[6]=(L*E-l*M+I*D)*P;c[7]=(l*k-J*E-I*K)*P;c[8]=(J*M-L*k+I*v)*P;return c};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.KZ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}};b4w.module.mat3=b4w.module.__mat3;
b4w.module.__mat4=function(a){var u="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new u(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.clone=function(a){var c=new u(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.copy=function(a,c){c[0]=a[0];
c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],m=a[2],h=a[3],G=a[6],q=a[7],w=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=b;c[6]=a[9];c[7]=a[13];c[8]=m;c[9]=G;c[11]=a[14];c[12]=h;c[13]=
q;c[14]=w}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],c[14]=a[11],c[15]=a[15];return c};a.invert=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=a[4],w=a[5],A=a[6],g=a[7],e=a[8],y=a[9],x=a[10],P=a[11],J=a[12],L=a[13],l=a[14],I=a[15],v=b*w-m*q,K=b*A-h*q,k=b*g-G*q,D=m*A-h*w,M=m*g-G*w,E=h*g-G*A,u=e*L-y*J,F=e*l-x*J,z=e*I-P*J,C=y*l-x*L,r=y*I-P*L,f=x*I-P*l,W=v*f-K*r+k*C+D*z-M*F+E*u;if(!W)return null;
W=1/W;c[0]=(w*f-A*r+g*C)*W;c[1]=(h*r-m*f-G*C)*W;c[2]=(L*E-l*M+I*D)*W;c[3]=(x*M-y*E-P*D)*W;c[4]=(A*z-q*f-g*F)*W;c[5]=(b*f-h*z+G*F)*W;c[6]=(l*k-J*E-I*K)*W;c[7]=(e*E-x*k+P*K)*W;c[8]=(q*r-w*z+g*u)*W;c[9]=(m*z-b*r-G*u)*W;c[10]=(J*M-L*k+I*v)*W;c[11]=(y*k-e*M-P*v)*W;c[12]=(w*F-q*C-A*u)*W;c[13]=(b*C-m*F+h*u)*W;c[14]=(L*K-J*D-l*v)*W;c[15]=(e*D-y*K+x*v)*W;return c};a.adjoint=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=a[4],w=a[5],A=a[6],g=a[7],e=a[8],y=a[9],x=a[10],P=a[11],J=a[12],L=a[13],l=a[14],I=a[15];
c[0]=w*(x*I-P*l)-y*(A*I-g*l)+L*(A*P-g*x);c[1]=-(m*(x*I-P*l)-y*(h*I-G*l)+L*(h*P-G*x));c[2]=m*(A*I-g*l)-w*(h*I-G*l)+L*(h*g-G*A);c[3]=-(m*(A*P-g*x)-w*(h*P-G*x)+y*(h*g-G*A));c[4]=-(q*(x*I-P*l)-e*(A*I-g*l)+J*(A*P-g*x));c[5]=b*(x*I-P*l)-e*(h*I-G*l)+J*(h*P-G*x);c[6]=-(b*(A*I-g*l)-q*(h*I-G*l)+J*(h*g-G*A));c[7]=b*(A*P-g*x)-q*(h*P-G*x)+e*(h*g-G*A);c[8]=q*(y*I-P*L)-e*(w*I-g*L)+J*(w*P-g*y);c[9]=-(b*(y*I-P*L)-e*(m*I-G*L)+J*(m*P-G*y));c[10]=b*(w*I-g*L)-q*(m*I-G*L)+J*(m*g-G*w);c[11]=-(b*(w*P-g*y)-q*(m*P-G*y)+e*
(m*g-G*w));c[12]=-(q*(y*l-x*L)-e*(w*l-A*L)+J*(w*x-A*y));c[13]=b*(y*l-x*L)-e*(m*l-h*L)+J*(m*x-h*y);c[14]=-(b*(w*l-A*L)-q*(m*l-h*L)+J*(m*A-h*w));c[15]=b*(w*x-A*y)-q*(m*x-h*y)+e*(m*A-h*w);return c};a.determinant=function(a){var c=a[0],b=a[1],m=a[2],h=a[3],G=a[4],q=a[5],w=a[6],A=a[7],g=a[8],e=a[9],y=a[10],x=a[11],P=a[12],J=a[13],L=a[14];a=a[15];return(c*q-b*G)*(y*a-x*L)-(c*w-m*G)*(e*a-x*J)+(c*A-h*G)*(e*L-y*J)+(b*w-m*q)*(g*a-x*P)-(b*A-h*q)*(g*L-y*P)+(m*A-h*w)*(g*J-e*P)};a.multiply=function(a,c,b){var m=
a[0],h=a[1],G=a[2],q=a[3],w=a[4],A=a[5],g=a[6],e=a[7],y=a[8],x=a[9],P=a[10],J=a[11],L=a[12],l=a[13],I=a[14];a=a[15];var v=c[0],K=c[1],k=c[2],D=c[3];b[0]=v*m+K*w+k*y+D*L;b[1]=v*h+K*A+k*x+D*l;b[2]=v*G+K*g+k*P+D*I;b[3]=v*q+K*e+k*J+D*a;v=c[4];K=c[5];k=c[6];D=c[7];b[4]=v*m+K*w+k*y+D*L;b[5]=v*h+K*A+k*x+D*l;b[6]=v*G+K*g+k*P+D*I;b[7]=v*q+K*e+k*J+D*a;v=c[8];K=c[9];k=c[10];D=c[11];b[8]=v*m+K*w+k*y+D*L;b[9]=v*h+K*A+k*x+D*l;b[10]=v*G+K*g+k*P+D*I;b[11]=v*q+K*e+k*J+D*a;v=c[12];K=c[13];k=c[14];D=c[15];b[12]=v*m+
K*w+k*y+D*L;b[13]=v*h+K*A+k*x+D*l;b[14]=v*G+K*g+k*P+D*I;b[15]=v*q+K*e+k*J+D*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var m=c[0],h=c[1];c=c[2];var G,q,w,A,g,e,y,x,P,J,L,l;a===b?(b[12]=a[0]*m+a[4]*h+a[8]*c+a[12],b[13]=a[1]*m+a[5]*h+a[9]*c+a[13],b[14]=a[2]*m+a[6]*h+a[10]*c+a[14],b[15]=a[3]*m+a[7]*h+a[11]*c+a[15]):(G=a[0],q=a[1],w=a[2],A=a[3],g=a[4],e=a[5],y=a[6],x=a[7],P=a[8],J=a[9],L=a[10],l=a[11],b[0]=G,b[1]=q,b[2]=w,b[3]=A,b[4]=g,b[5]=e,b[6]=y,b[7]=x,b[8]=P,b[9]=J,b[10]=L,b[11]=l,
b[12]=G*m+g*h+P*c+a[12],b[13]=q*m+e*h+J*c+a[13],b[14]=w*m+y*h+L*c+a[14],b[15]=A*m+x*h+l*c+a[15]);return b};a.scale=function(a,c,b){var m=c[0],h=c[1];c=c[2];b[0]=a[0]*m;b[1]=a[1]*m;b[2]=a[2]*m;b[3]=a[3]*m;b[4]=a[4]*h;b[5]=a[5]*h;b[6]=a[6]*h;b[7]=a[7]*h;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.rotate=function(a,c,b,p){var h=b[0],m=b[1];b=b[2];var q=Math.sqrt(h*h+m*m+b*b),w,A,g,e,y,x,P,J,L,l,I,v,K,k,D,M,E,u,F,z;if(1E-7>Math.abs(q))return null;
q=1/q;h*=q;m*=q;b*=q;w=Math.sin(c);A=Math.cos(c);g=1-A;c=a[0];q=a[1];e=a[2];y=a[3];x=a[4];P=a[5];J=a[6];L=a[7];l=a[8];I=a[9];v=a[10];K=a[11];k=h*h*g+A;D=m*h*g+b*w;M=b*h*g-m*w;E=h*m*g-b*w;u=m*m*g+A;F=b*m*g+h*w;z=h*b*g+m*w;h=m*b*g-h*w;m=b*b*g+A;p[0]=c*k+x*D+l*M;p[1]=q*k+P*D+I*M;p[2]=e*k+J*D+v*M;p[3]=y*k+L*D+K*M;p[4]=c*E+x*u+l*F;p[5]=q*E+P*u+I*F;p[6]=e*E+J*u+v*F;p[7]=y*E+L*u+K*F;p[8]=c*z+x*h+l*m;p[9]=q*z+P*h+I*m;p[10]=e*z+J*h+v*m;p[11]=y*z+L*h+K*m;a!==p&&(p[12]=a[12],p[13]=a[13],p[14]=a[14],p[15]=a[15]);
return p};a.rotateX=function(a,c,b){var m=Math.sin(c);c=Math.cos(c);var h=a[4],G=a[5],q=a[6],w=a[7],A=a[8],g=a[9],e=a[10],y=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=h*c+A*m;b[5]=G*c+g*m;b[6]=q*c+e*m;b[7]=w*c+y*m;b[8]=A*c-h*m;b[9]=g*c-G*m;b[10]=e*c-q*m;b[11]=y*c-w*m;return b};a.rotateY=function(a,c,b){var m=Math.sin(c);c=Math.cos(c);var h=a[0],G=a[1],q=a[2],w=a[3],A=a[8],g=a[9],e=a[10],y=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=h*c-A*m;b[1]=G*c-g*m;b[2]=q*c-e*m;b[3]=w*c-y*m;b[8]=h*m+A*c;b[9]=G*m+g*c;b[10]=q*m+e*c;b[11]=w*m+y*c;return b};a.rotateZ=function(a,c,b){var m=Math.sin(c);c=Math.cos(c);var h=a[0],G=a[1],q=a[2],w=a[3],A=a[4],g=a[5],e=a[6],y=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=h*c+A*m;b[1]=G*c+g*m;b[2]=q*c+e*m;b[3]=w*c+y*m;b[4]=A*c-h*m;b[5]=g*c-G*m;b[6]=e*c-q*m;b[7]=y*c-w*m;return b};
a.NZ=function(a,c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};a.MZ=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=a[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=a[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.LZ=function(a,c,b){var m=c[0],h=c[1];c=c[2];var G=Math.sqrt(m*m+h*h+c*c),q;if(1E-7>Math.abs(G))return null;G=1/G;m*=G;h*=G;c*=G;G=Math.sin(a);a=Math.cos(a);q=1-a;b[0]=m*m*q+a;b[1]=h*m*q+c*
G;b[2]=c*m*q-h*G;b[3]=0;b[4]=m*h*q-c*G;b[5]=h*h*q+a;b[6]=c*h*q+m*G;b[7]=0;b[8]=m*c*q+h*G;b[9]=h*c*q-m*G;b[10]=c*c*q+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.T$=function(a,c){var b=Math.sin(a),m=Math.cos(a);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=b;c[7]=0;c[8]=0;c[9]=-b;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.U$=function(a,c){var b=Math.sin(a),m=Math.cos(a);c[0]=m;c[1]=0;c[2]=-b;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=b;c[9]=0;c[10]=m;c[11]=0;c[12]=0;c[13]=0;
c[14]=0;c[15]=1;return c};a.V$=function(a,c){var b=Math.sin(a),m=Math.cos(a);c[0]=m;c[1]=b;c[2]=0;c[3]=0;c[4]=-b;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.fromRotationTranslation=function(a,c,b){var m=a[0],h=a[1],G=a[2],q=a[3],w=m+m,A=h+h,g=G+G;a=m*w;var e=m*A,m=m*g,y=h*A,h=h*g,G=G*g,w=q*w,A=q*A,q=q*g;b[0]=1-(y+G);b[1]=e+q;b[2]=m-A;b[3]=0;b[4]=e-q;b[5]=1-(a+G);b[6]=h+w;b[7]=0;b[8]=m+A;b[9]=h-w;b[10]=1-(a+y);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};a.R$=function(a,c,b,p){var h=a[0],m=a[1],q=a[2],w=a[3],A=h+h,g=m+m,e=q+q;a=h*A;var y=h*g,h=h*e,x=m*g,m=m*e,q=q*e,A=w*A,g=w*g,w=w*e,e=b[0],P=b[1];b=b[2];p[0]=(1-(x+q))*e;p[1]=(y+w)*e;p[2]=(h-g)*e;p[3]=0;p[4]=(y-w)*P;p[5]=(1-(a+q))*P;p[6]=(m+A)*P;p[7]=0;p[8]=(h+g)*b;p[9]=(m-A)*b;p[10]=(1-(a+x))*b;p[11]=0;p[12]=c[0];p[13]=c[1];p[14]=c[2];p[15]=1;return p};a.S$=function(a,c,b,p,h){var m=a[0],q=a[1],w=a[2],A=a[3],g=m+m,e=q+q,y=w+w;a=m*g;var x=m*e,m=m*y,P=q*e,q=q*y,w=w*y,g=A*g,e=A*e,A=
A*y,y=b[0],J=b[1];b=b[2];var L=p[0],l=p[1];p=p[2];h[0]=(1-(P+w))*y;h[1]=(x+A)*y;h[2]=(m-e)*y;h[3]=0;h[4]=(x-A)*J;h[5]=(1-(a+w))*J;h[6]=(q+g)*J;h[7]=0;h[8]=(m+e)*b;h[9]=(q-g)*b;h[10]=(1-(a+P))*b;h[11]=0;h[12]=c[0]+L-(h[0]*L+h[4]*l+h[8]*p);h[13]=c[1]+l-(h[1]*L+h[5]*l+h[9]*p);h[14]=c[2]+p-(h[2]*L+h[6]*l+h[10]*p);h[15]=1;return h};a.fromQuat=function(a,c){var b=a[0],m=a[1],h=a[2],G=a[3],q=b+b,w=m+m,A=h+h,b=b*q,g=m*q,m=m*w,e=h*q,y=h*w,h=h*A,q=G*q,w=G*w,G=G*A;c[0]=1-m-h;c[1]=g+G;c[2]=e-w;c[3]=0;c[4]=g-
G;c[5]=1-b-h;c[6]=y+q;c[7]=0;c[8]=e+w;c[9]=y-q;c[10]=1-b-m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.frustum=function(a,c,b,p,h,G,q){var m=1/(c-a),A=1/(p-b),g=1/(h-G);q[0]=2*h*m;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=2*h*A;q[6]=0;q[7]=0;q[8]=(c+a)*m;q[9]=(p+b)*A;q[10]=(G+h)*g;q[11]=-1;q[12]=0;q[13]=0;q[14]=G*h*2*g;q[15]=0;return q};a.perspective=function(a,c,b,p,h){a=1/Math.tan(a/2);var m=1/(b-p);h[0]=a/c;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=a;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=(p+b)*m;h[11]=-1;h[12]=
0;h[13]=0;h[14]=2*p*b*m;h[15]=0;return h};a.Gca=function(a,c,b,p){var h=Math.tan(a.upDegrees*Math.PI/180),m=Math.tan(a.downDegrees*Math.PI/180),q=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var w=2/(q+a),A=2/(h+m);p[0]=w;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=A;p[6]=0;p[7]=0;p[8]=-((q-a)*w*.5);p[9]=(h-m)*A*.5;p[10]=b/(c-b);p[11]=-1;p[12]=0;p[13]=0;p[14]=b*c/(c-b);p[15]=0;return p};a.ortho=function(a,c,b,p,h,G,q){var m=1/(a-c),A=1/(b-p),g=1/(h-G);q[0]=-2*m;q[1]=0;q[2]=0;q[3]=
0;q[4]=0;q[5]=-2*A;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=2*g;q[11]=0;q[12]=(a+c)*m;q[13]=(p+b)*A;q[14]=(G+h)*g;q[15]=1;return q};a.lookAt=function(m,c,b,p){var h,G,q,w,A,g,e,y,x=m[0],P=m[1];m=m[2];q=b[0];w=b[1];G=b[2];e=c[0];b=c[1];h=c[2];if(1E-7>Math.abs(x-e)&&1E-7>Math.abs(P-b)&&1E-7>Math.abs(m-h))return a.identity(p);c=x-e;b=P-b;e=m-h;y=1/Math.sqrt(c*c+b*b+e*e);c*=y;b*=y;e*=y;h=w*e-G*b;G=G*c-q*e;q=q*b-w*c;(y=Math.sqrt(h*h+G*G+q*q))?(y=1/y,h*=y,G*=y,q*=y):q=G=h=0;w=b*q-e*G;A=e*h-c*q;g=c*G-b*h;(y=Math.sqrt(w*
w+A*A+g*g))?(y=1/y,w*=y,A*=y,g*=y):g=A=w=0;p[0]=h;p[1]=w;p[2]=c;p[3]=0;p[4]=G;p[5]=A;p[6]=b;p[7]=0;p[8]=q;p[9]=g;p[10]=e;p[11]=0;p[12]=-(h*x+G*P+q*m);p[13]=-(w*x+A*P+g*m);p[14]=-(c*x+b*P+e*m);p[15]=1;return p};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.KZ=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}};b4w.module.mat4=b4w.module.__mat4;b4w.module.__util=function(a,u){function m(a){return 0<a?1:0>a?-1:0}function c(a,b,d){var f=a[0],c=a[1];a=a[2];var e=Math.cos(f/2),N=Math.cos(c/2),g=Math.cos(a/2),n=Math.sin(f/2),c=Math.sin(c/2),t=Math.sin(a/2);if(-1<ta.indexOf(b))var h=Math.cos((f+a)/2),l=Math.sin((f+a)/2),k=Math.cos((f-a)/2),B=Math.sin((f-a)/2),H=Math.cos((a-f)/2),Fa=Math.sin((a-f)/2);switch(b){case 0:d[0]=N*l;d[1]=c*k;d[2]=c*B;d[3]=N*h;break;case 1:d[0]=c*B;d[1]=N*l;d[2]=c*k;d[3]=N*h;break;case 2:d[0]=c*k;d[1]=c*B;d[2]=N*l;d[3]=
N*h;break;case 3:d[0]=N*l;d[1]=c*Fa;d[2]=c*H;d[3]=N*h;break;case 4:d[0]=c*H;d[1]=N*l;d[2]=c*Fa;d[3]=N*h;break;case 5:d[0]=c*Fa;d[1]=c*H;d[2]=N*l;d[3]=N*h;break;case 6:d[0]=n*N*g+e*c*t;d[1]=e*c*g-n*N*t;d[2]=e*N*t+n*c*g;d[3]=e*N*g-n*c*t;break;case 7:d[0]=e*N*t+n*c*g;d[1]=n*N*g+e*c*t;d[2]=e*c*g-n*N*t;d[3]=e*N*g-n*c*t;break;case 8:d[0]=e*c*g-n*N*t;d[1]=e*N*t+n*c*g;d[2]=n*N*g+e*c*t;d[3]=e*N*g-n*c*t;break;case 9:d[0]=n*N*g-e*c*t;d[1]=e*N*t-n*c*g;d[2]=e*c*g+n*N*t;d[3]=e*N*g+n*c*t;break;case 10:d[0]=e*c*
g+n*N*t;d[1]=n*N*g-e*c*t;d[2]=e*N*t-n*c*g;d[3]=e*N*g+n*c*t;break;case 11:d[0]=e*N*t-n*c*g,d[1]=e*c*g+n*N*t,d[2]=n*N*g-e*c*t,d[3]=e*N*g+n*c*t}return d}function b(a,b,d){var f=a[0],c=a[1],e=a[2];a=a[3];switch(b){case 0:d[0]=Math.atan2(f*c+e*a,c*a-f*e);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*c-e*a,f*e+c*a);break;case 1:d[0]=Math.atan2(f*a+c*e,e*a-f*c);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(c*e-f*a,f*c+e*a);break;case 2:d[0]=Math.atan2(f*e+c*a,f*a-c*e);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=
Math.atan2(f*e-c*a,f*a+c*e);break;case 3:d[0]=Math.atan2(f*e-c*a,f*c+e*a);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*e+c*a,e*a-f*c);break;case 4:d[0]=Math.atan2(f*c-e*a,f*a+c*e);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(f*c+e*a,f*a-c*e);break;case 5:d[0]=Math.atan2(c*e-f*a,f*e+c*a);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=Math.atan2(f*a+c*e,c*a-f*e);break;case 6:d[0]=Math.atan2(2*(f*a-c*e),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*e+c*a));d[2]=Math.atan2(2*(e*a-f*c),1-2*(c*c+e*e));break;case 7:b=f*c+
e*a;.499999<b?(d[0]=0,d[1]=Math.PI/2,d[2]=2*Math.atan2(f,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=-2*Math.atan2(f,a)):(d[0]=Math.atan2(2*(c*a-f*e),1-2*(c*c+e*e)),d[1]=Math.asin(2*(f*c+e*a)),d[2]=Math.atan2(2*(f*a-c*e),1-2*(f*f+e*e)));break;case 8:d[0]=Math.atan2(2*(e*a-f*c),1-2*(f*f+e*e));d[1]=Math.asin(2*(f*a+c*e));d[2]=Math.atan2(2*(c*a-f*e),1-2*(f*f+c*c));break;case 9:d[0]=Math.atan2(2*(f*a+c*e),1-2*(f*f+e*e));d[1]=Math.asin(2*(e*a-f*c));d[2]=Math.atan2(2*(f*e+c*a),1-2*(c*c+e*e));break;case 10:d[0]=
Math.atan2(2*(f*e+c*a),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*a-c*e));d[2]=Math.atan2(2*(f*c+e*a),1-2*(f*f+e*e));break;case 11:b=c*a-f*e,.499999<b?(d[0]=0,d[1]=Math.PI/2,d[2]=-2*Math.atan2(e,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=2*Math.atan2(e,a)):(d[0]=Math.atan2(2*(f*c+e*a),1-2*(c*c+e*e)),d[1]=Math.asin(2*(c*a-f*e)),d[2]=Math.atan2(2*(f*a+c*e),1-2*(f*f+c*c)))}return d}function p(a,b){var d=Math.cos(a[0]),f=Math.cos(a[1]),c=Math.cos(a[2]),e=Math.sin(a[0]),N=Math.sin(a[1]),g=Math.sin(a[2]),n=d*
c,t=d*g,h=e*c,l=e*g;b[0]=f*c;b[1]=f*g;b[2]=-N;b[3]=N*h-t;b[4]=N*l+n;b[5]=f*e;b[6]=N*n+l;b[7]=N*t-h;b[8]=f*d;return b}function h(a,b,f){f||(f=new Float32Array(3));d.transformQuat(b,a,f);return f}function G(a,b){b||(b=new Float32Array(4));S.fromMat4(a,ea);var d=ea[0],f=ea[3],c=ea[6],e=ea[1],N=ea[4],g=ea[7],n=ea[2],t=ea[5],h=ea[8],d=Math.sqrt(d*d+f*f+c*c)||1,e=Math.sqrt(e*e+N*N+g*g)||1,n=Math.sqrt(n*n+t*t+h*h)||1;ea[0]/=d;ea[3]/=d;ea[6]/=d;ea[1]/=e;ea[4]/=e;ea[7]/=e;ea[2]/=n;ea[5]/=n;ea[8]/=n;W.fromMat3(ea,
b);W.normalize(b,b);return b}function q(a){var b=a[0],d=a[1],f=a[2],c=a[3],e=Math.sqrt(b*b+d*d+f*f),e=1/e;a[0]=b*e;a[1]=d*e;a[2]=f*e;a[3]=c*e}function w(a,b){var d=b;switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var f in a)d=w(a[f],d);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(f=0;f<a.length;f++)d=A(a[f],d);break;case Array:for(f=0;f<a.length;f++)d=
w(a[f],d);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:d=A(0,d);break;default:l("Wrong object constructor:",a.constructor)}else d=A(0,d);return d;case "number":return A(a,d);case "boolean":return A(a|0,d);case "string":return g(a,d);case "function":case "undefined":return A(0,d)}}function A(a,b){var d=b;aa[0]=a;d=(d<<5)-d+ja[0];d&=d;d=(d<<5)-d+ja[1];return d&d}function g(a,b){for(var d=b,f=0;f<a.length;f++)d=
(d<<5)-d+a.charCodeAt(f),d&=d;return d}function e(a){return(34*a+1)*a%289}function y(a){return a-Math.floor(a)}function x(a){return P((34*a+5)*a)}function P(a){return a-289*Math.floor(a/289)}function J(a){return a-7*Math.floor(a/7)}function L(a,b,d){a<b&&(a=b);a>d&&(a=d);return a}function l(a){a&&C.error.apply(C,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function I(a,b,d){a-=b;d-=b;return b+(a-Math.floor(a/d)*d)}function v(a){return I(a,0,2*Math.PI)}function K(a,b){if(a&&b){var d=a instanceof Array;if(d!=b instanceof Array)return!1;var f=a.buffer instanceof ArrayBuffer&&"undefined"!==a.byteLength;if(f!=(b.buffer instanceof ArrayBuffer&&"undefined"!==b.byteLength))return!1;if(d){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(!k(a[d],b[d]))return!1}else if(f){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(a[d]!=b[d])return!1}else{switch(a.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return a==
b}for(var c in a)if(!k(a[c],b[c]))return!1;for(c in b)if(!(c in a))return!1}return!0}return!(a||b)}function k(a,b){if(typeof a!=typeof b)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==b;case "object":return K(a,b);default:return!0}}function D(a,b,f){var c=t,e=d.dot(a,b);-.9999999>e?(d.cross(Q,a,c),1E-6>d.length(c)&&d.cross(xa,a,c),d.normalize(c,c),W.setAxisAngle(c,Math.PI,f)):(d.cross(a,b,c),f.set(c),f[3]=1+e,W.normalize(f,f));return f}function M(a){if(""==a)return".";
var b=0==a.indexOf("/")|0;b&&0==a.indexOf("//")&&0!=a.indexOf("///")&&(b=2);a=a.split("/");for(var d=[],f=0;f<a.length;f++){var c=a[f];""!=c&&"."!=c&&(".."!=c||!b&&!d.length||d.length&&".."==d[d.length-1]?d.push(c):d.length&&d.pop())}a=d.join("/");for(f=0;f<b;f++)a="/"+a;return a||"."}function E(a,b,f){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<c?(b[0]=Math.atan2(a[5],a[8]),b[1]=Math.atan2(-a[2],c),b[2]=Math.atan2(a[1],a[0]),f[0]=Math.atan2(-a[5],-a[8]),f[1]=Math.atan2(-a[2],-c),f[2]=Math.atan2(-a[1],
-a[0])):(b[0]=Math.atan2(-a[7],a[4]),b[1]=Math.atan2(-a[2],c),b[2]=0,d.copy(b,f))}var S=u("__mat3"),F=u("__mat4"),z=u("__math"),C=u("__print"),r=u("__tbn"),f=u("__tsr"),W=u("__quat"),d=u("__vec3"),n=u("__vec4"),X=0,R={},t=new Float32Array(3),fa=new Float32Array(3),la=new Float32Array(3),H=new Float32Array(3),za=new Float32Array(3),ha=new Float32Array(3),ua=new Float32Array(3),ga=new Float32Array(3),B=new Float32Array(4),Z=new Float32Array(4),ea=new Float32Array(9),Aa=new Float32Array(9),da=new Float32Array(9),
ba=new Float32Array(16),wa=new Float32Array(16),T=W.create(),ma=W.create(),aa=new Float64Array(1),ja=new Uint32Array(aa.buffer),ca=new Float32Array([0,0,0,1]),oa=new Float32Array([0,0,0,1,0,0,0,1]),pa=new Float32Array([1,1,1]),Q=new Float32Array([1,0,0]),xa=new Float32Array([0,1,0]),na=new Float32Array([0,0,1]),O=new Float32Array([-1,0,0]),Oa=new Float32Array([0,-1,0]),Na=new Float32Array([0,0,-1]),ta=[0,1,2,4,5],Y=Math.floor(44488.07041494893),ia=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,
0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])];a.TD=new Float32Array([0,0,0]);a.ox=ca;a.T7=oa;a.UD=pa;a.Bf=Q;a.Fe=xa;a.fc=na;a.Xs=O;a.Bh=Oa;a.mc=Na;a.WJ=0;a.cK=1;a.dK=2;a.YJ=3;a.$J=4;a.fK=5;a.XJ=6;a.bK=7;a.VD=8;a.ZJ=9;a.aK=10;a.eK=11;a.mT=ia;a.yD=1;a.ut=2;a.xk=4;a.lJ=4;a.Of=
function(a){return"undefined"!=typeof a};a.SO=function(a,b,d){for(var f=[],c=d.length,e=0;e<c;e++){var N=d[e];N[a]==b&&f.push(N)}return f};a.Rh=function(a){return new Float32Array(a)};a.MM=function(a,b){var d=a.length,f=new Float32Array(d+b.length);f.set(a);f.set(b,d);return f};a.G4=function(a,b){var d=a.length,f=new Uint32Array(d+b.length);f.set(a);f.set(b,d);return f};a.$W=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};a.bW=function(a,b){var d=[],f={},c=
b.length,e,N;for(e=0;e<c;e++)f[b[e]]=!0;c=a.length;for(e=0;e<c;e++)N=a[e],N in f&&d.push(N);return d};a.sign=m;a.jca=function(a,b,d){for(var f=d.length,c=0;c<f;c++)if(d[c][a]==b)return!0;return!1};a.Oe=function(a,b,d){for(var f=0;f<d.length;f++){var c=d[f];if(c[a]===b)return c}return null};a.hca=function(a,b,d,f,c){for(var e=0;e<c.length;e++){var N=c[e];if(N[a]==b&&N[d]==f)return N}return null};a.D_=function(a,b){for(var d=0;d<a.length;d++)if(a[d].uuid==b)return d;return-1};a.XV=function(a,b){for(var d=
0;d<a.length;d++)if(a[d]==b)return;a.push(b)};a.r9=function(a){for(var b=0;b<a.length-1;b++)for(var d=a[b],f=b+1;f<a.length;f++)if(d==a[f])return!1;return!0};a.B4=function(a,b,d,f){f||(f=new Float32Array(16));F.identity(f);f[12]=a;f[13]=b;f[14]=d};var ka=1;a.q2=function(){ka=(69069*ka+5)%Math.pow(2,32);return Math.round(ka/65536)%32768/32767};a.j4=function(a){ka=a};a.oi=function(a){var b=a[0]%Y*48271-3399*Math.floor(a[0]/Y);a[0]=0<b?b:b+2147483647;return(a[0]-1)/2147483646};a.fA=function(a,b){b||
(b=[]);b[0]=5E4+Math.floor(a);return b};a.bl=function(a,b){var d=t;d[0]=a[2];d[1]=a[1];d[2]=a[0];c(d,11,b);return b};a.XG=c;a.$P=b;a.mZ=p;a.Hv=function(a,d){var f=b(a,11,t);d[0]=f[2];d[1]=f[1];d[2]=f[0];return d};a.Jc=h;a.hF=function(a,b,f){f||(f=new Float32Array(4));a=d.normalize(a,t);var c=d.dot(b,a);a=d.cross(b,a,fa);c=Math.acos(c);f[0]=a[0]*Math.sin(c/2);f[1]=a[1]*Math.sin(c/2);f[2]=a[2]*Math.sin(c/2);f[3]=Math.cos(c/2);return f};a.C4=function(a,b,f,c){c||(c=new Float32Array(4));d.transformQuat(f,
b,c);c[3]=-d.dot(a,c)};a.SY=function(a){var b=f.ha(a.v.C),c=t;switch(a.type){case "CAMERA":c[0]=0;c[1]=-1;c[2]=0;d.transformQuat(c,b,c);fa[0]=0;fa[1]=0;fa[2]=-1;break;case "MESH":c[0]=0;c[1]=0;c[2]=1;d.transformQuat(c,b,c);fa[0]=0;fa[1]=0;fa[2]=1;break;case "EMPTY":c[0]=0,c[1]=1,c[2]=0,d.transformQuat(c,b,c),fa[0]=0,fa[1]=1,fa[2]=0}c[1]=0;d.normalize(c,c);a=d.dot(c,fa);return Math.acos(a)*(0<-c[0]*fa[2]?-1:1)};a.Sx=function(a,b,d,f){if(0!=d){f=f||[];for(var c=0;c<a.length;c++)f[c]=(1-d)*a[c]+d*b[c]}};
a.jS=function(){X++;return X.toString(10)};a.rw=function(a){R[a]||(R[a]=0);var b=a+R[a];R[a]++;return b};a.Ij=function(){return{a_position:new Float32Array(0),a_tbn:r.create(0)}};a.X=function(b){if(!(b instanceof Object))return b;var d;d=b.constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:d=new d(b);break;case Array:d=new d(b.length);for(var f=0;f<b.length;f++)d[f]=a.X(b[f]);
break;default:for(f in d=new d,b)b.hasOwnProperty(f)&&(d[f]=a.X(b[f]))}return d};a.cu=function(a){var b=a instanceof Array?[]:{},d;for(d in a)if(a.hasOwnProperty(d))if(a[d]instanceof Object){var f=a[d].constructor;switch(f){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:b[d]=new f(a[d]);break;case Array:b[d]=a[d].slice(0);break;default:b[d]=a[d]}}else b[d]=a[d];return b};a.yG=G;a.zG=function(a,
b){b||(b=new Float32Array(3));b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.kP=function(a){B[0]=.577350269189626;B[1]=.577350269189626;B[2]=.577350269189626;B[3]=0;n.transformMat4(B,a,B);return n.length(B)};a.zo=function(a,b){var d=b.left,f=b.right,c=b.top,e=b.bottom,N=b.near,g=b.far;d[0]=a[3]+a[0];d[1]=a[7]+a[4];d[2]=a[11]+a[8];d[3]=a[15]+a[12];f[0]=a[3]-a[0];f[1]=a[7]-a[4];f[2]=a[11]-a[8];f[3]=a[15]-a[12];c[0]=a[3]-a[1];c[1]=a[7]-a[5];c[2]=a[11]-a[9];c[3]=a[15]-a[13];e[0]=a[3]+a[1];e[1]=a[7]+a[5];
e[2]=a[11]+a[9];e[3]=a[15]+a[13];N[0]=a[3]+a[2];N[1]=a[7]+a[6];N[2]=a[11]+a[10];N[3]=a[15]+a[14];g[0]=a[3]-a[2];g[1]=a[7]-a[6];g[2]=a[11]-a[10];g[3]=a[15]-a[14];q(d);q(f);q(c);q(e);q(N);q(g)};a.e4=function(a,b,d){return d<-z.ni(a,b.near)||d<-z.ni(a,b.left)||d<-z.ni(a,b.right)||d<-z.ni(a,b.top)||d<-z.ni(a,b.bottom)||d<-z.ni(a,b.far)?!0:!1};a.gZ=function(a,b,f,c,e){var g=d.dot(f,b.far),N=d.dot(c,b.far),n=d.dot(e,b.far),g=Math.sqrt(g*g+N*N+n*n);if(g<-z.ni(a,b.near)||g<-z.ni(a,b.far))return!0;g=d.dot(f,
b.left);N=d.dot(c,b.left);n=d.dot(e,b.left);if(Math.sqrt(g*g+N*N+n*n)<-z.ni(a,b.left))return!0;g=d.dot(f,b.right);N=d.dot(c,b.right);n=d.dot(e,b.right);if(Math.sqrt(g*g+N*N+n*n)<-z.ni(a,b.right))return!0;g=d.dot(f,b.top);N=d.dot(c,b.top);n=d.dot(e,b.top);if(Math.sqrt(g*g+N*N+n*n)<-z.ni(a,b.top))return!0;g=d.dot(f,b.bottom);N=d.dot(c,b.bottom);n=d.dot(e,b.bottom);return Math.sqrt(g*g+N*N+n*n)<-z.ni(a,b.bottom)?!0:!1};a.Ur=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var g=a[e],n=a[e+
1],t=a[e+2];d[f+e]=b[0]*g+b[4]*n+b[8]*t+b[12];d[f+e+1]=b[1]*g+b[5]*n+b[9]*t+b[13];d[f+e+2]=b[2]*g+b[6]*n+b[10]*t+b[14]}};a.Lea=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var g=a[e],n=a[e+1],t=a[e+2];d[f+e]=b[0]*g+b[4]*n+b[8]*t;d[f+e+1]=b[1]*g+b[5]*n+b[9]*t;d[f+e+2]=b[2]*g+b[6]*n+b[10]*t}return d};a.p2=function(a,b,d,f){f=f||0;for(var c=a.length,e=0;e<c;e+=4){T[0]=a[e];T[1]=a[e+1];T[2]=a[e+2];T[3]=a[e+3];var g=0<T[3];W.multiply(b,T,T);(g&&0>T[3]||!g&&0<T[3])&&n.scale(T,-1,T);d[f+e]=
T[0];d[f+e+1]=T[1];d[f+e+2]=T[2];d[f+e+3]=T[3]}};a.F5=function(a,b,d){d||(d=new Float32Array(3));B[0]=a[0];B[1]=a[1];B[2]=a[2];B[3]=0;n.transformMat4(B,b,B);d[0]=B[0];d[1]=B[1];d[2]=B[2]};a.P$=function(a,b){var d=a.length;d||l("flatten(): Wrong or empty array");var f=a[0].length;f||l("flatten(): Wrong or empty subarray");b||(b=new Float32Array(d*f));for(var c=0;c<d;c++)for(var e=0;e<f;e++)b[c*f+e]=a[c][e];return b};a.G5=function(a){for(var b=[],d=0;d<a.length;d+=3)b[d/3]=new Float32Array([a[d],a[d+
1],a[d+2]]);return b};a.Rx=function(b,d,f,c){if(c<f)return f;var e=f+Math.floor((c-f)/2);return b[e]>d?a.Rx(b,d,f,e-1):b[e]<d?a.Rx(b,d,e+1,c):e};a.qm=function(a,b){for(var d=0;d<a.length;d++)if(a[d]!=b[d])return!1;return!0};a.y9=function(a,b,d){for(var f=0;f<a.length;f++)if(Math.abs(a[f]-b[f])>d)return!1;return!0};a.dda=function(a,b,d){d||(d=new Float32Array(16));for(var f=0;12>f;f++)d[f]=a[f]*b;d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};a.E4=function(a,b,d,f,c){c||(c=new Float32Array(16));
b=F.fromRotationTranslation(d,f,ba);F.multiply(b,a,c);return c};a.Lc=function(a,b,f,c,e){e||(e=new Float32Array(3));f=F.fromRotationTranslation(f,c,ba);1!==b&&(c=F.identity(wa),b=d.set(b,b,b,t),F.scale(c,b,c),F.multiply(f,c,f));d.transformMat4(a,f,e);return e};a.yea=function(a,b,d,f,c){c||(c=new Float32Array(4));b=F.fromRotationTranslation(d,f,ba);n.transformMat4(a,b,c);return c};a.Yba=function(a,b,f,c,e){e||(e=new Float32Array(3));b=F.fromRotationTranslation(f,c,ba);F.invert(b,b);d.transformMat4(a,
b,e);return e};a.xea=function(a,b,d){d||(d=new Float32Array(16));F.fromRotationTranslation(b,a,d);a=a[3];for(b=0;12>b;b++)d[b]*=a;return d};a.rca=function(b,d,f){a.zG(b,d);d[3]=a.kP(b);G(b,f)};a.O8=function(a){for(var b=[],d=0;d<a.length;d++)b.push(a[d]);return JSON.stringify(b)};a.N2=function(a,b,f,c){c||(c=new Float32Array(3));var e=t;d.subtract(b,a,e);d.transformQuat(e,f,e);d.subtract(b,e,c)};a.SZ=function(){var a=t;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),
c=new Float32Array(16),e=new Float32Array(16),g=new Float32Array(16);F.lookAt(a,[-1,0,0],[0,-1,0],b);F.scale(b,[-1,1,1],b);F.scale(b,[-1,1,-1],d);F.lookAt(a,[0,-1,0],[0,0,-1],f);F.scale(f,[1,1,-1],f);F.scale(f,[1,-1,-1],c);F.lookAt(a,[0,0,-1],[0,-1,0],e);F.scale(e,[-1,1,1],e);F.scale(e,[-1,1,-1],g);return[b,d,f,c,e,g]};a.WZ=function(){var a=t;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),c=new Float32Array(16),e=new Float32Array(16),g=new Float32Array(16);
F.lookAt(a,[1,0,0],[0,-1,0],b);F.scale(b,[-1,1,-1],d);F.lookAt(a,[0,1,0],[0,0,1],f);F.scale(f,[1,-1,-1],c);F.lookAt(a,[0,0,1],[0,-1,0],e);F.scale(e,[-1,1,-1],g);return[b,d,f,c,e,g]};a.cL=function(a){return w(a,0)};a.gO=w;a.Aba=g;a.m1=function(a,b){b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b};a.ZP=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=1/Math.sqrt(d),
b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};a.trunc=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};a.cf=function(a){return a*Math.PI/180};a.vB=function(a){return 180*a/Math.PI};a.gI=function(a){var b=.366025403784439*a[0]+.366025403784439*a[1],d=Math.floor(a[0]+b),f=Math.floor(a[1]+b),c=.211324865405187*d+.211324865405187*f,b=a[0]-d+c;a=a[1]-f+c;var g=b>a?1:0,N=1-g,c=b+.211324865405187-g,n=a+.211324865405187-N,t=b+-.577350269189626,h=a+-.577350269189626,
d=d%289,f=f%289,l=Math.max(.5-(b*b+a*a),0),k=Math.max(.5-(c*c+n*n),0),B=Math.max(.5-(t*t+h*h),0),H=2*y(.024390243902439*e(e(f)+d))-1,g=2*y(.024390243902439*e(e(f+N)+d+g))-1,r=2*y(.024390243902439*e(e(f+1)+d+1))-1,d=Math.abs(H)-.5,f=Math.abs(g)-.5,N=Math.abs(r)-.5,H=H-Math.floor(H+.5),g=g-Math.floor(g+.5),r=r-Math.floor(r+.5);return 130*(l*l*l*l*(1.79284291400159-.85373472095314*(H*H+d*d))*(H*b+d*a)+k*k*k*k*(1.79284291400159-.85373472095314*(g*g+f*f))*(g*c+f*n)+B*B*B*B*(1.79284291400159-.85373472095314*
(r*r+N*N))*(r*t+N*h))};a.hL=function(a){var b=1/7,d=b/2,f=P(Math.floor(a[0])),c=P(Math.floor(a[1])),e=y(a[0]);a=y(a[1]);var g=e-.5,n=e-1.5,e=a-.5;a-=1.5;var t=x(f),h=x(f+1),l=t,f=h,t=x(t+c),h=x(h+c),l=x(l+c+1),f=x(f+c+1),c=g+.7*(J(t)*b+d),k=n+.7*(J(h)*b+d),g=g+.7*(J(l)*b+d),n=n+.7*(J(f)*b+d),t=e+.7*(J(Math.floor(t*b))*b+d),e=e+.7*(J(Math.floor(h*b))*b+d),l=a+.7*(J(Math.floor(l*b))*b+d),b=a+.7*(J(Math.floor(f*b))*b+d);return Math.min(c*c+t*t,k*k+e*e,g*g+l*l,n*n+b*b)};a.tB=function(a,b,f,c,e){e||(e=
new Float32Array(4));a=d.transformQuat(b,a,t);b=f[0];var g=f[1];f=f[2];var N=ea;N[0]=g*g+f*f;N[1]=-g*b;N[2]=-f*b;N[3]=-b*g;N[4]=b*b+f*f;N[5]=-f*g;N[6]=-b*f;N[7]=-g*f;N[8]=b*b+g*g;d.transformMat3(a,N,a);d.normalize(a,a);W.rotationTo(c,a,e);return e};a.sE=function(a,b){b||(b=new Float32Array(4));var d,f;d=W.setAxisAngle([0,0,1],Math.PI,W.create());f=W.setAxisAngle([1,0,0],Math.PI/2,W.create());W.multiply(d,f,d);W.multiply(a,d,b);return b};a.Ja=function(){X=0;R={}};a.ja=L;a.Rc=function(a,b,d,f){return f?
(d=Math.exp(-d/f),(1-d)*a+d*b):a};a.mC=function(a,b,f,c,e){e||(e=new Float32Array(a.length));if(c)for(f=Math.exp(-f/c),c=0;c<e.length;c++)e[c]=(1-f)*a[c]+f*b[c];else d.copy(a,e);return e};a.xR=function(a,b,d,f,c){c||(c=new Float32Array(a.length));f?W.slerp(a,b,Math.exp(-d/f),c):W.copy(a,c)};a.iG=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};a.Wi=function(a,b){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(b&&b==a.length||!b)return!0;return!1};
a.KE=function(a,b){var f=S.fromQuat(a,ea),c=t;c[0]=f[6];c[1]=f[7];c[2]=f[8];c=d.cross(na,c,c);d.normalize(c,c);var e=f[4];!b&&0<e&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);fa[0]=f[0];fa[1]=f[1];fa[2]=f[2];d.normalize(fa,fa);W.rotationTo(fa,c,Z);W.multiply(Z,a,a)};a.bN=function(a,b,d,f){d=d*b-.5;f=f*b-.5;var c=d-Math.floor(d),e=f-Math.floor(f);d=Math.floor(d);f=Math.floor(f);var g=b-1;return(a[f*b+d]*(1-c)+a[f*b+Math.min(d+1,g)]*c)*(1-e)+(a[Math.min(f+1,g)*b+d]*(1-c)+a[Math.min(f+1,g)*b+Math.min(d+1,g)]*c)*e};
a.tp=function(a){for(var b=0,d=0;3>d;d++)0<(a&1<<d)&&b++;return b};a.oQ=function(a){for(var b=[0,0,0],d=0;3>d;d++)0<(a&1<<d)&&(b[2-d]=1);return b};a.Xr=function(a,b){var d=0;(1==b||2==b)&&0<(a&4)&&d++;2==b&&0<(a&2)&&d++;return d};a.pz=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};a.kl=function(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b};a.bQ=function(a){return a.length?a[Math.floor(Math.random()*
a.length)]:null};a.lO=function(a,b,f){f||(f=new Float32Array(3));f[0]=a[0]-b[0];f[1]=a[1]-b[1];f[2]=0;d.normalize(f,f)};a.D4=function(a,b,d){var f=a[0],c=a[1];a=a[2];var e=b[0],g=b[1],n=b[2];b=b[3];var t=g*a-n*c,h=n*f-e*a,l=e*c-g*f;d[0]=f+2*t*b+2*(g*l-n*h);d[1]=c+2*h*b+2*(n*t-e*l);d[2]=a+2*l*b+2*(e*h-g*t)};a.assert=function(a){a||l("Assertion failed")};a.J=l;a.Ei=I;a.Ih=v;a.FF=function(a){return/(?:\.([^.]+))?$/.exec(a)[1]};a.n4=function(a,b){for(var d in a){var f=!0,c=a[d],e=b[d];switch(typeof c){case "number":case "string":case "boolean":f=
c==e;break;case "object":f=K(c,e)}if(!f)return!1}return!0};a.oH=function(a,b){var d=a[0],f=a[2],c=a[3];b[0]=a[1];b[1]=f;b[2]=c;b[3]=d};a.SM=function(a){a++;132651<a&&C.error("Color ID pool depleted");var b=Math.floor(a/2601);a%=2601;return new Float32Array([b/51,Math.floor(a/51)/51,a%51/51])};a.X0=function(a,b,f,c){B.set(a);B[3]=b;t[0]=f[3];t[1]=f[4];t[2]=f[5];Z.set(t);Z[3]=0;a=n.dot(B,Z);if(0==a)return null;d.copy(f,t);Z.set(t);Z[3]=1;a=-n.dot(B,Z)/a;c[0]=f[0]+a*f[3];c[1]=f[1]+a*f[4];c[2]=f[2]+a*
f[5];return c};a.L_=function(a,b,d,f){var c=b[0]-a[0],e=d[0]-a[0],g=b[1]-a[1],n=d[1]-a[1];b=b[2]-a[2];a=d[2]-a[2];f[0]=g*a-b*n;f[1]=e*b-c*a;f[2]=c*n-g*e;return f};a.B9=function(a,b){for(var d=0;d<a.length;d++)b[d]=a[d];return b};a.rQ=D;a.ho=function(a,b,d){if(b==d)return d-a;a=v(a);b=v(b);d=v(d);b=2*Math.PI-b;d=v(d+b);a=v(a+b);return a>d?(d-=a,a=2*Math.PI-a,-d>a?a:d):0};a.nn=function(a,b,d){isFinite(b)&&isFinite(d)&&(a=L(a,b,d));return a*a*(3-2*a)};a.lerp=function(a,b,d){return b+a*(d-b)};a.cW=function(a,
b){for(var d=0;d<a.length;d++)for(var f=0;f<b.length;f++)if(b[f]==a[d])return!0;return!1};a.G9=function(a){for(var b=Array(a),d=0;d<a;d++)b[d]=0;return b};a.LS=function(a,b){for(var d=Math.max(a.length,b.length),f=0;f<d;f++){var c=m((f>=a.length?0:a[f])-(f>=b.length?0:b[f]));if(c)return c}return 0};a.En=function(a){return a.join(".")};a.IR=function(a){return a.split(".").map(function(a){return a|0})};a.DR=function(a,b){b[0]=Math.pow(a[0],2.2);b[1]=Math.pow(a[1],2.2);b[2]=Math.pow(a[2],2.2)};a.uG=
function(a,b){b[0]=Math.pow(a[0],1/2.2);b[1]=Math.pow(a[1],1/2.2);b[2]=Math.pow(a[2],1/2.2);return b};a.Bl=function(a){var b=a.split("://",2);return 1<b.length?(b[1]=M(b[1]),b.join("://")):M(a)};a.Zt=function(a){return!!parseInt(a.toString(2).substr(1),2)};a.fZ=function(a,b,d,f){f[0]=a[0];f[1]=b[0];f[2]=d[0];f[3]=a[1];f[4]=b[1];f[5]=d[1];f[6]=a[2];f[7]=b[2];f[8]=d[2];return f};a.vm=function(){var a=[{}];a.length=0;return a};a.Xq=function(a){a=Math.round(32767.5*(a+1)-32768);return L(a?a:0,-32768,
32767)};a.tR=function(a){return L((a+32768)/32767.5-1,-1,1)};a.gS=function(a){return L(Math.round(255*a),0,255)};a.fS=function(a){return L(a/255,0,1)};a.WY=function(a,b,f,c){var e=d.subtract(f,b,t),g=d.subtract(c,f,fa),N=d.subtract(b,c,la);b=d.subtract(a,b,H);f=d.subtract(a,f,za);a=d.subtract(a,c,ha);c=d.cross(e,g,ua);if(0<=d.dot(d.cross(c,e,ga),b)&&0<=d.dot(d.cross(c,g,ga),f)&&0<=d.dot(d.cross(c,N,ga),a))return N=d.length(c),g=d.dot(c,b),Math.abs(g/N);e=d.scale(e,L(d.dot(e,b)/d.length(e),0,1),ga);
b=d.length(d.subtract(b,e,ga));g=d.scale(g,L(d.dot(g,f)/d.length(g),0,1),ga);g=d.length(d.subtract(f,g,ga));N=d.scale(N,L(d.dot(N,a)/d.length(N),0,1),ga);N=d.length(d.subtract(a,N,ga));return Math.min(Math.min(b,g),N)};a.O2=function(a,b,d,f,c){if(d||f){var e=W.identity(T);d&&(b=W.setAxisAngle(b,d,ma),W.multiply(e,b,e));a=W.copy(a,c);f&&(c=h(a,Q,t),f=W.setAxisAngle(c,f,ma),W.normalize(f,f),W.multiply(e,f,e));W.multiply(e,a,a);W.normalize(a,a)}};a.uB=function(a,b,f,c){h(b,c,fa);d.normalize(fa,fa);d.subtract(f,
a,la);d.normalize(la,la);a=D(fa,la,B);W.multiply(a,b,b);W.normalize(b,b)};a.n2=function(a,b,f,c){b=d.transformQuat(b,a,fa);var e=d.dot(c,f);c=d.scale(c,e,la);f=d.subtract(f,c,la);c=W.identity(T);d.normalize(f,f);.999999>Math.abs(d.dot(b,f))&&D(b,f,c);W.normalize(c,c);W.multiply(c,a,a)};a.JL=function(a,b){for(var d=2*Math.PI,f=[],c=0;3>c;c++)f[c]=a[c]-b[c],5.1<f[c]?(a[c]-=f[c]/d*d,f[c]=a[c]-b[c]):-5.1>f[c]&&(a[c]+=-f[c]/d*d,f[c]=a[c]-b[c]);3.2<Math.abs(f[0])&&1.6>Math.abs(f[1])&&1.6>Math.abs(f[2])&&
(a[0]=0<f[0]?a[0]-d:a[0]+d);3.2<Math.abs(f[1])&&1.6>Math.abs(f[2])&&1.6>Math.abs(f[0])&&(a[1]=0<f[1]?a[1]-d:a[1]+d);3.2<Math.abs(f[2])&&1.6>Math.abs(f[0])&&1.6>Math.abs(f[1])&&(a[2]=0<f[2]?a[2]-d:a[2]+d)};a.EH=function(a,b,f){b=p(b,ea);a=p(a,Aa);a=S.multiply(a,b,da);b=t;E(a,b,fa);d.copy(Math.abs(b[0])+Math.abs(b[1])+Math.abs(b[2])>Math.abs(fa[0])+Math.abs(fa[1])+Math.abs(fa[2])?fa:b,f)};a.o2=function(a,b,f){a=S.fromQuat(a,ea);var c=t;E(a,c,fa);d.copy(Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1])+Math.abs(c[2]-
b[2])>Math.abs(fa[0]-b[0])+Math.abs(fa[1]-b[1])+Math.abs(fa[2]-b[2])?fa:c,f);return f}};b4w.module.__math=function(a,u){function m(a,b){for(var c=a[1],e=1,g=2;g<a.length;g++)4!=g&&8!=g&&Math.abs(a[g])>Math.abs(c)&&(c=a[g],e=g);for(var h=Math.floor(e/3),e=e%3,c=.5*Math.atan(2*c/(a[3*h+h]-a[3*e+e])),g=0;g<b.length;g++)b[g]=g&&4!=g&&8!=g?0:1;b[e+3*h]=-Math.sin(c);b[h+3*e]=Math.sin(c);b[h+3*h]=Math.cos(c);b[e+3*e]=Math.cos(c);return b}function c(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function b(a,b){for(var c=a.content[b];0<b;){var e=(b+1>>1)-1,g=a.content[e];if(a.vp(c)<a.vp(g))a.content[e]=
c,a.content[b]=g,b=e;else break}}function p(a,b){for(var c=a.content.length,e=a.content[b],g=a.vp(e);;){var h=b+1<<1,y=h-1,k=null;if(y<c){var q=a.vp(a.content[y]);q<g&&(k=y)}h<c&&a.vp(a.content[h])<(null===k?g:q)&&(k=h);if(null!==k)a.content[b]=a.content[k],a.content[k]=e,b=k;else break}}function h(a,b,c,e){return c-G(e-a,0,c,e)+b}function G(a,b,c,e){return(a/=e)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*
a+.984375)+b}var q=u("__mat3"),w=u("__vec3"),A=new Float32Array(3),g=new Float32Array(9),e=new Float32Array(9),y=new Float32Array(9),x=new Float32Array(9);a.Paa=function(a,b){b=b||new Float32Array(3);b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.Qaa=function(a,b){b=b||new Float32Array(3);return w.copy(a,b)};a.dR=function(a,b){w.copy(b,a)};a.SH=function(a,b){w.normalize(b,A);a[3]=A[0];a[4]=A[1];a[5]=A[2]};a.b9=function(a,b,c){c=c||new Float32Array(3);c[0]=a[0]+a[3]*b;c[1]=a[1]+a[4]*b;c[2]=a[2]+a[5]*b;
return c};a.KW=function(a,b){b[0]=0;b[1]=0;for(var c=b[2]=0;c<a.length;c+=3)b[0]+=a[c],b[1]+=a[c+1],b[2]+=a[c+2];return w.scale(b,3/a.length,b)};a.FW=function(a,b,c){for(var e=0;e<c.length;e++)c[e]=0;for(e=0;e<a.length;e+=3){var g=a[e]-b[0],h=a[e+1]-b[1],y=a[e+2]-b[2];c[0]+=g*g;c[1]+=g*h;c[2]+=g*y;c[4]+=h*h;c[5]+=h*y;c[8]+=y*y}c[3]=c[1];c[6]=c[2];c[7]=c[5];for(e=0;e<c.length;e++)c[e]*=3/a.length;return c};a.CZ=function(a,b){var h=q.copy(a,g);if(5E-4>c(h))return q.identity(b);var l=m(h,e),w=q.transpose(l,
y);q.multiply(h,w,x);q.multiply(l,x,h);for(var v=q.copy(l,b),p=1;5E-4<=c(h)&&100>p;)l=m(h,e),w=q.transpose(l,y),q.multiply(h,w,x),q.multiply(l,x,h),q.multiply(l,v,v),p++;return v};a.ni=function(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]};a.pW=function(a){return{content:[],vp:a}};a.TK=function(a,c){a.content.push(c);b(a,a.content.length-1)};a.qW=function(a){var b=a.content[0],c=a.content.pop();0<a.content.length&&(a.content[0]=c,p(a,0));return b};a.Z8=function(a,c){var e=a.content.indexOf(c),g=
a.content.pop();e!==a.content.length-1&&(a.content[e]=g,a.vp(g)<a.vp(c)?b(e):p(e))};a.rW=function(a,c){b(a,a.content.indexOf(c))};a.kca=function(a,b,c,e){return c*a/e+b};a.h$=function(a,b,c,e){return c*(a/=e)*a+b};a.r$=function(a,b,c,e){return-c*(a/=e)*(a-2)+b};a.d$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};a.U9=function(a,b,c,e){return c*(a/=e)*a*a+b};a.o$=function(a,b,c,e){return c*((a=a/e-1)*a*a+1)+b};a.a$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a+b:c/2*((a-=2)*a*
a+2)+b};a.i$=function(a,b,c,e){return c*(a/=e)*a*a*a+b};a.s$=function(a,b,c,e){return-c*((a=a/e-1)*a*a*a-1)+b};a.e$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};a.j$=function(a,b,c,e){return c*(a/=e)*a*a*a*a+b};a.t$=function(a,b,c,e){return c*((a=a/e-1)*a*a*a*a+1)+b};a.f$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};a.k$=function(a,b,c,e){return-c*Math.cos(a/e*(Math.PI/2))+c+b};a.u$=function(a,b,c,e){return c*Math.sin(a/e*(Math.PI/2))+
b};a.g$=function(a,b,c,e){return-c/2*(Math.cos(Math.PI*a/e)-1)+b};a.W9=function(a,b,c,e){return 0==a?b:c*Math.pow(2,10*(a/e-1))+b};a.q$=function(a,b,c,e){return a==e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b};a.c$=function(a,b,c,e){return 0==a?b:a==e?b+c:1>(a/=e/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};a.T9=function(a,b,c,e){return-c*(Math.sqrt(1-(a/=e)*a)-1)+b};a.n$=function(a,b,c,e){return c*Math.sqrt(1-(a=a/e-1)*a)+b};a.Z9=function(a,b,c,e){return 1>(a/=e/2)?-c/2*(Math.sqrt(1-a*a)-
1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};a.V9=function(a,b,c,e){var g=0,h=c;if(0==a)return b;if(1==(a/=e))return b+c;g||(g=.3*e);h<Math.abs(c)?(h=c,c=g/4):c=g/(2*Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,10*--a)*Math.sin(2*(a*e-c)*Math.PI/g))+b};a.p$=function(a,b,c,e){var g,h=0,l=c;if(0==a)return b;if(1==(a/=e))return b+c;h||(h=.3*e);l<Math.abs(c)?(l=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/l);return l*Math.pow(2,-10*a)*Math.sin(2*(a*e-g)*Math.PI/h)+c+b};a.b$=function(a,b,c,e){var g,h=0,l=c;if(0==a)return b;
if(2==(a/=e/2))return b+c;h||(h=.3*e*1.5);l<Math.abs(c)?(l=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/l);return 1>a?-.5*l*Math.pow(2,10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)+b:l*Math.pow(2,-10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)*.5+c+b};a.R9=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*(a/=e)*a*((g+1)*a-g)+b};a.l$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*((a=a/e-1)*a*((g+1)*a+g)+1)+b};a.X9=function(a,b,c,e,g){void 0==g&&(g=1.70158);return 1>(a/=e/2)?c/2*a*a*(((g*=1.525)+1)*a-g)+b:c/2*((a-=
2)*a*(((g*=1.525)+1)*a+g)+2)+b};a.S9=h;a.m$=G;a.Y9=function(a,b,c,e){return a<e/2?.5*h(2*a,0,c,e)+b:.5*G(2*a-e,0,c,e)+.5*c+b}};b4w.module.__print=function(a){function u(a,b){var c=[];-1<a[0].indexOf("%c")?c.push(a[0].replace("%c","%c"+b+": ")):c.push(b+": "+a[0]);for(var e=1;e<a.length;e++)c.push(a[e]);return c}function m(){h++;var a=u(arguments,"B4W ERROR");console.error.apply(console,a)}function c(a){a in q||(q[a]=a,m([a]))}function b(a,b){c(a+"() is deprecated, use "+b+"() instead.")}var p=!1,h=0,G=0,q={};a.I3=function(a){p=a};a.Pd=function(){console.log.apply(console,arguments)};a.log=function(){if(p){var a=u(arguments,
"B4W LOG");console.log.apply(console,a)}};a.LL=u;a.error=m;a.va=c;a.Jf=b;a.E$=function(a,h){switch(1<h.length){case !0:c(a+"() is deprecated, use "+h.slice(0,-1).join("(), ")+"() or "+h[h.length-1]+"() instead.");break;case !1:b(a,h[0])}};a.$y=function(a,b){void 0===b?c('Config option "'+a+'" is deprecated.'):c('Config option "'+a+'" is deprecated, use "'+b+'" instead.')};a.warn=function(){G++;var a=u(arguments,"B4W WARN");console.warn.apply(console,a)};a.info=function(){var a=u(arguments,"B4W INFO");
console.info.apply(console,a)};a.qZ=function(){h++;var a=u(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};a.rZ=function(){G++;var a=u(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};a.time=function(){p&&console.time.apply(console,arguments)};a.timeEnd=function(){p&&console.timeEnd.apply(console,arguments)};a.group=function(){console.group.apply(console,arguments)};a.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};a.groupEnd=function(){console.groupEnd.apply(console,
arguments)};a.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};a.S_=function(){return G};a.r_=function(){return h};a.EL=function(){h=G=0}};b4w.module.print=b4w.module.__print;b4w.module.__tbn=function(a,u){function m(a,b,c){a=w(a,b||0,c);y.normalize(a,c);return c}function c(a,b,c){c=c||0;var e=w(a,c,D),g=y.length(e),h=L.sign(e[3])*L.sign(b[3])||1;y.scale(b,h*g,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?3.1E-5:-3.1E-5);A(a,e,c);return a}function b(a,b){return L.sign(a[4*(b||0)+3])}function p(a,b,c){c=c||0;var e=w(a,c,D);0>L.sign(e[3])*b&&y.scale(e,-1,e);A(a,e,c)}function h(a,b,c){c=c||0;var e=w(a,c,D);y.normalize(e,e);y.scale(e,b,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?e[3]+
3.1E-5:e[3]-3.1E-5);A(a,e,c)}function G(a,b){var c=w(a,b||0,D);return y.length(c)}function q(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=.5;return b}function w(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function A(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function g(a){return a.length/4}function e(a,e,k){for(var l=g(a),v=0;v<l;v++){var r=b(a,v),f=G(a,v),q=m(a,v,I),q=y.multiply(e,q,I);c(k,q,v);h(k,f,v);p(k,r,v)}}a.OJ=
4;var y=u("__quat"),x=u("__tsr"),P=u("__vec3"),J=u("__vec4"),L=u("__util"),l=y.create(),I=y.create(),v=P.create(),K=P.create(),k=P.create(),D=J.create(),M=J.create();a.$q=function(a,b,e){var g=!(!b||!b.length),m=a.length/3;e=e||q(m);for(var r=0;r<m;++r){var f=v;f[0]=a[3*r];f[1]=a[3*r+1];f[2]=a[3*r+2];P.normalize(f,f);if(g){var x=M;x[0]=b[4*r];x[1]=b[4*r+1];x[2]=b[4*r+2];x[3]=b[4*r+3];P.normalize(x,x);var d=P.cross(x,f,K);P.normalize(d,d);var n=y.rotationTo(L.fc,d,l),X=P.transformQuat(L.Fe,n,k),X=
y.rotationTo(X,f,I),n=y.multiply(X,n,l);y.normalize(n,n);X=.5;d=P.cross(f,d,k);if(3.1E-5<Math.abs(d[0]-x[0])||3.1E-5<Math.abs(d[1]-x[1])||3.1E-5<Math.abs(d[2]-x[2]))X=Math.acos(P.dot(f,x))/Math.PI;c(e,n,r);p(e,L.sign(x[3]),r);h(e,X,r)}else n=y.rotationTo(L.Fe,f,l),c(e,n,r)}return e};a.copy=function(a,b,c,e){if(0!==c){b=4*b||0;c=c||a.length;for(var g=0,h=0;g<4*c;g+=4,h+=4)e[h]=a[b+g],e[h+1]=a[b+g+1],e[h+2]=a[b+g+2],e[h+3]=a[b+g+3]}};a.Db=m;a.Ec=c;a.J_=function(a,b,c){a=m(a,b,l);return P.transformQuat(L.Fe,
a,c)};a.create=q;a.identity=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=.5;return a};a.Io=w;a.lk=A;a.Az=g;a.OG=e;a.pP=function(a,b,c){b=x.Db(b,l);e(a,b,c)};a.slerp=function(a,e,g,k){var v=b(e,0),r=m(a,0,l),f=m(e,0,I);a=G(a);e=G(e);r=y.slerp(r,f,g,I);y.normalize(r,r);c(k,r,0);h(k,g*(a-e)+e);p(k,v,0);return k};a.SA=function(a,e,g){var k=b(e,0),v=m(a,0,l),r=m(e,0,I);a=G(a,0);e=G(e,0);v=y.multiply(v,r,l);c(g,v,0);h(g,a+e-.5);p(g,k,0);return g};a.A1=function(a,e,g){var k=b(e,
0),v=m(a,0,l),r=m(e,0,I);a=G(a);e=G(e);r=y.invert(r,I);v=y.multiply(v,r,l);c(g,v,0);h(g,a-e+.5);p(g,k,0)}};b4w.module.__container=function(a,u){var m,c,b;function p(){k.getBoundingClientRect()}function h(a,b,c,e){I.pO?(c=c.getBoundingClientRect(),e[0]=a-c.left,e[1]=b-c.top):(E.clientX=a,E.clientY=b,E.view=window,a=new MouseEvent("b4w_convert",E),c.dispatchEvent(a),e[0]=a.offsetX,e[1]=a.offsetY);return e}function G(a,b,c,e){a.style.width=c+"px";a.style.height=e+"px";b&&(b.style.width=c+"px",b.style.height=e+"px")}function q(a,b,c){var h=k,l=D;c&&G(h,l,a,b);l&&(l.width=a,l.height=b,e.Dp());c=a*I.canvas_resolution_factor;
b*=I.canvas_resolution_factor;h.width=c;h.height=b;var l=Math.min(K.drawingBufferWidth,v.BG,v.GG[0]),f=Math.min(K.drawingBufferHeight,v.BG,v.GG[1]);if(c>l||b>f)y.warn("Canvas size exceeds platform limits, downscaling"),l=Math.min(l/c,l/b),c*=l,b*=l;h.width=Math.floor(c);h.height=Math.floor(b);x.lR(h.width,h.height,a?c/a:1);x.Ua()&&L.V(x.N().Dk);g.g5(h.width,h.height);g.Vi()&&(w.update(),x.update(J.Ko(),0),w.vS())}var w=u("__anchors"),A=u("__config"),g=u("__data"),e=u("__hud"),y=u("__print"),x=u("__scenes"),
P=u("__subscene"),J=u("__time"),L=u("__transform"),l=u("__util"),I=A.K,v=A.Ki,K=null,k=null,D=null,M=null,E={clientX:0,clientY:0};c=m=0;b=1;a.sh=function(a){K=a};a.Xh=function(){return k};a.gN=function(){return D};a.qe=function(){return M};a.Mf=function(a,b){a&&a.parentNode?(k=a,D=b,M=a.parentNode):l.J("canvas container is not available")};a.Xu=function(a,b){b=b||"LAST";switch(b){case "FIRST":M.insertBefore(a,M.firstElementChild);break;case "JUST_BEFORE_CANVAS":M.insertBefore(a,k);break;case "JUST_AFTER_CANVAS":k.nextElementSibling?
M.insertBefore(a,k.nextElementSibling):M.appendChild(a,k);break;case "LAST":M.appendChild(a,k);break;default:y.error(b+" invalid stack order")}};a.UN=function(){return m};a.TN=function(){return c};a.AQ=function(){};a.lS=p;a.N3=function(a,e,g){m=a;c=e;b=g;p()};a.uF=function(){};a.ey=function(a,b,c){return h(a,b,k,c)};a.jN=function(a,b,c){a.constructor==MouseEvent?(c[0]=a.offsetX,c[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches,h(b[0].clientX,
b[0].clientY,a.target,c)):(c[0]=-1,c[1]=-1);return c};a.GL=h;a.Vt=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a*b;e[1]=c*b;g&&(a=g.width/m,e[0]*=a,e[1]*=a);return e};a.J5=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a/b;e[1]=c/b;g&&(a=g.width/m,e[0]/=a,e[1]/=a)};a.CO=function(b){return b&&b.parentNode?b.parentNode==M?!0:a.CO(b.parentNode):!1};a.HO=function(){return I.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};a.FZ=function(a){var b=document.getElementsByTagName("script");a=l.Bl(a);
for(var c=0;c<b.length;c++)if(b[c].src==a)return b[c];return null};a.resize=q;a.Gl=function(a){var b=M,c=k,e=b.clientWidth,b=b.clientHeight;if(a||e!=c.clientWidth||b!=c.clientHeight){a=c.width;c=c.height;G(k,D,e,b);if(x.Ua()){var g=x.N();if((g=x.Xb(g,P.Eh))&&g.enable_hmd_stereo){q(a,c,!1);return}}q(e,b,!1)}};a.reset=function(){M=D=k=K=null}};b4w.module.__anchors=function(a,u){function m(){if(!r&&!F){var a=z;if(a)if("visible"==a.lastElementChild.style.visibility)c(),z=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,d=b.firstElementChild,f=Math.ceil(b.getBoundingClientRect().width),e=Math.ceil(b.getBoundingClientRect().height),g=Math.ceil(a.getBoundingClientRect().width),n=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var h=!0,k=!0;a.style.display="none";
r=!0;g!=f?K.wj(g,f,200,function(a){a==f&&(h=!1,k||(r=!1,d.style.visibility="visible"));b.style.width=a+"px"}):(h=!1,k||(r=!1));n!=e?K.wj(n,e,200,function(a){a==e&&(k=!1,h||(r=!1,d.style.visibility="visible"));b.style.height=a+"px"}):(k=!1,h||(r=!1))}}}function c(){var a=z.lastElementChild;z.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function b(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}
function p(a,d,f){var e=document.createElement("div"),g=document.createElement("span");f&&(e.style.maxWidth=f+"px");e.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";b(g);g.innerHTML=
a;e.style.visibility="hidden";g.style.visibility="hidden";e.appendChild(g);d.appendChild(e);x.Hh(d,function(){r||d==z||1!=d.style.opacity||F||(z&&"visible"==z.lastElementChild.style.visibility&&c(),z=d)})}function h(){for(var a=0,b=0;b<S.length;b++)S[b].Qq&&a++;f=new Float32Array(3*a)}function G(a,b){return b.depth-a.depth}function q(a,b,d){a=a.element;E.qO&&(b=Math.floor(b),d=Math.floor(d));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+d+"px, 0px)":"webkitTransform"in a.style?a.style.webkitTransform=
"translate3d("+b+"px, "+d+"px, 0px)":(a.style.left=b+"px",a.style.top=d+"px")}function w(a){for(var b=0;b<S.length;b++)if(S[b].pa==a)return!0;return!1}var A=u("__batch"),g=u("__camera"),e=u("__config"),y=u("__container"),x=u("__input"),P=u("__objects"),J=u("__obj_util"),L=u("__print"),l=u("__renderer"),I=u("__scenes"),v=u("__subscene"),K=u("__time"),k=u("__transform"),D=u("__tsr"),M=u("__vec3"),E=e.K,S=[],F=!1,z=null,C=!1,r=!1,f=new Float32Array(0),W=new Uint8Array(16),d=new Float32Array(2),n=new Float32Array(3),
X=new Float32Array(3);a.append=function(a){if(!w(a)){var d=a.anchor.Qq&&!!I.Xb(I.Si(),v.Qp),d={type:a.anchor.type,pa:a,x:0,y:0,depth:0,Zn:"out",Qq:d,element:null,Br:null,EV:a.anchor.r1,zm:a.anchor.zm};switch(d.type){case "ANNOTATION":var c=d.pa;a=y.qe();var f=P.Jo(c),c=c.name,e="",g=document.createElement("div"),n=g.cloneNode(!1),k=document.createElement("span");g.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";n.style.cssText+=
"background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";g.style.visibility="hidden";f&&(e=f.description||e,c=f.title||c);k.innerHTML=c;k.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
b(k);k.style.whiteSpace="nowrap";n.appendChild(k);g.appendChild(n);e&&p(e,g,d.EV);a.appendChild(g);d.element=g;break;case "ELEMENT":if(d.element=document.getElementById(a.anchor.zm),d.element)for(f=0;f<S.length;f++)"ELEMENT"==S[f].type&&S[f].zm==a.anchor.zm&&(L.warn("Anchor with the id '"+a.anchor.zm+"' already exists, making the new anchor generic."),d.type="GENERIC");else L.warn("Anchor HTML element with the id '"+a.anchor.zm+"' was not found, making it generic."),d.type="GENERIC"}S.push(d);h();
C||(C=!0,y.qe().addEventListener("mouseup",m))}};a.remove=function(a){for(var b=0;b<S.length;b++){var d=S[b];if(d.pa==a){"ANNOTATION"==d.type&&(a=d,y.qe().removeChild(a.element));S.splice(b,1);h();break}}};a.update=function(a){for(var b=0,d=S.length;d--;){var c=S[d];if(c.Qq){var e=D.W(c.pa.v.C);f.set(e,3*b++)}var h;h=c;var e=n,k=I.Fm(I.Si());h=D.W(h.pa.v.C);g.mH(k,h,e);h=e;e=h[0];k=h[1];h=h[2];if(a||e!=c.x||k!=c.y||h!=c.depth){switch(c.type){case "ANNOTATION":var l=e,r=k;q(c,l,r);break;case "ELEMENT":r=
c.element.getBoundingClientRect(),l=e-r.width/2,r=k-r.height/2,q(c,l,r)}c.x=e;c.y=k;c.depth=h;c.Br&&c.Br(e,k,c.Zn,c.pa,c.element)}}S.sort(G);for(d=0;d<S.length;d++)c=S[d],"GENERIC"!=c.type&&(c.element.style.zIndex=z==c.element?S.length:d);0<b&&(a=I.Xb(I.Si(),v.Qp),b=a.ib[0].Ra[0],A.I4(b.Fa,f),v.qd(a,b))};a.vS=function(){for(var a=y.qe(),b=I.N(),b=I.Xb(b,v.Eh),b=!(!b||!b.enable_hmd_stereo),f=S.length;f--;){var e=S[f],g=e.pa,h=g.v,r=e.x,q=e.y,x=e.depth,B=I.Fm(I.Si()),m=k.Me(g,n),B=k.Me(B,X),m=M.dist(m,
B);(x=0>r||0>q||0>x||1<x||I.lG(g)||r>=a.clientWidth||q>=a.clientHeight)||(h.nl?(x=h.jh,h=m<h.kh?!1:x==J.ND||m<x?!0:!1):h=!0,x=!h);h=x?"out":"visible";e.Qq&&"out"!=h&&(h=e,x=I.Xb(I.Si(),v.Qp).F,m=y.Vt(h.x,h.y,d,x),l.wB(x.Lf,m[0],x.height-m[1],2,2,W),h=255<=W[0]+W[4]+W[8]+W[12]?"visible":"out"!=h.Zn&&W[0]+W[4]+W[8]+W[12]?h.Zn:"covered");b&&(h="out");if(h!=e.Zn){switch(e.type){case "ANNOTATION":case "ELEMENT":var w=e.element;w&&("out"==h?(w.style.visibility="hidden",w.children.length&&(w.children[0].style.visibility=
"hidden")):"visible"==h?(w.style.visibility="visible",w.children.length&&(w.children[0].style.visibility="visible"),w.style.opacity=1):(w.style.visibility="visible",w.style.opacity=.1,w.children.length&&(w.children[0].style.visibility="visible"),"ANNOTATION"==e.type&&1<w.children.length&&"visible"==w.lastElementChild.style.visibility&&(c(),w==z&&(z=null))))}e.Zn=h;e.Br&&e.Br(r,q,e.Zn,g,w)}}};a.V8=function(a,b){for(var d=0;d<S.length;d++)S[d].pa==a&&(S[d].Br=b)};a.L9=function(a){for(var b=0;b<S.length;b++)S[b].pa==
a&&(S[b].Br=null)};a.Ja=function(){for(var a=0;a<S.length;a++){var b=S[a];"ANNOTATION"==b.type&&y.qe().removeChild(b.element)}S.length=0};a.u0=w;a.raa=function(a){for(var b=0;b<S.length;b++)if(S[b].pa==a)return S[b].zm;return!1};a.pause=function(){F=!0};a.resume=function(){F=!1};a.V1=function(a,b){for(var d=-1,c=0;c<S.length;c++){var f;if(f="visible"==S[c].Zn){var e=S[c];if(e.element){f=Math.round(e.element.offsetWidth)||0;var g=Math.round(e.element.offsetHeight)||0}else g=f=0;var n=e.x,e=e.y;f=a>=
n&&a<=n+f&&b<e&&b>=e-g?!0:!1}if(f)if(0>d)var t=S[c].depth,d=c;else S[c].depth<t&&(d=c,t=S[c].depth)}return 0>d?null:S[d].pa}};b4w.module.__batch=function(a,u){function m(a){a={type:a,Hb:"",id:0,Le:0,du:-1,Xm:"",Fy:-1,Lq:-1,su:0,lg:0,xm:[],qa:[],Hg:[],gg:[],Ac:[],Tk:[],uk:null,nd:{},zb:null,mb:aa.s0(),Qe:"",It:[],Ga:null,Yf:Q.vm(),Xf:!1,Yk:!1,Hy:!1,sv:0,jp:0,qA:0,rA:0,hd:!1,Nz:0,ll:0,Nd:new Float32Array(3),kg:new Float32Array(16),Fk:!1,dg:!1,Bb:!1,rb:!1,rj:!1,Xa:!1,Mc:!1,ef:!1,Tf:!1,uf:!1,ze:!1,Se:!1,xe:!1,we:!1,Mj:pa.Up,$f:!1,Uh:!1,$k:!1,ah:!1,jh:ea.ND,kh:0,tl:0,ul:0,Sm:b(),Ke:-1,te:-1,Tz:!1,Xz:0,Uz:0,Yz:0,Zz:0,Wz:new Float32Array(3),
Vz:new Float32Array(3),Uu:!1,$e:0,ff:0,pg:1,pi:0,ms:0,Dg:1,Or:0,vo:0,Gk:1,Jr:0,fp:0,Qd:0,ri:0,ce:new Float32Array(2),on:new Float32Array(3),vi:new Float32Array(3),Eg:new Float32Array(3),gd:new Float32Array(4),Fo:new Float32Array(2),$o:null,wr:null,gv:null,fv:null,Uj:!1,wireframe_edge_color:xa.create(),nj:!1,water_dynamic:!1,Gw:!1,oD:!1,pD:0,qD:0,nD:0,Ts:.1,bs:0,ds:0,Ni:0,hz:new Float32Array(2),gz:new Float32Array(2),Gu:new Float32Array(2),as:new Float32Array(3),cs:new Float32Array(3),Al:null,Dl:!1,
ol:!1,Sy:!1,Qa:null,mv:0,Wn:null,xv:null,$i:[],li:[],Re:[],ki:[],Cb:H.sO(),Bn:!1,Be:null,Nh:!0,tO:0,Lr:new Float32Array(3)};a.gd[3]=1;a.rb=!0;a.mv=1;a.Sm.hr=-1;return a}function c(a){var d=m(a.type);d.Hb=a.Hb;d.id=a.id;d.du=a.du;d.Xm=a.Xm;d.Fy=a.Fy;d.Lq=a.Lq;d.su=a.su;d.lg=a.lg;d.xm=[];d.qa=a.qa.slice();d.Hg=a.Hg.slice();d.gg=a.gg.slice();d.Ac=a.Ac.slice();d.Tk=a.Tk.slice();d.uk=Q.X(a.uk);d.nd=Q.X(a.nd);d.zb=a.zb;d.mb=aa.qX(a.mb);d.Qe=a.Qe;d.It=T.mX(a.It);d.Ga=a.Ga;d.Xf=a.Xf;d.Yk=a.Yk;d.Hy=a.Hy;d.sv=
a.sv;d.jp=a.jp;d.qA=a.qA;d.rA=a.rA;d.Nz=a.Nz;d.ll=a.ll;d.Nd=a.Nd;d.kg=a.kg;d.Fk=a.Fk;d.dg=a.dg;d.Bb=a.Bb;d.rb=a.rb;d.rj=a.rj;d.Xa=a.Xa;d.Mc=a.Mc;d.ef=a.ef;d.Tf=a.Tf;d.uf=a.uf;d.ze=a.ze;d.Se=a.Se;d.xe=a.xe;d.we=a.we;d.hd=a.hd;d.Mj=a.Mj;d.$f=a.$f;d.Uh=a.Uh;d.$k=a.$k;d.ah=a.ah;d.jh=a.jh;d.kh=a.kh;d.tl=a.tl;d.ul=a.ul;var c=a.Sm,f=b();f.yw=c.yw;f.Ff=c.Ff;f.gy=c.gy;f.Lj=c.Lj;f.hr=c.hr;f.gr=c.gr;f.fr=c.fr;f.oB=c.oB;d.Sm=f;d.Ke=a.Ke;d.te=a.te;d.Tz=a.Tz;d.Xz=a.Xz;d.Uz=a.Uz;d.Yz=a.Yz;d.Zz=a.Zz;xa.copy(a.Wz,
d.Wz);xa.copy(a.Vz,d.Vz);d.Uu=a.Uu;d.$e=a.$e;d.ff=a.ff;d.pg=a.pg;d.pi=a.pi;d.ms=a.ms;d.Dg=a.Dg;d.Or=a.Or;d.vo=a.vo;d.Gk=a.Gk;d.Jr=a.Jr;d.fp=a.fp;d.Qd=a.Qd;d.ri=a.ri;d.ce[0]=a.ce[0];d.ce[1]=a.ce[1];xa.copy(a.on,d.on);xa.copy(a.vi,d.vi);xa.copy(a.Eg,d.Eg);na.copy(a.gd,d.gd);d.Fo.set(a.Fo);d.$o=Q.X(a.$o);a.wr&&(d.wr=new Float32Array(a.wr),d.gv=new Float32Array(a.gv),d.fv=new Float32Array(a.fv));d.Uj=a.Uj;xa.copy(a.wireframe_edge_color,d.wireframe_edge_color);d.nj=a.nj;d.water_dynamic=a.water_dynamic;
d.Gw=a.Gw;d.oD=a.oD;d.pD=a.pD;d.qD=a.qD;d.nD=a.nD;d.Ts=a.Ts;d.bs=a.bs;d.ds=a.ds;d.Ni=a.Ni;d.hz.set(a.hz);d.gz.set(a.gz);d.Gu.set(a.Gu);xa.copy(a.as,d.as);xa.copy(a.cs,d.cs);d.Al=Q.X(a.Al);d.Dl=a.Dl;d.ol=a.ol;d.Sy=a.Sy;a.Qa&&(d.Qa=Aa.HL(a.Qa));d.mv=a.mv;a.Wn&&(d.Wn=new Float32Array(a.Wn));d.xv=Q.X(a.xv);d.$i=a.$i.slice();d.li=a.li.slice();d.Re=a.Re.slice();d.ki=a.ki.slice();H.SL(a.Cb,d.Cb);d.Bn=a.Bn;d.Nh=a.Nh;d.Lr=a.Lr;return d}function b(){return{yw:!1,Ff:0,Lj:0,hr:0,gr:0,fr:0,oB:0,gy:1}}function p(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.Hb=
a.Bb?a.rj?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.Hb=a.uf?"CAST":"RECEIVE";break;case "COLOR_ID":a.Hb=a.rj?"COLOR_ID_XRAY":"COLOR_ID"}}function h(a,b,d){var c=[],e=a.Oa,g=q(d,b,!b.df,!1),n=a.data,t=e.Bc,N=Array(t.length),h=Array(t.length),k=[],B=ma.uc(d,ja.Wb),l=!1;B&&(l=B.bp.length?!0:!1);for(var H=0;H<g.length;H++)for(var X=g[H],v=0;v<t.length;v++){var y=t[v];if(!la(e,v)&&!pa.fO(n,v))if("PHYSICS"==X&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)k.push(pa.cz(n,v,[],b.Aj,{},null));else if(!y.Yj||
l){var x=m(X);"MAIN"==X?N[v]=x:"DEBUG_VIEW"==X&&(h[v]=x);x.du=a.b4w_cluster_data.cluster_id;if(f(x,y)&&w(x,y)){"SHADOW"==X&&N[v]&&(x.Mc=N[v].Mc);x.Mj=b.Xf||b.ef?pa.Nw:pa.Up;D(x,b);S(x,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==x.type)x.Xm=fa(x,b,a.uuid);x.$k=a.b4w_do_not_cull;"MAIN"==x.type&&(x.ah=a.b4w_caustics);z(x,"DISABLE_FOG",("COLOR_ID"!=X&&"SHADOW"!=X&&a.b4w_disable_fogging)|0);var Y=pa.cz(n,v,x.Tk,b.Aj,x.nd,x.uk);!y.yf||"a_shade_tangs"in Y.la[0]||(z(x,"CALC_TBN",1),F(x,"a_tbn"));
y.Yj&&(Y=Aa.i2(Y));W(x);c.push({Fa:x,oh:b,Qx:b,Be:Y,hi:[y.name],Te:[a]})}}}if(k.length){x=m("PHYSICS");x.Hb="NAVMESH";x.Xm=fa(x,b,a.uuid);for(var Y=pa.MR(k),Z=[],H=0;H<t.length;H++)Z.push(t[H].name);W(x);c.push({Fa:x,oh:b,Qx:b,Be:Y,hi:Z,Te:[a]})}for(H=0;H<h.length;H++)h[H]&&(h[H].Lq=N[H].id,W(h[H]));var R=a.particle_systems;if(0<R.length){for(var p=!1,C=!1,H=0;H<R.length;H++){var K=R[H],E=K.settings;E.use_render_emitter&&c.length&&(p=!0);"HAIR"!=E.type||"OBJECT"!=E.render_type&&"GROUP"!=E.render_type&&
K.transforms.length||(C=!0);if(p&&C)break}var J;if(c.length)J=c[0];else{var A=m("TMP");S(A,R);var V=pa.cz(n,0,A.Tk,b.Aj,A.nd,A.uk);J={Fa:A,Be:V}}var M=J,Ga=M.Fa.nd,Oa;if(C){var G;if(1<t.length){for(var P={},da=0;da<R.length;da++){var ia=R[da].settings;if("HAIR"==ia.type&&("OBJECT"==ia.render_type||"GROUP"==ia.render_type)){var L=ia.b4w_vcol_from_name,u=ia.b4w_vcol_to_name;""!==L&&""!==u&&(P[L]=Q.X(Ga[L]))}}"a_bending_col_main"in Ga&&(P.a_bending_col_main=Q.X(Ga.a_bending_col_main));"a_bending_col_detail"in
Ga&&(P.a_bending_col_detail=Q.X(Ga.a_bending_col_detail));G=pa.IM(n,[],P)}else G=M.Be;Oa=G}else Oa=null;for(var Fa=Oa,I=a.Oa,za=[],T=a.particle_systems,ga=a.data,ta=0;ta<T.length;ta++){var ua=T[ta],na=ua.settings;if(na.count)if("EMITTER"==na.type){if("DYNAMIC"==b.type){var Ka=m("PARTICLES");Ka.Cb.Ef=b.Aa;Ka.Cb.fg=b.Ib;Ka.Cb.ig=b.yc;var ka,qa=ua.settings.material-1;qa>=I.Bc.length&&(ha.warn('Wrong material used for rendering particle system "'+ua.name+'"'),qa=0);ka=qa;var ba=I.Bc[ka];if(!la(I,ka)&&
("HALO"===ua.settings.render_type&&"HALO"==ba.type&&(Ka.Uu=!0),w(Ka,ba))){var Na=Ka,Ba=I,vb=ua.settings;switch(vb.b4w_billboard_align){case "VIEW":z(Na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":z(Na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":z(Na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":z(Na,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:Q.J("Wrong billboard align value")}z(Na,"BILLBOARD",0);var ec=vb.b4w_enable_soft_particles&&ea.qL(Ba,vb);z(Na,
"SOFT_PARTICLES",0<vb.b4w_particles_softness&&ec&&O.Ky?1:0);z(Na,"SOFT_STRENGTH",aa.da(vb.b4w_particles_softness));aa.xa(Na.mb,"WORLD_SPACE","WORLD"==vb.b4w_coordinate_system?1:0);Ka.ef=!0;Ka.$k=a.b4w_do_not_cull;Ka.Xm=fa(Ka,b,I.name+"_"+na.uuid);Aa.UX(Ka,ua,ba);var $c=Aa.TZ(Ka,ga,ua,I.v);Aa.l5($c,Ka,na.count);Aa.k5(I);D(Ka,I.v);W(Ka);za.push({Fa:Ka,oh:b,Qx:b,Be:$c,hi:[ba.name],Te:[a]})}}}else if("HAIR"==na.type){var $a=Q.fA(ua.seed),cb=wa.rL(O.vG)&&!na.b4w_initial_rand_rotation&&!na.b4w_hair_billboard,
Ya=4;cb&&(Ya=8);if(ua.transforms.length)var va=ua.transforms;else for(var ca=pa.xF(Fa,na.count,!1,$a),va=new Float32Array(ca.length*Ya),ob=0;ob<ca.length;ob++){var Gc=.75+.5*Q.oi($a);va[ob*Ya]=ca[ob][0];va[ob*Ya+1]=ca[ob][1];va[ob*Ya+2]=ca[ob][2];va[ob*Ya+3]=Gc;cb&&(va[ob*Ya+4]=1,va[ob*Ya+5]=0,va[ob*Ya+6]=0,va[ob*Ya+7]=0)}var Sc=ma.uc(d,ja.yk)?!0:!1;if("OBJECT"==na.render_type){var Hc=[q(d,na.dupli_object.Oa.v,!b.df,!0)],ad=r(a,b,Ga,Fa,[na.dupli_object],Hc,[va],na,ua,Sc,$a,!1);za.push.apply(za,ad)}else if("GROUP"==
na.render_type){for(var jc=na.dupli_group.objects,Hc=[],ob=0;ob<jc.length;ob++){var bd=q(d,jc[ob].Oa.v,!b.df,!0);Hc.push(bd)}for(var Tc=!1,kc=[],ob=0;ob<jc.length;ob++)kc.push(jc[ob].Oa);if(na.use_whole_group){for(var cd,Mb=va,Uc=kc,Ad=cb,Ic=Ya,Gb={},Pb=new Float32Array([0,0,0,1]),pb=0;pb<Mb.length;pb+=Ic)for(var Xa=0;Xa<Uc.length;Xa++){var Wb=xa.create(),dd=oa.ge(Uc[Xa].v.C),Vc=oa.W(Uc[Xa].v.C);xa.scale(Vc,dd,Wb);var fc=xa.clone([Mb[pb],Mb[pb+1],Mb[pb+2]]);Gb[Xa]||(Gb[Xa]=new Float32Array(Mb.length));
Ad&&(Gb[Xa][pb+4]=Pb[0]=Mb[pb+4],Gb[Xa][pb+5]=Pb[1]=Mb[pb+5],Gb[Xa][pb+6]=Pb[2]=Mb[pb+6],Gb[Xa][pb+7]=Pb[3]=Mb[pb+7],Q.oH(Pb,Pb),Q.D4(Wb,Pb,Wb));xa.add(fc,Wb,fc);Gb[Xa][pb]=fc[0];Gb[Xa][pb+1]=fc[1];Gb[Xa][pb+2]=fc[2];Gb[Xa][pb+3]=Mb[pb+3]}cd=Gb;Tc=!0}else{var Jc;if(na.use_group_count){for(var Qb=va,Kc=kc,lc=na.dupli_weights,Lc=$a,Rb=cb,Ib=Ya,sb={},mc=[],lb=0;lb<Kc.length;lb++)for(var Wc=Kc[lb],ed=Wc.Qf||Wc.name,Mc=0;Mc<lc.length;Mc++){var zb=lc[Mc];ed==zb.name&&mc.push(zb)}lc.length!=mc.length&&ha.error("dupli weights match failed");
for(lb=0;lb<Qb.length;lb+=Ib){for(var Ab,Sb=mc,Xb=[0],Kb=0;Kb<Sb.length;Kb++)Xb[Kb+1]=Xb[Kb]+Sb[Kb].count;for(var gc=Xb[Xb.length-1]*Q.oi(Lc),Lb=0,Kb=0;Kb<Xb.length;Kb++)if(gc>=Xb[Kb]&&gc<Xb[Kb+1]){Lb=Kb;break}Ab=Lb;sb[Ab]=sb[Ab]||[];sb[Ab].push(Qb[lb],Qb[lb+1],Qb[lb+2],Qb[lb+3]);Rb&&sb[Ab].push(Qb[lb+4],Qb[lb+5],Qb[lb+6],Qb[lb+7])}for(Ab in sb)sb[Ab]=new Float32Array(sb[Ab]);Jc=sb}else{for(var wb=va,Ta=$a,Yb=cb,Nb=Ya,eb=kc.length,db={},Zb=0;Zb<wb.length;Zb+=Nb){var hc=Math.floor(eb*Q.oi(Ta));db[hc]=
db[hc]||[];db[hc].push(wb[Zb],wb[Zb+1],wb[Zb+2],wb[Zb+3]);Yb&&db[hc].push(wb[Zb+4],wb[Zb+5],wb[Zb+6],wb[Zb+7])}for(hc in db)db[hc]=new Float32Array(db[hc]);Jc=db}cd=Jc}ad=r(a,b,Ga,Fa,jc,Hc,cd,na,ua,Sc,$a,Tc);za.push.apply(za,ad)}"INSTANCE"==na.b4w_wind_bend_inheritance&&I.v.Af&&ha.warn('Emitter object "'+I.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else Q.J("Unknown particle settings type")}p?
c.push.apply(c,za):c=za}return c}function G(a){for(var b=[],c=[],f={},e=0;e<a.length;e++){var g=a[e].Fa,n=null;if(g.id in f){var t=f[g.id],h=c[t].Fa;d(g,function(a){d(h,function(b){Q.n4(a,b)&&1!=a.tO&&(n=c[t])})});if(!n){do g.id++;while(f[g.id])}}n||(n={Fa:g,EP:[],MK:[],OR:[],Te:[],fQ:[],hi:[]},f[g.id]=c.length,c.push(n));if(a[e].Be&&a[e].Be.gb){n.EP.push(a[e].oh);n.MK.push(a[e].Qx);n.OR.push(a[e].Be);for(var N=0;N<a[e].Te.length;N++)g=a[e].Te[N],-1==n.fQ.indexOf(g.uuid)&&(n.Te.push(g),n.fQ.push(g.uuid));
for(N=0;N<a[e].hi.length;N++)g=a[e].hi[N],-1==n.hi.indexOf(g)&&n.hi.push(g)}n.hi.sort()}for(e=0;e<c.length;e++){var g=c[e].Fa,k=c[e].EP,B=c[e].MK,l=c[e].OR;a="DYNAMIC"==B[0].type||"COLOR_ID"==g.type?B[0]:ea.EE(B[0]);if("STATIC"==a.type&&"COLOR_ID"!=g.type)for(N=0;N<k.length;N++){var r=k[N],v=B[N],f=l[N],X=oa.identity(Ka);r.Kh&&!r.Mt?(r=oa.cr(r.C,Fa),oa.jn(r,X)):oa.copy(r.C,X);v.Mm?f.Nf||(v.Kh?pa.q4(f,X):pa.oI(f,X)):pa.oI(f,X);if(v.Mm)z(g,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].Te.length){r={};if(v.Af||
v.Kh)r.au_center_pos=[X[0],X[1],X[2]];v.Af&&(r.au_wind_bending_amp=[v.Mg],r.au_wind_bending_freq=[v.Ng],r.au_detail_bending_amp=[v.ng],r.au_detail_bending_freq=[v.og],r.au_branch_bending_amp=[v.hg]);pa.p4(f,r);z(g,"AU_QUALIFIER","GLSL_IN")}else a.by.set(X.subarray(0,3)),z(g,"AU_QUALIFIER","uniform")}if(0==l.length)f=pa.ei(Q.rw("%empty"));else if(1==l.length)f=l[0];else{f=[];for(N=0;N<l.length;N++)pa.B0(l[N])||f.push(N);if(f.length<l.length)for(N=0;N<f.length;N++)pa.AC(l[f[N]]);f=pa.MR(l)}if("STATIC"==
a.type){if("COLOR_ID"!=g.type){l=[];for(N=0;N<c[e].Te.length;N++)H.rF(c[e].Te[N].Oa.v.NK,l);H.fE(l,0,l.length,a.Hi);H.Gj(a.Hi,a.Aa);a.lm=H.oy(Q.Rh(l),!0);H.Gq(a.lm,a.Ib);a.af=H.qy(a.lm);H.tm(a.af,a.yc)}a.nl&&(N=c[e].Te[0].b4w_cluster_data,N.cluster_center?a.nv.set(N.cluster_center):a.nv.set(a.af.T))}"PARTICLES"!=g.type&&(N=f.Dd,a.Kh?(H.Gj(a.Aa,g.Cb.Ef),H.Gq(a.Ib,g.Cb.fg),H.tm(a.yc,g.Cb.ig),g.Bn=!1):(H.Gj(N.Aa,g.Cb.Ef),H.Gq(N.Ib,g.Cb.fg),a.yc.ub<N.yc.ub?"STATIC"==a.type&&"COLOR_ID"!=g.type?H.tm(a.af,
g.Cb.ig):H.tm(a.yc,g.Cb.ig):H.tm(N.yc,g.Cb.ig),g.Bn=H.yO(g.Cb.fg,g.Cb.ig)));b.push({Fa:g,v:a,Be:f,hi:c[e].hi,Te:c[e].Te})}return b}function q(a,b,d,c){var f=[];c||(b.gn&&ma.uc(a,ja.Cf)||b.Ad&&ma.uc(a,ja.Bi))&&f.push("COLOR_ID");d&&(f.push("MAIN"),f.push("NODES_GLOW"),ma.uc(a,ja.Ai)&&f.push("DEBUG_VIEW"),ma.uc(a,ja.Ug)&&f.push("SHADOW"),ma.uc(a,ja.yk)&&f.push("GRASS_MAP"));f.push("PHYSICS");if(b.uf||b.xe)for(a=null,b.uf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.xe&&(b=["COLOR_ID",
"PHYSICS","SHADOW","DEBUG_VIEW"],a?a=Q.bW(a,b):a=b),b=a,a=0;a<b.length;a++)d=f.indexOf(b[a]),-1!==d&&f.splice(d,1);return f}function w(a,b){var d;switch(a.type){case "MAIN":if(b.df)d=!1;else{if(b.zh&&"HALO"!=b.type)L(a,b,"MAIN");else{e(a,b);a.Xa=b.Xa;a.rj=b.Fl&&"OPAQUE"!=b.xb&&"CLIP"!=b.xb&&"ALPHA_ANTIALIASING"!=b.xb;a.Qd=b.Qd;a.vi.set([1,1,1]);var c=b.wh;a.gd.set(b.gd);a.gd[3]=b.alpha;if(b.Yj){X(a,"lens_flares.glslv","lens_flares.glslf");F(a,"a_position");F(a,"a_texcoord");var f=ca.hf(c[0]),n=c[0].texture;
R(a,f,"u_sampler",n.name)}else{X(a,"main.glslv","main_stack.glslf");b.Mc||(d=Z.RE(b.md,b.name,{Mc:b.Mc,If:b.If,Vf:b.Vf,yf:b.yf}),a.mb.Pf=Z.hu(d));var t=y("use_map_color_diffuse",c),h=y("use_map_color_spec",c),B=y("use_map_normal",c),l=y("use_map_mirror",c),H=y("use_stencil",c);d=t[0];h=h[0];B=B[0];l=l[0];t=t[1];c=H[0]&&y("use_rgb_to_intensity",c)[0];if(d){n=d.texture;switch(d.blend_type){case "MIX":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}f=
ca.hf(d);R(a,f,"u_colormap0",n.name);a.vo=d.diffuse_color_factor;d.use_map_alpha?a.Gk=d.alpha_factor:a.Gk=0;a.vi.set(d.scale)}H=d&&d==h;h&&(H||(n=h.texture,f=ca.hf(h),R(a,f,"u_specmap0",n.name)),a.ms=h.specular_color_factor);if(B&&(n=B.texture,F(a,"a_tbn"),f=ca.hf(B),R(a,f,"u_normalmap0",n.name),a.Jr=B.normal_factor,n.b4w_use_map_parallax&&O.gB)){var f=aa.da(n.b4w_parallax_steps),N=aa.da(n.b4w_parallax_lod_dist);z(a,"PARALLAX",1);z(a,"PARALLAX_STEPS",f);z(a,"PARALLAX_LOD_DIST",N);a.Or=n.b4w_parallax_scale}l&&
(n=l.texture,f=ca.hf(l),R(a,f,"u_mirrormap",n.name),a.fp=l.mirror_factor);if(l=d&&t&&c?1:0)f=ca.hf(t),n=t.texture,R(a,f,"u_colormap1",n.name),f=ca.hf(c),n=c.texture,R(a,f,"u_stencil0",n.name);(n=d||h||B)&&a.vi.set(n.scale);z(a,"TEXTURE_SPEC",void 0==h?0:1);z(a,"ALPHA_AS_SPEC",H?1:0);z(a,"TEXTURE_STENCIL_ALPHA_MASK",l);F(a,"a_position");F(a,"a_tbn");(d||h||B)&&F(a,"a_texcoord");if(b.ia.Zj){a.nj=!0;a.water_dynamic=b.ia.ba;b.ia.Uf&&!a.Bb?(ha.warn('Material: "'+b.name+'" is opaque.',"Disabling water shore smoothing."),
a.Gw=!1):a.Gw="REFLECT"!=a.Hb?b.ia.Uf:!1;X(a,"water.glslv","water.glslf");l=Z.RE(b.md,b.name,{Mc:!1,If:b.If,Vf:b.Vf,yf:b.yf});a.mb.Pf=Z.hu(l);F(a,"a_position");O.VS?(F(a,"a_polyindex"),a.rb=!0,xa.set(0,0,0,a.wireframe_edge_color),ua.QF()?z(a,"DEBUG_WIREFRAME",1):z(a,"DEBUG_WIREFRAME",2)):z(a,"DEBUG_WIREFRAME",0);H=b.wh;l=y("use_map_normal",H);f=y("use_map_mirror",H)[0];l.length&&(n=l[0].texture,R(a,ca.hf(l[0]),"u_normalmap0",n.name),a.Ts=b.ia.WA);z(a,"NUM_NORMALMAPS",l.length);a.Al=Array(l.length);
for(n=0;n<l.length;n++)a.Al[n]=new Float32Array(2),a.Al[n].set([l[n].scale[0],l[n].scale[1]]);f&&(N=ca.hf(f),n=f.texture,R(a,N,"u_mirrormap",n.name),a.fp=f.mirror_factor);f=null;if(O.Fu)for(n=0;n<H.length;n++){var r=H[n];if(!0===r.texture.b4w_water_foam){f=r;break}}f&&(z(a,"FOAM",1),N=ca.hf(f),n=f.texture,R(a,N,"u_foam",n.name),a.Ni=b.ia.Ni,a.hz.set(n.b4w_foam_uv_freq),a.gz.set(n.b4w_foam_uv_magnitude),a.Gu[0]=f.scale[0],a.Gu[1]=f.scale[1]);for(n=0;n<H.length;n++)if(r=H[n],!0===r.texture.b4w_shore_dist_map){var v=
r;break}v&&O.Dx&&(H=ca.hf(v),n=v.texture,R(a,H,"u_shore_dist_map",n.name),z(a,"SHORE_PARAMS",1),v=r.texture.b4w_shore_boundings,z(a,"MAX_SHORE_DIST",aa.da(r.texture.b4w_max_shore_dist)),z(a,"SHORE_MAP_SIZE_X",aa.da(v[0]-v[1])),z(a,"SHORE_MAP_SIZE_Y",aa.da(v[2]-v[3])),z(a,"SHORE_MAP_CENTER_X",aa.da((v[0]+v[1])/2)),z(a,"SHORE_MAP_CENTER_Y",aa.da((v[2]+v[3])/2)));b.ia.jA?(z(a,"GENERATED_MESH",1),a.oD=!0,a.pD=b.ia.XA,a.qD=b.ia.YA,a.nD=b.ia.My):(F(a,"a_tbn"),(f||l.length)&&F(a,"a_texcoord"),z(a,"GENERATED_MESH",
0));if(b.ia.ba){var r=aa.da(b.ia.dst_noise_scale0),v=aa.da(b.ia.dst_noise_scale1),l=aa.da(b.ia.dst_noise_freq0),H=aa.da(b.ia.dst_noise_freq1),n=aa.da(b.ia.dir_min_shore_fac),f=aa.da(b.ia.dir_freq),N=aa.da(b.ia.dir_noise_scale),q=aa.da(b.ia.dir_noise_freq),Y=aa.da(b.ia.dir_min_noise_fac),m=aa.da(b.ia.dst_min_fac),w=aa.da(b.ia.waves_hor_fac);z(a,"DST_NOISE_SCALE_0",r);z(a,"DST_NOISE_SCALE_1",v);z(a,"DST_NOISE_FREQ_0",l);z(a,"DST_NOISE_FREQ_1",H);z(a,"DIR_MIN_SHR_FAC",n);z(a,"DIR_FREQ",f);z(a,"DIR_NOISE_SCALE",
N);z(a,"DIR_NOISE_FREQ",q);z(a,"DIR_MIN_NOISE_FAC",Y);z(a,"DST_MIN_FAC",m);z(a,"WAVES_HOR_FAC",w)}P(a,b);J(a,b);a.as.set(b.ia.UB);a.cs.set(b.ia.XB);a.bs=b.ia.VB;a.ds=b.ia.YB;z(a,"ABSORB",aa.da(b.ia.Cx));z(a,"SSS_STRENGTH",aa.da(b.ia.uC));z(a,"SSS_WIDTH",aa.da(b.ia.vC))}"HALO"===b.type&&(X(a,"halo.glslv","halo.glslf"),A(a,b),a.Tk=["a_position"]);b.yf&&(z(a,"USE_TBN_SHADING",1),F(a,"a_shade_tangs"));z(a,"TEXCOORD",0);z(a,"NORMAL_TEXCOORD",0);d&&g(a,d,"TEXTURE_COLOR0_CO");t&&g(a,t,"TEXTURE_COLOR1_CO");
c&&g(a,c,"TEXTURE_STENCIL_ALPHA_MASK_CO");h&&g(a,h,"TEXTURE_SPEC_CO");B&&g(a,B,"TEXTURE_NORM_CO");z(a,"SHADELESS",b.Mc?1:0);a.Mc=b.Mc}z(a,"ALPHA","OPAQUE"===b.xb?0:1);z(a,"ALPHA_CLIP","CLIP"===b.xb?1:0);z(a,"DOUBLE_SIDED_LIGHTING",b.Fs?1:0);b.zw?(z(a,"VERTEX_COLOR",1),F(a,"a_color")):z(a,"VERTEX_COLOR",0);a.$e=b.$e;a.pg=b.pg;a.ff=b.ff;a.Eg.set(b.Eg);a.Dg=b.Dg;P(a,b);J(a,b);b.dv?z(a,"WETTABLE",1):z(a,"WETTABLE",0);x(a,b);b.Xo&&!a.Bb?(ha.warn('Material "'+b.name+'" is not blend. Disabling refractions.'),
a.Dl=!1):a.Dl=b.Xo;a.ri=b.ri}d=!0}break;case "NODES_GLOW":d=L(a,b,"GLOW");break;case "SHADOW":if(b.Yj||b.ia.Zj||b.df||"HALO"==b.type)d=!1;else if(e(a,b),a.Xa=b.Xa,a.Bb)d=!1;else{!b.zh||"CLIP"!=b.xb&&"ALPHA_ANTIALIASING"!=b.xb?X(a,"shadow.glslv","shadow.glslf"):L(a,b,"SHADOW");na.set(0,0,0,b.alpha,a.gd);F(a,"a_position");F(a,"a_tbn");z(a,"ALPHA","OPAQUE"===b.xb?0:1);a.vi.set([1,1,1]);h=y("use_map_color_diffuse",b.wh)[0];if(!h||"CLIP"!=b.xb&&"ALPHA_ANTIALIASING"!=b.xb)z(a,"TEXTURE_COLOR",0);else{switch(h.blend_type){case "MIX":z(a,
"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.vi.set(h.scale);z(a,"TEXTURE_COLOR",1);F(a,"a_texcoord");d=ca.hf(h);h=h.texture;"IMAGE"!=d.source&&"ENVIRONMENT_MAP"!=d.source&&"CANVAS"!=d.source&&"NONE"!=d.source||R(a,d,"u_colormap0",h.name)}d=!0}break;case "PHYSICS":d=b.Rd;h=b.ia;d.Es?(a.tk=d.tk,a.Rb=d.Rb,a.Ej=d.Ej,a.Dj=d.Dj,a.Fj=d.Fj,a.Vh=d.Vh,a.Ph=d.Ph,d=!0):h.Zj?(a.nj=!0,a.Q5=h.ba,a.dst_noise_scale0=h.dst_noise_scale0,
a.dst_noise_scale1=h.dst_noise_scale1,a.dst_noise_freq0=h.dst_noise_freq0,a.dst_noise_freq1=h.dst_noise_freq1,a.dir_min_shore_fac=h.dir_min_shore_fac,a.dir_freq=h.dir_freq,a.dir_noise_scale=h.dir_noise_scale,a.dir_noise_freq=h.dir_noise_freq,a.dir_min_noise_fac=h.dir_min_noise_fac,a.dst_min_fac=h.dst_min_fac,a.waves_hor_fac=h.waves_hor_fac,d=!0):d=!1;break;case "COLOR_ID":if(b.Yj||"HALO"==b.type)d=!1;else{B=d=b.xb;"ALPHA_ANTIALIASING"==B&&(B="CLIP",b.xb="CLIP");e(a,b);a.Xa=b.Xa;a.$f=!1;a.rb=!0;a.Bb=
!1;a.rj=b.Fl&&"OPAQUE"!=B&&"CLIP"!=B;b.zh&&"CLIP"==B?L(a,b,"COLOR_ID"):X(a,"color_id.glslv","color_id.glslf");na.set(0,0,0,b.alpha,a.gd);F(a,"a_position");z(a,"ALPHA","OPAQUE"===B?0:1);a.vi.set([1,1,1]);h=y("use_map_color_diffuse",b.wh)[0];z(a,"ALPHA_CLIP","CLIP"===B?1:0);if(h&&"CLIP"==B){switch(h.blend_type){case "MIX":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.vi.set(h.scale);z(a,"TEXTURE_COLOR",1);F(a,"a_texcoord");
B=ca.hf(h);h=h.texture;"IMAGE"!=B.source&&"ENVIRONMENT_MAP"!=B.source&&"CANVAS"!=B.source&&"NONE"!=B.source||R(a,B,"u_colormap0",h.name)}else z(a,"TEXTURE_COLOR",0);b.xb=d;d=!0}break;case "GRASS_MAP":!b.qk.sr||b.df?d=!1:(e(a,b),a.Xa=b.Xa,a.Bb=!1,a.$f=!1,a.rb=!0,X(a,"grass_map.glslv","grass_map.glslf"),F(a,"a_position"),d=b.qk.Bu?b.qk.Bu:null,h=b.qk.Au?b.qk.Au:null,a.nd.a_grass_size={Ho:!0,src:[]},d?(a.nd.a_grass_size.src.push({name:d,fi:4}),z(a,"DYNAMIC_GRASS_SIZE",1)):z(a,"DYNAMIC_GRASS_SIZE",0),
a.nd.a_grass_color={Ho:!0,src:[]},h?(a.nd.a_grass_color.src.push({name:h,fi:7}),z(a,"DYNAMIC_GRASS_COLOR",1)):z(a,"DYNAMIC_GRASS_COLOR",0),z(a,"GRASS_TEXTURE_SIZE",aa.da(Na.Tu)),d=!0);break;case "DEBUG_VIEW":d=k(a,b);break;case "PARTICLES":a:if(b.df)d=!1;else{d=b.wh;if(a.Uu)X(a,"particle_system.glslv","particle_system_stack.glslf"),z(a,"HALO_PARTICLES",1),A(a,b);else{h={Mc:!1,If:b.If,Vf:b.Vf,yf:b.yf};if(b.zh){X(a,"particle_system.glslv","particle_system.glslf");L(a,b,"PARTICLES");d=!0;break a}X(a,
"particle_system.glslv","particle_system_stack.glslf");h=Z.RE(b.md,b.name,h);a.mb.Pf=Z.hu(h);if(d=y("use_map_color_diffuse",d)[0]){z(a,"TEXTURE_COLOR",1);switch(d.blend_type){case "MIX":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":z(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.vo=d.diffuse_color_factor;d.use_map_alpha?a.Gk=d.alpha_factor:a.Gk=0;R(a,ca.hf(d),"default"+String(a.qa.length),d.texture.name)}}a.gd.set(b.gd);a.gd[3]=b.alpha;a.$e=b.$e;a.pg=b.pg;a.ff=
b.ff;a.Eg.set(b.Eg);a.Dg=b.Dg;F(a,"a_position");F(a,"a_tbn");z(a,"ALPHA","OPAQUE"===b.xb?0:1);z(a,"ALPHA_CLIP","CLIP"===b.xb?1:0);z(a,"PARTICLES_SHADELESS",b.Mc?1:0);P(a,b);J(a,b);e(a,b);a.Xa=b.Xa;a.rj=b.Fl&&"OPAQUE"!=b.xb&&"CLIP"!=b.xb&&"ALPHA_ANTIALIASING"!=b.xb;a.Qd=b.Qd;d=!0}break;default:Q.J("Wrong batch type: "+a.type)}return d}function A(a,b){var d=b.er;z(a,"NUM_RINGS",d.AB);z(a,"NUM_LINES",d.yA);z(a,"NUM_STARS",d.xC);z(a,"SKY_STARS",d.oA?1:0);a.Xz=d.size;a.Uz=d.Vu/20;a.Wz.set(d.BB);a.Vz.set(d.AA);
a.Yz=1/d.yC;a.Zz=d.zC;a.Tz=!0}function g(a,b,d){switch(b.texture_coords){case "UV":case "ORCO":z(a,d,"TEXTURE_COORDS_UV_ORCO");z(a,"TEXCOORD",1);break;case "NORMAL":z(a,d,"TEXTURE_COORDS_NORMAL");z(a,"NORMAL_TEXCOORD",1);break;default:z(a,d,"TEXTURE_COORDS_NONE")}}function e(a,b){switch(b.xb){case "ALPHA_ANTIALIASING":a.Bb=!1;a.$f=!1;a.rb=!0;a.Fk=!1;a.dg=!0;break;case "ALPHA_SORT":a.Bb=!0;a.$f=!0;a.rb=!0;a.Fk=!1;a.dg=!1;break;case "ALPHA":a.Bb=!0;a.$f=!1;a.rb=!0;a.Fk=!1;a.dg=!1;break;case "CLIP":a.Bb=
!1;a.$f=!1;a.rb=!0;a.Fk=!0;a.dg=!1;break;case "ADD":a.Bb=!0;a.$f=!1;a.rb=!1;a.Fk=!1;a.dg=!1;break;case "OPAQUE":a.Bb=!1;a.$f=!1;a.rb=!0;a.Fk=!1;a.dg=!1;break;default:Q.J("Unknown alpha blend mode: "+b.xb)}}function y(a,b){for(var d=[],c=b.length,f=0;f<c;f++){var e=b[f];1==e[a]&&e.texture&&e.texture.I&&d.push(e)}return d}function x(a,b){var d=b.rp;a.pi=d.pi;a.Fo[0]=d.Ku;a.Fo[1]=1-d.Lu/5}function P(a,b){var d,c=0;switch(b.Vf){case "PHONG":case "COOKTORR":d=b.yp;break;case "WARDISO":d=b.pC;break;case "TOON":d=
b.qC;c=b.rC;break;case "BLINN":d=b.oC;c=b.yp;break;default:ha.error("unsupported specular shader: "+b.Vf+' (material "'+b.name+'")'),d=b.yp}a.on[0]=b.fw;a.on[1]=d;a.on[2]=c}function J(a,b){switch(b.If){case "LAMBERT":a.ce[0]=0;a.ce[1]=0;break;case "OREN_NAYAR":a.ce[0]=b.CB;a.ce[1]=0;break;case "FRESNEL":a.ce[0]=b.Ny;a.ce[1]=b.Oy;break;case "MINNAERT":a.ce[0]=b.Ey;a.ce[1]=0;break;case "TOON":a.ce[0]=b.Py;a.ce[1]=b.Qy;break;default:ha.error("unsupported diffuse shader: "+b.If+' (material "'+b.name+
'")'),a.ce[0]=0,a.ce[1]=0}}function L(a,b,d){if(!b.zh||b.df)return!1;var c;switch(d){case "MAIN":X(a,"main.glslv","main.glslf");c=!1;break;case "GLOW":X(a,"main.glslv","main.glslf");c=!0;break;case "SHADOW":X(a,"shadow.glslv","shadow.glslf");c=!1;break;case "COLOR_ID":X(a,"color_id.glslv","color_id.glslf"),c=!1}d=Z.ML(b.se,b.md,!1,b.name,d);if(!d.Ia)return ha.error('Failed to create node graph for material "'+b.name+'", disable nodes'),K(a,b),!0;a.Qe=d.id;a.Uj=!0;z(a,"NODES",1);z(a,"DOUBLE_SIDED_LIGHTING",
b.Fs?1:0);F(a,"a_position");b.bD&&F(a,"a_orco_tex_coord");e(a,b);a.Xa=b.Xa;a.Qd=b.Qd;c?(z(a,"ALPHA",1),z(a,"ALPHA_CLIP",0)):(z(a,"ALPHA","OPAQUE"===b.xb?0:1),z(a,"ALPHA_CLIP","CLIP"===b.xb?1:0));a.rj=b.Fl&&"OPAQUE"!=b.xb&&"CLIP"!=b.xb&&"ALPHA_ANTIALIASING"!=b.xb;a.ff=b.ff;a.$e=b.$e;x(a,b);b.dv?z(a,"WETTABLE",1):z(a,"WETTABLE",0);var f=null,g=!1;ga.fa(d.Ia,function(d,c){switch(c.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var e=c.data.name,n=c.data.value;a.uk||(a.uk=
{});a.uk[n]=e;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":e=c.data.name;a.nd[e]={Ho:!0,src:[{name:c.data.value}]};n=0;if("GEOMETRY_VC"==c.type)n=7;else for(var t=0;t<c.outputs.length;t++){var h="RGB".indexOf(c.outputs[t].identifier);-1<h&&(n|=1<<2-h)}a.nd[e].src[0].fi=n;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":F(a,"a_tbn");break;case "TEX_COORD_OB":z(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":z(a,
"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":c.data.value.yf&&(z(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&F(a,"a_shade_tangs"));F(a,"a_tbn");g=!0;break;case "BSDF_BEGIN":g=!0;F(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":e=c.data.name;n=c.data.Qt;t=c.data.value;R(a,t,e,n);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":z(a,"CALC_TBN_SPACE",1);F(a,"a_tbn");c.data&&(e=c.data.name,n=c.data.Qt,
t=c.data.value,R(a,t,e,n));break;case "NORMAL_MAP":F(a,"a_tbn");switch(Number(c.hb[0][1])){case Z.fU:z(a,"CALC_TBN_SPACE",1);break;case Z.eU:case Z.dU:z(a,"USE_MODEL_TSR",1)}break;case "LAMP":c.data&&(a.$o=c.data);break;case "B4W_REFRACTION":a.Bb?a.Dl=!0:(a.Dl=!1,ha.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));z(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":f||(f=c.data.fb);break;case "PARTICLE_INFO":"PARTICLES"==a.type&&c.data&&(a.xv=c.data);
break;case "VECT_TRANSFORM":switch(Number(c.hb[1][1])){case Z.VJ:z(a,"USE_MODEL_TSR_INVERSE",1);break;case Z.UJ:z(a,"USE_VIEW_TSR",1);break;case Z.TJ:z(a,"USE_MODEL_TSR",1);break;case Z.SJ:z(a,"USE_MODEL_TSR",1);z(a,"USE_VIEW_TSR",1);break;case Z.RJ:z(a,"USE_VIEW_TSR_INVERSE",1);break;case Z.QJ:z(a,"USE_MODEL_TSR_INVERSE",1),z(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":z(a,"USE_MODEL_TSR",1);a.Lr[1]=b.fk;a.Lr[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":z(a,"USE_VIEW_TSR",
1);break;case "B4W_REFLECT":z(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":F(a,"a_tbn");ua.QF()?z(a,"USE_DERIVATIVES_EXT",1):ha.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":a.Bb=!0;a.Dl=!0;break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":z(a,"USE_BSDF_SKY_DIM",1),ua.PN()&&z(a,"USE_TEXTURE_LOD_EXT",1)}});f&&R(a,f,"u_nodes_texture");g||(a.Mc=!0);c=a.mb.Pf=Z.hu(d.Ia);I(d.Ia,a);
d=a.li;for(var n=a.ki,h=0;h<c.length;h++){var t=c[h];switch(t.id){case "VALUE":var k=t.Pr[0];if(k)for(var B=0;B<d.length;B+=3)if(d[B]==k){t.hb.push(["VALUE_ROW_IND",d[B+1]]);t.hb.push(["VALUE_COL_IND",d[B+2]]);break}break;case "RGB":if(k=t.Pr[0])for(B=0;B<n.length;B+=2)if(n[B]==k){t.hb.push(["RGB_IND",n[B+1]]);break}}}z(a,"NUM_VALUES",a.$i.length/4);z(a,"NUM_RGBS",a.Re.length);return!0}function l(a,b){var d=b.I.Hn;if(""!=d.Qe){a.Uj=!0;a.Qe=d.Qe;var c=Z.Cz(d.Qe).Ia;if(c){var f=null;ga.fa(c,function(b,
d){switch(d.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":R(a,d.data.value,d.data.name,d.data.Qt);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":f||(f=d.data.fb);break;case "VECT_TRANSFORM":switch(Number(d.hb[1][1])){case Z.VJ:z(a,"USE_MODEL_TSR_INVERSE",1);break;case Z.UJ:z(a,"USE_VIEW_TSR",1);break;case Z.TJ:z(a,"USE_MODEL_TSR",1);break;case Z.SJ:z(a,"USE_MODEL_TSR",1);z(a,"USE_VIEW_TSR",1);break;case Z.RJ:z(a,"USE_VIEW_TSR_INVERSE",
1);break;case Z.QJ:z(a,"USE_MODEL_TSR_INVERSE",1),z(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":z(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":z(a,"USE_VIEW_TSR_INVERSE",1)}});f&&R(a,f,"u_nodes_texture");d=a.mb.Pf=Z.hu(c);I(c,a);for(var c=a.li,e=a.ki,g=0;g<d.length;g++){var n=d[g];switch(n.id){case "VALUE":var t=n.Pr[0];if(t)for(var h=0;h<c.length;h+=3)if(c[h]==t){n.hb.push(["VALUE_ROW_IND",c[h+1]]);n.hb.push(["VALUE_COL_IND",c[h+2]]);break}break;case "RGB":if(t=n.Pr[0])for(h=0;h<e.length;h+=
2)if(e[h]==t){n.hb.push(["RGB_IND",e[h+1]]);break}}}z(a,"NUM_VALUES",a.$i.length/4);z(a,"NUM_RGBS",a.Re.length)}else ha.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),K(a,b.world.name)}}function I(a,b){var d=[],c=[],f=[],e=[];v(a,d,c,f,e);b.$i=d;b.li=c;b.Re=f;b.ki=e}function v(a,b,d,c,f){ga.fa(a,function(a,e){if("VALUE"==e.type){var g=""+e.name;b.push(e.outputs[0].Pa);var n=d.length/3;d.push(g,parseInt(n/4),parseInt(n%4))}else"RGB"==e.type&&(g=""+e.name,n=e.outputs[0].Pa.slice(0,
3),c.push(n[0],n[1],n[2]),f.push(g,f.length/2))});a=b.length+4-b.length%4;for(var e=b.length;e<a;e++)b.push(0)}function K(a,b){switch(a.type){case "SHADOW":X(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":X(a,"color_id.glslv","color_id.glslf");break;default:X(a,"main.glslv","main_stack.glslf")}z(a,"SHADELESS",1);F(a,"a_position");F(a,"a_tbn");na.set(1,0,1,1,a.gd);b&&(z(a,"ALPHA","OPAQUE"===b.xb?0:1),z(a,"ALPHA_CLIP","CLIP"===b.xb?1:0),z(a,"VERTEX_COLOR",0),a.Qd=b.Qd,e(a,b),a.Xa=b.Xa);return!0}
function k(a,b){if(b&&(b.Yj||b.df))return!1;X(a,"debug_view.glslv","debug_view.glslf");F(a,"a_position");F(a,"a_tbn");F(a,"a_polyindex");a.rb=!0;xa.set(0,0,0,a.wireframe_edge_color);return!0}function D(a,b){a.Le=b.Le;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==a.type?(b.Mm?z(a,"AU_QUALIFIER","GLSL_IN"):z(a,"AU_QUALIFIER","uniform"),z(a,"STATIC_BATCH",0)):(z(a,"AU_QUALIFIER","GLSL_IN"),z(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(ua.QF()?z(a,"WIREFRAME_QUALITY",1):z(a,"WIREFRAME_QUALITY",
0),a.Yk?(z(a,"DEBUG_SPHERE",1),a.Hy?z(a,"DEBUG_SPHERE_DYNAMIC",1):z(a,"DEBUG_SPHERE_DYNAMIC",0)):z(a,"DEBUG_SPHERE",0),z(a,"ALPHA",1));b.Xf&&"PARTICLES"!=a.type&&!b.Mm&&(a.Xf=b.Xf);b.Af?(""!==b.vl?(a.nd.a_bending_col_main={Ho:!0,src:[{name:b.vl,fi:4}]},F(a,"a_bending_col_main"),""!==b.Hf.tG&&""!==b.Hf.sG&&""!==b.Hf.aH?(a.nd.a_bending_col_detail={Ho:!0,src:[{name:b.Hf.tG,fi:4},{name:b.Hf.sG,fi:2},{name:b.Hf.aH,fi:1}]},F(a,"a_bending_col_detail"),F(a,"a_tbn"),z(a,"DETAIL_BEND",1)):z(a,"DETAIL_BEND",
0),z(a,"MAIN_BEND_COL",1)):z(a,"MAIN_BEND_COL",0),b.bo?z(a,"BEND_CENTER_ONLY",1):z(a,"BEND_CENTER_ONLY",0),z(a,"WIND_BEND",1)):z(a,"WIND_BEND",0);z(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.Mt|0);b.Kh?z(a,"BILLBOARD",1):z(a,"BILLBOARD",0);b.Kh&&b.Mm?z(a,"HAIR_BILLBOARD",1):z(a,"HAIR_BILLBOARD",0);b.Nt?z(a,"BILLBOARD_SPHERICAL",1):z(a,"BILLBOARD_SPHERICAL",0);switch(b.Ot){case "RANDOM":z(a,"BILLBOARD_RANDOM",1);z(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":z(a,"BILLBOARD_RANDOM",0);z(a,"BILLBOARD_JITTERED",
1);break;default:z(a,"BILLBOARD_RANDOM",0),z(a,"BILLBOARD_JITTERED",0)}b.hd&&O.Dx?z(a,"DYNAMIC_GRASS",1):z(a,"DYNAMIC_GRASS",0);a.hd=b.hd;"PARTICLES"!=a.type&&(a.ef=b.ef);a.Tf=b.Tf;a.uf=b.uf;a.ze=b.ze&&!a.Mc&&!(a.Bb&&O.iF);O.Sv?("MAIN"==a.type&&a.ze||"SHADOW"==a.type)&&z(a,"RGBA_SHADOWS",1):z(a,"RGBA_SHADOWS",0);a.Se=b.Se;a.xe=b.xe;a.we=b.we;a.Lr[0]=b.fk;a.jh=b.jh;a.kh=b.kh;a.tl=b.tl;a.ul=b.ul;a.Ke=b.Ke;a.te=b.te;b.Pm?(F(a,"a_influence"),z(a,"SKINNED",1),O.aC?(z(a,"DISABLE_TANGENT_SKINNING",1),z(a,
"FRAMES_BLENDING",0)):(z(a,"DISABLE_TANGENT_SKINNING",0),b.Eo?z(a,"FRAMES_BLENDING",1):z(a,"FRAMES_BLENDING",0)),z(a,"MAX_BONES",b.Yi)):(z(a,"SKINNED",0),z(a,"FRAMES_BLENDING",0),z(a,"DISABLE_TANGENT_SKINNING",0));b.Fd?(z(a,"VERTEX_ANIM",1),O.MS?z(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):z(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):z(a,"VERTEX_ANIM",0);b.Pm&&b.Fd&&Q.J("Skinning and vertex animation are mutually exlusive")}}function M(a,b,d){if(b.length){for(var c=ea.Hz(b,O.ssao&&d.b4w_enable_ssao),
f=a.mb,e=a.$o,g=0,n=0;n<a.mb.Pf.length;n++){var t=a.mb.Pf[n];if("LIGHTING_LAMP"==t.id){var h=b[g++%b.length],k=h.yd,B=ea.La(h,d);if("SPOT"==k.type||"POINT"==k.type)var l=Math.cos(k.ns/2);if("SPOT"==k.type)var H=k.tC*(1-l);h=c.indexOf(h);t.hb=[["LAMP_TYPE",k.type],["LAMP_IND",B.lv],["LAMP_SPOT_SIZE",aa.da(l||.01)],["LAMP_SPOT_BLEND",aa.da(H||.01)],["LAMP_LIGHT_DIST",aa.da(k.distance)],["LAMP_USE_SPHERE",k.RI?1:0],["LAMP_SHADOW_MAP_IND",h]]}else if("LAMP"==t.id&&e)for(var B=t.hb[0][1],r=0;r<b.length;r++)if(h=
b[r],e[h.md]==B){k=h.yd;if("SPOT"==k.type||"POINT"==k.type)l=Math.cos(k.ns/2);"SPOT"==k.type&&(H=k.tC*(1-l));t.hb.push(["LAMP_TYPE",k.type],["LAMP_SPOT_SIZE",aa.da(l||.01)],["LAMP_SPOT_BLEND",aa.da(H||.01)],["LAMP_LIGHT_DIST",aa.da(k.distance)],["LAMP_USE_SPHERE",k.RI?1:0])}}if(e){d=0;for(var v in e)d++;a.wr=new Float32Array(3*d);a.gv=new Float32Array(3*d);a.fv=new Float32Array(3*d);aa.xa(f,"NUM_LAMP_LIGHTS",d);for(n=0;n<b.length;n++)E(a,b[n])}}}function E(a,b){if(b.md in a.$o){var d=a.$o[b.md],c=
oa.W(b.v.C);a.wr.set(c,3*d);a.gv.set(b.yd.direction,3*d);a.fv.set(b.yd.fu,3*d)}}function S(a,b){for(var d=0;d<b.length;d++){var c=b[d].settings.b4w_vcol_from_name,f=b[d].settings.b4w_vcol_to_name;""!==c&&""!==f&&(a.nd[c]={Ho:!1,src:[{name:c,fi:7}]})}}function F(a,b){var d=a.Tk;-1==d.indexOf(b)&&d.push(b);a.Tk=d.sort()}function z(a,b,d){aa.xa(a.mb,b,d)}function C(a,b){if("PHYSICS"==a.type)"NAVMESH"==a.Hb?a.Ga=pa.NR(b,pa.Up,[]):(0<b.wb.length&&pa.r4(b,b.la[0]),a.Be=b);else{var d=a.Mj;a.Tz&&"PARTICLES"!=
a.type&&(b=pa.uZ(b));a.oD&&(b=da.RZ(a.pD,a.qD,a.nD));d=pa.NR(b,d,a.nd);a.Ga=d;a.ef||a.$f||a.Xf||(d.kf=null,d.Sc.length=0);d=b.la.length;a.sv=b.gb*d;var c;a:switch(a.Mj){case pa.Up:case pa.bt:case pa.Nw:c=!0;break a;default:c=!1}c?pa.A0(b)?a.jp=b.Ea.length/3*d:a.jp=b.gb/3*d:a.jp=0}}function r(a,b,d,c,e,g,n,h,t,k,B,l){var H=a.Oa,r=[],v=h.b4w_dynamic_grass;if(!k&&v)return r;for(var X="INSTANCE"==h.b4w_wind_bend_inheritance,y="INSTANCE"==h.b4w_shadow_inheritance,x="INSTANCE"==h.b4w_reflection_inheritance,
q=[],R=[],Z=0;Z<e.length;Z++){var p=e[Z].Oa.v,C=ea.EE(b);C.Kh=h.b4w_hair_billboard;C.Ot=h.b4w_hair_billboard_type;C.Nt="SPHERICAL"==h.b4w_hair_billboard_geometry;C.hd=v;C.Mm=!0;X?(C.Af=p.Af,C.Pp=p.Pp,C.Ng=p.Ng,C.og=p.og,C.vl=p.vl,C.ng=p.ng,C.hg=p.hg,C.Mg=p.Mg,C.Hf=p.Hf,C.bo=!1):(C.Af=H.v.Af,C.Pp=H.v.Pp,C.Ng=H.v.Ng,C.og=H.v.og,C.vl=H.v.vl,C.ng=H.v.ng,C.hg=H.v.hg,C.Mg=H.v.Mg,C.Hf=H.v.Hf,C.bo=!0);y?(C.Tf=p.Tf,C.uf=p.uf,C.ze=p.ze):(C.Tf=H.v.Tf,C.uf=H.v.uf,C.ze=H.v.ze);x?(C.Se=p.Se,C.xe=p.xe,C.we=p.we,
C.Ke=p.Ke,C.te=p.te,C.gj=p.gj):(C.Se=H.v.Se,C.xe=H.v.xe,C.we=H.v.we,C.Ke=H.v.Ke,C.te=H.v.te,C.gj=H.v.gj);q.push(C);var K=n[Z];K||(K=new Float32Array);l&&Q.fA(t.seed,B);var E=new Float32Array(3),N=new Float32Array([0,0,0,1]),A=[],J=wa.rL(O.vG)&&!h.b4w_initial_rand_rotation&&!h.b4w_hair_billboard,F=4;J&&(F=8);for(var V=0;V<K.length;V+=F){E[0]=K[V];E[1]=K[V+1];E[2]=K[V+2];var M=K[V+3]*oa.ge(p.C);if(h.b4w_initial_rand_rotation){switch(h.b4w_rotation_type){case "XYZ":var Oa=new Float32Array([Q.oi(B),Q.oi(B),
Q.oi(B)]);xa.normalize(Oa,Oa);break;case "Z":Oa=new Float32Array([0,0,1]);break;default:Q.J("Unsupported random rotation type: "+h.b4w_rotation_type)}ba.setAxisAngle(Oa,h.b4w_rand_rotation_strength*(2*Math.PI*Q.oi(B)-Math.PI),N)}else if(J&&(N.set(K.subarray(V+4,V+8)),Q.oH(N,N),!h.use_whole_group))if(h.use_rotation_dupli){var G=oa.ha(p.C);ba.multiply(N,G,N)}else ba.multiply(N,Y,N);var P=oa.si(E,M,N,oa.create());A.push(P)}R.push(A)}for(var ia={},da=0,Z=0;Z<e.length;Z++)for(var L=e[Z].Oa.Bc,V=0;V<L.length;V++)L[V].name in
ia?ia[L[V].name]++:(ia[L[V].name]=1,da++);for(var da=da?da:1,u={},Z=0;Z<e.length;Z++){var I=e[Z],Fa=g[Z],C=q[Z],za={};C.Af&&(za.au_wind_bending_amp=[C.Mg],za.au_wind_bending_freq=[C.Ng],za.au_detail_bending_freq=[C.og],za.au_detail_bending_amp=[C.ng],za.au_branch_bending_amp=[C.hg],C.Mg=0,C.Ng=0,C.og=0,C.ng=0,C.hg=0);A=R[Z];if(A.length){for(var T=I.data,L=I.Oa.Bc,ga=Array(L.length),Aa=Array(L.length),V=0;V<L.length;V++)if(!la(H,V)&&!pa.fO(T,V))for(var ta=0;ta<Fa.length;ta++){var ua=Fa[ta],na=m(ua),
Ka=L[V];"MAIN"==ua?ga[V]=na:"DEBUG_VIEW"==ua&&(Aa[V]=na);na.du=a.b4w_cluster_data.cluster_id;if(f(na,Ka)&&w(na,Ka)){"SHADOW"==ua&&ga[V]&&(na.Mc=ga[V].Mc);na.Mj=pa.Up;D(na,C);na.Xm=fa(na,C,h.uuid);na.$k=a.b4w_do_not_cull||h.b4w_dynamic_grass;"MAIN"==na.type&&(na.ah=a.b4w_caustics);z(na,"DISABLE_FOG",("COLOR_ID"!=ua&&"SHADOW"!=ua&&a.b4w_disable_fogging)|0);"JITTERED"==h.b4w_hair_billboard_type&&(na.qA=h.b4w_hair_billboard_jitter_amp,na.rA=h.b4w_hair_billboard_jitter_freq);v&&(na.Nz=h.b4w_dynamic_grass_scale_threshold);
X||(delete na.nd.a_bending_col_main,delete na.nd.a_bending_col_detail);var ka=pa.cz(T,V,na.Tk,b.Aj,na.nd,na.uk),Na=H.v.C,Ya=!0;if(1<ia[Ka.name]){var vb=0,ec;for(ec in ka.la)vb++;Ya=ka.Ea.length*A.length*vb*ia[Ka.name]>2E5*da}var S=O.rK&&Ya&&"PHYSICS"!=na.type;if(S){na.tO=h.use_whole_group?2:1;var $a=pa.rX(ka);pa.bL(ka,$a,A);$a.Nf={pw:A,mI:Na,ER:"STATIC"==b.type,BC:za,Rr:{},Uy:v};if(C.Af&&C.bo){var cb=xa.fromValues(0,0,0);oa.Lc(cb,H.v.C,cb);for(var Ga=[],Ba=0;Ba<A.length;Ba++)Ga.push(cb[0],cb[1],cb[2]);
$a.Nf.Rr.a_emitter_center={Qc:3,data:Ga}}pa.bL(ka,ka,A);"STATIC"==b.type&&pa.vW($a.Dd,Na)}else{var aa=$a=pa.l1(ka,za,A),va=A;aa.Da.au_center_pos=new Float32Array(3*aa.gb);for(var qa=va.length,ma=aa.gb/qa,Va=0;Va<qa;Va++)for(var ja=va[Va],ca=3*ma*Va,Qa=0;Qa<ma;Qa++)aa.Da.au_center_pos[ca+3*Qa]=ja[0],aa.Da.au_center_pos[ca+3*Qa+1]=ja[1],aa.Da.au_center_pos[ca+3*Qa+2]=ja[2];$a=aa;if(C.Af&&C.bo){var ya=$a,La=H.v.C;ya.Da.a_emitter_center=new Float32Array(3*ya.gb);var Ua=xa.fromValues(0,0,0);oa.Lc(Ua,La,
Ua);for(var Ha=0;Ha<ya.gb;Ha++)ya.Da.a_emitter_center[3*Ha]=Ua[0],ya.Da.a_emitter_center[3*Ha+1]=Ua[1],ya.Da.a_emitter_center[3*Ha+2]=Ua[2];$a=ya}}var Sa=h.b4w_vcol_from_name,Ia=h.b4w_vcol_to_name,Ma=na,Gb=d,Pb=!X,pb=T,Xa=[];if(""!==Sa&&""!==Ia){var Wb,dd=void 0,Vc=Ia,fc=Ma.nd,Jc=[];for(dd in fc)for(var Qb=fc[dd].src,Kc=0,lc=0;lc<Qb.length;lc++){var Lc=Qb[lc].fi;Vc==Qb[lc].name&&Jc.push(dd,Lc,Kc);Kc+=Q.tp(Lc)}Wb=Jc;if(0<Wb.length)for(var Rb=0;Rb<Wb.length;Rb+=3)Xa.push({Cu:Sa,Wy:7,hB:Wb[Rb],iB:Wb[Rb+
1],Ty:Wb[Rb+2]});else pa.X_(Ma.Tk,"a_color")&&Ia==pb.active_vcol_name&&Xa.push({Cu:Sa,Wy:7,hB:"a_color",iB:7,Ty:0})}Pb&&("a_bending_col_main"in Gb&&Xa.push({Cu:"a_bending_col_main",Wy:4,hB:"a_bending_col_main",iB:4,Ty:0}),"a_bending_col_detail"in Gb&&Xa.push({Cu:"a_bending_col_detail",Wy:7,hB:"a_bending_col_detail",iB:7,Ty:0}));for(var Ib=$a,sb=A,mc=c,lb=Xa,Wc=na.nd,ed=S,Mc=!1,zb=0;zb<lb.length;zb++){var Ab=lb[zb].Cu,Sb=mc.Da[Ab];if(Sb&&0<Sb.length){Mc=!0;break}}if(ed)var Xb=Ib.Nf.Rr;if(Mc){var Kb,
gc=H.v.Aa,Lb=mc.la[0].a_position,wb=sb,Ta=u,Yb=new Float32Array(3),Nb=new Float32Array(3),eb=new Uint32Array(wb.length);if(!("verts_indices"in Ta)){Ta.Rk=new Float32Array(3);Ta.Kk=new Float32Array(3);Ta.TI=new Uint32Array(Lb.length/3);Ta.uv=new Uint32Array(Lb.length/3);Ta.Rk[0]=(gc.max_x-gc.min_x)/20;Ta.Rk[1]=(gc.max_y-gc.min_y)/20;Ta.Rk[2]=(gc.max_z-gc.min_z)/20;Ta.Kk[0]=gc.min_x;Ta.Kk[1]=gc.min_y;Ta.Kk[2]=gc.min_z;for(var db=0;db<Lb.length/3;db++){var Zb=Lb[3*db+1],hc=Lb[3*db+2],zc=Q.trunc((Lb[3*
db]-Ta.Kk[0])/Ta.Rk[0]),Xc=Q.trunc((Zb-Ta.Kk[1])/Ta.Rk[1]),vc=Q.trunc((hc-Ta.Kk[2])/Ta.Rk[2]),zc=Q.ja(zc,0,19),Xc=Q.ja(Xc,0,19),vc=Q.ja(vc,0,19);Ta.TI[db]=db;Ta.uv[db]=vc*Math.pow(20,2)+20*Xc+zc}pa.Y3(Ta.uv,Ta.TI,pa.RD,!0);Ta.Kp=new Uint32Array(Math.pow(20,3));for(db=0;db<Ta.uv.length;db++)Ta.Kp[Ta.uv[db]]++;delete Ta.uv;for(db=1;db<Ta.Kp.length;db++)Ta.Kp[db]+=Ta.Kp[db-1]}for(var pc=0;pc<wb.length;pc++){Yb[0]=wb[pc][0];Yb[1]=wb[pc][1];Yb[2]=wb[pc][2];for(var tb=1E10,wc=-1,fd=Q.trunc((Yb[0]-Ta.Kk[0])/
Ta.Rk[0]),Yc=Q.trunc((Yb[1]-Ta.Kk[1])/Ta.Rk[1]),fb=Q.trunc((Yb[2]-Ta.Kk[2])/Ta.Rk[2]),fd=Q.ja(fd,0,19),Yc=Q.ja(Yc,0,19),fb=Q.ja(fb,0,19),Tb=fb*Math.pow(20,2)+20*Yc+fd,$b=Ta.Kp[Tb],ac=0==Tb?0:Ta.Kp[Tb-1];ac<$b;ac++){var Ac=Ta.TI[ac];Nb[0]=Lb[3*Ac];Nb[1]=Lb[3*Ac+1];Nb[2]=Lb[3*Ac+2];xa.sub(Nb,Yb,Nb);var Ub=xa.sqrLen(Nb);Ub<=tb&&(tb=Ub,wc=Ac)}if(-1==wc)for(ac=0;ac<Lb.length/3;ac++)Nb[0]=Lb[3*ac],Nb[1]=Lb[3*ac+1],Nb[2]=Lb[3*ac+2],xa.sub(Nb,Yb,Nb),Ub=xa.sqrLen(Nb),Ub<=tb&&(tb=Ub,wc=ac);eb[pc]=wc}Kb=eb;
for(var nd=Ib.gb/sb.length,zb=0;zb<lb.length;zb++){var gb=lb[zb].hB,ib=lb[zb].iB,Ab=lb[zb].Cu,Bd=lb[zb].Wy,Sb=mc.Da[Ab];switch(gb){case "a_bending_col_main":var Nc=1;break;case "a_bending_col_detail":Nc=3;break;case "a_color":Nc=3;break;default:for(var qc=Nc=0;qc<Wc[gb].src.length;qc++)Nc+=Q.tp(Wc[gb].src[qc].fi)}if(Sb&&0<Sb.length){var td=Q.tp(Bd),Qd=Q.tp(ib),Cd=Bd&ib,gd=Q.oQ(Cd);Cd!=ib&&ha.error("Wrong color extraction from "+Ab+" to "+gb+".");if(ed)for(Xb[gb]={Qc:Nc,data:[]},qc=0;qc<sb.length;qc++)for(Dd=
Kb[qc],ud=Dd*td,cc=0;cc<gd.length;cc++)gd[cc]&&(Bc=Q.Xr(Bd,cc),Xb[gb].data.push(Sb[ud+Bc]));else{if("a_bending_col_main"==gb||"a_bending_col_detail"==gb)Ib.Da[gb]=new Float32Array(Ib.gb*Qd);for(qc=0;qc<sb.length;qc++){var Dd=Kb[qc],ud=Dd*td,Ed=qc*nd*Nc;if(-1!=Dd)for(var xc=0;xc<nd;xc++)for(var hd=xc*Nc,cc=0;cc<gd.length;cc++)if(gd[cc]){var Bc=Q.Xr(Bd,cc);Ib.Da[gb][Ed+hd+(lb[zb].Ty+Q.Xr(ib,cc))]=Sb[ud+Bc]}}}}else Ib.Da[gb]=new Float32Array(0)}}$a=Ib;z(na,"USE_INSTANCED_PARTCLS",$a.Nf?1:0);W(na);r.push({Fa:na,
oh:b,Qx:C,Be:$a,hi:[Ka.name],Te:[a]})}}for(V=0;V<Aa.length;V++)Aa[V]&&(Aa[V].Lq=ga[V].id,W(Aa[V]))}}return r}function f(a,b){var d=!0;"NODES_GLOW"==a.type&&(d=Z.pL(b));return d}function W(a){d(a,function(a){a.id=0;a.id=Q.cL(a)})}function d(a,b){for(var d=null,c=null,f=[],e=0;e<a.qa.length;e++){var g=a.qa[e],n=g.Mh;n&&(d||(d={}),d[e]=n,g.Mh=null);if(n=g.qb)c||(c={}),c[e]=n,g.qb=null;f.push(g.AP);g.AP=0}g=a.Cb;a.Cb=null;n=a.Yf;a.Yf=null;var h=a.Ga;a.Ga=null;var t=a.Be;a.Be=null;b(a);a.Ga=h;a.Be=t;a.Yf=
n;a.Cb=g;if(d)for(e in d)a.qa[e].Mh=d[e];if(c)for(e in c)a.qa[e].qb=c[e];for(e=0;e<a.qa.length;e++)a.qa[e].AP=f[e]}function n(a,b,d,c){var f=m("DEBUG_VIEW");X(f,"debug_view.glslv","debug_view.glslf");f.Yk=!0;f.rb=!0;f.Xm=fa(f,a,b);f.Hy=d;D(f,a);W(f);if(c.Bn){a=c.Cb.fg;var e=xa.create();b=da.wF(1,e);d=xa.fromValues(xa.length(a.Za),xa.length(a.$a),xa.length(a.ab));pa.tQ(b,d,e);var e=xa.normalize(a.Za,ia),g=xa.normalize(a.$a,ka),n=xa.normalize(a.ab,Ba);!d[0]&&d[1]&&d[2]?xa.cross(g,n,e):!d[1]&&d[0]&&
d[2]?xa.cross(n,e,g):!d[2]&&d[0]&&d[1]&&xa.cross(e,g,n);d=Q.fZ(e,g,n,V);B.invert(d,d);d=ba.fromMat3(d,Fa);oa.Ec(d,Ka);oa.Ue(1,Ka);oa.Bd(a.T,Ka);pa.oI(b,Ka)}else a=c.Cb.ig,b=da.wF(a.ub,a.T);H.SL(c.Cb,f.Cb);pa.AC(b,1,!0);b.Da.a_polyindex=pa.bz(b);C(f,b);return f}function X(a,b,d){a.mb.Kg=b;a.mb.gf=d;aa.g3(a.mb)}function R(a,b,d,c){c=c||"";-1==a.Hg.indexOf(d)&&(a.qa.push(b),a.Hg.push(d),a.gg.push(c));a.zb&&T.IK(a)}function t(a){a.mb||Q.J("No shaders info for batch "+a.name);a.zb=aa.k_(a.mb);var b=a.mb;
if(b.status===aa.PJ){var d=a.zb.attributes,c=a.Ga.bd,f;for(f in d)c[f]||Q.J('missing data for "'+f+'" attribute')}b.status&aa.iT&&ha.error("Texture limit exceeded for shader - "+b.gf+', materials: "'+a.Ac.join(", ")+'". Maximum texture count: '+Oa.EG+", actual texture count: "+b.HC);b.status&aa.hT&&ha.error("Fragment uniform limit exceeded for shader - "+b.gf+', materials: "'+a.Ac.join(", ")+'". ');b.status&aa.lT&&ha.error("Vertex uniform limit exceeded for shader - "+b.Kg+', materials: "'+a.Ac.join(", ")+
'". ');b.status&aa.kT&&ha.error("Vertex attribute limit exceeded for shader - "+b.Kg+', materials: "'+a.Ac.join(", ")+'". Maximum attribute count: '+Oa.FG+", actual attribute count: "+b.Lx);b.status&aa.jT&&("MAIN"!=a.type||a.Uj||ha.error("Varying limit exceeded for shader - "+a.mb.gf+', materials: "'+a.Ac.join(", ")+'"'),"MAIN"==a.type&&a.Uj||"NODES_GLOW"==a.type)&&(c=d=0,a.uk&&(d=Q.kl(a.uk)),a.nd&&(c=Q.kl(a.nd)),ha.error("Varying limit exceeded for node shader - "+a.mb.gf+", uv: "+d+", vc: "+c+', materials: "'+
a.Ac.join(", ")+'"'));b.status&aa.eT&&ha.error("Shader compilation/linking error: "+b.Kg+", "+b.gf+', materials: "'+a.Ac.join(", ")+'"');return a.mb.status===aa.PJ?(T.fW(a.zb),T.FK(a),T.IK(a),!0):!1}function fa(a,b,d){return"NAVMESH"==a.Hb?d:b.ef?"_odd_id_"+Q.jS():d}function la(a,b){return 0<=b&&b<a.lh.Ro.length&&a.lh.Ro[b]}var H=u("__boundings"),za=u("__config"),ha=u("__print"),ua=u("__extensions"),ga=u("__graph"),B=u("__mat3"),Z=u("__nodemat"),ea=u("__obj_util"),Aa=u("__particles"),da=u("__primitives"),
ba=u("__quat"),wa=u("__reformer"),T=u("__renderer"),ma=u("__scenegraph"),aa=u("__shaders"),ja=u("__subscene"),ca=u("__textures"),oa=u("__tsr"),pa=u("__geometry"),Q=u("__util"),xa=u("__vec3"),na=u("__vec4"),O=za.K,Oa=za.Ki,Na=za.Yr,ta=za.jO,Y=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),ia=new Float32Array(3),ka=new Float32Array(3),Ba=new Float32Array(3),Fa=new Float32Array(4),Ka=oa.create(),V=B.create(),Ya={},va=new Float32Array(24);a.kW=function(a){return Ya[a]||null};a.lW=function(a,b){Ya[a]=
b};a.nX=c;a.XM=function(a,b,d,c){var f;f=a.I.Ia;for(var e=[],g=0;g<b.length;g++){var t=b[g],k=t.Oa;k.av||e.push.apply(e,h(t,k.v,f))}f=G(e);for(e=0;e<f.length;e++)if(g=f[e].Fa,g.Ac=f[e].hi,C(g,f[e].Be),M(g,d,a),"STATIC"==f[e].v.type&&"COLOR_ID"!=g.type){var t=Q.rw("%meta%"+g.type+"%"+g.Ac.join("%")+"%"),B=ea.ou(t,"MESH");ea.w1(B,f[e].v);ea.Hx(B,a);ea.Xg(B,a,g);c.push(B);if("MAIN"==g.type)for(k=0;k<f[e].Te.length;k++)t=f[e].Te[k].Oa,t.ov.push(B)}else t=f[e].Te[0].Oa,ea.Xg(t,a,g);if(O.debug_view){for(e=
0;e<f.length;e++)if(d=f[e].v,"DYNAMIC"==d.type&&(t=f[e].Te[0].Oa,g=f[e].Fa,"MAIN"==g.type)){for(var k=ea.La(t,a),B=k.aa,l=!1,k=0;k<B.length;k++)B[k].Yk&&(l=!0);l||(d=n(d,t.name,!0,g),ea.Xg(t,a,d))}for(e=0;e<c.length;e++)t=c[e],d=t.v,k=ea.La(t,a),g=k.aa[0],"MAIN"==g.type&&(d=n(d,t.name,!1,g),ea.Xg(t,a,d));for(e=0;e<f.length;e++)g=f[e].Fa,"DEBUG_VIEW"==g.type&&(g.Fy=e)}for(e=0;e<b.length;e++)for(k=ea.La(b[e].Oa,a),B=k.aa,k=0;k<B.length;k++)p(B[k]);for(e=0;e<c.length;e++)for(k=ea.La(c[e],a),B=k.aa,k=
0;k<B.length;k++)p(B[k])};a.RV=function(a,b,d){var f=a.I.Hn,e=m("MAIN");X(e,"sky.glslv","sky.glslf");e.ol=!0;if(b.procedural_skydome)z(e,"PROCEDURAL_SKYDOME",1),e.Sy=!0;else{var g=f.xp,n=ma.uc(a.I.Ia,ja.Xe).F.tc;R(e,n,"u_sky");g&&(z(e,"WO_SKYTEX",1),g.invert&&z(e,"MTEX_NEGATIVE",1),g.ES&&z(e,"MTEX_RGBTOINT",1),z(e,"BLENDTYPE",g.WK),g.zS&&z(e,"WOMAP_BLEND",1),g.AS&&z(e,"WOMAP_HORIZ",1),g.CS&&z(e,"WOMAP_ZENUP",1),g.BS&&z(e,"WOMAP_ZENDOWN",1));f.Fp&&z(e,"WO_SKYBLEND",1);f.Gp&&z(e,"WO_SKYPAPER",1);f.Hp&&
z(e,"WO_SKYREAL",1)}b.Se&&(e.Se=!0,b.xe&&(e.xe=!0));F(e,"a_position");b=da.VZ();C(e,b);p(e);e.$k=!0;W(e);ea.Xg(d,a,e);ma.uc(a.I.Ia,ja.Ai)&&(f=c(e),f.type="DEBUG_VIEW",f.Hb="",k(f),z(f,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.Da.a_polyindex=pa.bz(b),C(f,b),f.Lq=e.id,W(f),ea.Xg(d,a,f))};a.ry=function(a,b,d){var f=ea.La(a,d).aa,e=[],g=ma.uc(b,ja.He),n=ma.uc(b,ja.Zd),h=ma.uc(b,ja.Bi);b=ma.uc(b,ja.Cf);for(var t=0;t<f.length;t++){var k=f[t],B=null;"SHADOW"==k.type&&"RECEIVE"==k.Hb&&k.Tf&&(B=c(k),B.Hb="CAST");
"MAIN"!=k.type&&"PARTICLES"!=k.type||!g&&!n||!k.Se||(B=c(k),B.Hb="REFLECT",B.Dl=!1,B.$f&&(B.$f=!1,B.rb=!1),B.Qa=k.Qa);"COLOR_ID"==k.type&&h&&a.v.Ad&&(b&&a.v.gn?(B=c(k),B.Hb="OUTLINE"):k.Hb="OUTLINE");B&&(B.Uh=!0,W(B),e.push(B))}for(f=0;f<e.length;f++)ea.Xg(a,d,e[f])};a.WS=function(a,b,d){return(b=d*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};a.T5=function(a,b,d){b=d*(b.max_z-b.min_z);if(!b)return 0;a=2*b*a;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/b)};a.mW=
function(a){var b=H.Gf();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};a.M4=K;a.L4=M;a.q3=E;a.HK=function(a,b){z(a,"CSM_SECTION1",0);z(a,"CSM_SECTION2",0);z(a,"CSM_SECTION3",0);z(a,"NUM_CAST_LAMPS",0);if(b){z(a,"NUM_CAST_LAMPS",b.Xi.length);O.FA&&z(a,"MAC_OS_SHADOW_HACK",1);for(var d=1;d<b.csm_num;d++)z(a,"CSM_SECTION"+String(d),1);z(a,"SHADOW_TEX_RES",aa.da(b.csm_resolution));z(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?1:0);z(a,"CSM_BLEND_BETWEEN_CASCADES",
b.blend_between_cascades?1:0)}else z(a,"SHADOW_TEX_RES",0),z(a,"CSM_FADE_LAST_CASCADE",0),z(a,"CSM_BLEND_BETWEEN_CASCADES",0)};a.Sf=z;a.f_=function(a){return aa.q_(a.mb,"STEPS_PER_PASS")};a.J4=C;a.K4=W;a.c5=function(a,b){a.Cb.Ef=H.fE(b,0,b.length,a.Cb.Ef);var d=H.HM(a.Cb.Ef,va);a.Cb.fg=H.oy(d,!0);a.Cb.ig=H.qy(a.Cb.fg);a.Bn=H.yO(a.Cb.fg,a.Cb.ig)};a.Jx=X;a.km=R;a.F2=function(a,b,d){d=a.Hg.indexOf(d);-1<d&&(a.qa[d]=b)};a.aY=function(a,b){var d=m("MAIN");d.Bb=!0;na.set(b[0],b[1],b[2],.5,d.gd);d.Mj=pa.bt;
C(d,a);X(d,"main.glslv","main_stack.glslf");z(d,"SHADELESS",1);t(d);return d};a.Ed=t;a.WM=function(a,b){for(var d=0;d<b.length;d++){var c=b[d],f=m("LINE");X(f,"line.glslv","line.glslf");f.Bb=!0;f.$k=!0;var e=da.XZ();C(f,e);p(f);ea.Hx(c,a);ea.Xg(c,a,f);t(f)}};a.TW=function(a){return a.zb.yv.length?a.zb.gH.u_cube_fog?!0:!1:!1};a.KX=function(){var a=m("DEPTH_PACK");a.Xa=!0;a.rb=!1;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");t(a);return a};a.uy=function(a){var b=
m("POSTPROCESSING");X(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":z(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":z(b,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":z(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":z(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":z(b,"POST_EFFECT","POST_EFFECT_DOF_BLUR");
break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":z(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":z(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":z(b,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:Q.J("Wrong postprocessing effect: "+a)}z(b,"SHADOW_USAGE","NO_SHADOWS");b.Xa=!0;b.rb=!1;a=da.Md();C(b,a);t(b);return b};a.dY=function(a){var b=m("SSAO");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");
z(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.zp);z(b,"SSAO_HEMISPHERE",a.rs?1:0);z(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};d=ca.wm(ca.Ci,!1);d.source="NODE_TEX";ca.tw(d,a,0);R(b,d,"u_ssao_special_tex");t(b);return b};a.eY=function(a){var b=m("SSAO_BLUR");b.rb=!1;b.Xa=!0;var d=
da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");z(b,"SSAO_BLUR_DEPTH",a.os?1:0);z(b,"SHADOW_USAGE","NO_SHADOWS");t(b);return b};a.FX=function(a){var b=m("COC");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");z(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":z(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":z(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":z(b,"COC_TYPE","COC_COMBINE")}z(b,
"SHADOW_USAGE","NO_SHADOWS");t(b);return b};a.LX=function(a){var b=m("DOF");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.F.dof_bokeh?z(b,"DOF_TYPE","DOF_BOKEH"):(z(b,"DOF_TYPE","DOF_SIMPLE"),z(b,"DEPTH_RGBA",1));z(b,"SHADOW_USAGE","NO_SHADOWS");t(b);return b};a.TX=function(){var a=m("OUTLINE");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");t(a);return a};a.NX=function(){var a=
m("GLOW_COMBINE");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");t(a);return a};a.OX=function(a,b,d){var c=m("GOD_RAYS");c.rb=!1;c.Xa=!0;var f=da.QZ();C(c,f);X(c,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");z(c,"DEPTH_RGBA",a?1:0);z(c,"WATER_EFFECTS",b?1:0);z(c,"STEPS_PER_PASS",aa.da(d,1));z(c,"SHADOW_USAGE","NO_SHADOWS");t(c);return c};a.PX=function(){var a=m("GOD_RAYS_COM");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,
"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");z(a,"SAFARI_CANVAS_ALPHA_HACK",O.sQ?1:0);t(a);return a};a.HX=function(a,b){var d=m("SKY");d.rb=!1;d.Xa=!1;var c=da.$Z();C(d,c);""!=b.eC?(X(d,"skybox.glslv","node_skybox.glslf"),z(d,"IS_WORLD",1),l(d,a)):b.procedural_skydome?(X(d,"skybox.glslv","proc_skybox.glslf"),z(d,"WATER_EFFECTS",1)):(X(d,"skybox.glslv","tex_skybox.glslf"),a&&(c=a.I.Hn,c.gC&&R(d,ca.hf(c.gC),"u_sky_texture",c.gC.texture.name),c.xp&&z(d,"WO_SKYTEX",1)),
b.dC&&z(d,"MTEX_NEGATIVE",1),b.lC&&z(d,"MTEX_RGBTOINT",1),z(d,"BLENDTYPE",b.cC),b.hC&&z(d,"WOMAP_BLEND",1),b.iC&&z(d,"WOMAP_HORIZ",1),b.kC&&z(d,"WOMAP_ZENUP",1),b.jC&&z(d,"WOMAP_ZENDOWN",1),b.Fp&&z(d,"WO_SKYBLEND",1),b.Gp&&z(d,"WO_SKYPAPER",1),b.Hp&&z(d,"WO_SKYREAL",1));t(d);return d};a.JV=function(a,b){var d=ma.uc(a.I.Ia,ja.Xe);d&&ea.Xg(b,a,d.ib[0].Ra[0].Fa)};a.BX=function(a){var b=m("ANTIALIASING");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");
O.XP?(z(b,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),z(b,"AA_QUALITY",a.nz)):z(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");t(b);return b};a.bY=function(a){var b=m("SMAA"),d=da.Md();C(b,d);X(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");z(b,"AA_METHOD","AA_METHOD_SMAA_HIGH");z(b,"SMAA_PASS",a);z(b,"SMAA_PREDICATION",0);z(b,"SMAA_REPROJECTION",0);t(b);b.rb=!1;b.Xa=!0;return b};a.GX=function(){var a=m("COMPOSITING");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");
t(a);return a};a.SX=function(){var a=m("MOTION_BLUR");a.Xa=!0;a.rb=!1;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");t(a);return a};a.fY=function(a){var b=m("STEREO");b.Xa=!0;b.rb=!1;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");z(b,"ANAGLYPH","ANAGLYPH"===a?1:0);z(b,"DISTOR_SCALE",ta.nonwebvr.yM);t(b);return b};a.QX=function(){var a=m("LUMINANCE");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv",
"postprocessing/luminance.glslf");t(a);return a};a.CX=function(){var a=m("LUMINANCE");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");t(a);return a};a.RX=function(a){var b=m("LUMINANCE_X_BLUR");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,d);X(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&aa.xa(b.mb,"ADAPTIVE_BLOOM",1);t(b);return b};a.EX=function(a){var b=m("BLOOM");b.rb=!1;b.Xa=!0;var d=da.Md();C(b,
d);X(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var c="BLUR_PASS_1";else 2==a?c="BLUR_PASS_2":3==a?c="BLUR_PASS_3":4==a?c="BLUR_PASS_4":5==a&&(c="BLUR_PASS_5");aa.xa(b.mb,"BLUR_PASS_NUM",c);t(b);return b};a.DY=function(){var a=m("VELOCITY");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");t(a);return a};a.AX=function(){var a=m("ANCHOR_VISIBILITY");a.rb=!0;a.Xa=!0;a.Mj=pa.bt;X(a,"anchors.glslv",
"anchors.glslf");var b=da.VM(1);C(a,b);z(a,"ANCHOR_NUM",1);t(a);a.Wn=new Float32Array(3);return a};a.VX=function(){var a=m("PERFORMANCE");a.rb=!1;a.Xa=!0;var b=da.Md();C(a,b);X(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");t(a);return a};a.I4=function(a,b){var d=b.length/3;if(d!=a.Wn.length/3){var c=da.VM(d);C(a,c);z(a,"ANCHOR_NUM",d);t(a)}a.Wn=b};a.s_=function(a){if(!a.P.length)return null;a=a.P[0];return a.aa.length?a.aa[0]:null};a.N$=function(a,b,d){a=a.P[0].aa;for(var c=
0;c<a.length;c++)if(a[c].type==d&&-1!=a[c].Ac.indexOf(b))return a[c];return null};a.Cm=function(a,b){for(var d=a.P[0].aa,c=0;c<d.length;c++)if("MAIN"==d[c].type&&!d[c].Uh&&-1!=d[c].Ac.indexOf(b))return d[c];return null};a.O$=function(a,b,d){a=a.P[0].aa;for(var c=0;c<a.length;c++)if(a[c].type==d&&a[c].Uh&&-1!=a[c].Ac.indexOf(b))return a[c];return null};a.pG=function(a,b,d,c){a=a.P[0].aa;for(var f=0;f<a.length;f++){var e=a[f];if(-1!=e.Ac.indexOf(b)&&(!c||e.type==c)&&d(e))break}};a.f9=function(a,b){for(var d=
a.P[0].aa,c=0;c<d.length;c++)if(d[c].type==b)return!0;return!1};a.e_=function(a,b){for(var d=(b?ea.La(a,b):a.P[0]).aa,c=0;c<d.length;c++)if("SKY"==d[c].type)return d[c];return null};a.CL=function(a){var b=a.qa;a.qa=[];for(var d=0;d<b.length;d++)ca.BL(b[d]);a.qa=b;a.Ga&&a.Ga.Nh&&pa.hX(a.Ga);a.Nh&&a.Yf.length&&T.kX(a);a.zb&&a.zb.Nh&&aa.jX(a.zb);a.Qe&&(b=Z.Cz(a.Qe))&&b.AL&&Z.iX(a.Qe)};a.ZZ=fa;a.Ja=function(){Ya={}}};b4w.module.__config=function(a,u){function m(){return b4w.module_check(a.Rf.Zx)}function c(){for(var c=a.Rf,m=null,q=document.getElementsByTagName("script"),p=0;p<q.length;p++){for(var A=q[p].src,g=0;g<c.NO.length;g++)if(0<=A.indexOf(c.NO[g])){m=A;break}if(null!==m)break}m||(b.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),m=document.location.href);c=m.indexOf("?");0<=c&&(m=m.substring(0,c));return m.substring(0,m.lastIndexOf("/"))}var b=u("__print"),
p=u("__util");a.gm=1;a.Ak=2;a.On=3;a.MJ=4;a.tt=5;a.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};a.RL=p.X(a.context);a.K={alpha_sort:!0,alpha_sort_threshold:.1,ep:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,OM:1,HZ:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Sl:3,allow_cors:!1,NM:!1,aE:!0,anisotropic_filtering:!0,wI:!1,show_hud_debug_info:!1,Ky:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,
bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,VS:!1,Fu:!0,gB:!0,hd:!0,water_dynamic:!0,Uf:!0,ZB:!0,yS:!0,precision:"highp",quality:a.Ak,Dx:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,D1:!1,aI:!1,iF:!1,MS:!1,is_mobile_device:!1,eG:!1,DE:!1,Xda:!1,Wv:!1,allow_hidpi:!1,sR:!1,IG:!1,vO:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,cA:!1,KM:!1,vG:[0,0],XP:!0,aC:!1,url_params:null,Nb:!0,kc:4,gu:!1,sQ:!1,Q2:!1,Rv:!1,nQ:!1,
uL:!1,qO:!1,pO:!1,media_auto_activation:!0,lP:4,FA:!1,gl_debug:!1,oL:!1,rK:!1,ZD:!1,lo:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",gA:!1,Sv:!1,debug_loading:!1,hP:!1,gP:!1};a.sM=p.X(a.K);a.Yn={kz:-1,PM:!1,Do:1};a.controls={x1:1/120};a.Je={path:"",U1:"B4W_ASSETS_PATH=__JS__/../../assets\/",m2:"B4W_PROJ_ASSETS_PATH=__JS__/../../..\/",q1:15,prevent_caching:!0,HG:!1,cF:!1,rB:!1};a.EK=p.X(a.Je);a.Rf={shaders_path:"",P3:"../shaders/",qR:"include/",Rda:"postprocessing/",
Zx:"built_in_data",NO:"b4w.min.js b4w.full.min.js b4w.simple.min.js b4w.whitespace.min.js src/b4w.js webplayer.min.js".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};a.jO={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{yM:.8,Ui:.064,xj:.035,Tv:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],Gn:.11,Vj:.062,yj:.004}};a.L={enabled:!0,max_fps:60,uw:"",ZC:"",$C:"B4W_URANIUM_PATH=./",
DK:"uranium.js",US:"uranium_wasm.js",nP:"uranium.js.mem",TS:"uranium_wasm.wasm",xS:"../deploy/apps/common/",oE:!1,ping:!1,Jp:!0,Aw:!0};a.JP=p.X(a.L);a.Yr={Tu:1024,By:256,kM:32,IY:128,HY:256,LP:.25,d2:.5,c2:1};a.wQ=p.X(a.Yr);a.ka={VI:!0,MA:!1,JK:!1,xL:!1,wM:!1};a.oR=p.X(a.ka);a.Ad={outlining_overview_mode:!1,bj:[1,.4,.05],Ym:.2,Zm:3.8,$m:1};a.so={enabled:!1,iw:39,s4:0,T3:"COLOR"};a.rM=p.X(a.so);a.Ki={p1:8,AG:64,EG:8,IA:8,FG:15,mP:0,JA:128,mh:1024,BG:4096,jc:4096,GG:[4096,4096],Pq:24};a.QL=p.X(a.Ki);
a.xq=function(){var b=a.K,c=a.L,q=a.Yr;switch(b.quality){case a.On:b.shadows=!0;b.Uf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Fu=!0;b.gB=!0;b.hd=!0;q.Tu=2048;q.By=512;b.Sl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.ZB=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!0;b.enable_outlining=!0;b.glow_materials=!0;b.kc=16;b.srgb_type="SRGB_PROPER";c.max_fps=120;b.lod_smooth_transitions=!0;break;case a.Ak:b.shadows=
!0;b.Uf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Fu=!0;b.gB=!0;b.hd=!0;q.Tu=1024;q.By=256;b.Sl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.ZB=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!1;b.enable_outlining=!0;b.glow_materials=!0;b.srgb_type="SRGB_SIMPLE";b.kc=4;c.max_fps=60;b.lod_smooth_transitions=!0;break;case a.gm:b.shadows=!1;b.Uf=!1;b.ssao=!1;b.dof=!1;b.god_rays=!1;b.bloom=!1;b.reflections=!1;
b.refractions=!1;b.Fu=!1;b.gB=!1;b.hd=!1;q.Tu=512;q.By=256;b.Sl=2;b.anisotropic_filtering=!1;b.use_min50=!0;b.water_dynamic=!1;b.ZB=!1;b.antialiasing=!1;b.smaa=!1;b.compositing=!1;b.motion_blur=!1;b.allow_hidpi=!1;b.enable_outlining=!1;b.glow_materials=!1;b.srgb_type="SRGB_SIMPLE";b.kc=1;c.max_fps=60;b.lod_smooth_transitions=!1;break;case a.tt:p.J("Direct AUTO quality profile setting is forbidden")}};a.set=function(c,m){switch(c){case "allow_cors":a.K.allow_cors=m;break;case "allow_hidpi":a.K.allow_hidpi=
m;break;case "alpha":a.context.alpha=m;break;case "alpha_sort":a.K.alpha_sort=m;break;case "alpha_sort_threshold":a.K.alpha_sort_threshold=m;break;case "anaglyph_use":b.$y("anaglyph_use","stereo");a.K.stereo=m?"ANAGLYPH":a.K.stereo;break;case "animation_framerate":a.Yn.kz=m;break;case "anisotropic_filtering":a.K.anisotropic_filtering=m;break;case "antialiasing":a.K.antialiasing=m;break;case "assets_dir":case "assets_path":a.Je.path=m;break;case "assets_dds_available":a.Je.cF=m;break;case "assets_pvr_available":a.Je.rB=
m;break;case "assets_min50_available":a.Je.HG=m;break;case "audio":a.ka.VI=m;break;case "background_color":a.K.background_color=m;break;case "bloom":a.K.bloom=m;break;case "built_in_module_name":a.Rf.Zx=m;break;case "canvas_resolution_factor":a.K.canvas_resolution_factor=m;break;case "console_verbose":a.K.console_verbose=m;break;case "compositing":a.K.compositing=m;break;case "dof":a.K.dof=m;break;case "do_not_load_resources":a.K.do_not_load_resources=m;break;case "god_rays":a.K.god_rays=m;break;
case "stereo":a.K.stereo=m;break;case "lod_leap_smooth_threshold":a.K.lod_leap_smooth_threshold=m;break;case "lod_smooth_transitions":a.K.lod_smooth_transitions=m;break;case "max_fps":a.K.max_fps=m;break;case "max_fps_physics":a.L.max_fps=m;break;case "media_auto_activation":a.K.media_auto_activation=m;break;case "motion_blur":a.K.motion_blur=m;break;case "physics_enabled":a.L.enabled=m;break;case "physics_uranium_path":a.L.Aw&&window.WebAssembly?(a.L.uw=m+a.L.US,a.L.ZC=m+a.L.TS):(a.L.uw=m+a.L.DK,
a.L.ZC=m+a.L.nP);a.L.xS=m;break;case "physics_use_wasm":a.L.Aw=m;break;case "physics_calc_fps":a.L.oE=m;break;case "physics_use_workers":a.L.Jp=m;break;case "precision":a.K.precision=m;break;case "prevent_caching":a.Je.prevent_caching=m;break;case "quality":a.K.quality=m;break;case "reflections":a.K.reflections=m;break;case "refractions":a.K.refractions=m;break;case "sfx_mix_mode":a.ka.MA=m;break;case "shaders_dir":case "shaders_path":a.Rf.shaders_path=m;break;case "shadows":a.K.shadows=m;break;case "show_hud_debug_info":a.K.show_hud_debug_info=
m;break;case "smaa":b.$y("smaa");a.K.smaa=m;break;case "smaa_search_texture_path":b.$y("smaa_search_texture_path");a.Rf.smaa_search_texture_path=m;break;case "smaa_area_texture_path":b.$y("smaa_area_texture_path");a.Rf.smaa_area_texture_path=m;break;case "ssao":a.K.ssao=m;break;case "debug_view":a.K.debug_view=m;break;case "enable_selectable":a.K.enable_selectable=m;break;case "enable_outlining":a.K.enable_outlining=m;break;case "outlining_overview_mode":a.Ad.outlining_overview_mode=m;break;case "glow_materials":a.K.glow_materials=
m;break;case "url_params":a.K.url_params=m;break;case "use_min50":a.K.use_min50=m;break;case "enable_texture_cache":a.K.enable_texture_cache=m;break;case "gl_debug":a.K.gl_debug=m;break;case "srgb_type":a.K.srgb_type=m;break;case "shadow_blur_samples":a.K.shadow_blur_samples=m;break;case "reflection_quality":a.K.reflection_quality=m;break;case "assets_gzip_available":a.K.assets_gzip_available=m;break;case "debug_loading":a.K.debug_loading=m;break;case "msaa_samples":a.K.kc=m;break;default:b.error("Unknown config property: "+
c)}};a.get=function(c){switch(c){case "allow_cors":return a.K.allow_cors;case "allow_hidpi":return a.K.allow_hidpi;case "alpha":return a.context.alpha;case "alpha_sort":return a.K.alpha_sort;case "alpha_sort_threshold":return a.K.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==a.K.stereo;case "animation_framerate":return a.Yn.kz;case "anisotropic_filtering":return a.K.anisotropic_filtering;case "antialiasing":return a.K.antialiasing;case "assets_dir":case "assets_path":return a.Je.path;
case "assets_dds_available":return a.Je.cF;case "assets_pvr_available":return a.Je.rB;case "assets_min50_available":return a.Je.HG;case "audio":return a.ka.VI;case "background_color":return a.K.background_color;case "bloom":return a.K.bloom;case "built_in_module_name":return a.Rf.Zx;case "canvas_resolution_factor":return a.K.canvas_resolution_factor;case "console_verbose":return a.K.console_verbose;case "compositing":return a.K.compositing;case "dof":return a.K.dof;case "do_not_load_resources":return a.K.do_not_load_resources;
case "is_mobile_device":return a.K.is_mobile_device;case "god_rays":return a.K.god_rays;case "stereo":return a.K.stereo;case "lod_leap_smooth_threshold":return a.K.lod_leap_smooth_threshold;case "lod_smooth_transitions":return a.K.lod_smooth_transitions;case "max_fps":return a.K.max_fps;case "max_fps_physics":return a.L.max_fps;case "media_auto_activation":return a.K.media_auto_activation;case "motion_blur":return a.K.motion_blur;case "physics_enabled":return a.L.enabled;case "physics_uranium_path":return a.L.xS;
case "physics_uranium_bin":return a.L.ZC;case "physics_use_wasm":return a.L.Aw;case "physics_calc_fps":return a.L.oE;case "physics_use_workers":return a.L.Jp;case "precision":return a.K.precision;case "prevent_caching":return a.Je.prevent_caching;case "quality":return a.K.quality;case "reflections":return a.K.reflections;case "refractions":return a.K.refractions;case "sfx_mix_mode":return a.ka.MA;case "shaders_dir":case "shaders_path":return a.Rf.shaders_path;case "shadows":return a.K.shadows;case "show_hud_debug_info":return a.K.show_hud_debug_info;
case "smaa":return a.K.smaa;case "smaa_search_texture_path":return a.Rf.smaa_search_texture_path;case "smaa_area_texture_path":return a.Rf.smaa_area_texture_path;case "ssao":return a.K.ssao;case "debug_view":return a.K.debug_view;case "enable_selectable":return a.K.enable_selectable;case "enable_outlining":return a.K.enable_outlining;case "outlining_overview_mode":return a.Ad.outlining_overview_mode;case "glow_materials":return a.K.glow_materials;case "url_params":return a.K.url_params;case "use_min50":return a.K.use_min50;
case "enable_texture_cache":return a.K.enable_texture_cache;case "gl_debug":return a.K.gl_debug;case "srgb_type":return a.K.srgb_type;case "shadow_blur_samples":return a.K.shadow_blur_samples;case "reflection_quality":return a.K.reflection_quality;case "assets_gzip_available":return a.K.assets_gzip_available;case "debug_loading":return a.K.debug_loading;case "msaa_samples":return a.K.kc;default:b.error("Unknown config property: "+c)}};a.reset=function(){for(var b in a.RL)a.context[b]=a.RL[b];for(b in a.sM)a.K[b]=
a.sM[b];for(b in a.EK)a.Je[b]=a.EK[b];for(b in a.JP)a.L[b]=a.JP[b];for(b in a.wQ)a.Yr[b]=a.wQ[b];for(b in a.oR)a.ka[b]=a.oR[b];for(b in a.rM)a.so[b]=a.rM[b]};a.AH=function(){var b=a.Ki.Pq,c;for(c in a.QL)a.Ki[c]=a.QL[c];a.Ki.Pq=b};a.BO=m;a.u3=function(){var b=a.Rf,p=a.L;m()||""!=b.shaders_path||(b.shaders_path=c()+"/"+b.P3);if(a.L.Aw&&window.WebAssembly)var b=p.$C+p.US,q=p.$C+p.TS;else b=p.$C+p.DK,q=p.$C+p.nP;p.enabled&&""==p.uw&&(p.uw=c()+"/"+b.replace("B4W_URANIUM_PATH=",""),p.ZC=c()+"/"+q.replace("B4W_URANIUM_PATH=",
""))};a.AF=function(b){var h=a.Je;if(h.path)return h.path;var m=h.U1,p="B4W_ASSETS_PATH=";b&&(m=h.m2,p="B4W_PROJ_ASSETS_PATH=",m=m.replace("__NAME__",b));m=m.replace(p,"");return m=m.replace("__JS__",c())}};b4w.module.__extensions=function(a,u){function m(a){if(a in q)return q[a];var b=G.getExtension(a)||null;q[a]=b;p.log("%cGET EXTENSION","color: #"+(b?"0a0":"a00"),a);return b}function c(a){if(a in q)return q[a];switch(a){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":var b={};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":b=G;break;default:b=G.getExtension(a)||null}q[a]=b;p.log("%cGET EXTENSION (WebGL 2)","color: #"+
(b?"0a0":"a00"),a);return b}var b=u("__config"),p=u("__print"),h=b.K,G=null,q={};a.sh=function(a){G=a};a.IN=function(){return m("WEBGL_compressed_texture_s3tc")||m("WEBKIT_WEBGL_compressed_texture_s3tc")};a.FN=function(){return m("WEBKIT_WEBGL_compressed_texture_pvrtc")||m("WEBGL_compressed_texture_pvrtc")};a.p_=function(){return h.Nb?c("WEBGL_depth_texture"):m("WEBGL_depth_texture")||m("WEBKIT_WEBGL_depth_texture")};a.zF=function(){return m("EXT_texture_filter_anisotropic")||m("WEBKIT_EXT_texture_filter_anisotropic")};
a.PN=function(){return h.Nb?c("EXT_shader_texture_lod"):m("EXT_shader_texture_lod")};a.n_=function(){return m("WEBGL_debug_shaders")};a.Fz=function(){return m("WEBGL_debug_renderer_info")};a.nN=function(){return h.Nb?c("OES_element_index_uint"):m("OES_element_index_uint")};a.QF=function(){return h.Nb?c("OES_standard_derivatives"):m("OES_standard_derivatives")};a.EF=function(){var a=h.Nb?c("EXT_disjoint_timer_query_webgl2"):m("EXT_disjoint_timer_query");return null==a?a:a.createQueryEXT?{createQuery:function(){return a.createQueryEXT()},
beginQuery:function(b){a.beginQueryEXT(a.TIME_ELAPSED_EXT,b)},endQuery:function(){a.endQueryEXT(a.TIME_ELAPSED_EXT)},$M:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_AVAILABLE_EXT)},aN:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_EXT)},ZM:function(){return a.GPU_DISJOINT_EXT}}:{createQuery:function(){return G.createQuery()},beginQuery:function(b){G.beginQuery(a.TIME_ELAPSED_EXT,b)},endQuery:function(){G.endQuery(a.TIME_ELAPSED_EXT)},$M:function(a){return G.getQueryParameter(a,
G.QUERY_RESULT_AVAILABLE)},aN:function(a){return G.getQueryParameter(a,G.QUERY_RESULT)},ZM:function(){return a.GPU_DISJOINT_EXT}}};a.F_=function(){if(h.Nb)return c("ANGLE_instanced_arrays");var a=m("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(b,c,e,h,m){a.drawElementsInstancedANGLE(b,c,e,h,m)},vertexAttribDivisor:function(b,c){a.vertexAttribDivisorANGLE(b,c)},drawArraysInstanced:function(b,c,e,h){a.drawArraysInstancedANGLE(b,c,e,h)}}};a.SF=function(){if(h.Nb)return c("OES_vertex_array_object");
var a=m("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(b){a.bindVertexArrayOES(b)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(b){a.deleteVertexArrayOES(b)},isVertexArray:function(b){return a.isVertexArrayOES(b)}}};a.Ja=function(){q={}};a.reset=function(){G=null}};b4w.module.__graph=function(a,u){function m(a,b,d){d||(d=null);c(a,b)?C.J("Graph already has node with given ID"):a.sa.push(b,d)}function c(a,b){for(var d=a.sa,c=0;c<d.length;c+=2)if(d[c]==b)return!0;return!1}function b(a,b,d,e){e||(e=null);c(a,b)&&c(a,d)?a.Ka.push(b,d,e):C.J("Wrong node IDs")}function p(a,b){c(a,b)||C.J("Node not found");for(var d=a.sa,f=0;f<d.length;f+=2)d[f]==b&&(d.splice(f,2),f-=2)}function h(a,b,d,c){E(a,b,d)||C.J("Edge not found");a=a.Ka;for(var f=0,e=0;e<a.length;e+=3)if(a[e]==
b&&a[e+1]==d){if(-1==c)a.splice(e,3);else{if(c==f){a.splice(e,3);break}f++}e-=3}}function G(a){a=a.sa;for(var b=-1,d=0;d<a.length;d+=2)b=Math.max(b,a[d]);return++b}function q(a,b){for(var d=a.sa,c=0;c<d.length;c+=2)if(d[c+1]==b)return d[c];return-1}function w(a){var b=[],d={};A(a,d);for(var c=a.sa,f=0;f<c.length;f+=2)0==k(a,c[f])&&g(a,c[f],d,b);return{sa:b,Ka:a.Ka.slice(0)}}function A(a,b){for(var d=a.sa,c=0;c<d.length;c+=2)b[d[c]]=!1}function g(a,b,d,c){if(!d[b]){d[b]=!0;for(var f=0;f<K(a,b);f++)g(a,
D(a,b,f),d,c);c.unshift(b,v(a,b))}}function e(a,b,d,c){if(!d[b]){d[b]=!0;if(10==c||30==c)for(var f=0;f<K(a,b);f++){var g=D(a,b,f);e(a,g,d,c)}if(20==c||30==c)for(f=0;f<k(a,b);f++)g=M(a,b,f),e(a,g,d,c)}}function y(a){for(var b=a.Ka,d=0;d<b.length;d+=3){var f=b[d+1];c(a,b[d])&&c(a,f)||(b.splice(d,3),d-=3)}}function x(a){for(var b=[],d=a.sa,c=0;c<d.length;c+=2){var f=d[c];K(a,f)||b.push(f)}return b}function P(a){var b=a.sa;a=a.Ka;for(var d=[],c=[],f=[],e=0;e<b.length;e++)f[b[2*e]]=e,d.push(e,b[2*e+1]);
for(e=0;e<a.length;e+=3)c.push(f[a[e]],f[a[e+1]],a[e+2]);return{sa:d,Ka:c}}function J(a,b,d){if(d.Hj==d.Vm){for(var c=0,f=0;c<d.Vm;c++)-1!=d.Uk[c]&&(a[f]=c,b[f]=d.Uk[c],f++);return!0}if(d.Vm>d.Cr||d.tn>d.un||d.ys>d.As||d.xs>d.zs)return!1;for(var f=c=-1,e=!1;!e&&L(d,r,c,f);)if(c=r[0],f=r[1],l(d,c,f)){var g;g=d;e={};e.Nu=g.Nu;e.Ou=g.Ou;e.SG=g.SG;e.Vy=g.Vy;e.Vm=g.Vm;e.Cr=g.Cr;e.order=g.order;e.Hj=e.$A=g.Hj;e.xs=g.xs;e.ys=g.ys;e.tn=g.tn;e.zs=g.zs;e.As=g.As;e.un=g.un;e.Bt=-1;e.Uk=g.Uk;e.no=g.no;e.Oo=g.Oo;
e.Po=g.Po;e.kp=g.kp;e.lp=g.lp;e.WB=g.WB;g.WB[0]+=1;var e=g=e,h=c,v=f,H=e.Nu,m=e.Ou,x=e.Vm,y=e.Cr,q=e.Uk,B=e.no,p=e.Oo,C=e.Po,z=e.kp,w=e.lp;I(h<x);I(v<y);I(e.Hj<x);I(e.Hj<y);x=++e.Hj;e.Bt=h;p[h]||(p[h]=x,e.xs++,z[h]&&e.tn++);z[h]||(z[h]=x,e.ys++,p[h]&&e.tn++);C[v]||(C[v]=x,e.zs++,w[v]&&e.un++);w[v]||(w[v]=x,e.As++,C[v]&&e.un++);q[h]=v;B[v]=h;for(q=0;q<k(H,h);q++)B=M(H,h,q),p[B]||(p[B]=x,e.xs++,z[B]&&e.tn++);for(q=0;q<K(H,h);q++)B=D(H,h,q),z[B]||(z[B]=x,e.ys++,p[B]&&e.tn++);for(q=0;q<k(m,v);q++)B=M(m,
v,q),C[B]||(C[B]=x,e.zs++,w[B]&&e.un++);for(q=0;q<K(m,v);q++)B=D(m,v,q),w[B]||(w[B]=x,e.As++,C[B]&&e.un++);e=J(a,b,g);I(1>=g.Hj-g.$A);I(-1!=g.Bt);B=g.Nu;h=g.Ou;v=g.Hj;H=g.Bt;m=g.Uk;p=g.no;x=g.Oo;C=g.Po;y=g.kp;z=g.lp;if(g.$A<v){x[H]==v&&(x[H]=0);for(w=0;w<k(B,H);w++)q=M(B,H,w),x[q]==v&&(x[q]=0);y[H]==v&&(y[H]=0);for(w=0;w<K(B,H);w++)q=D(B,H,w),y[q]==v&&(y[q]=0);B=m[H];C[B]==v&&(C[B]=0);for(w=0;w<k(h,B);w++)q=M(h,B,w),C[q]==v&&(C[q]=0);z[B]==v&&(z[B]=0);for(w=0;w<K(h,B);w++)q=D(h,B,w),z[q]==v&&(z[q]=
0);m[H]=-1;p[B]=-1;g.Hj=g.$A;g.Bt=-1}}return e}function L(a,b,d,c){-1==d&&(d=0);-1==c?c=0:c++;var f=a.tn,e=a.un,g=a.ys,n=a.As,h=a.xs,k=a.zs,l=a.Hj,r=a.Vm,v=a.Cr,m=a.Uk,B=a.no,x=a.Oo,y=a.Po,q=a.kp,p=a.lp;if(f>l&&e>l)for(;d<r&&(-1!=m[d]||0==q[d]||0==x[d]);)d++,c=0;else if(g>l&&n>l)for(;d<r&&(-1!=m[d]||0==q[d]);)d++,c=0;else if(h>l&&k>l)for(;d<r&&(-1!=m[d]||0==x[d]);)d++,c=0;else if(0==d&&0!=a.order){for(x=0;x<r&&-1!=m[d=a.order[x]];)x++;x==r&&(d=r)}else for(;d<r&&-1!=m[d];)d++,c=0;if(f>l&&e>l)for(;c<
v&&(-1!=B[c]||0==p[c]||0==y[c]);)c++;else if(g>l&&n>l)for(;c<v&&(-1!=B[c]||0==p[c]);)c++;else if(h>l&&k>l)for(;c<v&&(-1!=B[c]||0==y[c]);)c++;else for(;c<v&&-1!=B[c];)c++;return d<r&&c<v?(b[0]=d,b[1]=c,!0):!1}function l(a,b,d){var c=a.Nu,f=a.Ou,e=a.Cr,g=a.Uk,h=a.no,l=a.Oo,H=a.Po,r=a.kp,m=a.lp;I(b<a.Vm);I(d<e);I(-1==g[b]);I(-1==h[d]);if(!(0,a.SG)(v(c,b),v(f,d)))return!1;for(var x=e=0,y=0,B=0,q=0,p=0,C=0;C<K(c,b);C++){var z=D(c,b,C);if(-1!=g[z]){var w=g[z];if(!E(f,d,w)||!S(a.Vy,c,b,z,f,d,w))return!1}else l[z]&&
y++,r[z]&&e++,l[z]||r[z]||q++}for(C=0;C<k(c,b);C++)if(z=M(c,b,C),-1!=g[z]){if(w=g[z],!E(f,w,d)||!S(a.Vy,c,z,b,f,w,d))return!1}else l[z]&&y++,r[z]&&e++,l[z]||r[z]||q++;for(C=0;C<K(f,d);C++)if(w=D(f,d,C),-1!=h[w]){if(z=h[w],!E(c,b,z))return!1}else H[w]&&B++,m[w]&&x++,H[w]||m[w]||p++;for(C=0;C<k(f,d);C++)if(w=M(f,d,C),-1!=h[w]){if(z=h[w],!E(c,z,b))return!1}else H[w]&&B++,m[w]&&x++,H[w]||m[w]||p++;return y<=B&&e<=x&&q<=p}function I(a){a||C.J("Assertion failed")}function v(a,b){for(var d=a.sa,c=0;c<d.length;c+=
2)if(d[c]==b)return d[c+1];return null}function K(a,b){for(var d=a.Ka,c=0,f=0;f<d.length;f+=3)d[f]==b&&c++;return c}function k(a,b){for(var d=a.Ka,c=0,f=0;f<d.length;f+=3)d[f+1]==b&&c++;return c}function D(a,b,d){a=a.Ka;for(var c=0,f=0;f<a.length;f+=3)if(a[f]==b){if(c==d)return a[f+1];c++}return-1}function M(a,b,d){a=a.Ka;for(var c=0,f=0;f<a.length;f+=3)if(a[f+1]==b){if(c==d)return a[f];c++}return-1}function E(a,b,d){a=a.Ka;for(var c=0;c<a.length;c+=3)if(a[c]==b&&a[c+1]==d)return!0;return!1}function S(a,
b,d,c,e,g,t){for(var f=F(b,d,c),n=F(e,g,t),h=0;h<f;h++){for(var k=!1,l=0;l<n;l++)if(a(z(b,d,c,h),z(e,g,t,l))){k=!0;break}if(!k)return!1}return!0}function F(a,b,d){var c=0;a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&c++;return c}function z(a,b,d,c){a=a.Ka;for(var f=0,e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==d){if(f==c)return a[e+2];f++}return null}var C=u("__util"),r=[-1,-1];a.OD=-1;a.o6=10;a.bm=20;a.U7=30;a.create=function(){for(var a=arguments,b=[],d=[],c=0;c<a.length;c++){var e=a[c];switch(e.length){case 2:b.push(e[0],
e[1]);break;case 3:d.push(e[0],e[1],e[2]);break;default:C.J("Wrong graph constructor params")}}return{sa:b,Ka:d}};a.clone=function(a,b,d){if(b)for(var c=Array(a.sa.length),f=0;f<a.sa.length;f+=2)c[f]=a.sa[f],c[f+1]=b(a.sa[f+1]);else c=C.X(a.sa);if(d)for(b=Array(a.Ka.length),f=0;f<a.Ka.length;f+=3)b[f]=a.Ka[f],b[f+1]=a.Ka[f+1],b[f+2]=d(a.Ka[f+2]);else b=C.X(a.Ka);return a={sa:c,Ka:b}};a.D9=function(a,b){for(var d=[],c=[],f=0;f<a.length;f++)d.push(a[f][0],a[f][1]);for(f=0;f<b.length;f++)c.push(b[f][0],
b[f][1],b[f][2]);return{sa:d,Ka:c}};a.Gi=m;a.vba=c;a.Zc=b;a.Bg=p;a.fn=h;a.hj=function(a,b,d,c){E(a,b,d)||C.J("Edge not found");a=a.Ka;for(var f=0;f<a.length;f+=3)if(a[f]==b&&a[f+1]==d&&a[f+2][0]==c[0]&&a[f+2][1]==c[1]){a.splice(f,3);break}};a.Y=function(a,b){if(-1==q(a,b)){var d=G(a);m(a,d,b);return d}C.J("Non-unique attribute")};a.E2=function(a,b,d,c,e){a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&a[f+2]==c&&(a[f+2]=e)};a.vK=function(a,c,d,e){d=d||[];e=e||[];for(var f={},g=0;g<a.sa.length;g+=
2){var n=a.sa[g],h=G(c);m(c,h,a.sa[g+1]);f[n]=h}for(g=0;g<a.Ka.length;g+=3){var h=f[a.Ka[g]],k=f[a.Ka[g+1]],n=a.Ka[g+2];b(c,h,k,n)}for(g=0;g<d.length;g+=3)h=f[d[g]],a=d[g+1],n=d[g+2],b(c,h,a,n);for(g=0;g<e.length;g+=3)d=e[g],k=f[e[g+1]],n=e[g+2],b(c,d,k,n)};a.hl=G;a.zl=q;a.H=function(a,c,d,e){c=q(a,c);d=q(a,d);-1!=c&&-1!=d?b(a,c,d,e):C.J("Attributes not found")};a.fa=function(a,b){for(var d=a.sa,c=0;c<d.length&&!b(d[c],d[c+1]);c+=2);};a.xi=function(a,b){for(var d=a.Ka,c=0;c<d.length&&!b(d[c],d[c+
1],d[c+2]);c+=3);};a.Wl=function(a,b,d){for(var c=a.Ka,f=0;f<c.length;f+=3)if(c[f+1]==b){var e=c[f];if(d(e,v(a,e),c[f+2]))break}};a.xn=function(a,b,d){for(var c=a.Ka,f=0;f<c.length;f+=3)if(c[f]==b){var e=c[f+1];if(d(e,v(a,e),c[f+2]))break}};a.yI=w;a.A4=function(a){a=w(a).sa;for(var b=[],d=0;d<a.length;d+=2)b.push(a[d+1]);return b};a.Zba=function(){};a.rn=function(a,b,d){c(a,b)||C.J("No such node");var f={};A(a,f);e(a,b,f,d);b=[];for(var g in f)f[g]&&(g=Number(g),b.push(g,v(a,g)));a={sa:b,Ka:a.Ka.slice(0)};
y(a);return a};a.BE=y;a.M_=function(a){for(var b=[],d=a.sa,c=0;c<d.length;c+=2){var f=d[c];k(a,f)||b.push(f)}return b};a.Ru=x;a.match=function(a,b,d,c){var f={};f.Nu=P(a);f.Ou=P(b);f.SG=d||function(a,b){return a==b};f.Vy=c||function(a,b){return a==b};c=a.sa.length/2;var e=b.sa.length/2;f.Vm=c;f.Cr=e;f.order=0;f.Hj=f.$A=0;f.tn=f.xs=f.ys=0;f.un=f.zs=f.As=0;f.Bt=-1;f.Uk=Array(c);f.no=Array(e);f.Oo=Array(c);f.Po=Array(e);f.kp=Array(c);f.lp=Array(e);f.WB=[1];for(d=0;d<c;d++)f.Uk[d]=-1,f.Oo[d]=0,f.kp[d]=
0;for(d=0;d<e;d++)f.no[d]=-1,f.Po[d]=0,f.lp[d]=0;e=Array(c);c=Array(c);if(J(e,c,f)){for(d=0;d<e.length;d++)e[d]=a.sa[2*e[d]],c[d]=b.sa[2*c[d]];return[e,c]}return null};a.I_=function(a,b){for(var d=a.sa,c=1;c<d.length;c+=2)if(d[c]==b)return d[c-1];return null};a.jb=v;a.ph=K;a.Wj=k;a.Zh=D;a.gh=M;a.qaa=F;a.jd=z;a.replace=function(a,b,d){for(var c=a.Ka,f=G(a),e=0;e<b.length;e++){var g=b[e];p(a,g);for(var h=0;h<c.length;h+=3)c[h]==g&&(c[h]=f),c[h+1]==g&&(c[h+1]=f),c[h]==c[h+1]&&(c.splice(h,3),h-=3)}m(a,
f,d)};a.s2=function(a,b,d,c,e){E(a,b,d)||C.J("Edge not found");a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&(a[f]=c,a[f+1]=e)};a.lZ=function(a,b){function d(a,b){if(-1!=k.indexOf(a)){var c=k.slice(k.indexOf(a));if(-1!=f[c[c.length-1]].indexOf(c[0])){l.push([a,c[c.length-1]]);return}}k.push(a);for(c=0;c<b.length;c++)b[c]in f&&d(b[c],f[b[c]])}b||(b=x(a)[0]);var c=a.Ka;if(c.length&&-1!=c.indexOf(b)){for(var f={},e=0,g=0;g<c.length;g+=3)c[g+1]in f?f[c[g+1]].push(c[g]):f[c[g+1]]=[c[g]],e++;var k=
[],l=[];d(b,f[b]);for(g=0;g<l.length;g++)for(var H=e=0;H<c.length;H+=3)l[g][1]==c[H+1]&&l[g][0]==c[H]&&h(a,c[H],c[H+1],e),e++}};a.qM=function(a,b,d){var c=a.sa;a=a.Ka;var f;f="digraph debug {\n    node [shape=box];\n";for(var e=0;e<c.length;e+=2){var g=c[e],h=c[e+1],h=b?b(g,h):String(g);f+="    ";f+=String(g)+' [label="'+h.replace(/\"/g,'\\"')+'"];\n'}for(e=0;e<a.length;e+=3)b=a[e],c=a[e+1],h=a[e+2],f+="    ",f+=String(b)+" -> "+String(c),d&&(f+=' [label="'+d(b,c,h)+'"]'),f+=";\n";return f+"}"}};b4w.module.__nodemat=function(a,u){function m(a,b,d,f,g){var B="";Qa.Ua()&&(B=Qa.N().uuid);B=J(b,g,B);if(B in Ha)return Ha[B];var r={Ia:null,id:B,AL:!0};d||(Ia={},Ma=0);if("SHADOW"!=g&&"COLOR_ID"!=g){b=V.create();for(var v=a.nodes,q=0;q<v.length;q++)if(null==H(b,v[q],0,f,g))return Ha[B]=null,r;if(d&&-1==t(a,b,"GROUP_OUTPUT","group"))return r;q=na(b);v=d?a.links:a.links.slice();if(!O(b,v,q))return r;if(d)return r.Ia=b,r;for(q=0;q<v.length;q++){d=v[q];for(var C=D(d.from_node,b),p=D(d.to_node,b),Y=0;Y<
C.length;Y++)for(var z=0;z<p.length;z++){var w=C[Y],Z=p[z],X=V.jb(b,w),E=V.jb(b,Z);if(!Q(b,w,Z,X,E,d))return Ha[B]=null,r}}k(b);q=!1;v=-1;"GLOW"==g?v=t(a,b,"B4W_GLOW_OUTPUT","material",!0):(v=t(a,b,"OUTPUT","material",!1,!0),-1==v&&(v=t(a,b,"OUTPUT_MATERIAL","material",!1,!0)),-1==v&&(v=t(a,b,"OUTPUT_WORLD","material",!1,!0),q=!0));-1==v&&(b=l(),v=0);M(b);a=V.rn(b,v,V.bm);q?(e(a),y(a,g),x(a),P(a)):(c(a,f),h(a,f));I(a);S(a);n(a);K(a,f,g);ka(a)}else f=m(a,b,d,f,"MAIN"),f=V.clone(f.Ia,function(a){var b=
Va.cu(a);b.inputs=Va.X(a.inputs);b.outputs=Va.X(a.outputs);return b}),v=t(a,f,"OUTPUT","material",!1,!0),-1==v&&(v=t(a,f,"OUTPUT_MATERIAL","material",!1,!0)),L(f,v),a=V.rn(f,v,V.bm),I(a);r.Ia=a;return Ha[B]=r}function c(a,d){var c=[];V.fa(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||c.push({sf:a,node:b})});for(var f=0;f<c.length;++f){var e=c[f].sf,g=c[f].node,h=V.hl(a);V.Gi(a,h,g.data.n1);var n=V.hl(a);V.Gi(a,n,g.data.o1);V.Zc(a,h,n,[4,2]);for(var t={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},k=V.Wj(a,e),B=[],l=[],H=[],r={},v=0;v<k;v++){var Q=V.gh(a,e,v);Q in r||(r[Q]=0);var m=V.jd(a,Q,e,r[Q]++);B.push([Q,e,m]);var x=t[m[1]];if(x)switch(x[0]){case "MATERIAL_END":l.push([Q,n,[m[0],x[1]]]);break;case "LIGHTING_APPLY":H.push([Q,[m[0],x[1]]])}else l.push([Q,h,m])}b(a,g.data.value,h,n,H,d);for(v=0;v<B.length;v++)V.hj(a,B[v][0],B[v][1],B[v][2]);for(v=0;v<l.length;v++)V.Zc(a,l[v][0],l[v][1],l[v][2]);g=V.ph(a,e);h=[];t=[];k={};
for(v=0;v<g;v++)B=V.Zh(a,e,v),B in k||(k[B]=0),m=V.jd(a,e,B,k[B]++),h.push([e,B,m]),t.push([n,B,m]);for(v=0;v<h.length;v++)V.hj(a,h[v][0],h[v][1],h[v][2]);for(v=0;v<t.length;v++)V.Zc(a,t[v][0],t[v][1],t[v][2]);V.Bg(a,e)}}function b(a,b,d,c,f,e){var g={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},h=H(a,g,0,e,null),n=h;p(a,d,h,"E");p(a,d,h,"A");p(a,d,h,"D");h=Qa.N();h=N.vc(h,"LAMP",N.Tc);if(!b.Mc)for(var t,k,B,l=0;l<h.length;l++){B=h[l].yd;g={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};t=H(a,g,0,
e,null);g={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};k=H(a,g,0,e,null);p(a,n,k,"color");p(a,n,k,"specular");p(a,t,k,"ldir");p(a,d,k,"normal");p(a,d,k,"D");p(a,d,k,"S");p(a,t,k,"lcolorint");p(a,d,t,"shadow_factor");n="SPECULAR_"+b.Vf;g={name:n,type:n,use_tangent_shading:b.yf};n=H(a,g,0,e,null);p(a,t,n,"ldir");p(a,t,n,"lfac");p(a,d,n,"normal");p(a,n,k,"sfactor");p(a,t,n,"norm_fac");p(a,d,n,"sp_params");n="HEMI"==B.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+b.If;g={name:n,type:n,use_tangent_shading:b.yf};
B=H(a,g,0,e,null);p(a,t,B,"ldir");p(a,t,B,"lfac");p(a,d,B,"normal");p(a,t,B,"norm_fac");p(a,B,k,"lfactor");"DIFFUSE_LAMBERT"!=n&&p(a,d,B,"dif_params");for(t=0;t<f.length;t++)V.Zc(a,f[t][0],k,f[t][1]);n=k}p(a,n,c,"color");p(a,n,c,"specular")}function p(a,b,d,c){for(var f=V.jb(a,b),e=-1,g=V.jb(a,d).inputs,h=0;h<g.length;h++)if(c==g[h].identifier){e=h;break}if(-1!=e){for(var n=-1,f=f.outputs,h=0;h<f.length;h++)if(c==f[h].identifier){n=h;break}-1!=n&&(V.Zc(a,b,d,[n,e]),f[n].Sa=!0,g[e].Sa=!0)}}function h(a,
b){var d=[];V.fa(a,function(a,b){"OUTPUT_MATERIAL"==b.type&&d.push({sf:a,node:b})});for(var c=0;c<d.length;++c){var f=d[c].sf,e=d[c].node,g=!1,h=!1,n=V.hl(a);V.Gi(a,n,e.data.N1);for(var t=V.Wj(a,f),k=[],B=[],l={},H=0;H<t;H++){var v=V.gh(a,f,H);v in l||(l[v]=0);var r=V.jd(a,v,f,l[v]++);k.push([v,f,r]);switch(r[1]){case 0:g=!0;B.push([v,n,r]);break;case 2:var h=!0,Q=V.hl(a);V.Gi(a,Q,e.data.UY);B.push([v,Q,[r[0],0]])}}for(H=0;H<k.length;H++)V.hj(a,k[H][0],k[H][1],k[H][2]);for(H=0;H<B.length;H++)V.Zc(a,
B[H][0],B[H][1],B[H][2]);V.Bg(a,f);g?(h&&G(a,n,Q),A(a,b)):(f=V.jb(a,n),a.sa=[0,f],a.Ka=[])}}function G(a,b,d){b=V.rn(a,b,V.bm);var c=w(b);if(c.length){d=V.rn(a,d,V.bm);d=V.clone(d,la,pa);V.fa(d,function(a,b){b.name="displacement%join%"+b.name});V.vK(d,b,[],[]);var f=-1;V.fa(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return f=a,1});for(d=0;d<c.length;d++){var e=c[d],g=V.jb(b,e);p(b,f,e,"Normal");q(g)}}a.sa=b.sa;a.Ka=b.Ka}function q(a){a=a.hb;for(var b=0;b<a.length;b++){var d=a[b];"USE_NORMAL_IN"==
d[0]&&(d[1]=1)}}function w(a){var b=[];V.fa(a,function(a,d){for(var c=!1,f=d.inputs,e=0;e<f.length;e++)if("Normal"==f[e].identifier){c=!f[e].Sa;break}c&&b.push(a)});return b}function A(a,b){var d=[];V.fa(a,function(a,b){"OUTPUT_SURFACE"==b.type&&d.push({sf:a,node:b})});var c=[];d.length&&V.fa(a,function(a,b){"MIX_SHADER"==b.type&&c.push({sf:a,node:b})});for(var f=0;f<d.length;++f){var e=d[f].sf,h=d[f].node,n=V.hl(a);V.Gi(a,n,h.data.yW);var t=V.hl(a);V.Gi(a,t,h.data.zW);V.Zc(a,n,t,[4,2]);for(var k=
V.Wj(a,e),B=[],l=[],H={},v=0;v<k;v++){var r=V.gh(a,e,v),Q=V.jb(a,r);r in H||(H[r]=0);var m=V.jd(a,r,e,H[r]++);B.push([r,e,m]);l.push([r,n,m]);if("BSDF_GLOSSY"==Q.type||"BSDF_DIFFUSE"==Q.type||"MIX_SHADER"==Q.type||"EMISSION"==Q.type||"BSDF_TRANSPARENT"==Q.type)for(l.push([r,n,[1,1]]),l.push([r,n,[2,2]]),l.push([r,n,[3,3]]),l.push([r,n,[4,4]]),l.push([r,n,[5,5]]),l.push([r,n,[6,6]]),l.push([r,n,[7,7]]),l.push([r,n,[8,8]]),l.push([r,n,[9,9]]),l.push([r,n,[10,10]]),r=0;r<c.length;++r)for(var Q=c[r].sf,
m=V.Wj(a,Q),x=0;x<m;x++){var q=V.gh(a,Q,x),y=V.jb(a,q),C=V.jd(a,q,Q,0);0==C[1]||"BSDF_GLOSSY"!=y.type&&"BSDF_DIFFUSE"!=y.type&&"MIX_SHADER"!=y.type&&"EMISSION"!=y.type&&"BSDF_TRANSPARENT"!=y.type||(y=1==C[1]?3:13,l.push([q,Q,[1,y]]),l.push([q,Q,[2,y+1]]),l.push([q,Q,[3,y+2]]),l.push([q,Q,[4,y+3]]),l.push([q,Q,[5,y+4]]),l.push([q,Q,[6,y+5]]),l.push([q,Q,[7,y+6]]),l.push([q,Q,[8,y+7]]),l.push([q,Q,[9,y+8]]),l.push([q,Q,[10,y+9]]))}}g(a,h.data.value,n,t,b);l.push([t,e,[0,0]]);for(v=0;v<B.length;v++)V.hj(a,
B[v][0],B[v][1],B[v][2]);for(v=0;v<l.length;v++)V.Zc(a,l[v][0],l[v][1],l[v][2])}}function g(a,b,d,c,f){var e=[],g={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},n=H(a,g,0,f,null),h=n;p(a,d,n,"E");p(a,d,n,"A");p(a,d,n,"D");for(var n=Qa.N(),n=N.vc(n,"LAMP",N.Tc),t,k,B=0;B<n.length;B++){g={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};t=H(a,g,0,f,null);g={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};k=H(a,g,0,f,null);p(a,h,k,"color");p(a,h,k,"specular");p(a,t,k,"ldir");p(a,d,k,"normal");p(a,d,k,"D");
p(a,d,k,"S");p(a,t,k,"lcolorint");p(a,d,t,"shadow_factor");h=b.AW;g={name:h,type:h};h=H(a,g,0,f,null);p(a,t,h,"ldir");p(a,t,h,"lfac");p(a,d,h,"normal");p(a,t,h,"norm_fac");p(a,d,h,"bsdf_params");p(a,h,k,"lfactor");p(a,h,k,"sfactor");for(h=0;h<e.length;h++)V.Zc(a,e[h][0],k,e[h][1]);h=k}p(a,d,c,"bsdf_params");p(a,d,c,"d_color");p(a,d,c,"s_color");p(a,d,c,"e_color");p(a,d,c,"emission");p(a,d,c,"a_color");p(a,d,c,"alpha");p(a,h,c,"color");p(a,h,c,"specular")}function e(a){var b=[];V.fa(a,function(a,d){"OUTPUT_WORLD"==
d.type&&b.push({sf:a,node:d})});for(var d=0;d<b.length;++d){var c=b[d].sf,f=b[d].node,e=V.hl(a);V.Gi(a,e,f.data.O1);for(var f=V.Wj(a,c),g=[],h=[],n={},t=0;t<f;t++){var k=V.gh(a,c,t);k in n||(n[k]=0);var B=V.jd(a,k,c,n[k]++);g.push([k,c,B]);switch(B[1]){case 0:h.push([k,e,B])}}for(t=0;t<g.length;t++)V.hj(a,g[t][0],g[t][1],g[t][2]);for(t=0;t<h.length;t++)V.Zc(a,h[t][0],h[t][1],h[t][2]);V.Bg(a,c)}}function y(a,b){var d=[];V.fa(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||d.push({sf:a,
node:b})});if(d.length)for(var c={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},f=0;f<d.length;f++){var e=d[f].sf,g=d[f].node;c.name=g.name;c.fac=g.inputs[0].Pa;c.fac_is_linked=g.inputs[0].Sa;c.color1_is_linked=g.inputs[1].Sa;c.color2_is_linked=g.inputs[2].Sa;switch(g.type){case "ADD_SHADER":c.type="ADD_WORLD_RGB";break;case "MIX_SHADER":c.type="MIX_WORLD_RGB"}for(var g=H(a,c,0,"",b),h=V.Wj(a,e),n=[],t=[],k={},B=0;B<h;B++){var l=V.gh(a,e,B);l in k||(k[l]=0);var v=V.jd(a,l,e,k[l]++);n.push([l,
e,v]);t.push([l,g,v])}for(B=0;B<n.length;B++)V.hj(a,n[B][0],n[B][1],n[B][2]);for(B=0;B<t.length;B++)V.Zc(a,t[B][0],t[B][1],t[B][2]);h=V.ph(a,e);n=[];t=[];k={};for(B=0;B<h;B++)l=V.Zh(a,e,B),l in k||(k[l]=0),v=V.jd(a,e,l,k[l]++),n.push([e,l,v]),t.push([g,l,v]);for(B=0;B<n.length;B++)V.hj(a,n[B][0],n[B][1],n[B][2]);for(B=0;B<t.length;B++)V.Zc(a,t[B][0],t[B][1],t[B][2]);V.Bg(a,e)}}function x(a){var b=-1,d=[],c=[],f="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
V.fa(a,function(a,c){switch(f.indexOf(c.type)){case -1:d.push({sf:a,node:c});break;case 0:b=a}});for(var e=0;e<d.length;e++)for(var g=d[e].sf,h=V.ph(a,g),n={},t=0;t<h;t++){var k=V.Zh(a,g,t);k in n||(n[k]=0);var B=V.jd(a,g,k,n[k]++);c.push([g,k,B])}for(e=0;e<c.length;e++)V.hj(a,c[e][0],c[e][1],c[e][2]);c.length&&(c=V.rn(a,b,V.bm),a.sa=c.sa,a.Ka=c.Ka)}function P(a){var b=-1,d=[],c=[];V.fa(a,function(a,c){switch(c.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var f={sf:a,node:c};d.push(f);break;case "OUTPUT_WORLD_SURFACE":b=
a,f={sf:a,node:c},d.push(f)}});for(var f=0;f<d.length;f++)for(var e=d[f].sf,g=d[f].node,h=V.Wj(a,e),n={},t=0;t<h;t++){var k=V.gh(a,e,t),B=V.jb(a,k);k in n||(n[k]=0);var l=V.jd(a,k,e,n[k]++);"OUTPUT_WORLD_SURFACE"!=g.type&&0==l[1]||"ADD_WORLD_RGB"==B.type||"MIX_WORLD_RGB"==B.type||"BACKGROUND"==B.type||c.push([k,e,l])}for(f=0;f<c.length;f++)V.hj(a,c[f][0],c[f][1],c[f][2]);c.length&&(c=V.rn(a,b,V.bm),a.sa=c.sa,a.Ka=c.Ka)}function J(a,b,d){switch(b){case "GLOW":return a+d+"11";case "COLOR_ID":case "SHADOW":return a+
d+"00";default:return a+d+"10"}}function L(a,b){V.xi(a,function(d,c,f){var e=V.jb(a,c);c==b&&"Color"==e.inputs[f[1]].identifier&&V.hj(a,d,c,f)})}function l(){var a=V.create();V.Gi(a,0,{data:null,hb:[],lb:[],inputs:[{Pa:new Float32Array([0,0,0]),identifier:"Color",Sa:!1,name:"Color"},{Pa:1,identifier:"Alpha",Sa:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",zf:[]});return a}function I(a){V.fa(a,function(b,d){for(var c=d.inputs,f=d.outputs,e=0;e<c.length;e++)v(a,c[e],b,e,1);for(e=0;e<f.length;e++)v(a,f[e],
b,e,0)})}function v(a,b,d,c,f){if(b.Sa){var e=!0;V.xi(a,function(a,b,g){if(!f&&a==d&&g[0]==c||f&&b==d&&g[1]==c)e=!1});e&&(b.Sa=!1)}}function K(a,b,d){var c=[];V.xi(a,function(f,e,g){var n=V.jb(a,f),h=V.jb(a,e),n=Va.Wi(n.outputs[g[0]].Pa),h=Va.Wi(h.inputs[g[1]].Pa);if(n!=h){var t,k={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},B={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};n&&!h?t=fa("vector_to_scalar","B4W_VECTOSCAL",[k],[B]):!n&&h&&(t=fa("scalar_to_vector",
"B4W_SCALTOVEC",[B],[k]));H(a,t,0,b,d);c.push([f,e,a.sa[a.sa.length-2],g])}});for(var f=0;f<c.length;++f)V.hj(a,c[f][0],c[f][1],c[f][3]),V.Zc(a,c[f][0],c[f][2],[c[f][3][0],0]),V.Zc(a,c[f][2],c[f][1],[0,c[f][3][1]])}function k(a){var b=[];V.fa(a,function(d,c){switch(c.type){case "B4W_TRANSLUCENCY":V.xi(a,function(f,e,g){var n=V.jb(a,e);f==d&&"MATERIAL_EXT"==n.type&&"Translucency"==c.outputs[g[0]].name&&b.push(f,e,[g[0]+1,g[1]+1])})}});for(var d=0;d<b.length;d+=3)V.Zc(a,b[d],b[d+1],b[d+2])}function D(a,
b){var d=[];V.fa(b,function(b,c){c.name==a.name&&d.push(b)});if(d.length)return d;Va.J("Node not found")}function M(a){var b=[];V.fa(a,function(a,d){"B4W_PARALLAX"!=d.type&&"REROUTE"!=d.type||b.push(a,d)});for(var d=0;d<b.length;d+=2){var c=b[d],f=b[d+1];if("B4W_PARALLAX"==f.type)E(a,c,f);else if("REROUTE"==f.type){for(var e=V.gh(a,c,0),g=V.ph(a,c),n=[],h=[],t=[],k=0;k<g;k++){var B=V.Zh(a,c,k),l=h.indexOf(B),H=V.jd(a,c,B,0<=l?t[l]:0);if(H){var H=H[1],v=f.inputs[0].Pa,H=V.jb(a,B).inputs[H];switch(typeof v){case "number":if("object"==
typeof H.Pa)for(var r=H.Pa,H=0;H<r.length;H++)r[H]=v;else"number"==typeof H.Pa&&(H.Pa=v);break;case "object":if("object"==typeof H.Pa)for(r=H.Pa,H=0;H<r.length;H++)r[H]=v[H];else"number"==typeof H.Pa&&(H.Pa=.35*v[0]+.45*v[1]+.2*v[2])}}v=f.outputs;for(H=0;H<v.length;H++)v[H].Pa=f.inputs[0].Pa;-1!=l?t[l]+=1:(h.push(B),t.push(1),n.push(c,B))}if(-1!=e)for(f=V.jd(a,e,c,0)[0],k=0;k<h.length;k++)for(H=0;H<t[k];H++)g=V.jd(a,c,h[k],H)[1],V.Zc(a,e,h[k],[f,g]);for(k=0;k<n.length;k+=2)V.fn(a,n[k],n[k+1],-1)}}}
function E(a,b,d){var c;a:{c=a.Ka;for(var f=0;f<c.length;f+=3)if(c[f+1]==b&&1==c[f+2][1]){c=c[f];break a}c=-1}-1!=c&&(f=V.jb(a,c),d.data=f.data,V.fn(a,c,b,-1),0==V.ph(a,c)&&(b=V.gh(a,c,0),-1!=b&&V.fn(a,b,c,-1),V.Bg(a,c)));d.inputs.splice(1,1)}function S(a){C(a);W(a);F(a)}function F(a){var b={};V.fa(a,function(a,d){if("GEOMETRY_UV"==d.type||"UVMAP"==d.type||"TEX_COORD_UV"==d.type){var c=d.data.value;c in b||(b[c]=[]);b[c].push(a,d)}});for(var d in b){var c=b[d];if(2<c.length)for(var f=z(d),f=H(a,f,
0,"",void 0),e=V.jb(a,f),g=0;g<c.length;g+=2){for(var n=c[g],h=c[g+1],t=[],k={},B=V.ph(a,n),l=0;l<B;l++){var v=V.Zh(a,n,l);v in k||(k[v]=0);var r=V.jd(a,n,v,k[v]);k[v]++;t.push(n,v,r);r=r.splice(0,r.length);switch(h.type){case "GEOMETRY_UV":r[0]=0;e.outputs[0].Sa=!0;break;case "UVMAP":case "TEX_COORD_UV":r[0]=1,e.outputs[1].Sa=!0}V.Zc(a,f,v,r)}for(l=0;l<t.length;l+=3)V.fn(a,t[l],t[l+1],0);V.Bg(a,n)}}}function z(a){var b=fa("merged_uv","UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",is_linked:!1,
name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function C(a){var b=[];V.fa(a,function(a,d){"GEOMETRY_VC"!=d.type&&"GEOMETRY_NO"!=d.type&&"GEOMETRY_FB"!=d.type&&"GEOMETRY_VW"!=d.type&&"GEOMETRY_GL"!=d.type&&"GEOMETRY_LO"!=d.type&&"GEOMETRY_OR"!=d.type&&"GEOMETRY_BF"!=d.type&&"GEOMETRY_IN"!=d.type||b.push(a,d)});for(var c=[],f=0;f<b.length;f+=2){for(var e=b[f],g=b[f+1],n=!0,h=0;h<c.length;h++){var t=c[h];if(d(g,t.Yg)){for(var n=[],
h=V.ph(a,e),k=0;k<h;k++){var B=V.Zh(a,e,k),l=V.jd(a,e,B,0);n.push(e,B,l);V.Zc(a,t.id,B,l)}for(k=0;k<n.length;k+=3)V.fn(a,n[k],n[k+1],0);V.Bg(a,e);n=!1;break}}n&&(t={id:e,Yg:g},c.push(t))}}function r(a){for(var b={},d=0;d<a.sa.length;d+=2){var c=a.sa[d];b[c]={Gt:{},DO:!1}}for(d=0;d<a.Ka.length;d+=3)b[a.Ka[d+1]].Gt[a.Ka[d]]=!0;for(c in b)f(c,b);for(c in b)b[c]=Object.keys(b[c].Gt).map(function(a){return parseInt(a,10)});return b}function f(a,b){var d=b[a];if(!d.DO){var c=Va.X(d),e;for(e in d.Gt){f(e,
b);var d=b[e],g;for(g in d.Gt)c.Gt[g]=!0}c.DO=!0;b[a]=c}}function W(a){var b=[];V.fa(a,function(a,d){"TEXTURE_COLOR"!=d.type&&"TEXTURE_NORMAL"!=d.type||b.push(a,d)});if(b.length){for(var c=r(a),f=[],e=0;e<b.length;e+=2){for(var g=b[e],n=b[e+1],h=!0,t=0;t<f.length;t++){var k=f[t];if(!(3<=k.Ar.length||!d(n,k.Yg)||-1<c[g].indexOf(k.id)||-1<c[k.id].indexOf(g))){for(var B=!1,l=0;l<k.Ar.length;l++){var H=k.Ar[l].id;if(-1<c[g].indexOf(H)||-1<c[H].indexOf(g)){B=!0;break}}if(!B){for(var t=[],H=V.Wj(a,g),v=
{},l=0;l<H;l++)B=V.gh(a,g,l),B in v||(v[B]=0),h=V.jd(a,B,g,v[B]++),t.push(B,g,h);for(var H=[],v=V.ph(a,g),Q={},l=0;l<v;l++)B=V.Zh(a,g,l),B in Q||(Q[B]=0),h=V.jd(a,g,B,Q[B]++),H.push(g,B,h);h=t.concat(H);for(l=0;l<h.length;l+=3)V.fn(a,h[l],h[l+1],0);V.Bg(a,g);l={id:g,Yg:n,dZ:t,eZ:H};k.Ar.push(l);h=!1;break}}}h&&(k={id:g,Yg:n,Ar:[]},f.push(k))}for(e=0;e<f.length;e++){k=f[e];c=k.Ar.length;for(t=0;t<c;t++){n=k.Ar[t];l=n.Yg;g=n.dZ;n=n.eZ;k.Yg.inputs[t+1].Sa=l.inputs[0].Sa;k.Yg.inputs[t+1].Pa=l.inputs[0].Pa;
k.Yg.outputs[2*(t+1)].Sa=l.outputs[0].Sa;k.Yg.outputs[2*(t+1)].Pa=l.outputs[0].Pa;k.Yg.outputs[2*(t+1)+1].Sa=l.outputs[1].Sa;k.Yg.outputs[2*(t+1)+1].Pa=l.outputs[1].Pa;for(l=0;l<g.length;l+=3)B=g[l],h=g[l+2],h[1]+=t+1,V.Zc(a,B,k.id,h);for(l=0;l<n.length;l+=3)B=n[l+1],h=n[l+2],h[0]+=2*(t+1),V.Zc(a,k.id,B,h);k.Yg.hb.push(["USE_uv"+(t+2),1])}V.Bg(a,k.id);V.Gi(a,k.id,k.Yg)}}}function d(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==b.data.value;case "GEOMETRY_NO":for(var d=
a.hb,c=-1,f=0;f<d.length;f++){var e=d[f];if("USE_NORMAL_IN"==e[0]){c=e[1];break}}d=b.hb;e=-1;for(f=0;f<d.length;f++){var g=d[f];if("USE_NORMAL_IN"==g[0]){e=g[1];break}}return c===e;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.Wx==b.data.Wx&&a.data.value.No==b.data.value.No;case "VALUE":case "RGB":return a.Qf==b.Qf;default:return!1}}function n(a){var b=
[],d=[];V.fa(a,function(a,c){"GEOMETRY_VC"==c.type&&b.push(a,c);"GEOMETRY_VW"==c.type&&d.push(a,c)});X(a,b);R(a,d)}function X(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],f=b[d+1],e=!1,g=[],n=[],h=[[],[],[]],t=V.ph(a,c),k=0;k<t;k++){var B=V.Zh(a,c,k);if("SEPRGB"!=V.jb(a,B).type){e=!1;break}g.push(c,B);for(var l={},H=V.ph(a,B),e=0;e<H;e++){var v=V.Zh(a,B,e);v in l||(l[v]=0);var r=V.jd(a,B,v,l[v]++);g.push(B,v);h[r[0]].push(c,v,r)}n.push(B);e=!0}if(e){for(k=c=t=0;k<h.length;k++)h[k].length&&(t++,
c|=1<<2-k);if(t){f.type+=t;f.outputs=[];for(k=0;k<h.length;k++)if(h[k].length)for(f.outputs.push({Pa:0,identifier:"RGB"[k],Sa:!0,name:"RGB"[k]}),e=0;e<h[k].length;e+=3)h[k][e+2][0]=Va.Xr(c,k);for(k=0;k<g.length;k+=2)V.fn(a,g[k],g[k+1],0);for(k=0;k<n.length;k++)V.Bg(a,n[k]);for(k=0;k<h.length;k++)for(e=0;e<h[k].length;e+=3)V.Zc(a,h[k][e],h[k][e+1],h[k][e+2])}}}}function R(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],f=!0,e=[],g=V.ph(a,c),h=0;h<g;h++){var n=V.Zh(a,c,h);if("B4W_REFLECT"==V.jb(a,
n).type){var k=V.jd(a,c,n,0),t=V.jd(a,c,n,1);k&&1==k[1]||t&&1==t[1]?f=!1:e.push(c,n)}else f=!1}for(h=0;h<e.length;h+=2)g=a,k=e[h],n=e[h+1],t=V.jb(g,n),t.type+="_WORLD",V.fn(g,k,n,0),t.inputs.splice(0,1),k=V.gh(g,n,0),k!=V.OD&&(V.jd(g,k,n,0)[1]=0);f&&V.Bg(a,c)}}function t(a,b,d,c,f,e){a=a.nodes;for(var g=null,h=0;h<a.length;h++){var n=a[h];f?"GROUP"==n.type&&n.node_tree_name==d&&(g=n):n.type==d&&(g=n)}return g?D(g,b)[0]:(e||Ga.error('No "'+d+'" node in node '+c),-1)}function fa(a,b,d,c){return{name:a,
type:b,inputs:d,outputs:c}}function la(a){var b={name:"",Qf:"",type:"",zf:[],inputs:[],outputs:[],lb:[],data:null,hb:[]};b.name=a.name;b.Qf=a.Qf;b.type=a.type;for(var d=b.zf,c=a.zf,f=0;f<c.length;f++)d.push(oa(c[f]));d=b.lb;c=a.lb;for(f=0;f<c.length;f++)d.push(oa(c[f]));d=b.inputs;c=a.inputs;for(f=0;f<c.length;f++)d.push(ma(c[f]));d=b.outputs;c=a.outputs;for(f=0;f<c.length;f++)d.push(ma(c[f]));d=b.hb;c=a.hb;for(f=0;f<c.length;f++)d.push(c[f].slice());b.data=a.data;return b}function H(a,b,d,c,f){var e=
b.name,g=b.name,h=b.type,n=[],k=[],t=[],l=[],v=null,r=[];switch(h){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "ATTRIBUTE":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":k=
aa(b);t=ja(b);Ga.warn(h+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":k=aa(b);t=ja(b);break;case "MIX_SHADER":k.push(da(b,"Fac"));var Q=da(b,"Shader"),t=Q.Sa;k.push(Q);(Q=da(b,"Shader_001"))||(Q=da(b,"Shader.001"));var m=Q.Sa;k.push(Q);k.push(T("d_color1","d_color1",[0,0,0],t));k.push(T("d_roughness1","d_roughness1",0,t));k.push(T("s_color1","s_color1",[0,0,0],t));k.push(T("s_roughness1","s_roughness1",0,t));k.push(T("metalness1","metalness1",0,t));k.push(T("normal1",
"normal1",[0,0,0],t));k.push(T("e_color1","e_color1",[0,0,0],t));k.push(T("emission1","emission1",0,t));k.push(T("a_color1","a_color1",[0,0,0],t));k.push(T("alpha1","alpha1",1,t));k.push(T("d_color2","d_color2",[0,0,0],m));k.push(T("d_roughness2","d_roughness2",0,m));k.push(T("s_color2","s_color2",[0,0,0],m));k.push(T("s_roughness2","s_roughness2",0,m));k.push(T("metalness2","metalness2",0,m));k.push(T("normal2","normal2",[0,0,0],m));k.push(T("e_color2","e_color2",[0,0,0],m));k.push(T("emission2",
"emission2",0,m));k.push(T("a_color2","a_color2",[0,0,0],m));k.push(T("alpha2","alpha2",1,m));t=ba(b,"Shader");Q=t.Sa;t=[t,T("d_color","d_color",[0,0,0],Q),T("d_roughness","d_roughness",0,Q),T("s_color","s_color",[0,0,0],Q),T("s_roughness","s_roughness",0,Q),T("metalness","metalness",0,Q),T("normal","normal",[0,0,0],Q),T("e_color","e_color",[0,0,0],Q),T("emission","emission",0,Q),T("a_color","a_color",[0,0,0],Q),T("alpha","alpha",1,Q)];break;case "OBJECT_INFO":var k=aa(b),t=[],Q=ba(b,"Location"),
m=ba(b,"Object Index"),x=ba(b,"Material Index"),q=ba(b,"Random");t.push(Q);t.push(m);t.push(x);t.push(q);r.push(["USE_LOCATION_OUT",Q.Sa|0]);r.push(["USE_OBJ_IND_OUT",m.Sa|0]);r.push(["USE_MAT_IND_OUT",x.Sa|0]);r.push(["USE_RANDOM_OUT",q.Sa|0]);break;case "UVMAP":(Q=b.uv_layer)||(h="EMPTY_UV");"EMPTY_UV"!=h&&(v=ga("param_"+h+"_a"),m=ga("param_"+h+"_v"),n.push(ca(v)),n.push(ca(m)),l.push(ca(m)),v={name:v,value:Q});t=ja(b);break;case "UV_MERGED":v=ga("param_UV_MERGED_a");m=ga("param_UV_MERGED_v");n.push(ca(v));
n.push(ca(m));t.push(ba(b,"UV_geom"));t.push(ba(b,"UV_cycles"));l.push(ca(m));v={name:v,value:b.uv_layer};break;case "CAMERA":k=[];t=ja(b);break;case "COMBRGB":case "COMBHSV":k=aa(b);t=ja(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==h?(Ba(b,0,0)&&r.push(["READ_R",1]),Ba(b,1,0)&&r.push(["READ_G",1]),Ba(b,2,0)&&r.push(["READ_B",1]),Ba(b,3,0)&&r.push(["READ_A",1])):(Ba(b,0,-1)&&r.push(["READ_R",1]),Ba(b,1,-1)&&r.push(["READ_G",1]),Ba(b,2,-1)&&r.push(["READ_B",1]));k=aa(b);t=ja(b);v={value:b};
break;case "PARTICLE_INFO":k=aa(b);t=ja(b);for(m=0;m<b.outputs.length;m++){var x=b.outputs[m],q=x.identifier,y=ca("v_param_PART_INFO_"+q.replace(" ",""));if(x.is_linked)switch(q){case "Size":r.push(["PART_INFO_SIZE",qa.da(1)]);break;case "Age":r.push(["PART_INFO_AGE",qa.da(1)]);break;case "Lifetime":r.push(["PART_INFO_LT",qa.da(1)]);break;case "Location":r.push(["PART_INFO_LOC",qa.da(1)]);break;case "Index":v=Q=ca("a_param_PART_INFO_"+x.identifier.replace(" ",""));r.push(["PART_INFO_IND",qa.da(1)]);
break;case "Velocity":r.push(["PART_INFO_VEL",qa.da(1)]);break;case "Angular Velocity":r.push(["PART_INFO_A_VEL",qa.da(1)])}"Age"!=q&&"Lifetime"!=q&&"Size"!=q&&(n.push(y),l.push(y))}Q&&n.push(Q);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!B(b))return!0;h=Z(b,d);if(!h)return Ga.error("Geometry output is not supported"),null;switch(h){case "GEOMETRY_UV":(Q=b.uv_layer)||(h="EMPTY_UV");"EMPTY_UV"!=h&&(v=ga("param_GEOMETRY_UV_a"),m=ga("param_GEOMETRY_UV_v"),n.push(ca(v)),n.push(ca(m)),l.push(ca(m)),
v={name:v,value:Q});t.push(ba(b,"UV"));break;case "GEOMETRY_VC":(Q=b.color_layer)||(h="EMPTY_VC");"EMPTY_VC"!=h&&(v=ga("param_GEOMETRY_VC_a"),m=ga("param_GEOMETRY_VC_v"),n.push(ca(v)),n.push(ca(m)),l.push(ca(m)),v={name:v,value:Q});t.push(ba(b,"Vertex Color"));break;case "GEOMETRY_NO":k.push(T("Normal","Normal",[0,0,0],!1));r.push(["USE_NORMAL_IN",0]);t.push(ba(b,"Normal"));break;case "GEOMETRY_TRN":h="GEOMETRY_NO";k.push(T("Normal","Normal",[0,0,0],!1));t.push(ba(b,"True Normal"));r.push(["USE_NORMAL_IN",
0]);Ga.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":t.push(ba(b,"Front/Back"));break;case "GEOMETRY_VW":t.push(ba(b,"View"));break;case "GEOMETRY_GL":t.push(ba(b,"Global")||ba(b,"Position"));break;case "GEOMETRY_LO":t.push(ba(b,"Local"));break;case "GEOMETRY_OR":Q=ga("param_GEOMETRY_OR_v");n.push(ca(Q));t.push(ba(b,"Orco"));l.push(ca(Q));break;case "GEOMETRY_IN":t.push(ba(b,"Incoming"));break;case "GEOMETRY_BF":t.push(ba(b,"Backfacing"))}break;case "TEX_COORD":if(!B(b))return!0;
h=ea(b,d);switch(h){case "TEX_COORD_UV":(Q=b.uv_layer)||(h="EMPTY_UV");"EMPTY_UV"!=h&&(v=ga("param_TEX_COORD_UV_a"),m=ga("param_TEX_COORD_UV_v"),n.push(ca(v)),n.push(ca(m)),l.push(ca(m)),v={name:v,value:b.uv_layer});t.push(ba(b,"UV"));break;case "TEX_COORD_NO":t.push(ba(b,"Normal"));break;case "TEX_COORD_GE":Q=ga("param_TEX_COORD_GE_v");n.push(ca(Q));t.push(ba(b,"Generated"));l.push(ca(Q));break;case "TEX_COORD_OB":t.push(ba(b,"Object"));break;case "TEX_COORD_CA":t.push(ba(b,"Camera"));break;case "TEX_COORD_WI":t.push(ba(b,
"Window"));break;case "TEX_COORD_RE":t.push(ba(b,"Reflection"))}break;case "GROUP":Q=b.node_tree_name;switch(Q){case "B4W_LINEAR_TO_SRGB":if(!za(b,[1],[1])){v=ha(b,c,f);break}h="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!za(b,[1],[1])){v=ha(b,c,f);break}h="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!za(b,[1],[1])){v=ha(b,c,f);break}h="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!za(b,[1,1],[1])){v=ha(b,c,f);break}h="B4W_REFLECT";break;case "B4W_REFRACTION":if(!za(b,
[1,0],[1])){v=ha(b,c,f);break}h="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!za(b,[1,1,0,0,0],[1])){v=ha(b,c,f);break}m=ga("param_B4W_PARALLAX_texture");l.push(ca(m));h="B4W_PARALLAX";break;case "B4W_CLAMP":if(!za(b,[1],[1])){v=ha(b,c,f);break}h="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!za(b,[0,0,0,0,0],[0])){v=ha(b,c,f);break}h="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!za(b,[],[0])){v=ha(b,c,f);break}h="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!za(b,[0,0,0],[0])){v=ha(b,c,f);break}h="B4W_SMOOTHSTEP";
break;case "B4W_GLOW_OUTPUT":h="B4W_GLOW_OUTPUT";break;default:v=ha(b,c,f)}k=aa(b);t=ja(b);"B4W_TRANSLUCENCY"==Q&&(Q=T("TranslucencyParams","TranslucencyParams",[0,0,0,0]),Q.Sa=t[0].Sa,t.push(Q));break;case "LAMP":(Q=b.lamp)?(Q.uuid in Ia?r.push(["LAMP_INDEX",String(Ia[Q.uuid])]):(Ia[Q.uuid]=Ma,r.push(["LAMP_INDEX",String(Ma++)])),v=Ia):(Ga.error("There is no lamp in node: "+b.name),r.push(["LAMP_INDEX",-1]));t.push(ba(b,"Color"));t.push(ba(b,"Light Vector"));t.push(ba(b,"Distance"));t.push(ba(b,
"Visibility Factor"));break;case "LIGHTING_AMBIENT":k=[T("E","E",[0,0,0],!0),T("A","A",[0,0,0],!0),T("D","D",[0,0,0],!0)];t=[T("color","color",[0,0,0],!0),T("specular","specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":t=[T("E","E",[0,0,0],!0),T("A","A",[0,0,0],!0),T("D","D",[0,0,0],!0),T("S","S",[0,0,0],!0),T("normal","normal",[0,0,0],!0),T("dif_params","dif_params",[0,0],!0),T("sp_params","sp_params",[0,0],!0),T("shadow_factor","shadow_factor",0,!0),T("translucency_color","translucency_color",
0,!0),T("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":k=[T("color","color",[0,0,0],!0),T("specular","specular",[0,0,0],!0)];break;case "LIGHTING_LAMP":k=[T("shadow_factor","shadow_factor",0,!0)];t=[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("lcolorint","lcolorint",[0,0,0],!0),T("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":k=[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("normal","normal",[0,0,0],!0),T("norm_fac","norm_fac",
0,!0)];t=[T("lfactor","lfactor",0,!0)];r.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":k=[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("normal","normal",[0,0,0],!0),T("norm_fac","norm_fac",0,!0),T("dif_params","dif_params",[0,0],!0)];t=[T("lfactor","lfactor",0,!0)];r.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":k=
[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("normal","normal",[0,0,0],!0),T("norm_fac","norm_fac",0,!0),T("sp_params","sp_params",[0,0],!0)];t=[T("sfactor","sfactor",0,!0)];r.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":k=[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("normal","normal",[0,0,0],!0),T("norm_fac","norm_fac",0,!0),T("sp_params","sp_params",[0,0],!0)];t=[T("sfactor","sfactor",0,!0)];r.push(["MAT_USE_TBN_SHADING",
b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":k=[T("ldir","ldir",[0,0,0],!0),T("lfac","lfac",[0,0],!0),T("normal","normal",[0,0,0],!0),T("norm_fac","norm_fac",0,!0),T("bsdf_params","bsdf_params",[0,0,0,0],!0)];t=[T("lfactor","lfactor",0,!0),T("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":k=[T("color","color",[0,0,0,0],!0),T("specular","specular",[0,0,0],!0),T("lfactor","lfactor",0,!0),T("sfactor","sfactor",0,!0),T("ldir","ldir",[0,0,0],!0),T("normal","normal",[0,0,0],!0),T("translucency_params",
"translucency_params",[0,0,0,0],!0),T("D","D",[0,0,0],!0),T("S","S",[0,0,0],!0),T("lcolorint","lcolorint",[0,0,0],!0),T("translucency_color","translucency_color",0,!0)];t=[T("color","color",[0,0,0,0],!0),T("specular","specular",[0,0,0],!0)];break;case "NORMAL":k=aa(b);t=ja(b);Q=ba(b,"Normal");l.push(ca(ga("param_NORMAL_Normal"),Q.Pa,3));break;case "MAPPING":Q=b.vector_type;h="MAPPING";k.push(da(b,"Vector"));t.push(ba(b,"Vector"));var m=Va.Rh(b.rotation),x=Va.Rh(b.scale),q=Va.Rh(b.translation),y=Ya.create(),
C=Va.mZ(m,Ya.create());"TEXTURE"==Q&&(x[0]=x[0]||1,x[1]=x[1]||1,x[2]=x[2]||1);Ya.multiply(C,new Float32Array([x[0],0,0,0,x[1],0,0,0,x[2]]),y);y=Va.m1(y,va.create());switch(Q){case "POINT":y[12]=q[0];y[13]=q[1];y[14]=q[2];break;case "TEXTURE":y[12]=q[0];y[13]=q[1];y[14]=q[2];y=va.invert(y,y);break;case "NORMAL":va.invert(y,y),va.transpose(y,y)}switch(Q){case "NORMAL":r.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":r.push(["MAPPING_TRS_MATRIX_DEF",1]);r.push(["MAPPING_TRS_MATRIX",qa.da(y,16)]);break;
case "POINT":0!==Ua.length(m)?(r.push(["MAPPING_TRS_MATRIX_DEF",1]),r.push(["MAPPING_TRS_MATRIX",qa.da(y,16)])):(0!==Ua.length(x)&&(r.push(["MAPPING_SCALE_DEF",1]),r.push(["MAPPING_SCALE",qa.da(x,3)])),0!==Ua.length(q)&&(r.push(["MAPPING_TRANS_DEF",1]),r.push(["MAPPING_TRANS",qa.da(q,3)])));break;case "VECTOR":0!==Ua.length(m)?(r.push(["MAPPING_TRS_MATRIX_DEF",1]),r.push(["MAPPING_TRS_MATRIX",qa.da(y,16)])):0!==Ua.length(x)&&(r.push(["MAPPING_SCALE_DEF",1]),r.push(["MAPPING_SCALE",qa.da(x,3)]))}b.use_min&&
(r.push(["MAPPING_MIN_CLIP_DEF",1]),r.push(["MAPPING_MIN_CLIP",qa.da(b.min,3)]));b.use_max&&(r.push(["MAPPING_MAX_CLIP_DEF",1]),r.push(["MAPPING_MAX_CLIP",qa.da(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var v=[],Q=[],m=[],x=[T("E","E",[0,0,0],!0),T("A","A",[0,0,0],!0),T("D","D",[0,0,0],!0),T("S","S",[0,0,0],!0),T("normal","normal",[0,0,0],!0),T("dif_params","dif_params",[0,0],!0),T("sp_params","sp_params",[0,0],!0),T("shadow_factor","shadow_factor",0,!0)],q=[T("color","color",[0,0,0],
!0),T("specular","specular",[0,0,0],!0),T("normal","normal",[0,0,0],!0)],y=[ba(b,"Color"),ba(b,"Alpha"),ba(b,"Normal")],C=[],p=da(b,"Color");p.Pa.splice(3);m.push(p);k.push(p);p=da(b,"Spec");p.Pa.splice(3);m.push(p);k.push(p);(p=da(b,"DiffuseIntensity"))||(p=da(b,"Refl"));p.Pa=b.diffuse_intensity;m.push(p);k.push(p);var Y=da(b,"Normal");Y.Pa.splice(3);m.push(Y);k.push(Y);"MATERIAL_EXT"==h?((p=da(b,"Emit"))||(p=T("Emit","Emit",0)),m.push(p),k.push(p),(p=da(b,"Translucency"))?(p.Pa=0,p.name="Translucency",
p.identifier="Translucency"):p=T("Translucency","Translucency",0),k.push(p),(p=da(b,"Translucency"))?(p.Pa=[0,0,0,0],p.name="TranslucencyParams",p.identifier="TranslucencyParams"):p=T("TranslucencyParams","TranslucencyParams",[0,0,0,0]),k.push(p),t=da(b,"Reflectivity"),p=da(b,"Ray Mirror"),t?(p=t,t="Reflectivity"):p?t="Ray Mirror":(p=t,t="Reflectivity"),p||(p=T(t,t,0)),k.push(p),q.push(p),(p=da(b,"SpecTra"))||(p=T("SpecTra","SpecTra",0)),k.push(p),q.push(p),(p=da(b,"Alpha"))||(p=T("Alpha","Alpha",
b.alpha)),k.push(p),q.push(p),y.push(ba(b,"Diffuse")),y.push(ba(b,"Spec")),v.push(["MATERIAL_EXT",1]),Q.push(["MATERIAL_EXT",1])):(m.push(T("emit_intensity","emit_intensity",0)),q.push(T("reflect_factor","reflect_factor",0)),q.push(T("specular_alpha","specular_alpha",0)),q.push(T("alpha_in","alpha_in",0)),y.push(T("diffuse_out","diffuse_out",0)),y.push(T("spec_out","spec_out",0)),v.push(["MATERIAL_EXT",0]),Q.push(["MATERIAL_EXT",0]));C.push(ca(ga("param_MATERIAL_alpha"),b.alpha));C.push(ca(ga("param_MATERIAL_spec_alpha"),
b.specular_alpha));t=y;v.push(["USE_MATERIAL_NORMAL",Y.Sa|0]);b.use_diffuse&&(v.push(["USE_MATERIAL_DIFFUSE",1]),Q.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&Q.push(["USE_MATERIAL_SPECULAR",1]);var p=[],z=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":Y=b.specular_hardness;break;case "WARDISO":Y=b.specular_slope;break;case "TOON":Y=b.specular_toon_size;z=b.specular_toon_smooth;break;case "BLINN":Y=b.specular_ior;z=b.specular_hardness;break;default:Ga.error("unsupported specular shader: "+
b.specular_shader+' (material "'+b.material_name+'")'),Y=b.specular_hardness}var w,K;switch(b.diffuse_shader){case "LAMBERT":K=w=0;break;case "OREN_NAYAR":w=b.roughness;K=0;break;case "FRESNEL":w=b.diffuse_fresnel;K=b.diffuse_fresnel_factor;break;case "MINNAERT":w=b.darkness;K=0;break;case "TOON":w=b.diffuse_toon_size;K=b.diffuse_toon_smooth;break;default:Ga.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),K=w=0}p.push(ca(ga("param_MATERIAL_diffuse"),[w,K],
2));p.push(ca(ga("param_MATERIAL_spec"),[b.specular_intensity,Y,z],3));v.push(["SHADELESS_MAT",b.use_shadeless?1:0]);Y={name:b.name,value:{Vf:b.specular_shader,If:b.diffuse_shader,Mc:b.use_shadeless,yf:b.use_tangent_shading}};v={name:b.name,value:{Vf:b.specular_shader,If:b.diffuse_shader,Mc:b.use_shadeless,yf:b.use_tangent_shading},n1:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:m,outputs:x,lb:p,data:Y,hb:v,zf:[]},o1:{name:"material_end",type:"MATERIAL_END",inputs:q,outputs:y,lb:C,data:Y,hb:Q,
zf:[]}};break;case "BSDF_DIFFUSE":k=aa(b);r.push(["USE_NORMAL_IN",k[2].Sa|0]);t=ba(b,"BSDF");m=t.Sa;t=[t,T("d_color","d_color",[0,0,0],m),T("d_roughness","d_roughness",0,m),T("s_color","s_color",[0,0,0],m),T("s_roughness","s_roughness",0,m),T("metalness","metalness",0,m),T("normal","normal",[0,0,0],m),T("e_color","e_color",[0,0,0],m),T("emisson","emisson",0,m),T("a_color","a_color",[0,0,0],m),T("alpha","alpha",1,m)];break;case "BSDF_GLOSSY":k=aa(b);r.push(["USE_NORMAL_IN",k[2].Sa|0]);t=ba(b,"BSDF");
m=t.Sa;t=[t,T("d_color","d_color",[0,0,0],m),T("d_roughness","d_roughness",0,m),T("s_color","s_color",[0,0,0],m),T("s_roughness","s_roughness",0,m),T("metalness","metalness",1,m),T("normal","normal",[0,0,0],m),T("e_color","e_color",[0,0,0],m),T("emisson","emisson",0,m),T("a_color","a_color",[0,0,0],m),T("alpha","alpha",1,m)];break;case "BSDF_TRANSPARENT":k=aa(b);t=ba(b,"BSDF");m=t.Sa;t=[t,T("d_color","d_color",[0,0,0],m),T("d_roughness","d_roughness",0,m),T("s_color","s_color",[0,0,0],m),T("s_roughness",
"s_roughness",0,m),T("metalness","metalness",0,m),T("normal","normal",[0,0,0],m),T("e_color","e_color",[0,0,0],m),T("emisson","emisson",0,m),T("a_color","a_color",[0,0,0],m),T("alpha","alpha",1,m)];break;case "EMISSION":k=aa(b);t=ba(b,"Emission");Q=t.Sa;t=[t,T("d_color","d_color",[0,0,0],Q),T("d_roughness","d_roughness",0,Q),T("s_color","s_color",[0,0,0],Q),T("s_roughness","s_roughness",0,Q),T("metalness","metalness",1,Q),T("normal","normal",[0,0,0],Q),T("e_color","e_color",[0,0,0],Q),T("emisson",
"emisson",1,Q),T("a_color","a_color",[0,0,0],m),T("alpha","alpha",1,m)];break;case "MATH":switch(b.operation){case "ADD":h="MATH_ADD";break;case "SUBTRACT":h="MATH_SUBTRACT";break;case "MULTIPLY":h="MATH_MULTIPLY";break;case "DIVIDE":h="MATH_DIVIDE";break;case "SINE":h="MATH_SINE";break;case "COSINE":h="MATH_COSINE";break;case "TANGENT":h="MATH_TANGENT";break;case "ARCSINE":h="MATH_ARCSINE";break;case "ARCCOSINE":h="MATH_ARCCOSINE";break;case "ARCTANGENT":h="MATH_ARCTANGENT";break;case "POWER":h=
"MATH_POWER";break;case "LOGARITHM":h="MATH_LOGARITHM";break;case "MINIMUM":h="MATH_MINIMUM";break;case "MAXIMUM":h="MATH_MAXIMUM";break;case "ROUND":h="MATH_ROUND";break;case "LESS_THAN":h="MATH_LESS_THAN";break;case "GREATER_THAN":h="MATH_GREATER_THAN";break;case "MODULO":h="MATH_MODULO";break;case "ABSOLUTE":h="MATH_ABSOLUTE";break;default:return Ga.error("Unsupported MATH operation: "+b.operation),null}r.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);k=aa(b);t=ja(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":h=
"MIX_RGB_MIX";break;case "ADD":h="MIX_RGB_ADD";break;case "MULTIPLY":h="MIX_RGB_MULTIPLY";break;case "SUBTRACT":h="MIX_RGB_SUBTRACT";break;case "SCREEN":h="MIX_RGB_SCREEN";break;case "DIVIDE":h="MIX_RGB_DIVIDE";break;case "DIFFERENCE":h="MIX_RGB_DIFFERENCE";break;case "DARKEN":h="MIX_RGB_DARKEN";break;case "LIGHTEN":h="MIX_RGB_LIGHTEN";break;case "OVERLAY":h="MIX_RGB_OVERLAY";break;case "DODGE":h="MIX_RGB_DODGE";break;case "BURN":h="MIX_RGB_BURN";break;case "HUE":h="MIX_RGB_HUE";break;case "SATURATION":h=
"MIX_RGB_SATURATION";break;case "VALUE":h="MIX_RGB_VALUE";break;case "COLOR":h="MIX_RGB_COLOR";break;case "SOFT_LIGHT":h="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":h="MIX_RGB_LINEAR_LIGHT";break;default:return Ga.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}r.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);k=aa(b);t=ja(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":k=[T("Factor","Factor",b.fac,b.fac_is_linked),T("Color1","Color1",[0,0,0],b.color1_is_linked),T("Color2","Color1",
[0,0,0],b.color2_is_linked)];t=[T("Color","Color",[0,0,0],!0)];break;case "OUTPUT":k=aa(b);t=[];break;case "OUTPUT_MATERIAL":k=aa(b);t=[];v=da(b,"Surface");Q=v.Sa;v={name:"output_surface",type:"OUTPUT_SURFACE",inputs:[v],outputs:[],lb:[],data:{value:{AW:"BSDF_COMPUTE"},yW:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[v,T("d_color","d_color",[0,0,0],Q),T("d_roughness","d_roughness",0,Q),T("s_color","s_color",[0,0,0],Q),T("s_roughness","s_roughness",0,Q),T("metalness","metalness",0,Q),T("normal","normal",
[0,0,0],Q),T("e_color","e_color",[0,0,0],Q),T("emission","emission",0,Q),T("a_color","a_color",[0,0,0],Q),T("alpha","alpha",0,Q)],outputs:[T("E","E",[0,0,0],!0),T("A","A",[0,0,0],!0),T("D","D",[0,0,0],!0),T("S","S",[0,0,0],!0),T("normal","normal",[0,0,0],!0),T("bsdf_params","bsdf_params",[0,0,0,0],!0),T("shadow_factor","shadow_factor",0,!0),T("d_color","d_color",[0,0,0],!0),T("s_color","s_color",[0,0,0],!0),T("e_color","e_color",[0,0,0],!0),T("emission","emission",0,!0),T("a_color","a_color",[0,0,
0],!0),T("alpha","alpha",0,!0)],lb:[],data:null,hb:[],zf:[]},zW:{name:"bsdf_end",type:"BSDF_END",inputs:[T("color","color",[0,0,0],!0),T("specular","specular",[0,0,0],!0),T("normal","normal",[0,0,0],!0),T("bsdf_params","bsdf_params",[0,0,0,0],!0),T("d_color","d_color",[0,0,0],!0),T("s_color","s_color",[0,0,0],!0),T("e_color","e_color",[0,0,0],!0),T("emission","emission",0,!0),T("a_color","a_color",[0,0,0],!0),T("alpha","alpha",0,!0)],outputs:[T("color","color",[0,0,0],Q)],lb:[],data:null,hb:[],zf:[]}},
hb:[],zf:[]};v={name:b.name,N1:v,UY:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[T("Height","Height",0,!0)],outputs:[T("Normal","Normal",[0,0,0],!1)],lb:[],data:null,hb:[],zf:[]}};break;case "OUTPUT_WORLD":k=aa(b);t=ja(b);v=da(b,"Surface");v={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[v],outputs:[],lb:[],data:null,hb:[],zf:[]};v={name:b.name,O1:v};break;case "RGB":Q=b.name;Q={name:"-1",value:Q};l.push(Q);t.push(ba(b,"Color"));break;case "SEPRGB":case "SEPHSV":k=
aa(b);t=ja(b);break;case "TEX_ENVIRONMENT":(Q=b.image)?(h="TEXTURE_ENVIRONMENT_"+b.projection,"NONE"==b.color_space?r.push(["NON_COLOR",1]):r.push(["NON_COLOR",0]),k.push(da(b,"Vector")),r.push(["USE_VECTOR_IN",k[0].Sa|0]),t.push(ba(b,"Color")),m=ga("param_TEXTURE_texture"),l.push(ca(m)),v=ya.wm(ya.Ci,!1),v.repeat=!0,v.source="IMAGE",Ca.aE&&(v.anisotropic_filtering=16),ya.sK(v,Q),v={Qt:b.name,Wx:"",name:m,value:v}):h="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(Q=b.image){h="TEXTURE_COLOR";"NONE"==b.color_space?
r.push(["NON_COLOR",1]):r.push(["NON_COLOR",0]);r.push(["CONVERT_UV",0]);for(m=0;4>m;++m)m?(p=T("Vector"+m,"Vector"+m,[0,0,0],!1),x=T("Color"+m,"Color"+m,[0,0,0],!1),q=T("Alpha"+m,"Alpha"+m,0,!1)):(p=da(b,"Vector"),x=ba(b,"Color"),q=ba(b,"Alpha")),k.push(p),t.push(x),t.push(q);m=ga("param_TEXTURE_texture");l.push(ca(m));v=ya.wm(ya.Ci,!1);v.repeat="REPEAT"==b.extension;v.source="IMAGE";ya.sK(v,Q);v={Qt:b.name,Wx:"",name:m,value:v}}else h="TEXTURE_EMPTY";break;case "TEXTURE":h=Aa(b);if("TEXTURE_EMPTY"==
h)t.push(ba(b,"Color")),t.push(ba(b,"Normal")),t.push(ba(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==h)k.push(da(b,"Vector")),t.push(ba(b,"Color")),t.push(ba(b,"Value"));else{if("TEXTURE_NORMAL"==h&&"ENVIRONMENT_MAP"==b.texture.type)return Ga.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;"TEXTURE_COLOR"==h&&(Q=!1,m=b.texture.image,!m||"Non-Color"!=m.colorspace_settings_name&&"Non-Colour Data"!=m.colorspace_settings_name||(Q=!0),r.push(["NON_COLOR",Number(Q)]),r.push(["CONVERT_UV",
1]));for(m=0;4>m;++m)Q="TEXTURE_COLOR"==h?"Color":"Normal",m?(p=T("Vector"+m,"Vector"+m,[0,0,0],!1),x=T(Q+m,Q+m,[0,0,0],!1),q=T("Value"+m,"Value"+m,0,!1)):(p=da(b,"Vector"),x=ba(b,Q),q=ba(b,"Value")),k.push(p),t.push(x),t.push(q)}"TEXTURE_EMPTY"!=h&&(m=ga("param_TEXTURE_texture"),l.push(ca(m)),v=b.texture.I,v={Qt:b.texture.name,Wx:b.texture.uuid,name:m,value:v});break;case "VALTORGB":k=aa(b);t=ja(b);v={value:b};Q=b.color_ramp.interpolation;"CONSTANT"!=Q&&"LINEAR"!=Q&&Ga.warn("Color Ramp node is not fully supported.");
break;case "VALUE":h="VALUE";Q=b.name;Q={name:"-1",value:Q};l.push(Q);t.push(ba(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":h="VECT_MATH_ADD";break;case "SUBTRACT":h="VECT_MATH_SUBTRACT";break;case "AVERAGE":h="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":h="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":h="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":h="VECT_MATH_NORMALIZE";break;default:return Ga.error("Unsupported VECT_MATH operation: "+b.operation),null}k=aa(b);t=ja(b);
break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":r.push(["VECTOR_TYPE",qa.da(0)]);break;case "VECTOR":r.push(["VECTOR_TYPE",qa.da(1)]);break;case "NORMAL":r.push(["VECTOR_TYPE",qa.da(2)]);break;default:return Ga.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}k=b.convert_from;t=b.convert_to;if("WORLD"==k)if("WORLD"==t)k=0;else if("OBJECT"==t)k=1;else if("CAMERA"==t)k=2;else return Ga.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==
k)if("WORLD"==t)k=3;else if("OBJECT"==t)k=4;else if("CAMERA"==t)k=5;else return Ga.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==k)if("WORLD"==t)k=6;else if("OBJECT"==t)k=7;else if("CAMERA"==t)k=8;else return Ga.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return Ga.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;r.push(["CONVERT_TYPE",qa.da(k)]);k=aa(b);t=ja(b);break;case "NORMAL_MAP":switch(b.space){case "TANGENT":Q=
0;break;case "OBJECT":Q=1;break;case "WORLD":Q=2;break;case "BLENDER_OBJECT":Q=3;break;case "BLENDER_WORLD":Q=4;break;default:return Ga.error("Unsupported NORMAL_MAP space: "+b.space),null}r.push(["SPACE",qa.da(Q)]);k.push(da(b,"Strength"));k.push(da(b,"Color"));k.push(T("Normal","Normal",[0,0,0],!1));r.push(["USE_NORMAL_IN",0]);t.push(ba(b,"Normal"));break;case "FRESNEL":Y=da(b,"Normal");k.push(da(b,"IOR"));k.push(Y);t.push(ba(b,"Fac"));r.push(["USE_FRESNEL_NORMAL",Y.Sa|0]);break;case "LAYER_WEIGHT":Y=
da(b,"Normal");k.push(da(b,"Blend"));k.push(Y);t=ja(b);r.push(["USE_NORMAL_IN",Y.Sa|0]);break;case "BUMP":Y=da(b,"Normal");r.push(["INVERT",b.invert?1:0]);r.push(["USE_NORMAL_IN",Y.Sa|0]);k=aa(b);t=ja(b);break;case "BACKGROUND":k=aa(b);t=ja(b);break;default:k=aa(b),t=ja(b)}g={name:e,Qf:g,type:h,zf:n,inputs:k,outputs:t,lb:l,data:v,hb:r};e=V.hl(a);V.Gi(a,e,g);if(!(g="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{g=b.outputs;for(n=h=0;n<g.length;n++)if(g[n].is_linked&&h++>d){g=
!0;break a}g=!1}g=!g}return g||null!=H(a,b,++d,c,f)?e:null}function za(a,b,d){for(var c=a.inputs,f=a.outputs,e=a.node_tree_name,g=0;g<b.length;g++){var h=c[g],t=b[g];if(!h||h.default_value instanceof Array!=t)return Ga.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',e,'".Processing as general node group.'),!1}for(g=0;g<d.length;g++)if(b=f[g],c=d[g],!b||b.default_value instanceof Array!=c)return Ga.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',e,'".Processing as general node group.'),
!1;return!0}function ha(a,b,d){var c=a.node_group.node_tree,f={},e;for(e in c)if("links"==e||"nodes"==e){f[e]=[];for(var g=0;g<c[e].length;g++){f[e][g]={};for(var h in c[e][g])if("links"==e){f[e][g][h]={};for(var t in c[e][g][h])f[e][g][h][t]=ua(c[e][g][h][t])}else f[e][g][h]=ua(c[e][g][h])}}else f[e]=ua(c[e]);g=a.node_tree_name;if("B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==g)c=fa("Group input","GROUP_INPUT",[],a.inputs),e=fa("Group output","GROUP_OUTPUT",a.outputs,[]),g="B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==
g&&(Ca.quality==Fa.gm||Ca.NM)?{from_node:c,from_socket:c.outputs[1],to_node:e,to_socket:e.inputs[0]}:{from_node:c,from_socket:c.outputs[0],to_node:e,to_socket:e.inputs[0]},f.nodes=[c,e],f.links=[g];c=a.name;e=f.nodes;g=f.links;for(h=0;h<e.length;h++)e[h].name=xa(e[h].type,c,e[h].name);for(h=0;h<g.length;h++)g[h].from_node.name=xa(g[h].from_node.type,c,g[h].from_node.name),g[h].to_node.name=xa(g[h].to_node.type,c,g[h].to_node.name);return{E1:m(f,a.node_group.uuid,!0,b,d).Ia,F1:f.links}}function ua(a){var b=
typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?Va.cu(a):a}function ga(a){La[a]||(La[a]=0);var b=a+"_"+La[a],b=b.replace(/ /g,"_").replace(/\//g,"_");La[a]++;return b}function B(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function Z(a,b){for(var d=a.outputs,c=0,f=0;f<d.length;f++){var e=d[f];if(e.is_linked&&!(c++<b))switch(e.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";
case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function ea(a,b){for(var d=a.outputs,c=0,f=0;f<d.length;f++){var e=d[f];if(e.is_linked&&!(c++<b))switch(e.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";
case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}function Aa(a){if(!a.texture||!a.texture.I)return"TEXTURE_EMPTY";for(var b=a.outputs,d=!1,c=!1,f=!1,e=0;e<b.length;e++){var g=b[e];if(g.is_linked)switch(g.identifier){case "Color":d=!0;break;case "Normal":c=!0;break;case "Value":f=!0;break;default:Va.J("Unknown texture output")}}if(d)return c&&Ga.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),
"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(c)return"TEXTURE_NORMAL";if(f)return"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function da(a,b){for(var d=a.inputs,c=0;c<d.length;c++){var f=d[c];if(f.identifier==b)return wa(f)}return null}function ba(a,b){for(var d=a.outputs,c=0;c<d.length;c++){var f=d[c];if(f.identifier==b)return wa(f)}return null}function wa(a){var b=a.name,d=a.identifier,c=a.is_linked;a=a.default_value;a=Va.Wi(a)?
a.slice(0):a;return{name:b,identifier:d,Sa:c,Pa:a}}function T(a,b,d,c){return{name:a,identifier:b,Sa:c,Pa:d}}function ma(a){return T(a.name,a.identifier,a.Pa,a.Sa)}function aa(a){for(var b=[],d=0;d<a.inputs.length;d++){var c=wa(a.inputs[d]);c.Pa.length&&c.Pa.splice(3);b.push(c)}return b}function ja(a){for(var b=[],d=0;d<a.outputs.length;d++){var c=wa(a.outputs[d]);b.push(c)}return b}function ca(a,b,d){b=null===b||void 0===b?null:qa.da(b,d);return{name:a,value:b}}function oa(a){return{name:a.name,
value:a.value}}function pa(a){return a.slice()}function Q(a,b,d,c,f,e){var g=[],h=e.from_socket.identifier;e=e.to_socket.identifier;var t=c.outputs;for(c=0;c<t.length;c++)if(t[c].identifier==h){g.push(c);break}f=f.inputs;for(c=0;c<f.length;c++)if(f[c].identifier==e){g.push(c);break}2==g.length&&V.Zc(a,b,d,g);return!0}function xa(a,b,d){return"GROUP_INPUT"==a?b+"*GI*"+d:"GROUP_OUTPUT"==a?b+"*GO*"+d:b+"%join%"+d}function na(a){var b=[];V.fa(a,function(a,d){"GROUP"==d.type&&b.push(d)});return b}function O(a,
b,d){for(var c=0;c<d.length;c++){var f=d[c].data.E1,e=d[c].data.F1;if(!f)return!1;V.fa(f,function(b,d){V.Gi(a,V.hl(a),d)});for(f=0;f<e.length;f++)b.push(e[f]);ia(d[c],b,a)}return!0}function Oa(a,b,d,c,f,e){switch(a.type){case "GROUP":a.name==b&&c.push(d);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||f.push(d);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||e.push(d)}}function Na(a,b,d){for(var c=[],f=0;f<d.length;f++){for(var e=d[f],g=null,h=0;h<b.length;h++)if(e.from_socket.identifier==
b[h].to_socket.identifier){g=b[h];break}g?(e.from_node=g.from_node,e.from_socket=g.from_socket):c.push(e)}for(f=0;f<b.length;f++)a.splice(a.indexOf(b[f]),1);return c}function ta(a,b){if(b.length)for(var d=b[0].from_node.name,c=0;c<a.length;c++)a[c].from_node.name==d&&b.push(a[c])}function Y(a,b,d,c){for(var f=0;f<c.length;f++){for(var e=c[f],g,h=0;h<d.inputs.length;h++)if(e.from_socket.identifier==d.inputs[h].identifier){g=d.inputs[h].Pa;break}for(var h=e,t=b,k=g,n=D(h.to_node,t),B=0;B<n.length;B++)for(var l=
V.jb(t,n[B]),v=0;v<l.inputs.length;v++){var r=l.inputs[v];if(r.identifier==h.to_socket.identifier){l=r.Pa instanceof Object?0:1;if((k instanceof Object?0:1)==l)r.Pa=k;else switch(l){case 0:r=r.Pa;r[0]=r[1]=r[2]=k;break;case 1:r.Pa=(k[0]+k[1]+k[2])/3}break}}e=a.indexOf(e);-1!=e&&a.splice(e,1)}}function ia(a,b,d){for(var c=a.name,f=[],e=[],g=[],h=[],t=0;t<b.length;t++){var k=b[t];Oa(k.from_node,c,k,f,g,h);Oa(k.to_node,c,k,e,g,h)}e=Na(b,e,g);f=Na(b,h,f);ta(b,e);Y(b,d,a,e);if(f.length){var n;V.fa(d,function(a,
b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(c+"*GO*")||(n=b)});Y(b,d,n,f)}}function ka(a){var b=[],d=[];V.fa(a,function(a,c){switch(c.type){case "VALTORGB":b.push(c);break;case "CURVE_VEC":case "CURVE_RGB":d.push(c)}});var c=0,f=a=null,e=b.length+d.length;if(b.length){a=ya.sZ(b,ya.dT);for(var g=0;g<b.length;g++)b[g].hb.push(["NODE_TEX_ROW",qa.da((c+.5)/e)]),c++}if(d.length)for(f=ya.wZ(d,ya.dJ),g=0;g<d.length;g++)d[g].hb.push(["NODE_TEX_ROW",qa.da((c+.5)/e)]),c++;g=null;a&&f?(g=new Uint8Array(a.length+
f.length),g.set(a),g.set(f,a.length)):a?g=a:g=f;a=g?ya.UL(g,ya.dJ):null;for(g=0;g<b.length;g++)b[g].data.fb=a;for(g=0;g<d.length;g++)d[g].data.fb=a}function Ba(a,b,d){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<d+.01&&a[0][1]<d+.01&&.99<a[1][0]&&.99<a[1][1]?!1:!0}var Fa=u("__config"),Ka=u("__debug"),V=u("__graph"),Ya=u("__mat3"),va=u("__mat4"),N=u("__objects"),Ga=u("__print"),qa=u("__shaders"),Qa=u("__scenes"),Va=u("__util"),Ua=u("__vec3"),ya=u("__textures"),La={},Ha={},Sa={},Ia=
{},Ma=0,Ca=Fa.K;a.Z7=0;a.VJ=1;a.UJ=2;a.TJ=3;a.Y7=4;a.SJ=5;a.RJ=6;a.QJ=7;a.X7=8;a.fU=0;a.eU=1;a.E7=2;a.dU=3;a.D7=4;a.Cz=function(a){return Ha[a]};a.iX=function(a){delete Ha[a]};a.ML=m;a.RE=function(a,d,c){var f=Qa.N();a=J(a,"MAIN",f.uuid);if(a in Sa)return Sa[a];var f=V.create(),e={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},g=H(f,e,0,d,null),e={name:"LIGHTING_END",type:"LIGHTING_END"},e=H(f,e,0,d,null);b(f,c,g,e,[[g,[8,10]],[g,[9,6]]],d);I(f);return Sa[a]=f};a.hu=function(a){var b=[],d={};La={};
var c=V.yI(a);V.fa(c,function(a,c){var f;f=[];for(var e=[],g=[],h=[],t=[],k=[],n=0;n<c.inputs.length;n++){var B=c.inputs[n];if(B.Sa)f.push(null),e.push(null);else{f.push(ga("in_"+c.type+"_"+B.identifier.replace(/\./g,"")));var l=qa.da(B.Pa,0);Ca.aI&&(0<=c.type.indexOf("MIX_RGB_")&&("Color1"==B.identifier||"Color2"==B.identifier||"Fac"==B.identifier)||0<=c.type.indexOf("MATH_")&&("Value"==B.identifier||"Value_001"==B.identifier||"Value.001"==B.identifier)||0<=c.type.indexOf("VECT_MATH_")&&("Vector_001"==
B.identifier||"Vector.001"==B.identifier)||0<=c.type.indexOf("LIGHTING_APPLY")||0<=c.type.indexOf("MATERIAL_END")||0<=c.type.indexOf("MATERIAL_BEGIN"))&&(B=l,B=B.replace(/(,)/g,"$1 "),B=B.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),B=B.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),l=B=B.replace(/\s+/g,""));e.push(l)}}for(n=0;n<c.outputs.length;n++)B=c.outputs[n],B.Sa?g.push(null):g.push(ga("out_"+c.type+"_"+B.identifier.replace(/\./g,"")));for(n=0;n<c.lb.length;n++)B=c.lb[n],
h.push(B.name),t.push(B.value);for(n=0;n<c.zf.length;n++)k.push(c.zf[n].name);f={id:c.type,inputs:f,fG:e,outputs:g,lb:h,Pr:t,zf:k,hb:JSON.parse(JSON.stringify(c.hb))};b.push(f);d[a]=f});V.xi(c,function(a,b,f){var e=V.jb(c,a),g=e.outputs[f[0]];a=d[a].outputs;b=d[b].inputs;e=a[f[0]]||ga("out_"+e.type+"_"+g.identifier.replace(/\./g,""));a[f[0]]=e;b[f[1]]=e});return b};a.pL=function(a){if(a.se)for(var b=0;b<a.se.nodes.length;b++){var d=a.se.nodes[b];if("GROUP"==d.type&&"B4W_GLOW_OUTPUT"==d.node_tree_name)return!0}return!1};
a.Kca=function(a,b){Ga.log("\n================ MATERIAL: "+b+" ================\n"+Ka.G1(a)+"\n============================================================")};a.Ja=function(){for(var a in Ha)delete Ha[a];for(a in Sa)delete Sa[a];for(var b in Ia)delete Ia[b];Ma=0};a.H_=function(a){var b=-1;V.fa(a,function(a,d){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==d.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==d.type)b=Math.max(b,d.data.value.height)});return b}};b4w.module.__debug=function(a,u){function m(a,b,d){var f=[],e;for(e in a)1<k.kl(a[e])&&f.push([e,a[e]]);f.sort(function(a,b){var d=k.kl(a[1]),c=k.kl(b[1]);return c!=d?c-d:a<b?-1:b<a?1:0});if(f.length){L.groupCollapsed(b+" "+d);L.Pd("Property different variants (>1) | Property name");for(a=0;a<f.length;a++)L.groupCollapsed(k.kl(f[a][1]),f[a][0]),c(f[a][1]);L.groupEnd()}}function c(a){L.Pd("Batches count for this property value | Property value");var b=[],d;for(d in a)b.push([d,a[d]]);b.sort(function(a,
b){return b[1]!=a[1]?b[1]-a[1]:a[0]<b[0]?-1:b[0]<a[0]?1:0});for(a=0;a<b.length;a++)L.Pd(b[a][1],b[a][0]);L.groupEnd()}function b(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function p(){var a=x.EF();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function h(){var b=r;return b&&b.debug_view_mode==a.et}function G(a,b,d){var c=x.EF(),f=0;if(c)for(d&&c.endQuery(),d=0;d<a.length;d++){var e=a[d],g=c.$M(e),h=E.getParameter(c.ZM());g&&
!h&&(f=c.aN(e)/1E6,b&&(f=k.Rc(f,b,1,10)),a.splice(d,1),d--)}else f=performance.now()-a.pop(),b&&(f=k.Rc(f,b,1,10));return f}function q(a,b){w(a)||k.J("Structure assertion failed: invalid first object value");w(b)||k.J("Structure assertion failed: invalid second object value");A(a,b)||k.J("Structure assertion failed: incompatible types");if(!(null==a||null==b||"object"!=typeof a||k.iG(a)||a instanceof Array)){for(var d in a)w(a[d])||k.J("Structure assertion failed: invalid value for key in the first object: "+
d),d in b||k.J("Structure assertion failed: missing key in the first object: "+d);for(d in b)w(b[d])||k.J("Structure assertion failed: invalid value for key in the second object: "+d),d in a||k.J("Structure assertion failed: missing key in the second object: "+d),A(a[d],b[d])||k.J("Structure assertion failed: incompatible types for key "+d)}}function w(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function A(a,b){if(typeof a!=typeof b)return!1;if(null!=a&&null!=b&&"object"==
typeof a){var d=a instanceof Array,c=b instanceof Array;if(d&&!c||!d&&c)return!1;d=k.iG(a);c=k.iG(b);if(d&&!c||!d&&c)return!1}return!0}var g=u("__batch"),e=u("__compat"),y=u("__config"),x=u("__extensions"),P=u("__graph"),J=u("__objects"),L=u("__print"),l=u("__scenes"),I=u("__subscene"),v=u("__textures"),K=u("__time"),k=u("__util"),D=y.K,M={},E=null,S={},F=[],z=-1,C=-1,r=null,f=null,W=!1,d={};a.Pw=0;a.JD=1;a.Qw=2;a.ID=3;a.Ow=4;a.HD=5;a.GD=6;a.et=7;a.sh=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),
d=0;d<b.length;d++){var c=b[d];c in a&&(M[a[c]]=c)}E=a};a.f3=function(a){r=a};a.paa=function(){return r};a.BZ=function(a,b,c,f,e){d[a]||(d[a]={O3:b,eg:{}});c in d[a].eg||(d[a].eg[c]=f);e&&(d[a].eg[c]=0)};a.dL=function(){var a=0,b;for(b in d)for(var c in d[b].eg)a+=d[b].eg[c];return a};a.uR=function(){var a={},b;for(b in d)for(var c in d[b].eg){var f=d[b].eg[c];if(f){var e=d[b].O3;e in a||(a[e]={AI:0,eg:{}});c in a[e].eg||(a[e].eg[c]=0);a[e].eg[c]+=f;a[e].AI+=f}}for(e in a){L.groupCollapsed(e,a[e].AI);
for(c in a[e].eg)L.Pd(c,a[e].eg[c]);L.groupEnd()}};a.SP=function(){for(var a={},b="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),d=0,c=0,f=J.vc(l.Si(),"MESH",J.Tc),e=0;e<f.length;e++)for(var h=0;h<f[e].P.length;h++)for(var k=0;k<f[e].P[h].aa.length;k++){var n=g.nX(f[e].P[h].aa[k]),v=n.mb.Kg+"/"+n.mb.gf;n["shaders_info.directives"]=n.mb.Li;n["shaders_info.node_elements"]=n.mb.Pf;delete n.mb;for(var B=0;B<b.length;B++)delete n[b[B]];
if(f[e].ba)c++;else{d++;n.type in a||(a[n.type]={});v in a[n.type]||(a[n.type][v]={});for(var r in n)r in a[n.type][v]||(a[n.type][v][r]={}),B=JSON.stringify(n[r]),B in a[n.type][v][r]||(a[n.type][v][r][B]=0),a[n.type][v][r][B]++}}L.group("Batches statistics:");L.Pd("STATIC/DYNAMIC count:",d+"/"+c);L.group("STATIC batches diversity:");for(var x in a)for(v in a[x])m(a[x][v],x,v);L.groupEnd();L.groupEnd()};a.wE=function(a){if(D.gl_debug){var b=E.getError();b!=E.NO_ERROR&&(b in M?k.J("GL Error: "+b+
", gl."+M[b]+" ("+a+")"):k.J("Unknown GL error: "+b+" ("+a+")"))}};a.UW=function(){if(D.gl_debug||D.oL)switch(E.checkFramebufferStatus(E.FRAMEBUFFER)){case E.FRAMEBUFFER_COMPLETE:break;case E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:L.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:L.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:L.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");
break;case E.FRAMEBUFFER_UNSUPPORTED:L.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case E.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:L.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");break;default:L.error("FRAMEBUFFER CHECK FAILED")}};a.YW=function(){if(-1!=z)return z;var a=E.createFramebuffer();E.bindFramebuffer(E.FRAMEBUFFER,a);var b=v.wm(v.Qn,!1);v.resize(b,1,1);E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,b.Eb,b.Mb,0);E.checkFramebufferStatus(E.FRAMEBUFFER)!=
E.FRAMEBUFFER_COMPLETE?(z=!0,L.warn("depth-only issue was found")):z=!1;E.bindFramebuffer(E.FRAMEBUFFER,null);E.deleteFramebuffer(a);return z};a.dX=function(){if(1==D.kc)return!1;if(-1!=C)return C;E.bindRenderbuffer(E.RENDERBUFFER,E.createRenderbuffer());E.renderbufferStorageMultisample(E.RENDERBUFFER,D.kc,E.RGBA8,1,1);var a=E.getRenderbufferParameter(E.RENDERBUFFER,E.RENDERBUFFER_SAMPLES);a!=D.kc?(C=!0,L.warn("multisample issue was found: requested "+D.kc+", got "+a),E.getError()==E.INVALID_OPERATION&&
L.warn("the error from multisample issue detected, ignoring")):C=!1;E.bindRenderbuffer(E.RENDERBUFFER,null);return C};a.aX=function(){return e.yE("Firefox")&&E.getError()==E.OUT_OF_MEMORY?(L.warn("Firefox/old GPUs cubemap issue was found."),!0):!1};a.iQ=function(a,d,c){D.gl_debug&&(c=b(c),L.error("shader compilation failed:\n"+c+"\n"+E.getShaderInfoLog(a)+" ("+d+")"))};a.G2=function(a,d,c,f){D.gl_debug&&(c=b(c),f=b(f),L.error("shader linking failed:\n"+c+"\n\n\n"+f+"\n"+E.getProgramInfoLog(a)+" ("+
d+")"))};a.vH=function(a){if(D.show_hud_debug_info||a.type==I.st)a.wu||a.xm.push(p())};a.B2=function(a){"MAIN"==a.type&&h()&&a.xm.push(p())};a.wH=function(a){if((D.show_hud_debug_info||a.type==I.st)&&!a.wu){var b=G(a.xm,a.lg,!0);b&&(a.lg=b)}};a.C2=function(a){if("MAIN"==a.type&&h()){var b=G(a.xm,a.lg,!0);b&&(a.lg=b)}};a.FO=h;a.l2=function(a){var b=G(a.xm,a.lg,!1);b&&(a.lg=b)};a.F$=function(a){S[a]=a in S?S[a]+1:1};a.update=function(){for(var a in S)L.log(a,S[a]),S[a]=0};a.dz=function(){for(var a=
[performance.now()],b=0;b<arguments.length;b++){var d=arguments[b];if(k.Wi(d))for(var c=0;c<d.length;c++)a.push(d[c]);else a.push(arguments[b])}F.push(a)};a.Pb=function(){for(var a=1,b=0;b<F.length;b++){var d=F[b];d[1]==arguments[0]&&a++}d=[a];for(b=0;b<arguments.length;b++)if(a=arguments[b],k.Wi(a))for(var c=0;c<a.length;c++)d.push(a[c]);else d.push(arguments[b]);F.push(d)};var n=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];a.TP=function(a){a||(a=1);for(var b=
0,d={},c=Math.max(0,performance.now()-1E3*a),f=0;f<F.length;f++){var e=F[f];a=e[0];if(!(a<c)){var g=String(e[1]);d[g]||(d[g]=n[b++%n.length]);a=["%c"+(a/1E3).toFixed(6),d[g],g];for(g=2;g<e.length;g++)a.push(e[g]);L.log.apply(this,a)}}F.splice(0)};a.jH=function(a){a||(a=1);for(var b={},d=Math.max(0,performance.now()-1E3*a),c=0;c<F.length;c++){var f=F[c];a=f[0];if(!(a<d))for(var e=2;e<f.length;e++){var g=String(f[1]);3<f.length&&(g+="_"+String(e-2));b[g]||(b[g]=g+"\n");b[g]+=String(a)+" "+f[e]+"\n"}}a=
"";for(g in b)a+=b[g]+"\n\n";L.log(a);F.splice(0)};a.i9=function(a){function b(a){return-1<d.indexOf(a)?!0:!1}var d=navigator.userAgent.toLowerCase();switch(a.toLowerCase()){case "chrome":return b("mozilla")&&b("applewebkit")&&b("chrome");case "firefox":return b("mozilla")&&b("gecko")&&b("firefox");case "msie":return b("mozilla")&&b("trident")&&b("msie");case "opera":return b("opera")&&b("presto");case "safari":return b("mozilla")&&b("applewebkit")&&b("safari")&&!b("chrome");default:return!1}};a.nL=
function(a){if(k.Wi(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};a.Q8=function(a,b){a.constructor!=b&&k.J("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+b+">")};a.T8=q;a.U8=function(a){W?q(a,f):W=!0;f=null!=a&&"object"==typeof a?k.cu(a):a};a.JM=function(a,b,d,c,f){(a=a||null)||k.J("Stage load callback is undefined");b=b||5E3;d=d||0;c=c||100;100<c&&k.J("Max percentage must be less than 100");0>d&&k.J("Min percentage must be greater than 0");
d>c&&k.J("Max percentage must be greater than min percentage");var e=K.wj(d,c,b,function(b){b=b.toFixed();a(b);100==b&&(K.pm(e),f&&f())})};a.G1=function(a){return P.qM(a,function(a,b){var d=b.type+"("+b.name+")",c=b.inputs,d=d+"\n\nINPUTS:";if(c.length)for(var f=0;f<c.length;f++)d+="\n"+c[f].identifier+": ",d=c[f].Sa?d+"linked":d+c[f].Pa;else d+="\n---";c=b.outputs;d+="\n\nOUTPUTS:";if(c.length)for(f=0;f<c.length;f++)d+="\n"+c[f].identifier+": ",d=c[f].Sa?d+("linked(default "+c[f].Pa+")"):d+"not used";
else d+="\n---";f="";switch(b.type){case "GEOMETRY_UV":f="\nuv_layer: "+b.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":f="\ntexture: "+b.data.value.name+"\n("+b.data.value.ir+")"}""==f&&(f="\n---");return d+"\n\nDATA:"+f},function(b,d,c){b=P.jb(a,b);d=P.jb(a,d);return b.outputs[c[0]].identifier+"\n==>\n"+d.inputs[c[1]].identifier})};a.xz=function(){return E};a.Ja=function(){r=null;d={}};a.reset=function(){E=null}};b4w.module.__compat=function(a,u){function m(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function c(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function b(){return!window.ActiveXObject&&"ActiveXObject"in window}var p=u("__config"),h=u("__debug"),G=u("__extensions"),
q=u("__print"),w=u("__renderer"),A="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");a.HJ=256;var g=p.Yn,e=p.K,y=p.so,x=p.context,P=p.Ki,J=p.ka,L=p.L,l=p.Je;a.RY=function(a){a.getError()==a.INVALID_ENUM&&q.warn("Possible Tegra invalid enum issue detected, ignoring")};a.WQ=function(u,v){function K(a){v&&q.warn(a)}P.p1=u.getParameter(u.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
P.AG=u.getParameter(u.MAX_FRAGMENT_UNIFORM_VECTORS);P.EG=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS);P.IA=u.getParameter(u.MAX_VARYING_VECTORS);P.FG=u.getParameter(u.MAX_VERTEX_ATTRIBS);P.mP=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS);P.JA=u.getParameter(u.MAX_VERTEX_UNIFORM_VECTORS);P.mh=u.getParameter(u.MAX_CUBE_MAP_TEXTURE_SIZE);P.BG=u.getParameter(u.MAX_RENDERBUFFER_SIZE);P.jc=u.getParameter(u.MAX_TEXTURE_SIZE);P.GG=u.getParameter(u.MAX_VIEWPORT_DIMS);var k=G.Fz();if(k){var D=u.getParameter(k.UNMASKED_VENDOR_WEBGL),
M=u.getParameter(k.UNMASKED_RENDERER_WEBGL);-1<D.indexOf("Qualcomm")&&-1<M.indexOf("330")&&m("Chrome")&&(K("Chrome and Qualcomm 330 detected, force enable WebGL 1."),e.Nb=!1)}P.Pq=e.Nb?24:16;e.Nb&&!y.enabled&&(e.gu=!0);e.Nb?(e.kc=Math.min(e.kc,u.getParameter(u.MAX_SAMPLES)),m("Firefox")&&(K("Firefox and WebGL 2 detected, applying framebuffer hack."),e.oL=!0),m("Windows")&&m("Chrome")&&(K("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),e.kc=1)):e.kc=1;m("Firefox")&&
"NONE"!==e.stereo&&(K("Firefox and Stereo rendering detected, disable texture reusage"),e.KM=!0);if(e.Nb&&h.dX()||m("Firefox"))K("Firefox detected, disabling multisample"),e.kc=1;m("Mac OS X")&&m("Chrome/60")&&(K("macOS and Chrome 60 detected, disabling multisample"),e.kc=1);w.i3();var E=!!G.p_();m("Firefox/28.0")&&(m("Linux")||m("Macintosh"))&&(K("Firefox 28 detected, applying depth hack"),E=!1);m("Windows Phone")||(m("iPad")||m("iPhone")?(K("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),
x.alpha||(e.background_color[3]=1),e.gA=!0,e.MS=!0,e.smaa=!1,e.ssao=!1,e.eG=!0,G.FN()&&l.rB&&(e.lo="pvr")):m("Mac OS X")&&m("Safari")&&!m("Chrome")&&(K("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),e.sQ=!0,J.JK=!0,J.xL=!0));m("Windows")&&(m("Chrome/40")||m("Firefox/33")||m("Firefox/34")||m("Firefox/35")||m("Firefox/36"))&&(K("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),
e.DE=!0);m("Chrome")&&!c()&&p.BO()&&(K('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),e.uL=!0);m("Mac OS X")&&(e.FA=!0,K("OS X detected, applying shadows hack."));c()&&(K("Mobile detected, applying various hacks for video textures."),e.is_mobile_device=!0,m("iPad")||m("iPhone")||m("Windows Phone")||(K("Mobile (not iOS) detected, disable playback rate for video textures."),J.wM=!0));m("iPad")&&(K('iPad detected, use "autoplay" hack for video textures.'),
e.vO=!0);(m("Firefox/35.0")||m("Firefox/36.0"))&&m("Windows")&&(K("Windows/Firefox 35/36 detected, applying shadows slink hack"),e.sR=!0);if(m("iPhone")||b())K("iPhone or IE11 detected. Enable sequential video fallback for video textures."),e.Wv=!0;10>P.IA&&(K("Not enough varyings, disable shadows on blend objects"),e.iF=!0);m("Windows Phone")&&(K("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),e.debug_view=!1,e.glow_materials=!1,
e.ssao=!1,e.smaa=!1,e.shadows=!1,e.reflections=!1,e.refractions=!1,e.XP=!1);if(m("UCBrowser")||m("Chrome")&&m("Nexus")&&e.is_mobile_device)K("Mobile Nexus Chrome or UCBrowser detected, disable workers."),L.Jp=!1;m("Firefox")&&(K("Firefox detected, disabling workers"),L.Jp=!1);if(b()||m("Edge"))K("IE11 or Edge detected, disabling workers"),L.Jp=!1;m("Chrome")&&m("Linux")&&(K("Chrome and Linux detected, disabling wasm physics."),L.Aw=!1);if(k){D=u.getParameter(k.UNMASKED_VENDOR_WEBGL);M=u.getParameter(k.UNMASKED_RENDERER_WEBGL);
k=/\b4\d{2}\b/;m("Chrome")&&-1<M.indexOf("Mali-T720")&&(K('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),e.hP=!0);-1<M.indexOf("AMD")&&m("Windows")&&m("Firefox")&&(K("AMD, Windows and Firefox detected, disabling depth textures."),E=!1);-1<D.indexOf("ARM")&&k.test(M)&&(K("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),E=!1,g.PM=!0,e.gP=!0);-1<D.indexOf("ARM")&&-1<M.indexOf("Mali-T604")&&(K("ARM Mali-T604 detected, disabling shadows."),
e.shadows=!1);-1<D.indexOf("ARM")&&-1<M.indexOf("Mali-T760")&&(K("ARM Mali-T760 detected, disabling SSAO."),e.ssao=!1,e.aC=!0,e.Nb&&(e.kc=1,K("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<D.indexOf("ARM")&&-1<M.indexOf("Mali-T720")&&(K("ARM Mali-T720 detected, disabling depth textures."),E=!1,e.Nb&&(e.kc=1,K("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));-1<D.indexOf("Qualcomm")&&-1<M.indexOf("Adreno")&&(K("Qualcomm Adreno detected, applying shader constants hack."),
e.aI=!0,-1<M.indexOf("420")&&(K("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),P.jc=Math.min(P.jc,4096),P.mh=Math.min(P.mh,4096)),m("Chrome")&&(M.match(/4../)||M.match(/5../))&&(K("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),e.kc=1));-1<D.indexOf("NVIDIA")&&-1<M.indexOf("Tegra 3")&&(K("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),e.NM=!0);m("Windows")&&m("Chrome")&&!m("Edge")&&(M.match(/NVIDIA GeForce 8..0/)||
M.match(/NVIDIA GeForce 9..0/)||M.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(K("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),P.mh=a.HJ,e.Rv=!0);-1<M.indexOf("PowerVR")&&-1<M.indexOf("SGX")&&(K("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),e.Rv=!0,e.aC=!0,e.shadows=!1);m("Windows")&&-1<M.indexOf("Direct3D9")&&(K("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),
e.nM=!0,e.Rv=!0,e.nQ=!0);D="";for(k=0;k<A.length;k++)if(-1<M.indexOf(A[k])){D=A[k];break}D&&(K("Architecture "+D+" detected. Blending between frames and shadows on blend objects will be disabled."),e.aC=!0,e.iF=!0)}0==P.mP&&(K("Vertex textures are not allowed. Disabling vertex textures"),e.Dx=!1);E||(e.Fu=!1,e.hd=!1,e.water_dynamic=!1,e.Uf=!1,e.ZB=!1,e.smaa=!1,e.ssao=!1,e.Sv=!0);e.yS=!!G.IN()||"pvr"==e.lo;e.Ky=E;if(u.getShaderPrecisionFormat)var I=u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT);
u.getShaderPrecisionFormat&&0!==I.precision||(e.precision="mediump");if(b()&&m("Touch")||m("Edge"))K("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),e.cA=!0;if(b()||m("Edge"))e.qO=!0,e.pO=!0,e.Rv=!0;c()&&m("Firefox")&&(q.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),e.IG=!0,P.jc=Math.min(P.jc,4096),P.mh=Math.min(P.mh,4096));M=!!G.zF();e.aE=M;M=!!G.PN();e.wI=M};
a.yE=m;a.ym=c;a.ZV=function(){m("Firefox/35.0")&&m("Windows")&&(q.warn("Windows/Firefox 35 detected, forcing context's alpha"),p.context.alpha=!0)};a.Wo=b};b4w.module.__renderer=function(a,u){function m(a){for(var c=a.F,g=a.ib,k=null,l=J.Yb(c.C,f),v=0;v<g.length;v++){var m=g[v];if(m.pc){var q=m.zb,y=m.Ra;if(q.ik!=k){E.useProgram(q.ik);for(var k=a,p=c,B=q,C=B.cS,z=C.length;z--;){var w=C[z];w.ar(E,w.pf,k,p)}if(B.Fr&&!B.VA)for(B.fH.length||h(B),B=B.fH,C=B.length;C--;)w=B[C],w.ar(E,w.pf,k,p);k=q.ik}m.dg?(E.enable(E.SAMPLE_ALPHA_TO_COVERAGE),a.Bb||E.enable(E.BLEND)):(E.disable(E.SAMPLE_ALPHA_TO_COVERAGE),a.Bb||E.disable(E.BLEND));for(m=0;m<y.length;m++)if(C=
y[m],C.pc){B=C.oh;p=C.Fa;A.B2(p);A.FO()&&"DEBUG_VIEW"==p.type&&(p.su=L.Rc(G.kW(p.Lq),p.su,1,15));if(n.alpha_sort&&p.$f){var w=B,C=C.eA,z=l,K=p.Ga;if(I.dist(z,C.aT)>n.alpha_sort_threshold*Math.min(C.nW,1)||w.Iu)e.Q4(K,C,w.C,z),I.copy(z,C.aT),w.Iu=!1}for(var w=a,C=p,z=q,D=z.dS,F=D.length;F--;)K=D[F],K.ar(E,K.pf,B,C);if(z.Fr&&!z.VA){z.yv.length||h(z);D=z.yv;for(F=D.length;F--;)K=D[F],K.ar(E,K.pf,B,C);z.Fr=!1}E.depthMask(C.rb);C.Xa?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE);K=C.qa;D=E;for(F=0;F<K.length;F++){var X=
K[F];D.activeTexture(D.TEXTURE0+F);D.bindTexture(X.Eb,X.Mb);X.yi&&D.generateMipmap(X.Eb)}if(w.type==x.Xe){B=w;z=z.Cp;D=B.F.tc;K=D.Mb;D=D.Eb;F=B.Xk;for(X=0;6>X;X++){var u=b(X);n.DE?(E.bindTexture(E.TEXTURE_CUBE_MAP,K),E.texImage2D(u,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,M)):(E.uniformMatrix4fv(z.u_cube_view_matrix,!1,F[X]),E.uniform4fv(z.u_sky_tex_fac,B.ls),E.uniform3fv(z.u_sky_tex_color,B.hs),E.uniform1f(z.u_sky_tex_dvar,B.ks),E.uniform3fv(z.u_horizon_color,B.re),E.uniform3fv(z.u_zenith_color,B.Ee),
E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,u,K,0),r(C,0));if(B.Er&&5!=X){var u=B,W=X,S=d;n.DE?S.set(M):(E.readPixels(191,191,1,1,E.RGBA,E.UNSIGNED_BYTE,S),255!=S[0]&&255!=S[1]&&255!=S[2]||E.readPixels(191,220,1,1,E.RGBA,E.UNSIGNED_BYTE,S));var ca=S[0],oa=S[1],S=S[2],ca=ca/255,oa=oa/255,S=S/255;4===W?(u.kg[3]=ca,u.kg[7]=oa,u.kg[11]=S):(u.kg[4*W]=ca,u.kg[4*W+1]=oa,u.kg[4*W+2]=S)}}n.wI&&(E.bindTexture(D,K),E.generateMipmap(D),E.texParameteri(D,E.TEXTURE_MIN_FILTER,P.xt));w.Mq+=6}else r(C,
B.dD),w.Mq++;A.C2(p);A.FO()&&"MAIN"==p.type&&G.lW(p.id,p.lg)}}}}function c(a){if(a){var b=(a.Gb?E.COLOR_BUFFER_BIT:0)|(a.Jb?E.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case x.Ge:a=D;break;case x.$d:a=v;break;case x.Ug:a=K;break;case x.Cf:case x.zi:case x.Qp:a=k;break;case x.Bi:case x.wt:case x.qx:a=D;break;default:a=n.background_color}}else b=E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT,a=n.background_color;E.colorMask(!0,!0,!0,!0);E.depthMask(!0);E.clearColor(a[0],a[1],a[2],a[3]);E.clear(b)}function b(a){switch(a){case 0:return E.TEXTURE_CUBE_MAP_POSITIVE_X;
case 1:return E.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return E.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return E.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return E.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return E.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function p(a){var b=g.SF(),d=a.It,c=a.Ga,f=c.bd;a.Yf.length=0;var e=1,h;for(h in f)e=Math.max(e,f[h].frames);for(f=0;f<e;f++){h=b.createVertexArray();C(h);c.di&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,c.di);for(var k=0;k<c.Vd.length;k++){E.bindBuffer(E.ARRAY_BUFFER,c.Vd[k].Yl);for(var n=
0;n<d.length;n++){var l=d[n];l.fD==c.Vd[k].type&&(E.enableVertexAttribArray(l.pf),E.vertexAttribPointer(l.pf,l.Qc,l.dr,l.dr==E.FLOAT?!1:!0,0,l.Px+l.jz*f),F(l.pf,l.xo))}}C(null);a.Yf.push(h)}}function h(a){var b=a.Cp,d=a.dS,c=a.yv,e=a.cS,g=a.fH;d.length=0;c.length=0;e.length=0;g.length=0;for(var h in b){var k=!1,n=null,l=null;switch(h){case "u_proj_matrix":n=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.Fb)};k=!0;break;case "u_view_refl_matrix":n=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.jD)};k=!0;
break;case "u_view_tsr":case "u_view_tsr_frag":n=function(a,b,d,c){c.Kc?a.uniformMatrix3fv(b,!1,c.Lv):a.uniformMatrix3fv(b,!1,c.Lg)};k=!0;break;case "u_view_tsr_inverse":n=function(a,b,d,c){c.Kc?a.uniformMatrix3fv(b,!1,c.xB):a.uniformMatrix3fv(b,!1,c.kD)};k=!0;break;case "u_shadow_cast_billboard_view_tsr":n=function(a,b,d,c){a.uniformMatrix3fv(b,!1,c.$v)};k=!0;break;case "u_view_proj_prev":n=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.lH)};k=!0;break;case "u_view_proj_matrix":n=function(a,b,d,c){a.uniformMatrix4fv(b,
!1,c.Wd)};k=!0;break;case "u_view_proj_inverse":n=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.iD)};k=!0;break;case "u_sky_vp_inverse":n=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.ti)};k=!0;break;case "u_camera_eye":case "u_camera_eye_frag":n=function(a,b,d,c){a.uniform3fv(b,J.Yb(c.C,f))};k=!0;break;case "u_camera_quat":n=function(a,b,d,c){a.uniform4fv(b,J.Db(c.C,W))};k=!0;break;case "u_view_max_depth":n=function(a,b,d,c){a.uniform1f(b,c.far)};k=!0;break;case "u_camera_range":n=function(a,b,d,c){a.uniform2f(b,
c.near,c.far)};k=!0;break;case "u_csm_center_dists":n=function(a,b,d,c){a.uniform4fv(b,c.Ay)};break;case "u_height":n=function(a,b,d,c){a.uniform1f(b,c.height)};k=!0;break;case "u_pcf_blur_radii":n=function(a,b,d,c){a.uniform4fv(b,c.Sr)};break;case "u_dof_dist":n=function(a,b,d,c){c.dof_on?a.uniform1f(b,c.dof_distance):a.uniform1f(b,0)};k=!0;break;case "u_dof_front_start":n=function(a,b,c,d){a.uniform1f(b,d.dof_front_start)};k=!0;break;case "u_dof_front_end":n=function(a,b,c,d){a.uniform1f(b,d.dof_front_end)};
k=!0;break;case "u_dof_rear_start":n=function(a,b,d,c){a.uniform1f(b,c.dof_rear_start)};k=!0;break;case "u_dof_rear_end":n=function(a,b,c,d){a.uniform1f(b,d.dof_rear_end)};k=!0;break;case "u_dof_bokeh_intensity":n=function(a,b,d,c){a.uniform1f(b,c.dof_bokeh_intensity)};k=!0;break;case "u_camera_direction":n=function(a,b,c,d){a.uniform3fv(b,d.direction)};k=!0;break;case "u_cam_water_depth":n=function(a,b,d){a.uniform1f(b,d.Ut)};k=!0;break;case "u_fog_color_density":n=function(a,b,d){a.uniform4fv(b,
d.pe)};break;case "u_fog_params":n=function(a,b,d){a.uniform4fv(b,d.rg)};break;case "u_underwater_fog_color_density":n=function(a,b,d){a.uniform4fv(b,d.oj)};break;case "u_bloom_key":n=function(a,b,d){a.uniform1f(b,d.Bq)};break;case "u_average_lum_val":n=function(a,b,d){a.uniform1f(b,d.average_luminance)};break;case "u_mipmap_1x1":n=function(a,b,d){a.uniform1f(b,d.uA)};break;case "u_bloom_edge_lum":n=function(a,b,d){a.uniform1f(b,d.Aq)};break;case "u_time":n=function(a,b,d){a.uniform1f(b,d.time)};
k=!0;break;case "u_wind":n=function(a,b,d){a.uniform3fv(b,d.pj)};k=!0;break;case "u_sky_tex_dvar":n=function(a,b,d){a.uniform1f(b,d.ks)};break;case "u_sky_tex_fac":n=function(a,b,d){a.uniform4fv(b,d.ls)};break;case "u_sky_tex_color":n=function(a,b,d){a.uniform3fv(b,d.hs)};break;case "u_horizon_color":n=function(a,b,d){a.uniform3fv(b,d.re)};break;case "u_zenith_color":n=function(a,b,d){a.uniform3fv(b,d.Ee)};break;case "u_environment_energy":n=function(a,b,d){a.uniform1f(b,d.eh)};break;case "u_bsdf_cube_sky_dim":n=
function(a,b,d){a.uniform1f(b,d.Xx)};k=!0;break;case "u_sky_color":n=function(a,b,d){a.uniform3fv(b,d.mn)};break;case "u_rayleigh_brightness":n=function(a,b,d){a.uniform1f(b,d.rayleigh_brightness)};break;case "u_mie_brightness":n=function(a,b,d){a.uniform1f(b,d.mie_brightness)};break;case "u_spot_brightness":n=function(a,b,d){a.uniform1f(b,d.spot_brightness)};break;case "u_scatter_strength":n=function(a,b,d){a.uniform1f(b,d.scatter_strength)};break;case "u_rayleigh_strength":n=function(a,b,d){a.uniform1f(b,
d.rayleigh_strength)};break;case "u_mie_strength":n=function(a,b,d){a.uniform1f(b,d.mie_strength)};break;case "u_rayleigh_collection_power":n=function(a,b,d){a.uniform1f(b,d.rayleigh_collection_power)};break;case "u_mie_collection_power":n=function(a,b,d){a.uniform1f(b,d.mie_collection_power)};break;case "u_mie_distribution":n=function(a,b,d){a.uniform1f(b,d.mie_distribution)};break;case "u_light_positions":n=function(a,b,d){a.uniform4fv(b,d.bp)};break;case "u_light_directions":n=function(a,b,d){a.uniform3fv(b,
d.kv)};break;case "u_light_color_intensities":n=function(a,b,d){a.uniform4fv(b,d.ap)};break;case "u_sun_quaternion":n=function(a,b,d){a.uniform4fv(b,d.FC)};break;case "u_sun_intensity":n=function(a,b,d){a.uniform3fv(b,d.EC)};break;case "u_sun_direction":n=function(a,b,d){a.uniform3fv(b,d.DC)};break;case "u_debug_view_mode":n=function(a,b,d){a.uniform1i(b,d.debug_view_mode)};break;case "u_debug_colors_seed":n=function(a,b,d){a.uniform1f(b,d.debug_colors_seed)};break;case "u_debug_render_time_threshold":n=
function(a,b,d){a.uniform1f(b,d.Gy)};break;case "u_subpixel_jitter":n=function(a,b,d){a.uniform2fv(b,d.qG)};k=!0;break;case "u_subsample_indices":n=function(a,b,d){a.uniform4fv(b,d.F0)};k=!0;break;case "u_radial_blur_step":n=function(a,b,d){a.uniform1f(b,d.Vr)};break;case "u_god_rays_intensity":n=function(a,b,d){a.uniform1f(b,d.god_rays_intensity)};break;case "u_ssao_radius_increase":n=function(a,b,d){a.uniform1f(b,d.ts)};break;case "u_ssao_blur_discard_value":n=function(a,b,d){a.uniform1f(b,d.ps)};
k=!0;break;case "u_ssao_influence":n=function(a,b,d){a.uniform1f(b,d.ss)};break;case "u_ssao_dist_factor":n=function(a,b,d){a.uniform1f(b,d.qs)};break;case "u_texel_size":n=function(a,b,d){a.uniform2fv(b,d.lw)};k=!0;break;case "u_normal_offset":n=function(a,b,d){a.uniform1f(b,d.self_shadow_normal_offset)};break;case "u_v_light_ts":n=function(a,b,d){a.uniform4fv(b,d.Ls)};k=!0;break;case "u_v_light_r":n=function(a,b,d){a.uniform4fv(b,d.Ks)};k=!0;break;case "u_v_light_tsr":n=function(a,b,d){a.uniformMatrix3fv(b,
!1,d.Bw)};k=!0;break;case "u_p_light_matrix0":n=function(a,b,d){a.uniformMatrix4fv(b,!1,d.Cl[0])};k=!0;break;case "u_p_light_matrix1":n=function(a,b,d){a.uniformMatrix4fv(b,!1,d.Cl[1])};k=!0;break;case "u_p_light_matrix2":n=function(a,b,d){a.uniformMatrix4fv(b,!1,d.Cl[2])};k=!0;break;case "u_p_light_matrix3":n=function(a,b,d){a.uniformMatrix4fv(b,!1,d.Cl[3])};k=!0;break;case "u_outline_color":n=function(a,b,d){a.uniform3fv(b,d.bj)};break;case "u_draw_outline":n=function(a,b,d){a.uniform1f(b,d.xu)};
k=!0;break;case "u_glow_mask_small_coeff":n=function(a,b,d){a.uniform1f(b,d.small_glow_mask_coeff)};k=!0;break;case "u_glow_mask_large_coeff":n=function(a,b,d){a.uniform1f(b,d.large_glow_mask_coeff)};k=!0;break;case "u_brightness":n=function(a,b,d){a.uniform1f(b,d.brightness)};break;case "u_contrast":n=function(a,b,d){a.uniform1f(b,d.contrast)};break;case "u_exposure":n=function(a,b,d){a.uniform1f(b,d.exposure)};break;case "u_saturation":n=function(a,b,d){a.uniform1f(b,d.saturation)};break;case "u_enable_hmd_stereo":n=
function(a,b,d){a.uniform1i(b,d.enable_hmd_stereo)};break;case "u_distortion_params":n=function(a,b,d){a.uniform4fv(b,d.Zk)};break;case "u_chromatic_aberration_coefs":n=function(a,b,d){a.uniform4fv(b,d.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":n=function(a,b,d){a.uniform1f(b,d.NA)};k=!0;break;case "u_motion_blur_decay_threshold":n=function(a,b,d){a.uniform1f(b,d.mb_decay_threshold)};k=!0;break;case "u_model_tsr":l=function(a,b,d){a.uniformMatrix3fv(b,!1,d.C)};k=!0;break;case "u_model_tsr_inverse":l=
function(a,b,d){a.uniformMatrix3fv(b,!1,d.tD)};k=!0;break;case "u_transb":l=function(a,b,d){a.uniform4fv(b,d.Ce)};k=!0;break;case "u_transa":l=function(a,b,d){a.uniform4fv(b,d.xf)};k=!0;break;case "u_arm_rel_trans":l=function(a,b,d){a.uniform4fv(b,d.Ft)};k=!0;break;case "u_arm_rel_quat":l=function(a,b,d){a.uniform4fv(b,d.Et)};k=!0;break;case "u_quat":l=function(a,b,d){a.uniform4fv(b,J.Db(d.C,W))};k=!0;break;case "u_quatsb":l=function(a,b,d){a.uniform4fv(b,d.ve)};k=!0;break;case "u_quatsa":l=function(a,
b,d){a.uniform4fv(b,d.tf)};k=!0;break;case "u_frame_factor":l=function(a,b,d){a.uniform1f(b,d.sg)};k=!0;break;case "au_center_pos":l=function(a,b,d){a.uniform3fv(b,d.by)};k=!0;break;case "au_wind_bending_amp":l=function(a,b,d){a.uniform1f(b,d.Mg)};k=!0;break;case "au_wind_bending_freq":l=function(a,b,d){a.uniform1f(b,d.Ng)};k=!0;break;case "au_detail_bending_freq":l=function(a,b,d){a.uniform1f(b,d.og)};k=!0;break;case "au_detail_bending_amp":l=function(a,b,d){a.uniform1f(b,d.ng)};k=!0;break;case "au_branch_bending_amp":l=
function(a,b,d){a.uniform1f(b,d.hg)};k=!0;break;case "u_node_values":l=function(a,b,d,c){a.uniform4fv(b,c.$i)};k=!0;break;case "u_node_rgbs":l=function(a,b,d,c){a.uniform3fv(b,c.Re)};k=!0;break;case "u_lod_coverage":l=function(a,b,d,c){a.uniform1f(b,c.Sm.Ff)};k=!0;break;case "u_lod_cmp_logic":l=function(a,b,d,c){a.uniform1f(b,c.Sm.gy)};k=!0;break;case "u_diffuse_color":l=function(a,b,d,c){a.uniform4fv(b,c.gd)};k=!0;break;case "u_diffuse_intensity":l=function(a,b,d,c){a.uniform1f(b,c.pg)};k=!0;break;
case "u_diffuse_params":l=function(a,b,d,c){a.uniform2fv(b,c.ce)};k=!0;break;case "u_emit":l=function(a,b,d,c){a.uniform1f(b,c.ff)};k=!0;break;case "u_ambient":l=function(a,b,d,c){a.uniform1f(b,c.$e)};k=!0;break;case "u_specular_color":l=function(a,b,d,c){a.uniform3fv(b,c.Eg)};k=!0;break;case "u_specular_alpha":l=function(a,b,d,c){a.uniform1f(b,c.Dg)};k=!0;break;case "u_specular_params":l=function(a,b,d,c){a.uniform3fv(b,c.on)};k=!0;break;case "u_reflect_factor":l=function(a,b,d,c){a.uniform1f(b,
c.pi)};k=!0;break;case "u_mirror_factor":l=function(a,b,d,c){a.uniform1f(b,c.fp)};k=!0;break;case "u_grass_map_dim":l=function(a,b,d,c){a.uniform3fv(b,c.Nd)};k=!0;break;case "u_grass_size":l=function(a,b,d,c){a.uniform1f(b,c.ll)};k=!0;break;case "u_scale_threshold":l=function(a,b,d,c){a.uniform1f(b,c.Nz)};k=!0;break;case "u_cube_fog":l=function(a,b,d,c){a.uniformMatrix4fv(b,!1,c.kg)};break;case "u_jitter_amp":l=function(a,b,d,c){a.uniform1f(b,c.qA)};k=!0;break;case "u_jitter_freq":l=function(a,b,
d,c){a.uniform1f(b,c.rA)};k=!0;break;case "u_wireframe_edge_color":l=function(a,b,d,c){a.uniform3fv(b,c.wireframe_edge_color)};break;case "u_cluster_id":l=function(a,b,d,c){a.uniform1f(b,c.du)};k=!0;break;case "u_batch_debug_id_color":l=function(a,b,d,c){a.uniform1f(b,c.Fy)};k=!0;break;case "u_batch_debug_main_render_time":l=function(a,b,d,c){a.uniform1f(b,c.su)};k=!0;break;case "u_refr_bump":l=function(a,b,d,c){a.uniform1f(b,c.ri)};k=!0;break;case "u_line_width":l=function(a,b,d,c){a.uniform1f(b,
c.mv)};k=!0;break;case "u_lamp_light_positions":l=function(a,b,d,c){a.uniform3fv(b,c.wr)};break;case "u_lamp_light_directions":l=function(a,b,d,c){a.uniform3fv(b,c.gv)};break;case "u_lamp_light_color_intensities":l=function(a,b,d,c){a.uniform3fv(b,c.fv)};break;case "u_halo_size":l=function(a,b,d,c){a.uniform1f(b,c.Xz)};k=!0;break;case "u_halo_hardness":l=function(a,b,d,c){a.uniform1f(b,c.Uz)};k=!0;break;case "u_halo_rings_color":l=function(a,b,d,c){a.uniform3fv(b,c.Wz)};k=!0;break;case "u_halo_lines_color":l=
function(a,b,d,c){a.uniform3fv(b,c.Vz)};k=!0;break;case "u_halo_stars_blend":l=function(a,b,d,c){a.uniform1f(b,c.Yz)};k=!0;break;case "u_halo_stars_height":l=function(a,b,d,c){a.uniform1f(b,c.Zz)};k=!0;break;case "u_fresnel_params":l=function(a,b,d,c){a.uniform2fv(b,c.Fo)};k=!0;break;case "u_texture_scale":l=function(a,b,d,c){a.uniform3fv(b,c.vi)};k=!0;break;case "u_parallax_scale":l=function(a,b,d,c){a.uniform1f(b,c.Or)};k=!0;break;case "u_color_id":l=function(a,b,d){a.uniform3fv(b,d.rm)};k=!0;break;
case "u_diffuse_color_factor":l=function(a,b,d,c){a.uniform1f(b,c.vo)};k=!0;break;case "u_alpha_factor":l=function(a,b,d,c){a.uniform1f(b,c.Gk)};k=!0;break;case "u_specular_color_factor":l=function(a,b,d,c){a.uniform1f(b,c.ms)};k=!0;break;case "u_normal_factor":l=function(a,b,d,c){a.uniform1f(b,c.Jr)};k=!0;break;case "u_normalmap0_scale":l=function(a,b,d,c){a.uniform2fv(b,c.Al[0])};k=!0;break;case "u_normalmap1_scale":l=function(a,b,d,c){a.uniform2fv(b,c.Al[1])};k=!0;break;case "u_normalmap2_scale":l=
function(a,b,d,c){a.uniform2fv(b,c.Al[2])};k=!0;break;case "u_normalmap3_scale":l=function(a,b,d,c){a.uniform2fv(b,c.Al[3])};k=!0;break;case "u_foam_factor":l=function(a,b,d,c){a.uniform1f(b,c.Ni)};k=!0;break;case "u_foam_uv_freq":l=function(a,b,d,c){a.uniform2fv(b,c.hz)};k=!0;break;case "u_foam_mag":l=function(a,b,d,c){a.uniform2fv(b,c.gz)};k=!0;break;case "u_foam_scale":l=function(a,b,d,c){a.uniform2fv(b,c.Gu)};k=!0;break;case "u_water_norm_uv_velocity":l=function(a,b,d,c){a.uniform1f(b,c.Ts)};
k=!0;break;case "u_shallow_water_col":l=function(a,b,d,c){a.uniform3fv(b,c.as)};k=!0;break;case "u_shore_water_col":l=function(a,b,d,c){a.uniform3fv(b,c.cs)};k=!0;break;case "u_water_shallow_col_fac":l=function(a,b,d,c){a.uniform1f(b,c.bs)};k=!0;break;case "u_water_shore_col_fac":l=function(a,b,d,c){a.uniform1f(b,c.ds)};k=!0;break;case "u_p_length":l=function(a,b,d,c){a.uniform1f(b,c.Qa.KC)};k=!0;break;case "u_p_cyclic":l=function(a,b,d,c){a.uniform1i(b,c.Qa.be)};k=!0;break;case "u_p_max_lifetime":l=
function(a,b,d,c){a.uniform1f(b,c.Qa.xA)};k=!0;break;case "u_p_fade_in":l=function(a,b,d,c){a.uniform1f(b,c.Qa.cl)};k=!0;break;case "u_p_fade_out":l=function(a,b,d,c){a.uniform1f(b,c.Qa.Kf)};k=!0;break;case "u_p_size":l=function(a,b,d,c){a.uniform1f(b,c.Qa.size)};k=!0;break;case "u_p_alpha_start":l=function(a,b,d,c){a.uniform1f(b,c.Qa.Fx)};k=!0;break;case "u_p_alpha_end":l=function(a,b,d,c){a.uniform1f(b,c.Qa.Ex)};k=!0;break;case "u_p_nfactor":l=function(a,b,d,c){a.uniform1f(b,c.Qa.Gr)};k=!0;break;
case "u_p_gravity":l=function(a,b,d,c){a.uniform1f(b,c.Qa.Oz)};k=!0;break;case "u_p_mass":l=function(a,b,d,c){a.uniform1f(b,c.Qa.gi)};k=!0;break;case "u_p_color_ramp":l=function(a,b,d,c){a.uniform4fv(b,c.Qa.jy)};k=!0;break;case "u_p_wind_fac":l=function(a,b,d,c){a.uniform1f(b,c.Qa.sD)};k=!0;break;case "u_p_time":l=function(a,b,d,c){a.uniform1f(b,c.Qa.time)};k=!0;break;case "u_p_tilt":l=function(a,b,d,c){a.uniform1f(b,c.Qa.IC)};k=!0;break;case "u_p_tilt_rand":l=function(a,b,d,c){a.uniform1f(b,c.Qa.JC)};
k=!0;break;case "u_position":l=function(a,b,d,c){a.uniform3fv(b,c.Wn)};k=!0;break;case "u_va_frame_factor":l=function(a,b,d){a.uniform1f(b,d.eD)};k=!0;break;case "u_refl_plane":l=function(a,b,d){a.uniform4fv(b,d.Kc)};k=!0;break;case "u_outline_intensity":l=function(a,b,d){a.uniform1f(b,d.cj)};k=!0;break;case "u_obj_info":l=function(a,b,d,c){a.uniform3fv(b,c.Lr)},k=!0}l&&(l={name:h,ar:l,pf:b[h]},k?d.push(l):c.push(l));n&&(l={name:h,ar:n,pf:b[h]},k?e.push(l):g.push(l))}if(c.length||g.length){a=a.gH;
for(var B in a)delete a[B];for(B=0;B<c.length;B++)l=c[B],a[l.name]=l;for(B=0;B<g.length;B++)l=g[B],a[l.name]=l}else a.VA=!0}var G=u("__batch"),q=u("__camera"),w=u("__config"),A=u("__debug"),g=u("__extensions"),e=u("__geometry"),y=u("__quat"),x=u("__subscene"),P=u("__textures"),J=u("__tsr"),L=u("__util"),l=u("__version"),I=u("__vec3"),v=[1,0,0,1],K=[1,1,1,1],k=[0,0,0,1],D=[0,0,0,0],M=new Uint8Array([91.8,142.8,.96*255,255]),E=null,S=null,F=null,z=null,C=null,r=null,f=new Float32Array(3),W=y.create(),
d=new Uint8Array(4),n=w.K;a.sh=function(a){var b=n.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);E=a};a.Tq=function(a){if(a.pc&&!a.Co)if(a.type==x.px){A.vH(a);var d=a.F;E.bindFramebuffer(E.READ_FRAMEBUFFER,d.Ju);E.bindFramebuffer(E.DRAW_FRAMEBUFFER,d.Lf);var f=0;d.tc&&(f|=E.COLOR_BUFFER_BIT);d.mg&&(f|=E.DEPTH_BUFFER_BIT);
E.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,f,E.NEAREST);A.wH(a);A.wE("draw resolve")}else if(a.type==x.BD)A.vH(a),d=a.F,E.bindFramebuffer(E.FRAMEBUFFER,d.Ju),E.bindTexture(E.TEXTURE_2D,d.tc.Mb),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),A.wH(a),A.wE("draw copy");else{A.vH(a);d=a.F;E.bindFramebuffer(E.FRAMEBUFFER,d.Lf);a.Ht&&(f=d.tc,E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,f.Eb,f.Mb,0));E.viewport(0,0,d.width,d.height);a.type!=x.Zd&&a.type!=x.ag&&
c(a);a.Bb?E.enable(E.BLEND):E.disable(E.BLEND);a.me?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST);switch(a.type){case x.$d:E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(a.self_shadow_polygon_offset,a.self_shadow_polygon_offset);E.cullFace(E.BACK);break;case x.He:case x.Tg:E.disable(E.POLYGON_OFFSET_FILL);E.cullFace(E.FRONT);break;case x.Ai:E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(-4,-4);E.cullFace(E.BACK);break;case x.Ge:if(1<n.kc||n.Q2){E.enable(E.POLYGON_OFFSET_FILL);E.polygonOffset(-2,
-2);break}default:E.disable(E.POLYGON_OFFSET_FILL),E.cullFace(E.BACK)}if(a.type==x.Zd||a.type==x.ag)for(var d=a.F,f=d.tc.Mb,e=0;6>e;e++){var g=b(e);d.ec=a.Xk[e];J.Wh(d.ec,d.Lg);q.qE(d);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,g,f,0);c(a);for(var g=a.ib,k=0;k<g.length;k++)for(var h=0;h<g[k].Ra.length;h++){var l=g[k].Ra[h];l.pc=l.lF[e]}m(a)}else m(a);A.wH(a);A.wE("draw subscene: "+x.CC(a))}};a.clear=function(a){E.bindFramebuffer(E.FRAMEBUFFER,a.F.Lf);c(a)};a.FK=function(a){var b=a.It;
b.length=0;var d=a.Ga,c=d.bd,f=a.zb.attributes,g;for(g in f){var k=c[g],h=e.Kz(g),v=e.C_(g),r=e.RN(g);b.push({fD:h,dr:v,pf:f[g],Px:k.offset*r,jz:1<k.frames?k.length*r:0,Qc:k.Qc,xo:k.xo})}if("DEBUG"==l.type())for(g in c)h=e.Kz(g),b=e.U2(d.Vd,h),b=d.Vd[b],k=a.mb.Kg+" | "+a.mb.gf,h=c[g].length*c[g].frames*e.RN(g),A.BZ(b.LY,k,g,h,g in f);n.ZD&&p(a)};a.gW=p;a.kX=function(a){for(var b=g.SF(),d=0;d<a.Yf.length;d++)b.deleteVertexArray(a.Yf[d]);a.Yf.length=0};a.mX=function(a){for(var b=[],d=0;d<a.length;d++){var c=
a[d];b.push({fD:c.fD,dr:c.dr,pf:c.pf,Px:c.Px,jz:c.jz,Qc:c.Qc,xo:c.xo})}return b};a.fW=h;a.IK=function(a){var b=a.zb,d=a.qa;a=a.Hg;E.useProgram(b.ik);for(var c=0;c<d.length;c++)E.uniform1i(b.Cp[a[c]],c)};a.wB=function(a,b,d,c,f,e){E.bindFramebuffer(E.FRAMEBUFFER,a);E.readPixels(b,d,c,f,E.RGBA,E.UNSIGNED_BYTE,e);E.bindFramebuffer(E.FRAMEBUFFER,null);return e};a.N4=function(a){var b=a.zb;b.VA||(E.useProgram(b.ik),b.yv.length||h(b),b=b.gH.u_cube_fog,b.ar(E,b.pf,null,a))};a.A2=function(a,b){var d=E.createFramebuffer();
E.bindFramebuffer(E.FRAMEBUFFER,d);if(P.rr(a)){var c=a.Zf;E.framebufferRenderbuffer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.RENDERBUFFER,c)}else if(P.ur(a)){var f=a,c=f.Mb,f=f.Eb==E.TEXTURE_CUBE_MAP?E.TEXTURE_CUBE_MAP_NEGATIVE_Z:f.Eb;E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,f,c,0)}P.rr(b)?(c=b.Zf,E.framebufferRenderbuffer(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,c)):P.ur(b)&&(f=b,c=f.Mb,f=f.Eb,E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,f,c,0));A.UW();E.bindFramebuffer(E.FRAMEBUFFER,
null);return d};a.z2=function(a,b,d,c,f){null==a?(E.bindFramebuffer(E.FRAMEBUFFER,a),E.viewport(0,0,c,f),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)):(P.rr(b)?E.deleteRenderbuffer(b.Zf):P.ur(b)&&E.deleteTexture(b.Mb),P.rr(d)?E.deleteRenderbuffer(d.Zf):P.ur(d)&&E.deleteTexture(d.Mb),E.deleteFramebuffer(a))};a.Oba=function(){};a.ZY=function(a,b,d,c,f,e){a=a.Mb;E.viewport(0,0,d,d);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,b,a,0);b=G.uy("FLIP_CUBEMAP_COORDS");a=b.zb;E.activeTexture(E.TEXTURE0);
E.bindTexture(E.TEXTURE_2D,f);var g=f=0;d!=c&&(f=1/(6*c),g=1/(4*c));E.uniform1i(a.Cp.u_tex_number,e);E.uniform2fv(a.Cp.u_delta,[f,g]);E.useProgram(a.ik);r(b,0);E.bindTexture(E.TEXTURE_2D,null)};a.$Y=function(a,b,d,c,f){E.bindFramebuffer(E.FRAMEBUFFER,c);c=a.Mb;a=a.Eb;E.bindTexture(a,c);E.viewport(0,0,b,d);E.texImage2D(a,0,E.RGBA,b,d,0,E.RGBA,E.UNSIGNED_BYTE,null);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,a,c,0);b=G.uy("NONE");d=b.zb;E.activeTexture(E.TEXTURE0);E.bindTexture(a,f);E.useProgram(d.ik);
r(b,0);E.bindFramebuffer(E.FRAMEBUFFER,null);E.bindTexture(a,null)};a.Ja=function(){};a.i3=function(){var a=g.F_(),b=g.SF();n.rK=a?!0:!1;n.ZD=b?!0:!1;a?(S=function(b,d,c,f){a.drawElementsInstanced(E.TRIANGLES,b,d,c,f)},F=function(b,d){a.vertexAttribDivisor(b,d)},z=function(b,d,c){a.drawArraysInstanced(E.TRIANGLES,b,d,c)}):(S=function(a,b,d){E.drawElements(E.TRIANGLES,a,b,d)},F=function(){},z=function(a,b){E.drawArrays(E.TRIANGLES,a,b)});b?(C=function(a){b.bindVertexArray(a)},r=function(a,b){var d=
a.Ga;C(a.Yf[b]);d.di?S(d.count,d.Lo,0,d.Qo):z(0,d.count,d.Qo);C(null)}):r=function(a,b){for(var d=a.Ga,c=a.It,f=0;f<d.Vd.length;f++){E.bindBuffer(E.ARRAY_BUFFER,d.Vd[f].Yl);for(var e=0;e<c.length;e++){var g=c[e];g.fD==d.Vd[f].type&&(E.enableVertexAttribArray(g.pf),E.vertexAttribPointer(g.pf,g.Qc,g.dr,g.dr==E.FLOAT?!1:!0,0,g.Px+g.jz*b),F(g.pf,g.xo))}}d.di?(E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,d.di),S(d.count,d.Lo,0,d.Qo)):z(0,d.count,d.Qo);for(f=0;f<c.length;f++)g=c[f],E.disableVertexAttribArray(g.pf)}};
a.reset=function(){C=z=F=S=E=null}};b4w.module.__geometry=function(a,u){function m(){return{length:0,frames:1,Qc:0,offset:0,xo:0}}function c(a,b){for(var d=b.a_tbn,c=b.a_position,f=c.length,e=1;e<a.wb.length;e++)for(var g=a.wb[e].Wu,k=a.wb[e].fh.a_position,h=0;h<f;h++)c[h]+=g*k[h];c=ga.Az(d);for(e=0;e<c;e++){f=ga.identity(Aa);for(h=1;h<a.wb.length;h++)if(k=a.wb[h].fh.a_tbn,g=a.wb[h].Wu)k=ga.Io(k,e,da),g=ga.slerp(ga.identity(ba),k,g,da),ga.SA(g,f,f);h=ga.Io(d,e,da);h=ga.SA(f,h,da);ga.lk(d,h,e)}}function b(a){return 65536<a.gb?za.nN()?
!1:!0:!1}function p(a){return 0<a.Ea.length?!0:!1}function h(a,b,d){if(!p(a))return a;d||ha.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.gb*(b||1)+", will use drawArrays","color: #aa0");b=a.Ea;d=a.gb;var c=a.Da,f=a.la,e;for(e in c){var g=c[e],h=k(g,d);c[e]=G(b,g,h)}for(c=0;c<f.length;c++){var n=f[c];for(e in n)g=n[e],h=k(g,d),n[e]=G(b,g,h)}for(c=0;c<a.wb.length;c++){e=a.wb[c].fh;for(var l in e)g=e[l],h=k(g,d),e[l]=G(b,g,h)}a.gb=b.length;a.Ea=new Uint16Array(0);return a}
function G(a,b,d){if(0==b.length)return new Float32Array(0);for(var c=new Float32Array(a.length*d),f=0;f<a.length;f++)for(var e=a[f],g=0;g<d;g++)c[d*f+g]=b[d*e+g];return c}function q(){return{kf:null,Sc:r(),Lo:0,count:0,bd:{},usage:0,Kq:0,Nq:0,Vd:[],di:null,wb:null,Qo:1,Nh:!0}}function w(a,b,d,c){if("a_normal"==b)return c=ga.$q(c),w(a,"a_tbn",d,c);var e=a.bd,g=e[b],k=R(b);if(g)d&&g.Qc!=d&&Z.J('invalid num_comp for "'+b+'"'),t(a.Sc,b,c,g.offset);else{g=W(a.Sc,k);-1==g&&(a.Sc.push(f(k,0)),g=a.Sc.length-
1);var k=a.Sc[g].Dn,h=new k.constructor(k.length+c.length);h.set(k);a.Sc[g].Dn=h;t(a.Sc,b,c,k.length);b=e[b]=m();b.Qc=d;b.offset=k.length;b.length=c.length}y(a);return a}function A(a,b){if("a_normal"==b){for(var d=A(a,"a_tbn"),c=ga.Az(d),f=new Float32Array(3*c),e=0;e<c;e++){var g=ga.J_(d,e,wa);f.set(g,3*e)}return f}if(d=a.bd[b])return c=R(b),fa(b,n(a.Sc,c).subarray(d.offset,d.offset+d.length),new Float32Array(d.length));Z.J("extract_array_float() failed; invalid name: "+b)}function g(b,d){var c;switch(d){case a.Up:case a.bt:c=
ca.STATIC_DRAW;break;case a.Nw:c=ca.DYNAMIC_DRAW;break;default:Z.J("Wrong draw_mode")}b.usage=c}function e(a,b,d){function c(a,b){f[a]||(f[a]=0);f[a]+=b}var f={},e;for(e in a[0]){var g=a[0][e],k=R(e);c(k,g.length*a.length)}for(e in b)g=b[e],k=R(e),c(k,g.length);if(d){a=d.pw.length;k=R("a_part_ts");c(k,4*a);k=R("a_part_r");c(k,4*a);b=d.Rr;for(e in b)k=R(e),c(k,b[e].Qc*a);d=d.BC;for(e in d)k=R(e),c(k,a)}return f}function y(a){a.kf?(a.di||(a.di=ca.createBuffer()),ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,
a.di),ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,a.kf,a.usage),a.Kq=a.kf.byteLength):a.Kq=0;for(var b=a.Nq=0;b<a.Sc.length;b++){var d=a.Sc[b].type,c=W(a.Vd,d);-1==c&&(a.Vd.push({Yl:null,type:d,LY:Z.jS()}),c=a.Vd.length-1);d=a.Vd[c];d.Yl||(d.Yl=ca.createBuffer());ca.bindBuffer(ca.ARRAY_BUFFER,d.Yl);ca.bufferData(ca.ARRAY_BUFFER,a.Sc[b].Dn,a.usage);a.Nq+=a.Sc[b].Dn.byteLength}}function x(a,b){a.Aa=H.Dq(a.Aa,b);a.Ib=H.mE(a.Ib,b);a.yc=H.Vx(a.yc,b);a.Id=H.nE(a.Id,b)}function P(a){for(var b=a[0],d=a[0],c=C("JOIN_"+
a.length+"_SUBMESHES"),f=0,e=0;e<a.length;e++)f+=a[e].Ea.length;c.Ea=new Uint32Array(f);var g=f=0;if(0<a[0].wb.length)for(var h=0;h<a[0].wb.length;h++){for(e=0;e<a.length;e++)f+=a[e].wb[h].fh.a_position.length,g+=ga.Az(a[e].wb[h].fh.a_tbn);e={a_position:new Float32Array(f),a_tbn:ga.create(g)};c.wb.push({Wu:a[0].wb[h].Wu,fh:e})}for(e=f=0;e<a.length;e++)f+=a[e].gb;c.gb=f;for(var n in d.Da){for(e=f=0;e<a.length;e++)f+=a[e].Da[n].length;c.Da[n]=new Float32Array(f)}for(n in d.la[0]){for(e=f=0;e<a.length;e++)f+=
a[e].la[0][n].length;for(e=0;e<d.la.length;e++)c.la[e]=c.la[e]||{},c.la[e][n]=new Float32Array(f)}e=c.Dd;e.Aa=H.fy(b.Dd.Aa);g=f=0;h=[];for(d=0;d<a.length;d++){var l=a[d],t=l.Ea,B=l.gb,v=l.Da;n=l.Dd.yc;H.az(e.Aa,l.Dd.Aa);H.pZ(e.yc,n);H.rF(l.Dd.Id,h);for(n=0;n<t.length;n++)c.Ea[f+n]=t[n]+g;var f=f+t.length,r;for(r in v){var t=v[r],m=g*k(t,B);c.Da[r].set(t,m)}for(n=0;n<l.la.length;n++){var v=l.la[n],q=c.la[n];for(r in v)t=v[r],m=g*k(t,B),q[r].set(t,m)}g+=B}e.Ib=H.oy(Z.Rh(h),!0);if(0<c.wb.length)for(d=
0;d<c.wb.length;d++)for(r=c.wb[d].fh,n=f=e=0;n<a.length;n++)g=a[n].wb[d].fh,r.a_position.set(g.a_position,e),r.a_tbn.set(g.a_tbn,f),e+=g.a_position.length,f+=g.a_tbn.length;a[0].Nf&&(c.Nf={pw:b.Nf.pw,mI:b.Nf.mI,ER:!0,BC:b.Nf.BC,Rr:b.Nf.Rr,Uy:b.Nf.Uy});return c}function J(a,b,d){b=b.Dd;for(var c=H.Gf(),f=H.vy(),e=[],g=0;g<d.length;g++)H.Dq(a.Dd.Aa,d[g],c),H.az(b.Aa,c),H.nE(a.Dd.Id,d[g],f),H.rF(f,e);b.Ib=H.oy(Z.Rh(e),!0);b.Id=H.DX(b.Ib);b.yc=H.qy(b.Ib)}function L(a,b,d,c,f,e){var g=a.submeshes[b],k=
g.base_length,n=C("SUBMESH_"+a.name+"_"+a.materials[b].name);n.gb=k;var t=!1;if(v(d,"a_texcoord")){var B=null,r=a.materials[b];b=a.submeshes[b];if(r.wh.length)switch(r=r.wh[0],r.texture_coords){case "UV":B=I(b,r.uv_layer,a.name);break;case "ORCO":for(var m=a.b4w_boundings.bb_src,B=new Float32Array(2*b.base_length),r=(m.max_x+m.min_x)/2,Q=(m.max_y+m.min_y)/2,q=m.max_x-m.min_x,m=m.max_y-m.min_y,x=0,y=0;y<b.position.length;y+=3)B[x++]=(b.position[y]-r)/q+.5,B[x++]=(b.position[y+1]-Q)/m+.5}null===B&&
(B=new Float32Array(2*b.base_length));b=B}else b=new Float32Array(0);if(v(d,"a_orco_tex_coord")){for(var B=a.b4w_boundings.bb_src,r=new Float32Array(3*g.base_length),Q=g.position,q=B.max_x-B.min_x,m=B.max_y-B.min_y,x=B.max_z-B.min_z,p=y=0;p<Q.length;p+=3)q?r[y++]=Z.ja(parseFloat(((Q[p]-B.min_x)/q).toFixed(5)),0,1):r[y++]=.5,m?r[y++]=Z.ja(parseFloat(((Q[p+1]-B.min_y)/m).toFixed(5)),0,1):r[y++]=.5,x?r[y++]=Z.ja(parseFloat(((Q[p+2]-B.min_z)/x).toFixed(5)),0,1):r[y++]=.5;B=r}else B=new Float32Array(0);
r=g.group;if(v(d,"a_influence")&&c){Q=new Float32Array(4*k);q=r.length/k;m=new Float32Array(q);for(x=0;x<q;x++){m[x]=-1;for(var z in c)if(y=c[z],y.NS===x){m[x]=y.dF;break}}p=3<q?q:4;c=new Float32Array(p);z=new Uint32Array(p);for(var x=new Float32Array(4),y=new Float32Array(p),p=new Uint32Array(p),w=new Float32Array(4),D=0;D<k;D++)c.set(y),z.set(p),x.set(w),Q.set(K(r,q,D,k,m,c,z,x),4*D)}else Q=new Float32Array(0);c=Q;f=f?Z.X(f):{};f.a_color={Ho:!0};f.a_color.src=v(d,"a_color")&&a.active_vcol_name?
[{name:a.active_vcol_name,fi:7}]:[];n.Da.a_texcoord=b;n.Da.a_influence=c;n.Da.a_orco_tex_coord=B;c=n.Da;z=g.vertex_colors;b=g.color;B=a.name;r=[];for(Q=0;Q<z.length;Q++)r.push(z[Q].name);for(var E in f)if(Q=f[E].src,Q.length){for(m=q=0;m<Q.length;m++)q+=Z.tp(Q[m].fi);c[E]=new Float32Array(q*k);for(m=x=0;m<Q.length;m++){var J=Q[m].name,y=Q[m].fi,p=Z.oQ(y),w=r.indexOf(J);if(-1==w)ha.warn('vertex color "'+J+'" for mesh "'+B+'" not found'),D=7;else{for(var D=z[w].mask,F,A=F=0;A<w;A++)F+=Z.tp(z[A].mask);
F*=k}A=Z.tp(D);(y&D)!==y&&ha.error("Wrong color extraction from "+J+" to "+E+' for the mesh "'+B+'".');for(J=0;J<k;J++)for(var M=0;3>M;M++)if(p[M]){var pa=Z.Xr(D,M);c[E][J*q+(x+Z.Xr(y,M))]=-1==w?0:b[F+J*A+pa]}x+=A}}else c[E]=new Float32Array(0);E=a.name;F=n.Da;if(e)for(var u in e)F[e[u]]=I(g,u,E);n.Ea=new Uint32Array(g.indices);u=g.position.length/k/3;E=v(d,"a_tbn")&&g.tbn.length?!0:!1;F=v(d,"a_shade_tangs")&&g.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&(t=!0);for(f=0;f<u;f++){e=l(g,k,E,
F,f);if(t)if(c={},c.name=a.b4w_shape_keys[f].name,n.wb.push(c),f){c.fh=e;c.Wu=a.b4w_shape_keys[f].value;continue}else c.fh=l(g,k,E,F,f),c.Wu=1;n.la.push(e)}if(1<u&&!t){a=n.la[0];e={};for(var P in a)e[P]=new Float32Array(a[P]);n.la.push(e)}v(d,"a_polyindex")&&(h(n,1,!0),n.Da.a_polyindex=S(n));g=g.boundings;d=n.Dd;d.Aa=H.Gf();d.Aa.max_x=g.bb.max_x;d.Aa.max_y=g.bb.max_y;d.Aa.max_z=g.bb.max_z;d.Aa.min_x=g.bb.min_x;d.Aa.min_y=g.bb.min_y;d.Aa.min_z=g.bb.min_z;P=g.rbb;a=g.caxis_x;k=g.caxis_y;t=g.caxis_z;
e=g.be_ax;d.Ib=H.gE(a,k,t,g.be_cen);ea.scale(d.Ib.Za,e[0],d.Ib.Za);ea.scale(d.Ib.$a,e[1],d.Ib.$a);ea.scale(d.Ib.ab,e[2],d.Ib.ab);d.yc=H.qy(d.Ib);ea.copy(P.rbb_c,d.Id.T);ea.copy(a,d.Id.Za);ea.copy(k,d.Id.$a);ea.copy(t,d.Id.ab);g=P.rbb_s;ea.scale(d.Id.Za,g[0],d.Id.Za);ea.scale(d.Id.$a,g[1],d.Id.$a);ea.scale(d.Id.ab,g[2],d.Id.ab);return n}function l(a,b,d,c,f){var e={},g=new Float32Array(3*b),k=ga.create(d?b:0),h=f*b*3;g.set(a.position.subarray(h,h+3*b),0);d&&ga.copy(a.tbn,f*b,b,k);c&&(d=new Float32Array(3*
b),d.set(a.shade_tangs.subarray(0,3*b),0),e.a_shade_tangs=d);e.a_position=g;e.a_tbn=k;return e}function I(a,b,d){var c=2*a.base_length,f=a.uv_layers.indexOf(b);if(-1==f)return ha.warn('uv layer "'+b+'" for mesh "'+d+'" not found'),new Float32Array(c);b=f*c;return a.texcoord.subarray(b,b+c)}function v(a,b){return-1<a.indexOf(b)?!0:!1}function K(b,d,c,f,e,g,k,h){for(var n=!0,l=0;l<d;l++){var t=b[l*f+c];if(-1!==t){var B=e[l];-1!==B&&(g[l]=t,k[l]=B,n=!1)}}if(n)return h;D(g,k,a.RD,!1);for(l=b=0;4>l;l++)b+=
g[l];if(.01>b)return h;for(l=0;4>l;l++)g[l]/=b;if(.01>Math.abs(g[0]-1))h[0]=k[0]+1;else for(l=0;4>l;l++)h[l]=k[l]+g[l];return h}function k(a,b){if(0==b)return 0;var d=a.length,c=d/b;c!=Math.floor(c)&&Z.J("Array size mismatch during geometry calculation: array length="+d+", base length="+b);return c}function D(b,d,c,f){for(var e=b.length,g=e,k=!1,h=f?-1:1;1<g||k;){1<g&&(g=Math.floor(g/1.247330950103979));for(var k=!1,n=0;g+n<e;n++)if(c==a.RD?0>h*(b[n]-b[n+g]):b[n]<b[n+g]&&f)k=b[n],b[n]=b[n+g],b[n+
g]=k,k=d[n],d[n]=d[n+g],d[n+g]=k,k=!0}}function M(a,b,d){var c=[],f=[];ea.subtract(b,a,c);ea.subtract(d,a,f);ea.normalize(c,c);ea.normalize(f,f);a=Z.ja(ea.dot(c,f),-1,1);return Math.acos(a)}function E(a,b){var d=[];if(p(b))for(var c=b.Ea,f=c.length/3,e=0;e<f;e++){var g=new Float32Array(9),k=c[3*e];g[0]=a[3*k];g[1]=a[3*k+1];g[2]=a[3*k+2];k=c[3*e+1];g[3]=a[3*k];g[4]=a[3*k+1];g[5]=a[3*k+2];k=c[3*e+2];g[6]=a[3*k];g[7]=a[3*k+1];g[8]=a[3*k+2];d[e]=g}else for(e=0;e<a.length;e++)g=new Float32Array(9),g[0]=
a[9*e],g[1]=a[9*e+1],g[2]=a[9*e+2],g[3]=a[9*e+3],g[4]=a[9*e+4],g[5]=a[9*e+5],g[6]=a[9*e+6],g[7]=a[9*e+7],g[8]=a[9*e+8],d[e]=g;return d}function S(a){for(var b=new Float32Array(a.gb),d=0;d<a.gb;d++)b[d]=d%3/2;return b}function F(a,b,d){var c=ea.dist(a,b);a=ea.dist(a,d);b=ea.dist(b,d);d=(c+a+b)/2;return d*(d-c)*(d-a)*(d-b)}function z(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),d=new Float32Array(8*a),c=0;c<a;c++)d.set(b,8*c);return d}function C(a){return{name:a,gb:0,Ea:null,la:[],Da:{a_influence:new Float32Array(0),
a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},wb:[],Dd:{Aa:H.Gf(),Ib:H.mu(),yc:H.py(),Id:H.vy()},Nf:null}}function r(a){var b=[],d;for(d in a)b.push(f(d,a[d]));return b}function f(a,b){return{Dn:new (X(a))(b),type:a}}function W(a,b){for(var d=0;d<a.length;d++)if(a[d].type==b)return d;return-1}function d(a,b){var d=W(a,b);return-1==d?null:a[d].Yl}function n(a,b){var d=W(a,b);return-1==d?null:a[d].Dn}function X(a){switch(a){case "float":return Float32Array;case "short":return Int16Array;
case "unsigned_byte":return Uint8Array;default:return Float32Array}}function R(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}function t(a,
b,d,c){var f=R(b);la(b,d,a[W(a,f)].Dn.subarray(c))}function fa(a,b,d){switch(R(a)){case "float":d.set(b);break;case "short":for(a=0;a<b.length;a++)d[a]=Z.tR(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)d[a]=Z.fS(b[a])}return d}function la(a,b,d){switch(R(a)){case "float":d.set(b);break;case "short":for(a=0;a<b.length;a++)d[a]=Z.Xq(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)d[a]=Z.gS(b[a])}return d}var H=u("__boundings"),za=u("__extensions"),ha=u("__print"),ua=u("__quat"),ga=
u("__tbn"),B=u("__tsr"),Z=u("__util"),ea=u("__vec3"),Aa=ga.create(),da=ga.create(),ba=ga.create(),wa=new Float32Array(3),T=new Float32Array(3),ma=new Float32Array(3),aa=ua.create(),ja=new Float32Array(8);a.bt=10;a.Nw=20;a.RD=0;a.S7=1;a.Up=a.bt;var ca=null;a.qq="float";a.V7="short";a.W7="unsigned_byte";a.sh=function(a){ca=a};a.NR=function(a,d,f){b(a)&&h(a);var n=a.Ea,l=a.gb,v=a.la,H={},x;for(x in a.Da)x in f&&!f[x].Ho||(H[x]=a.Da[x]);f=q();0<a.wb.length&&c(a,v[0]);x=a.Nf;if(n.length){var p=n.length;
if(65536>=l)var n=new Uint16Array(n),Q=ca.UNSIGNED_SHORT;else n=new Uint32Array(n),Q=ca.UNSIGNED_INT}else p=l,n=null;for(var C=e(v,H,x),C=r(C),z={},w=0;w<C.length;w++)z[C[w].type]=0;var D={},K;for(K in H){var E=H[K],J=E.length;if(J){var F=R(K),w=D[K]=m();w.length=J;w.Qc=k(E,l);w.offset=z[F];t(C,K,E,z[F]);z[F]+=J}}H=v.length;for(K in v[0])if(E=v[0][K],F=R(K),J=E.length,E=k(E,l),J)for(w=D[K]=m(),w.length=J,w.frames=H,w.Qc=E,w.offset=z[F],1<H&&(w=D[K+"_next"]=m(),w.length=J,w.frames=H,w.Qc=E,w.offset=
z[F]+J),w=0;w<H;w++)E=v[w][K],F=R(K),t(C,K,E,z[F]),z[F]+=J;if(x){v=x.pw;K=x.mI;var H=x.Rr,J=x.BC,F=x.ER,l={a_part_ts:{data:[],Qc:4},a_part_r:{data:[],Qc:4}},A;for(A in H)l[A]={data:[],Qc:H[A].Qc};for(A in J)l[A]={data:[],Qc:1};for(E=0;E<v.length;E++){w=v[E];F&&K&&!x.Uy&&(w=B.multiply(K,v[E],ja));!F&&x.Uy&&ea.subtract(v[E],K,v[E]);l.a_part_ts.data.push(w[0],w[1],w[2],w[3]);l.a_part_r.data.push(w[4],w[5],w[6],w[7]);for(A in H)for(var w=H[A].Qc,M=0;M<w;M++)l[A].data.push(H[A].data[E*w+M]);for(A in J)l[A].data.push(J[A][0])}for(A in l)v=
R(A),t(C,A,l[A].data,z[v]),K=m(),K.Qc=l[A].Qc,K.offset=z[v],K.xo=1,K.length=l[A].data.length,D[A]=K,z[v]+=K.length;f.Qo=x.pw.length}f.count=p;f.kf=n;f.Sc=C;f.Lo=Q;f.bd=D;g(f,d);y(f);f.wb=a.wb;return f};a.r4=c;a.B0=b;a.A0=p;a.AC=h;a.T4=function(a,b,d){g(a,b);a.count=d.length;a.kf=d;a.Lo=d instanceof Uint16Array?ca.UNSIGNED_SHORT:ca.UNSIGNED_INT};a.S4=w;a.GM=A;a.qca=function(a){a.usage=ca.STATIC_DRAW};a.j1=function(a){a.usage=ca.DYNAMIC_DRAW};a.oS=y;a.sw=function(a,b,d,c){ca.bindBuffer(ca.ARRAY_BUFFER,
a.Vd[W(a.Vd,b)].Yl);ca.bufferSubData(ca.ARRAY_BUFFER,Z.xk*c,d)};a.hX=function(a){a.di&&ca.deleteBuffer(a.di);for(var b=0;b<a.Vd.length;b++)a.Vd[b].Yl&&ca.deleteBuffer(a.Vd[b].Yl);a.Vd.length=0};a.fO=function(a,b){return a.submeshes[b].base_length?!1:!0};a.oI=function(a,b){for(var d=0;d<a.la.length;d++){var c=a.la[d].a_position;B.wn(c,b,c,0);c=a.la[d].a_tbn;ga.pP(c,b,c);(c=a.la[d].a_shade_tangs)&&0<c.length&&B.II(c,b,c,0)}(d=a.Da.au_center_pos)&&d.length&&B.wn(d,b,d,0);x(a.Dd,b)};a.q4=function(a,b){var d=
a.Da.au_center_pos;if(d&&d.length){var c=new Float32Array(d);B.wn(c,b,c,0);for(var f=0;f<a.la.length;f++)for(var e=0;e<c.length;e++)a.la[f].a_position[e]+=c[e]-d[e];d.set(c)}else Z.J('Attribute "au_center_pos" is missing in particle submesh');x(a.Dd,b)};a.vW=x;a.p4=function(a,b){var d=a.gb,c;for(c in b){var f=b[c].length;a.Da[c]=new Float32Array(f*d);for(var e=0;e<d;e++)for(var g=0;g<f;g++)a.Da[c][e*f+g]=b[c][g]}};a.MR=P;a.l1=function(a,b,d){if(!a.gb)return C("EMPTY");var c=d.length;65536<a.gb*c&&
!za.nN()&&h(a,c);var f=a.Ea,e=a.gb,g=a.Da,n=a.la,l;for(l in b){var t=b[l].length,v=t*e;g[l]=new Float32Array(v);for(var r=0;r<e;r++)for(v=0;v<t;v++)g[l][r*t+v]=b[l][v]}b=C("CLONE_"+c+"_SUBMESHES");b.gb=e*c;b.Ea=new Uint32Array(f.length*c);for(r=0;r<c;r++)for(t=f.length*r,l=e*r,v=0;v<f.length;v++)b.Ea[t+v]=f[v]+l;for(var m in g)for(f=g[m],v=f.length*c,t=k(f,e),b.Da[m]=new Float32Array(v),r=0;r<c;r++)l=e*t*r,b.Da[m].set(f,l);for(m in n[0])for(r=0;r<n.length;r++)for(f=n[r][m],v=f.length*c,t=k(f,e),b.la[r]=
b.la[r]||{},b.la[r][m]=new Float32Array(v),v=0;v<c;v++)switch(g=d[v],l=e*t*v,m){case "a_position":B.wn(f,g,b.la[r][m],l);break;case "a_tbn":B.F4(f,g,b.la[r][m],l);break;case "a_shade_tangs":B.JI(f,g,b.la[r][m],l);break;default:Z.J("Wrong attribute name: "+m)}J(a,b,d);return b};a.bL=J;a.cz=L;a.uZ=function(a){var b=a.gb,d=a.la[0].a_position,c=new Float32Array(12*b);a=new Uint32Array(4*a.Ea.length);for(var f=new Float32Array(4*b),e=0;e<b;e++){c[12*e]=d[3*e];c[12*e+1]=d[3*e+1];c[12*e+2]=d[3*e+2];c[12*
e+3]=d[3*e];c[12*e+4]=d[3*e+1];c[12*e+5]=d[3*e+2];c[12*e+6]=d[3*e];c[12*e+7]=d[3*e+1];c[12*e+8]=d[3*e+2];c[12*e+9]=d[3*e];c[12*e+10]=d[3*e+1];c[12*e+11]=d[3*e+2];a[6*e]=4*e+2;a[6*e+1]=4*e+1;a[6*e+2]=4*e;a[6*e+3]=4*e+2;a[6*e+4]=4*e;a[6*e+5]=4*e+3;var g=Math.random();f[4*e]=g;f[4*e+1]=g;f[4*e+2]=g;f[4*e+3]=g}d=C("HALO");d.la[0]={};d.gb=4*b;d.la[0].a_position=c;d.Da.a_halo_bb_vertex=z(b);d.Da.a_random_vals=f;d.Ea=a;return d};a.X_=v;a.IM=function(a,b,d){for(var c=[],f=0;f<a.submeshes.length;f++){var e=
L(a,f,b,null,d,null);e.gb&&c.push(e)}return c.length?1==c.length?c[0]:P(c):C("EMPTY")};a.Q4=function(a,b,d,c){var f=a.kf,e=A(a,"a_position"),g=b.t1,k=b.u1;b=b.VY;for(var n=f,h=n.length/3,l=0;l<h;l++){var t=n[3*l],v=n[3*l+1],r=n[3*l+2],m=e[3*t+1],H=e[3*t+2],x=e[3*v+1],q=e[3*v+2],y=e[3*r+1],p=e[3*r+2];g[3*l]=(e[3*t]+e[3*v]+e[3*r])/3;g[3*l+1]=(m+x+y)/3;g[3*l+2]=(H+q+p)/3}B.wn(g,d,k);d=k.length/3;for(e=0;e<d;e++)g=k[3*e]-c[0],n=k[3*e+1]-c[1],h=k[3*e+2]-c[2],b[e]=g*g+n*n+h*h;c=f;f=b.length;if(!(2>f))for(k=
f,e=!1;1<k||e;)for(1<k&&(k=Math.floor(k/1.247330950103979)),e=!1,d=0;k+d<f;d++)0>b[d]-b[d+k]&&(e=b[d],b[d]=b[d+k],b[d+k]=e,e=c,g=d,n=d+k,h=e[3*g],l=e[3*g+1],t=e[3*g+2],e[3*g]=e[3*n],e[3*g+1]=e[3*n+1],e[3*g+2]=e[3*n+2],e[3*n]=h,e[3*n+1]=l,e[3*n+2]=t,e=!0);f=c;ca.bindBuffer(ca.ELEMENT_ARRAY_BUFFER,a.di);ca.bufferData(ca.ELEMENT_ARRAY_BUFFER,f,ca.DYNAMIC_DRAW)};a.Y3=D;a.HW=function(a,b,d){for(var c=b.length/3,f=a.length/3,e=[],g=Array(3),k=Array(3),n=Array(3),h=0;h<f;h++){for(var l=a[3*h],t=a[3*h+1],
B=a[3*h+2],v=0;3>v;v++)g[v]=b[3*l+v],k[v]=b[3*t+v],n[v]=b[3*B+v];if(d)var v=M(g,k,n),r=M(k,n,g),m=Math.PI-v-r;else m=r=v=1;var H=e,x;x=g;var q=n,y=[],p=[],C=[];ea.subtract(k,x,y);ea.subtract(q,x,p);ea.cross(y,p,C);ea.normalize(C,C);x=C;for(q=0;3>q;q++)y=3*t+q,p=3*B+q,H[3*l+q]=v*x[q],H[y]=r*x[q],H[p]=m*x[q]}if(d)for(var z in d)for(h=d[z],a=0;3>a;a++){b=3*h[0]+a;for(f=1;f<h.length;f++)g=3*h[f]+a,e[b]+=e[g];for(f=1;f<h.length;f++)g=3*h[f]+a,e[g]=e[b]}for(h=0;h<c;h++){d=h;z=e;a=new Float32Array(3);for(b=
0;3>b;b++)f=3*d+b,a[b]=z[f];ea.normalize(a,a);for(b=0;3>b;b++)f=3*d+b,z[f]=a[b]}return e};a.JW=function(a,b,d){for(var c={},f=b.length/3,e=0;e<f;e++){var g=String(b[3*e])+String(b[3*e+1])+String(b[3*e+2]);c[g]=[]}b=a.length;for(e=0;e<b;e++)f=a[e],g=String(d[3*f])+String(d[3*f+1])+String(d[3*f+2]),g in c&&c[g].push(f);return c};a.xF=function(a,b,d,c){var f;f=E(a.la[0].a_position,a);if(d){var e;e=a.la[0].a_tbn;for(var g=ga.Az(e),k=new Float32Array(3*g),n=0;n<g;n++){var h=ga.Db(e,n,aa),h=ea.transformQuat(Z.Fe,
h,wa);k[3*n]=h[0];k[3*n+1]=h[1];k[3*n+2]=h[2]}e=E(k,a)}k=f.length;n=new Float32Array(k);g=wa;for(a=0;a<k;a++){var l=f[a];g.set(l.subarray(0,3));T.set(l.subarray(3,6));ma.set(l.subarray(6));n[a]=Math.sqrt(F(g,T,ma))}g=new Float32Array(k);g[0]=n[0];for(a=1;a<k;a++)g[a]=g[a-1]+n[a];k=g[n.length-1];n=[];for(a=0;a<b;a++){var h=k*Z.oi(c),h=Z.Rx(g,h,0,g.length-1),l=d?e[h]:f[h],t=c;(h=wa)||(h=new Float32Array(3));var B=l[0],v=l[1],r=l[2],m=l[3],H=l[4],x=l[5],q=l[6],y=l[7],l=l[8],p=Z.oi(t),t=Z.oi(t);1<p+t&&
(p=1-p,t=1-t);var C=1-p-t;h[0]=C*B+p*m+t*q;h[1]=C*v+p*H+t*y;h[2]=C*r+p*x+t*l;d?(n[a]=new Float32Array(4),ea.normalize(h,h),h=ua.rotationTo(Z.Fe,h,aa),n[a][0]=h[0],n[a][1]=h[1],n[a][2]=h[2],n[a][3]=h[3]):(n[a]=new Float32Array(3),n[a][0]=h[0],n[a][1]=h[1],n[a][2]=h[2])}return n};a.bz=S;a.Aea=F;a.RM=z;a.tQ=function(a,b,d){a=a.la[0].a_position;for(var c=0;c<a.length;c+=3)a[c]=(a[c]-d[0])*b[0]+d[0],a[c+1]=(a[c+1]-d[1])*b[1]+d[1],a[c+2]=(a[c+2]-d[2])*b[2]+d[2]};a.zK=function(a,b,c){var f=a.P[0].aa;a=a.v.uh;
for(var e=1;e<a.length;e++)a[e].name==b&&(a[e].value=c);for(e=0;e<f.length;e++)if(!f[e].Uh&&f[e].Xf&&!f[e].Yk){b=f[e].Ga;c=R("a_position");var g=n(b.Sc,c);ca.bindBuffer(ca.ARRAY_BUFFER,d(b.Vd,c));var k=b.bd.a_position;c=f[e];var h=a;if(k){for(var l=k.offset,k=k.length+l,t=c.Ga.wb[0].fh.a_position,B=l;B<k;B++)g[B]=t[B-l];for(B=1;B<c.Ga.wb.length;B++){var t=c.Ga.wb[B].fh.a_position,v=h[B].value;if(v)for(var r=l;r<k;r++)g[r]+=v*t[r-l]}ca.bufferSubData(ca.ARRAY_BUFFER,Z.xk*l,g.subarray(l))}g=R("a_tbn");
c=n(b.Sc,g);ca.bindBuffer(ca.ARRAY_BUFFER,d(b.Vd,g));l=b.bd.a_tbn;b=f[e];g=a;if(l){h=l.offset;l=l.length+h;k=b.Ga.wb[0].fh.a_tbn;for(B=h;B<l;B+=ga.OJ){t=ga.identity(Aa);v=(B-h)/ga.OJ;for(r=1;r<b.Ga.wb.length;r++){var m=g[r].value;if(m){var H=ga.Io(b.Ga.wb[r].fh.a_tbn,v,da),m=ga.slerp(ga.identity(ba),H,m,da);ga.SA(m,t,t)}}v=ga.Io(k,v,da);t=ga.SA(t,v,da);c[B]=Z.Xq(t[0]);c[B+1]=Z.Xq(t[1]);c[B+2]=Z.Xq(t[2]);c[B+3]=Z.Xq(t[3])}ca.bufferSubData(ca.ARRAY_BUFFER,Z.xk*h,c.subarray(h))}}};a.xE=function(a){return a.v.Xf};
a.Yaa=function(a){var b=[];if(a.v)for(var d=1;d<a.v.uh.length;d++)b.push(a.v.uh[d].name);return b};a.Xaa=function(a,b){if(a.v)for(var d=1;d<a.v.uh.length;d++)if(b==a.v.uh[d].name)return a.v.uh[d].value;return 0};a.b0=function(a,b){var d=a.v.uh;if(d)for(var c=1;c<d.length;c++)if(d[c].name==b)return!0;return!1};a.XF=function(a){return a&&a.v&&a.v.ef?!0:!1};a.YY=function(b,d){var c=b.Ga;if(c){for(var f=d.length/3/2,e=new Float32Array(12*f),g=new Float32Array(12*f),k=new Uint16Array(6*f),n=0;n<f;n++){var h=
6*n,l=6*n+3,B=d[h],v=d[h+1],h=d[h+2],m=d[l],H=d[l+1],l=d[l+2],x=m-B,q=H-v,p=l-h;e[12*n]=B;e[12*n+1]=v;e[12*n+2]=h;g[12*n]=x;g[12*n+1]=q;g[12*n+2]=p;e[12*n+3]=m;e[12*n+4]=H;e[12*n+5]=l;g[12*n+3]=-x;g[12*n+4]=-q;g[12*n+5]=-p;e[12*n+6]=B;e[12*n+7]=v;e[12*n+8]=h;g[12*n+6]=-x;g[12*n+7]=-q;g[12*n+8]=-p;e[12*n+9]=m;e[12*n+10]=H;e[12*n+11]=l;g[12*n+9]=x;g[12*n+10]=q;g[12*n+11]=p;k[6*n]=4*n;k[6*n+1]=4*n+1;k[6*n+2]=4*n+2;k[6*n+3]=4*n;k[6*n+4]=4*n+3;k[6*n+5]=4*n+1}var n=0,C;for(C in c.bd)f=c.bd[C],n+=e.length/
3*f.Qc;f={};f["float"]=n;n=c.Sc=r(f);a.T4(c,b.Mj,k);k=0;for(C in c.bd)switch(f=c.bd[C],C){case "a_position":t(n,C,e,k);f.offset=k;f.length=e.length;k+=f.length;break;case "a_direction":t(n,C,g,k);f.offset=k;f.length=g.length;k+=f.length;break;default:f.offset=k,f.length=e.length/3*f.Qc,B=new Float32Array(f.length),t(n,C,B,k),k+=f.length}y(c)}};a.oX=function(a){if(a){var b=q();if(a.kf)switch(a.Lo){case ca.UNSIGNED_SHORT:b.kf=new Uint16Array(a.kf);break;case ca.UNSIGNED_INT:b.kf=new Uint32Array(a.kf)}else b.kf=
null;for(var d=b,c=a.Sc,f=[],e=0;e<c.length;e++){var g=c[e].Dn,k=c[e].type;f.push({Dn:new g.constructor(g),type:k})}d.Sc=f;b.Lo=a.Lo;b.count=a.count;b.bd=Z.X(a.bd);b.usage=a.usage;b.Kq=a.Kq;b.Nq=a.Nq;b.di=null;b.eA=Z.X(a.eA);b.wb=Z.X(a.wb);b.Qo=a.Qo;b.Nh=a.Nh}else b=null;return b};a.ei=C;a.rX=function(a){var b=C(a.name);b.gb=a.gb;b.Ea=Z.X(a.Ea);b.la=Z.X(a.la);b.Da=Z.X(a.Da);b.wb=Z.X(a.wb);H.Gj(a.Dd.Aa,b.Dd.Aa);H.Gq(a.Dd.Ib,b.Dd.Ib);H.tm(a.Dd.yc,b.Dd.yc);H.xX(a.Dd.Id,b.Dd.Id);b.Nf=Z.X(a.Nf);return b};
a.reset=function(){ca=null};a.Wba=r;a.U2=W;a.fba=d;a.RF=n;a.naa=X;a.Kz=R;a.RN=function(a){switch(R(a)){case "float":return Z.xk;case "short":return Z.ut;case "unsigned_byte":return Z.yD;default:return Z.xk}};a.C_=function(a){switch(R(a)){case "float":return ca.FLOAT;case "short":return ca.SHORT;case "unsigned_byte":return ca.UNSIGNED_BYTE;default:return ca.FLOAT}};a.IS=t;a.Kea=function(a,b){switch(R(a)){case "short":return Z.tR(b);case "unsigned_byte":return Z.fS(b)}return b};a.Jea=function(a,b){switch(R(a)){case "short":return Z.Xq(b);
case "unsigned_byte":return Z.gS(b)}return b};a.P8=fa;a.N8=la};b4w.module.__subscene=function(a,u){function m(a,b){a.Kr=b;a.kv=new Float32Array(3*b);a.bp=new Float32Array(4*b);a.ap=new Float32Array(4*b)}function c(a){a={type:a,Hb:"",Co:!1,Bb:!1,fB:!1,Ht:!1,Er:!1,Mq:0,lg:0,xm:[],debug_view_mode:0,debug_colors_seed:0,Gy:1,wu:!1,time:0,F:null,Xk:null,ro:[],ib:[],nb:[],wi:[],pj:new Float32Array(3),Nd:new Float32Array(3),pe:new Float32Array(4),rg:new Float32Array(4),kg:new Float32Array(16),ks:0,eh:0,Kr:0,kv:null,bp:null,ap:null,WO:null,re:new Float32Array(3),Ee:new Float32Array(3),
ls:new Float32Array(4),EC:new Float32Array(3),DC:new Float32Array([0,0,1]),FC:new Float32Array(4),hs:new Float32Array(3),eC:"",Xx:0,mp:0,xu:0,Vo:!1,bj:new Float32Array(3),nj:!1,Ut:0,oj:new Float32Array(4),vk:0,ah:!1,Qk:0,ay:new Float32Array(2),Pk:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,mn:new Float32Array(3),
rs:!1,os:!1,ps:0,ts:0,ss:0,qs:0,zp:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Tm:0,Vr:0,pn:0,qu:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,Ls:null,Ks:null,Bw:null,Cl:null,ic:!1,nz:"",Bq:0,yq:0,Aq:0,Un:!0,average_luminance:0,Pt:0,Eu:0,mb_decay_threshold:0,mb_factor:0,NA:0,Fv:"",hy:"",qG:new Float32Array(2),uA:0,Tx:2,zq:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,lw:new Float32Array(2),
Lb:new Float32Array(2),Zk:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,th:0,rv:!0,dC:!1,lC:!1,hC:!1,iC:!1,kC:!1,jC:!1,cC:"",Fp:!1,Gp:!1,Hp:!1,pc:!0,enqueue:!0,Gb:!0,Jb:!0,me:!0,Ta:!0,vf:1};a.Lb[0]=1;a.Lb[1]=1;a.Zk[2]=.5;a.Zk[3]=.5;a.zp=8;return a}function b(a,b){return a==b?0:a>b?1:-1}function p(a,c){return b(a.dg,c.dg)||b(a.ol,c.ol)||b(a.Qd,c.Qd)||b(a.zb.dO,c.zb.dO)||b(a.zb.bI,c.zb.bI)}var h=u("__camera"),G=u("__config"),q=u("__util"),w=u("__boundings"),
A=G.Ad;a.Wb=0;a.Gd=1;a.Dh=2;a.He=3;a.Zd=4;a.Tg=5;a.ag=6;a.Ge=7;a.$d=8;a.Ug=9;a.yk=10;a.nc=11;a.ft=13;a.px=14;a.Cf=15;a.zi=16;a.Ai=17;a.Qp=18;a.eJ=19;a.sx=20;a.SD=21;a.ZI=22;a.wt=23;a.qx=24;a.QD=25;a.rx=26;a.AD=27;a.tj=28;a.zD=29;a.dt=30;a.Bi=31;a.pq=32;a.mq=33;a.$w=34;a.Xe=35;a.BD=36;a.Eh=37;a.LUMINANCE=38;a.bJ=39;a.kx=40;a.Ys=41;a.sV=42;a.Bk=43;a.st=44;a.NJ=45;a.wY=function(a,b,q,x){var e=c(8);e.qu=a;e.self_shadow_polygon_offset=q.self_shadow_polygon_offset;e.th=b;switch(q.Xi[b]){case "SPOT":case "POINT":e.F=
h.Ld(h.od);h.RQ(e.F,q.CR[b],q.bu[b],q.au[b]);break;default:e.F=h.Ld(h.Ck)}m(e,x);return e};a.sX=function(a){var b=c(a.type);b.Hb=a.Hb;b.Co=a.Co;b.pc=a.pc;b.enqueue=a.enqueue;b.Gb=a.Gb;b.Jb=a.Jb;b.me=a.me;b.Bb=a.Bb;b.fB=a.fB;b.Ht=a.Ht;b.Er=a.Er;b.Ta=a.Ta;b.Mq=0;b.lg=0;b.xm=[];b.debug_view_mode=a.debug_view_mode;b.debug_colors_seed=a.debug_colors_seed;b.Gy=a.Gy;b.wu=a.wu;b.time=a.time;b.F=h.fd(a.F,!0);b.Xk=q.X(a.Xk);b.ro=q.X(a.ro);b.ib=q.X(a.ib);b.nb=q.X(a.nb);b.wi=q.X(a.wi);b.pj.set(a.pj);b.Nd.set(a.Nd);
b.pe.set(a.pe);b.rg.set(a.rg);b.kg.set(a.kg);b.ks=a.ks;b.eh=a.eh;b.Kr=a.Kr;b.kv=q.X(a.kv);b.bp=q.X(a.bp);b.ap=q.X(a.ap);b.WO=q.X(a.WO);b.re.set(a.re);b.Ee.set(a.Ee);b.ls.set(a.ls);b.EC.set(a.EC);b.DC.set(a.DC);b.FC.set(a.FC);b.hs.set(a.hs);b.eC=a.eC;b.Xx=a.Xx;b.mp=a.mp;b.xu=a.xu;b.Vo=a.Vo;b.bj.set(a.bj);b.nj=a.nj;b.Ut=a.Ut;b.oj.set(a.oj);b.vk=a.vk;b.ah=a.ah;b.Qk=a.Qk;b.ay.set(a.ay);b.Pk=a.Pk;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.mie_brightness=
a.mie_brightness;b.rayleigh_brightness=a.rayleigh_brightness;b.spot_brightness=a.spot_brightness;b.mie_strength=a.mie_strength;b.rayleigh_strength=a.rayleigh_strength;b.scatter_strength=a.scatter_strength;b.mie_collection_power=a.mie_collection_power;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_distribution=a.mie_distribution;b.mn.set(a.mn);b.rs=a.rs;b.os=a.os;b.ps=a.ps;b.ts=a.ts;b.ss=a.ss;b.qs=a.qs;b.zp=a.zp;b.ssao_only=a.ssao_only;b.ssao_white=a.ssao_white;b.brightness=a.brightness;
b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;b.god_rays_intensity=a.god_rays_intensity;b.Tm=a.Tm;b.Vr=a.Vr;b.pn=a.pn;b.qu=a.qu;b.self_shadow_polygon_offset=a.self_shadow_polygon_offset;b.self_shadow_normal_offset=a.self_shadow_normal_offset;b.Ls=q.X(a.Ls);b.Ks=q.X(a.Ks);b.Bw=q.X(a.Bw);b.Cl=q.X(a.Cl);b.ic=a.ic;b.nz=a.nz;b.Bq=a.Bq;b.yq=a.yq;b.Aq=a.Aq;b.Un=a.Un;b.average_luminance=a.average_luminance;b.Pt=a.Pt;b.Eu=a.Eu;b.mb_decay_threshold=a.mb_decay_threshold;b.mb_factor=a.mb_factor;
b.NA=a.NA;b.Fv=a.Fv;b.hy=a.hy;b.qG.set(a.qG);b.uA=a.uA;b.Tx=a.Tx;b.zq=a.zq;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.vf=a.vf;b.lw.set(a.lw);b.Lb.set(a.Lb);b.Zk.set(a.Zk);b.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);b.enable_hmd_stereo=a.enable_hmd_stereo;b.th=a.th;b.rv=a.rv;b.dC=a.dC;b.lC=a.lC;b.hC=a.hC;b.iC=a.iC;b.kC=a.kC;b.jC=a.jC;
b.cC=a.cC;b.Fp=a.Fp;b.Gp=a.Gp;b.Hp=a.Hp;return b};a.pY=function(){var a=c(10);a.F=h.Ld(h.Di);return a};a.$c=function(a){var b=c(11);b.Gb=!1;b.Jb=!1;b.me=!1;b.ic=!0;b.F=h.Ld(h.Wc);b.Fv=a;switch(a){case "NONE":b.Lb[0]=1;b.Lb[1]=1;break;case "GRAYSCALE":b.Lb[0]=1;b.Lb[1]=1;break;case "X_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_BLUR":b.Lb[0]=0;b.Lb[1]=1;break;case "X_GLOW_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_GLOW_BLUR":b.Lb[0]=0;b.Lb[1]=1;break;case "X_BLOOM_BLUR":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_BLOOM_BLUR":b.Lb[0]=
0;b.Lb[1]=1;break;case "X_DOF_BLUR":b.Lb[0]=1;b.Lb[1]=1;break;case "Y_DOF_BLUR":b.Lb[0]=1;b.Lb[1]=1;break;case "X_ALPHA_BLUR":b.Lb[0]=1;b.Lb[1]=0;b.vf=3;break;case "Y_ALPHA_BLUR":b.Lb[0]=0;b.Lb[1]=1;b.vf=3;break;case "X_EXTEND":b.Lb[0]=1;b.Lb[1]=0;break;case "Y_EXTEND":b.Lb[0]=0;b.Lb[1]=1;break;default:q.J("Wrong postprocessing effect: "+a)}return b};a.nY=function(a,b){var e=c(13);e.Gb=!1;e.Jb=!1;e.me=!1;e.small_glow_mask_coeff=b.Tj.small_glow_mask_coeff;e.large_glow_mask_coeff=b.Tj.large_glow_mask_coeff;
e.small_glow_mask_width=b.Tj.small_glow_mask_width;e.large_glow_mask_width=b.Tj.large_glow_mask_width;e.F=a;e.ic=!0;return e};a.qo=function(a,b,h,x,p,w,A,l,u){var e=c(a);0==a?(e.Gb=!0,e.Jb=h,e.Bb=!1):1==a?(e.Gb=!1,e.Jb=!1,e.Bb=!0):2==a?(e.Gb=!1,e.Jb=!0,e.Bb=!0):3==a||4==a?(e.Gb=!0,e.Jb=!0,e.Bb=!1):5==a||6==a?(e.Gb=!1,e.Jb=!1,e.Bb=!0):7==a?(e.Gb=!0,e.Jb=!1,e.Bb=!0):q.J("wrong main subscene type");e.Bb&&l&&(e.self_shadow_normal_offset=l.self_shadow_normal_offset);e.F=b;if(a=A.xp)e.ls.set([a.VK,a.kO,
a.$S,a.ZS]),e.hs.set(a.color),e.ks=a.Pa;e.re.set(A.re);e.Ee.set(A.Ee);e.eh=A.eh;e.pe=w.pe;e.rg=w.rg;x&&(x.pe&&e.oj.set(x.pe),e.vk=x.vk,x.ah&&u&&(e.ah=!0,e.Qk=x.OW,e.Pk=x.NW,e.ay.set(x.PW)));m(e,p);return e};a.xy=function(){var a=c(14);a.ic=!0;a.F=h.Ld(h.Wc);return a};a.cM=function(a,b,h){var e=c(15);b&&(e.type=16,e.Gb=!1,e.Jb=!0);e.enqueue=!1;e.F=a;m(e,h);return e};a.lY=function(a){var b=c(17);b.pc=!1;b.Gb=!1;b.Jb=!1;b.F=a;return b};a.hY=function(a){var b=c(18);b.Gb=!0;b.Jb=!1;b.F=a;return b};a.xY=
function(a,b){var e=c(9);e.F=a;m(e,b);return e};a.mY=function(a){var b=c(19);b.Gb=!1;b.Jb=!1;b.F=a;b.ic=!0;return b};a.zY=function(a,b,h){var e=c(20);e.Gb=!1;e.Jb=!1;e.me=!1;e.F=a;e.pe=b.pe;e.oj.set(b.pe);e.ts=h.radius_increase;e.rs=h.e0;e.ss=h.influence;e.qs=h.dist_factor;e.zp=h.S2;e.ic=!0;return e};a.AY=function(a,b){var e=c(21);e.Gb=!1;e.Jb=!1;e.me=!1;e.F=a;e.os=b.uW;e.ps=b.blur_discard_value;e.ic=!0;return e};a.gY=function(a){var b=c(22);b.Gb=!1;b.Jb=!1;b.me=!1;b.vf=1/a.Wr;b.nz=a.kK;b.F=h.Ld(h.Wc);
b.ic=!0;return b};a.XE=function(a,b){var e=c(a);e.Gb=23==a||24==a?!0:!1;e.Jb=!1;e.me=!1;e.vf=1/b.Wr;e.F=h.Ld(h.Wc);23==a&&(e.F0=new Float32Array(4));e.ic=!0;return e};a.kY=function(a,b,m,q){var e=c(27);e.Gb=!1;e.Jb=!1;e.me=!1;e.F=h.Ld(h.Wc);e.brightness=a;e.contrast=b;e.exposure=m;e.saturation=q;e.ic=!0;return e};a.sY=function(a,b){var e=c(28);e.Gb=!1;e.Jb=!1;e.me=!1;e.F=h.Ld(h.Wc);e.Ht=!0;e.mb_decay_threshold=a;e.mb_factor=b;e.ic=!0;return e};a.UE=function(a,b){var e=c(29);e.Gb=!1;e.Jb=!1;e.me=!1;
e.F=a;e.vf=e.F.dof_power;e.hy=b;e.ic=!0;return e};a.dM=function(a){var b=c(30);b.Gb=!1;b.Jb=!1;b.me=!1;b.F=a;b.vf=b.F.dof_power;b.ic=!0;return b};a.uY=function(a,b){var e=c(31);e.me=!1;e.F=a;m(e,b);return e};a.tY=function(a){var b=c(32);A.outlining_overview_mode?b.bj.set(A.bj):b.bj.set(a.bj);b.mp=a.mp;b.Eu=5;b.Pt=3;b.me=!1;b.F=h.Ld(h.Wc);b.ic=!0;return b};a.WE=function(a,b,h,q,p,w,A){var e=c(33);e.Gb=!1;e.Jb=!1;e.me=!1;e.re=new Float32Array([1,1,1]);e.Ee=new Float32Array([1,1,1]);e.eh=1;e.fB=q;e.nj=
b;e.Vr=p;e.Tm=h;e.pn=A;e.F=a;m(e,w);return e};a.oY=function(a,b){var e=c(34);e.Gb=!1;e.Jb=!1;e.me=!1;e.F=h.Ld(h.Wc);e.god_rays_intensity=a;m(e,b);e.ic=!0;return e};a.yY=function(a,b,p,x){var e=c(35);e.enqueue=!1;e.Gb=!1;e.Jb=!1;e.me=!1;var g=h.Ld(h.Wc);g.width=x;g.height=x;e.F=g;e.Xk=q.SZ();m(e,b);e.re=new Float32Array([1,1,1]);e.Ee=new Float32Array([1,1,1]);e.eh=1;e.mn.set(p.mn);e.procedural_skydome=p.procedural_skydome;e.use_as_environment_lighting=p.use_as_environment_lighting;e.rayleigh_brightness=
p.rayleigh_brightness;e.mie_brightness=p.mie_brightness;e.spot_brightness=p.spot_brightness;e.scatter_strength=p.scatter_strength;e.rayleigh_strength=p.rayleigh_strength;e.mie_strength=p.mie_strength;e.rayleigh_collection_power=p.rayleigh_collection_power;e.mie_collection_power=p.mie_collection_power;e.mie_distribution=p.mie_distribution;if(a){e.re.set(a.re);e.Ee.set(a.Ee);e.eh=a.eh;if(b=a.xp)e.ls.set([b.VK,b.kO,b.$S,b.ZS]),e.hs.set(b.color),e.ks=b.Pa,e.dC=b.invert,e.lC=b.ES,e.hC=b.zS,e.iC=b.AS,e.kC=
b.CS,e.jC=b.BS,e.cC=b.WK;e.Fp=a.Fp;e.Gp=a.Gp;e.Hp=a.Hp;e.eC=a.Qe}return e};a.VE=function(){var a=c(36);a.Gb=!1;a.Jb=!1;a.F=h.Ld(h.Wc);a.ic=!0;return a};a.BY=function(a){var b=c(37);b.Gb=!1;b.Jb=!1;b.Hb=a?"HMD":"ANAGLYPH";b.F=h.Ld(h.Wc);b.ic=!0;return b};a.qY=function(){var a=c(38);a.Gb=!1;a.Jb=!1;a.F=h.Ld(h.Wc);a.ic=!0;return a};a.iY=function(){var a=c(39);a.Gb=!1;a.Jb=!1;a.F=h.Ld(h.Wc);a.ic=!0;return a};a.ZX=function(){var a=c(45);a.Gb=!1;a.Jb=!1;a.F=h.Ld(h.Wc);a.ic=!0;return a};a.rY=function(a,
b,h,q){var e=c(40);e.Gb=!1;e.Jb=!1;e.Bq=a;e.Aq=b;e.F=q;m(e,h);e.ic=!0;return e};a.jY=function(a){var b=c(41);b.Gb=!1;b.Jb=!1;b.F=h.Ld(h.Wc);b.yq=a;b.Tx=5;b.ic=!0;return b};a.F9=function(a){var b=c(42);b.Gb=!1;b.Jb=!1;b.F=a;b.ic=!0;return b};a.eM=function(){var a=c(43);a.enqueue=!1;return a};a.vY=function(){var a=c(44);a.ic=!0;return a};a.CC=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";
case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.Fv.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";
case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";
case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};a.qd=function(a,b){for(var c=b.Fa,e=c.zb,g=c.dg,h=0;h<a.ib.length;h++){var m=a.ib[h].Ra,l=m.indexOf(b);if(-1!=l&&(m.splice(l,1),!m.length)){a.ib.splice(h,1);break}}h=a.Bb?c.Qd:0;a:{m=a.ib;for(l=0;l<m.length;l++){var q=m[l];if(q.zb==e&&q.dg==g&&q.Qd==h&&q.ol==c.ol){m=q;break a}}m=null}m?m.Ra.push(b):(a.ib.push({zb:e,Ra:[b],dg:g,Qd:h,ol:c.ol,pc:!0}),a.rv=!0)};
a.Xj=function(a,b,c){b={pc:!0,lF:[!0,!0,!0,!0,!0,!0],oh:b,Fa:a,YI:c||null,eA:null};a.$f&&a.Ga.kf&&(c=a.Ga.kf,b.eA={t1:new Float32Array(c.length),u1:new Float32Array(c.length),VY:new Float32Array(c.length/3),aT:new Float32Array(3),nW:w.GW(a.Cb.Ef)});return b};a.X3=function(a){a.ib.sort(p);a.rv=!1}};b4w.module.__textures=function(a,u){function m(){pa||(pa=O.createFramebuffer());return pa}function c(){oa||(oa=O.createTexture());return oa}function b(){return{type:0,source:"",ew:"",width:0,height:0,iu:1,anisotropic_filtering:0,Ol:1024,Am:!1,Mh:null,Eb:0,Mb:null,Zf:null,Om:!1,Fw:-1,qb:null,hD:"",Um:0,Oi:0,Ha:0,qc:0,Dm:0,ii:!1,ij:1,yi:!1,oP:0,ie:null,Vv:0,Uv:0,Jl:-1,Xv:!1,hn:-1,Dw:!1,OI:!1,Xl:!1,Cn:!1,repeat:!0,Mo:"",ir:"",No:"",cG:"",bG:"",Im:""}}function p(a,b,d){a.No=b.uuid;a.ir=b.filepath;a.cG=
b.source;a.bG=b.name;a.Mo=Z.Bl(d+b.filepath);a.Im=b.Fh;-1==Q.qa.indexOf(a)&&(Q.qa.push(a),Q.yr.push(!1))}function h(a,b,d){var c=-1<b.indexOf(".pvr");a.Im=-1<b.indexOf(".dds")?"dds":c?"pvr":"";a.ir=b;a.Mo=d;a.No=Z.pz();Q.qa.push(a);Q.yr.push(!0)}function G(d,c,f){var e=b();e.type=d;e.source="NONE";e.yi=f;if(d==a.vx||d==a.tx||d==a.wx||d==a.ux)e.Zf=O.createRenderbuffer();else{var g=O.TEXTURE_2D,k=O.createTexture();O.bindTexture(g,k);O.texParameteri(g,O.TEXTURE_MAG_FILTER,O.LINEAR);f?O.texParameteri(g,
O.TEXTURE_MIN_FILTER,Oa[ma.Sl]):O.texParameteri(g,O.TEXTURE_MIN_FILTER,O.LINEAR);O.texParameteri(g,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE);O.texParameteri(g,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE);f=l(e);var n=I(e),h=K(e);O.texImage2D(g,0,n,1,1,0,f,h,d==a.Qn?null:new Uint8Array([204,204,204,255]));ma.gu&&c&&O.texParameterf(g,O.TEXTURE_COMPARE_MODE,O.COMPARE_REF_TO_TEXTURE);O.bindTexture(g,null);e.Eb=g;e.Mb=k}return e}function q(a){var b=a.Eb;O.bindTexture(b,a.Mb);var d=l(a),c=I(a),f=K(a),e=a.Mh.canvas;O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,
!0);O.texImage2D(b,0,c,d,f,e);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1);a.Am&&O.generateMipmap(b);O.bindTexture(b,null);a.width=e.width;a.height=e.height}function w(a){var b=a.Eb;O.bindTexture(b,a.Mb);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!0);4!=a.qb.length?a.ii?e(a,a.qb,a.width*a.ij,a.height*a.ij,!1):O.texImage2D(b,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,a.qb):O.texImage2D(b,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,a.qb);O.bindTexture(b,null)}function A(a){var b=a.Eb;O.bindTexture(b,a.Mb);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,
!0);a.ii?e(a,a.ie[a.Jl],a.width*a.ij,a.height*a.ij,!1):O.texImage2D(b,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,a.ie[a.Jl]);O.bindTexture(b,null)}function g(){ca||(ca=document.createElement("canvas"));return ca}function e(a,b,d,f,e){e||(x(O.TEXTURE_2D),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,b));O.bindTexture(O.TEXTURE_2D,null);b=m();e=c();ea.$Y(a,d,f,b,e)}function y(a,b,d){for(var c=0;6>c;c++){var f=Na[c],e=ta[c],k=g();k.width=d;k.height=d;var n=k.getContext("2d");n.translate(d/2,d/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==
f?(n.rotate(Math.PI/2),n.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==f?(n.rotate(Math.PI/2),n.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==f||"TEXTURE_CUBE_MAP_POSITIVE_Z"==f?n.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=f&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=f||n.scale(-1,1);n.drawImage(a,e[0]*b,e[1]*b,b,b,-d/2,-d/2,d,d);ma.nM?O.texImage2D(O[f],0,O.RGBA,d,d,0,O.RGBA,O.UNSIGNED_BYTE,new Uint8Array(n.getImageData(0,0,d,d).data.buffer)):O.texImage2D(O[f],0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,k)}}function x(a){O.bindTexture(a,
null);var b=c();O.bindTexture(a,b);O.texParameteri(a,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE);O.texParameteri(a,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE);O.texParameteri(a,O.TEXTURE_MAG_FILTER,O.LINEAR);O.texParameteri(a,O.TEXTURE_MIN_FILTER,O.LINEAR)}function P(a,b,d){var f=a.source,k=a.Mb,n=a.Eb,h=a.Im,l=a.ir,t;O.bindTexture(n,k);a.repeat?(O.texParameteri(n,O.TEXTURE_WRAP_S,O.REPEAT),O.texParameteri(n,O.TEXTURE_WRAP_T,O.REPEAT)):(O.texParameteri(n,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(n,O.TEXTURE_WRAP_T,
O.CLAMP_TO_EDGE));a.Om||"NODE_TEX"==f?O.texParameteri(n,O.TEXTURE_MIN_FILTER,O.LINEAR):O.texParameteri(n,O.TEXTURE_MIN_FILTER,Oa[ma.Sl]);a.anisotropic_filtering&&O.texParameterf(n,ua.zF().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(t=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==f)if(t)O.texImage2D(n,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(h){t=za.ZN(b,h);d=Z.Zt(t.width)||Z.Zt(t.height);if(t.width>aa.jc||t.height>aa.jc){ga.error('Image "'+
l+'" has unsupported size: '+t.width+"x"+t.height+". Max available: "+aa.jc+"x"+aa.jc+".");return}f=t.width;t=t.height;if(d||"pvr"==h)a.ii=!0,x(n),f=L(f*a.ij),t=L(t*a.ij);"dds"==h?za.v5(O,ua.IN(),b,!0):"pvr"==h&&za.w5(O,ua.FN(),b);a.ii&&(e(a,null,f,t,!0),O.bindTexture(n,k),O.generateMipmap(n));a.width=f;a.height=t;a.iu=za.l_(b,h)}else{O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!0);a.Om?ma.Wv?(f=b[0].width,t=b[0].height):(f=b.videoWidth,t=b.videoHeight):(f=b.width,t=b.height);a.width=f;a.height=t;if(f>aa.jc||
t>aa.jc)ga.warn('Image "'+l+'" has unsupported size: '+f+"x"+t+". Max available: "+aa.jc+"x"+aa.jc+". Reduced image size will be used."),a.ij=Math.min(aa.jc/f,aa.jc/t),a.ii=!0;a.Om&&(d in na||(na[d]={}),na[d][a.hD]=a,ma.Wv?(a.ie=b,a.Vv=b.length,a.Oi=a.Uv*a.Um/b.length,b=b[0]):(a.qb=b,a.qb.loop=a.Xl,a.Oi=b.duration?a.Um/b.duration:B.fe(),ja.wM||(b.playbackRate=B.fe()/a.Oi,ja.xL&&2<b.playbackRate&&(b.playbackRate=2)),J(a)));f=L(a.width*a.ij);t=L(a.height*a.ij);a.ii||ma.nQ?(l=g(),h=l.getContext("2d"),
l.width=f,l.height=t,h.drawImage(b,0,0,a.width,a.height,0,0,f,t),ma.nM?O.texImage2D(n,0,O.RGBA,f,t,0,O.RGBA,O.UNSIGNED_BYTE,new Uint8Array(h.getImageData(0,0,f,t).data.buffer)):O.texImage2D(n,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,l)):ma.Nb||!Z.Zt(a.width)&&!Z.Zt(a.height)?O.texImage2D(n,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,b):(e(a,b,f,t,!1),a.ii=!0);a.width=f;a.height=t;a.Om||(O.bindTexture(n,k),O.generateMipmap(n))}else if("ENVIRONMENT_MAP"==f)if(t){for(k=0;6>k;k++)O.texImage2D(O["TEXTURE_CUBE_MAP_"+Na[k]],
0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){ga.error('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}k=b.width/3;k>aa.mh?(ga.warn('Cubemap Image "'+l+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*aa.mh+"x"+2*aa.mh+". Reduced image size will be used."),l=L(aa.mh/k*k),a.ii=!0):(l=L(k),!ma.Nb&&
(3*l>aa.jc||2*l>aa.jc)&&(a.ii=!0));if(a.ii||ma.Rv)y(b,k,l);else{h=b;f=l;x(O.TEXTURE_2D);O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,h);O.bindTexture(O.TEXTURE_2D,null);for(h=0;6>h;h++)O.texImage2D(O.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,O.RGBA,f,f,0,O.RGBA,O.UNSIGNED_BYTE,null);O.bindTexture(a.Eb,null);h=m();O.bindFramebuffer(O.FRAMEBUFFER,h);t=c();for(h=0;6>h;h++)ea.ZY(a,O[Na[h]],f,k,t,h);O.bindFramebuffer(O.FRAMEBUFFER,null);O.bindTexture(a.Eb,a.Mb);O.texParameteri(a.Eb,O.TEXTURE_MIN_FILTER,
Oa[ma.Sl]);O.texParameteri(a.Eb,O.TEXTURE_MAG_FILTER,O.LINEAR)}ha.aX()&&(ga.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),y(b,k,la.HJ));a.width=3*l;a.height=2*l;O.generateMipmap(n)}else"NODE_TEX"==f&&(O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1),O.texImage2D(n,0,O.RGBA,b.width,b.height,0,O.RGBA,O.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);O.bindTexture(n,null)}function J(a){a.qb.oncanplay=function(){S(a)&&w(a)}}function L(a){return Z.Zt(a)?Z.ja(Math.pow(2,
(a|0).toString(2).length),2,aa.jc):a}function l(b){var d;switch(b.type){case a.Ci:d=O.RGBA;break;case a.xx:d=O.RGB;break;case a.zt:d=O.RGBA;break;case a.At:d=O.RGB;break;case a.Qn:d=O.DEPTH_COMPONENT;break;default:Z.J("Wrong texture type")}return d}function I(b){var d;switch(b.type){case a.Ci:d=ma.Nb?O.RGBA8:O.RGBA;break;case a.xx:d=ma.Nb?O.RGB8:O.RGB;break;case a.zt:d=ma.Nb?O.RGBA8:O.RGBA;break;case a.At:d=ma.Nb?O.RGB8:O.RGB;break;case a.Qn:d=ma.Nb?v(aa.Pq):O.DEPTH_COMPONENT;break;default:Z.J("Wrong texture type")}return d}
function v(a){switch(a){case 16:a=O.DEPTH_COMPONENT16;break;case 24:a=O.DEPTH_COMPONENT24;break;case 32:a=O.DEPTH_COMPONENT32F;break;default:a=O.DEPTH_COMPONENT24}return a}function K(b){var d;switch(b.type){case a.Ci:d=O.UNSIGNED_BYTE;break;case a.xx:d=O.UNSIGNED_BYTE;break;case a.zt:d=O.FLOAT;break;case a.At:d=O.FLOAT;break;case a.Qn:d=O.UNSIGNED_INT;break;default:Z.J("Wrong texture type")}return d}function k(a){a.qb?a.qb.play():a.ie&&(a.Xv=!0);a.Dw=!1}function D(a){a.qb?a.qb.pause():a.ie&&(a.Xv=
!1);a.Dw=!0}function M(a){a.qb?a.qb.currentTime=a.qc/a.Oi:a.ie&&(a.Jl=F(a,a.qc),A(a))}function E(a){return a.qb?!a.qb.paused:a.ie?a.Xv:!1}function S(a){return a.qb||a.ie?a.qb?2<=a.qb.readyState:!0:0}function F(a,b){return Math.round(b*a.Vv/a.Um)}function z(a,b){if(da.ba(a))return r(a,b);for(var d=a.ov,c=0;c<d.length;c++){var f=r(d[c],b);if(f)return f}return null}function C(a,b,d){if(da.ba(a))f(a,b,d);else{a=a.ov;for(var c=0;c<a.length;c++)f(a[c],b,d)}}function r(a,b){var d=a.P;if(d.length)for(var d=
d[0].aa,c=0;c<d.length;c++){var f=d[c];if("MAIN"==f.type||"SKY"==f.type)for(var e=0;e<f.qa.length;e++)if(f.gg[e]==b)return f.qa[e]}return null}function f(a,b,d){a=a.P;if(a.length){a=a[0].aa;for(var c=0;c<a.length;c++){var f=a[c];if("MAIN"==f.type)for(var e=0;e<f.qa.length;e++)if(f.gg[e]==b){var g=f.qa[e];f.qa[e]=d;R(g)}}}}function W(a,b){var d=a.P;if(d.length)for(var d=d[0].aa,c=0;c<d.length;c++){var f=d[c];if("MAIN"==f.type)for(var e=0;e<f.qa.length;e++){var g=f.qa[e],k=f.gg[e];-1==b.indexOf(k)&&
"NODE_TEX"!=g.source&&b.push(k)}}}function d(a,b,d){var c=a.elements;a=a.interpolation;for(var f=0;f<b;f++){var e=f/(b-1),g=n(c,e,!0),k=X(c,e,!0);if(g&&k)if("CONSTANT"==a)d.push.apply(d,g.color);else{var h=d,l=g,t=k;l==t?h.push.apply(h,l.color):(h.push(ba.zA(t.color[0],t.position,l.color[0],l.position,e)),h.push(ba.zA(t.color[1],t.position,l.color[1],l.position,e)),h.push(ba.zA(t.color[2],t.position,l.color[2],l.position,e)),h.push(ba.zA(t.color[3],t.position,l.color[3],l.position,e)))}k&&!g&&d.push.apply(d,
k.color);g&&!k&&d.push.apply(d,g.color)}}function n(a,b,d){for(var c=null,f=0;f<a.length;f++){var e=d?b-a[f].position:b-a[f][1][0];0<=e&&(c?e<=(d?b-c.position:b-a[f][1][0])&&(c=a[f]):c=a[f])}return c}function X(a,b,d){for(var c=null,f=0;f<a.length;f++){var e=d?a[f].position-b:a[f][1][0]-b;0<=e&&(c?e<=(d?c.position-b:c[1][0]-b)&&(c=a[f]):c=a[f])}return c}function R(a){var b;if(!(b=ma.enable_texture_cache))a:{b=Aa.Pj("ALL",Aa.Tc);for(var d=0;d<b.length;d++){var c=b[d];if(t(c,a)){b=!0;break a}for(var c=
c.ov,f=0;f<c.length;f++)if(t(c[f],a)){b=!0;break a}}b=!1}b||(a.Mb&&O.deleteTexture(a.Mb),a=Q.qa.indexOf(a),-1!=a&&(Q.qa.splice(a,1),Q.yr.splice(a,1)))}function t(a,b){for(var d=0;d<a.P.length;d++)for(var c=a.P[d].aa,f=0;f<c.length;f++)for(var e=c[f].qa,g=0;g<e.length;g++)if(e[g]==b)return!0}function fa(a,b){for(var d=0;d<Q.qa.length;d++){var c=Q.qa[d];if(c.Mo==a&&c.type==b.type&&c.source==b.source&&c.repeat==b.repeat&&c.anisotropic_filtering==b.anisotropic_filtering&&c.Cn==b.Cn)return c}return null}
var la=u("__compat"),H=u("__config"),za=u("__texcomp"),ha=u("__debug"),ua=u("__extensions"),ga=u("__print"),B=u("__time"),Z=u("__util"),ea=u("__renderer"),Aa=u("__objects"),da=u("__obj_util"),ba=u("__curve"),wa=u("__vec3"),T=u("__scenes"),ma=H.K,aa=H.Ki,ja=H.ka,ca=null,oa=null,pa=null;a.Vg=0;a.S=0;a.rV=0;a.pV=0;a.qV=0;a.xt=0;a.Ci=10;a.xx=20;a.zt=30;a.At=40;a.Qn=50;a.vx=60;a.tx=70;a.wx=80;a.ux=90;a.dJ=128;a.dT=128;a.LJ=128;var Q={qa:[],yr:[]},xa={},na={},O=null,Oa,Na="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),
ta=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.sh=function(b){Oa=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.Vg=b.NEAREST;a.S=b.LINEAR;a.rV=b.NEAREST_MIPMAP_NEAREST;a.pV=b.LINEAR_MIPMAP_NEAREST;a.qV=b.NEAREST_MIPMAP_LINEAR;a.xt=b.LINEAR_MIPMAP_LINEAR;O=b};a.kaa=function(a,b){return b in xa&&a in xa[b]?xa[b][a].Mh:null};a.Dea=function(a,b){return b in xa&&a in xa[b]?(q(xa[b][a]),!0):!1};a.sK=p;a.wm=G;a.IX=function(d,c){var f=O.createTexture(),e=O.TEXTURE_CUBE_MAP;
O.bindTexture(e,f);O.texParameteri(e,O.TEXTURE_MAG_FILTER,O.LINEAR);c?O.texParameteri(e,O.TEXTURE_MIN_FILTER,Oa[ma.Sl]):O.texParameteri(e,O.TEXTURE_MIN_FILTER,O.LINEAR);O.texParameteri(e,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE);O.texParameteri(e,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE);for(var g=0;6>g;g++)O.texImage2D(O[Na[g]],0,O.RGBA,d,d,0,O.RGBA,O.UNSIGNED_BYTE,null);O.bindTexture(e,null);e=b();e.type=a.Ci;e.source="NONE";e.width=3*d;e.height=2*d;e.iu=1;e.yi=c;e.Mb=f;e.Eb=O.TEXTURE_CUBE_MAP;return e};a.HQ=function(a,
b){var d=a.Eb;O.bindTexture(d,a.Mb);for(var c=0;6>c;c++)O.texImage2D(O[Na[c]],0,O.RGBA,b,b,0,O.RGBA,O.UNSIGNED_BYTE,null);O.bindTexture(d,null);a.width=3*b;a.height=2*b};a.NH=function(a,b,d){var c=a.Eb;O.bindTexture(c,a.Mb);b&&O.texParameteri(c,O.TEXTURE_MIN_FILTER,b);d&&O.texParameteri(c,O.TEXTURE_MAG_FILTER,d);O.bindTexture(c,null)};a.resize=function(b,d,c){d=Math.max(d,1);c=Math.max(c,1);if(b.width!=d||b.height!=c){switch(b.type){case a.vx:O.bindRenderbuffer(O.RENDERBUFFER,b.Zf);O.renderbufferStorage(O.RENDERBUFFER,
O.RGB565,d,c);O.bindRenderbuffer(O.RENDERBUFFER,null);break;case a.tx:O.bindRenderbuffer(O.RENDERBUFFER,b.Zf);O.renderbufferStorage(O.RENDERBUFFER,v(aa.Pq),d,c);O.bindRenderbuffer(O.RENDERBUFFER,null);break;case a.wx:O.bindRenderbuffer(O.RENDERBUFFER,b.Zf);O.renderbufferStorageMultisample(O.RENDERBUFFER,ma.kc,O.RGBA8,d,c);O.bindRenderbuffer(O.RENDERBUFFER,null);break;case a.ux:O.bindRenderbuffer(O.RENDERBUFFER,b.Zf);O.renderbufferStorageMultisample(O.RENDERBUFFER,ma.kc,v(aa.Pq),d,c);O.bindRenderbuffer(O.RENDERBUFFER,
null);break;default:var f=b.Eb;O.bindTexture(f,b.Mb);var e=l(b),g=I(b),k=K(b);b.yi&&(ma.Nb||(c=Math.max(d,c),d=L(c),c=L(c)),b.oP=Math.round(Math.log(Math.max(d,c))/Math.log(2)+.5));O.texImage2D(f,0,g,d,c,0,e,k,null);O.bindTexture(f,null)}d>aa.jc||c>aa.jc?Z.J('Slink texture "'+b.type+'" has unsupported size: '+d+"x"+c+". Max available: "+aa.jc+"x"+aa.jc+"."):(b.width=d,b.height=c)}};a.CY=function(d,c,f,e,g){var k=d.type;if("BLEND"==k)return null;var n=d.image,h=b();h.type=a.Ci;h.width=1;h.height=1;
if(ma.aE){var l=d.b4w_anisotropic_filtering;"DEFAULT"===l&&(l=c);"OFF"!==l&&ma.anisotropic_filtering&&(h.anisotropic_filtering=parseFloat(l.split("x")[0]))}if("REPEAT"!=d.extension||d.b4w_shore_dist_map)h.repeat=!1;if(n){"IMAGE"==k&&"MOVIE"==n.source&&(h.Om=!0,h.hD=d.name,h.Ha=d.frame_start,h.qc=d.frame_offset,h.Dm=d.frame_duration,h.OI=d.use_auto_refresh,h.Xl=d.use_cyclic,h.Um=d.movie_length,h.Cn=d.b4w_nla_video,0!=h.qc&&ga.warn('Frame offset for texture "'+d.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));
h.source=k;c=Z.Bl(g+n.filepath);if(c=fa(c,h))return c;p(h,n,g)}c=new Uint8Array([204,204,204,255]);switch(k){case "IMAGE":g=O.createTexture();n=O.TEXTURE_2D;O.bindTexture(n,g);O.texImage2D(n,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,c);break;case "NONE":if("NONE"==d.b4w_source_type)return null;g=O.createTexture();n=O.TEXTURE_2D;h.source=d.b4w_source_type;if("SCENE"==h.source){if(!d.b4w_source_id)return null;e=Z.Oe("name",d.b4w_source_id,f);if(!e)return null;h.ew=d.b4w_source_id;h.Ol=d.b4w_source_size;
e.Gh=e.Gh||[];e.Gh.push(h);O.bindTexture(n,g);O.texImage2D(n,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,c)}else"CANVAS"==h.source&&(f=d.b4w_source_id,c=d.b4w_source_size,h.ew=f,h.Am=d.b4w_enable_canvas_mipmapping,d=document.createElement("canvas"),d.width=c,d.height=c,h.Mh=d.getContext("2d"),e in xa||(xa[e]={}),xa[e][f]=h,O.bindTexture(n,g));break;case "ENVIRONMENT_MAP":g=O.createTexture();n=O.TEXTURE_CUBE_MAP;O.bindTexture(n,g);d="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");
for(e=0;6>e;e++)O.texImage2D(O["TEXTURE_CUBE_MAP_"+d[e]],0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,c);break;default:return ga.error('texture "'+d.name+'" has unsupported type "'+k+'"'),null}h.Mb=g;h.Eb=n;"NONE"==k?(h.Am?O.texParameteri(n,O.TEXTURE_MIN_FILTER,Oa[ma.Sl]):O.texParameteri(n,O.TEXTURE_MIN_FILTER,O.LINEAR),h.anisotropic_filtering&&O.texParameterf(n,ua.zF().TEXTURE_MAX_ANISOTROPY_EXT,h.anisotropic_filtering),"CANVAS"==h.source&&q(h)):(O.generateMipmap(n),O.bindTexture(n,null));return h};a.Hea=
q;a.uS=w;a.tS=A;a.tw=P;a.pE=L;a.ur=function(a){return a&&(a.Mb||a.Zf)?!0:!1};a.rr=function(a){return a&&a.Zf?!0:!1};a.$ba=function(b){return b.type==a.zt||b.type==a.At?!0:!1};a.P_=function(b){var d=0;switch(b.type){case a.Ci:case a.xx:d=4;break;case a.zt:case a.At:d=16;break;case a.Qn:d=3;break;case a.vx:case a.tx:d=2;break;case a.wx:d=4*ma.kc;break;case a.ux:d=3*ma.kc}return d};a.Ja=function(){if(!ma.Wv)for(var a in na)for(var b in na[a])na[a][b].qb.pause(),na[a][b].qb.src="",na[a][b].qb.load();
Q.qa.length=0;Q.yr.length=0;xa={};na={}};a.pause=function(){for(var a in na)for(var b in na[a]){var d=na[a][b];E(d)&&D(d)}};a.reset=function(){for(var a in na)for(var b in na[a])M(na[a][b])};a.play=function(a){for(var b in na)for(var d in na[b]){var c=na[b][d];a&&!c.Dw||k(c)}};a.kba=function(a,b){return b in na&&a in na[b]?na[b][a]:null};a.Pea=function(a){return a.Cn};a.NP=k;a.eH=D;a.mQ=M;a.m3=function(a,b){if(void 0 in na&&a in na[void 0]){var d=na[void 0][a];d.qb?d.qb.currentTime=b/d.Oi:d.ie&&(d.Jl=
b,A(d))}};a.RS=E;a.SS=S;a.OS=function(a){return a.qb||a.ie?a.qb?Math.round(a.qb.currentTime*a.Oi):a.Jl:0};a.QS=function(a){return a.qb||a.ie?a.qb?a.qc:F(a,a.qc):0};a.I5=function(a){if(!a.qb&&!a.ie)return 0;var b=Math.min(a.Dm,a.Um-a.qc);return a.qb?a.qc+b:F(a,a.qc+b)};a.GB=function(a,b){return Math.round(b*a.Uv*(B.fe()/a.Oi))};a.PS=function(a){return Math.min(a.Dm,a.Um-a.qc)};a.H5=F;a.laa=function(a,b){var d=z(a,b);return d&&"CANVAS"==d.source?d.Mh:null};a.O_=z;a.F3=C;a.cba=function(a){var b=[];if(da.ba(a))W(a,
b);else{a=a.ov;for(var d=0;d<a.length;d++)W(a[d],b)}return b};a.Q3=function(a){for(var d={},c=0;c<a.length;c++){for(var f=a[c].qa,e=a[c].Hg,g=[],k=[],n=0;n<f.length;n++){var h=f[n],l=e[n];if("CANVAS"==h.source)if(l in d)h=d[l];else{var t=f[n],h=b();h.source="CANVAS";h.width=t.width;h.height=t.height;h.Am=t.Am;h.type=t.type;t=document.createElement("canvas");t.width=h.width;t.height=h.height;h.Mh=t.getContext("2d");h.Eb=O.TEXTURE_2D;h.Mb=O.createTexture();O.bindTexture(O.TEXTURE_2D,h.Mb);h.Am?O.texParameteri(O.TEXTURE_2D,
O.TEXTURE_MIN_FILTER,Oa[ma.Sl]):O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR);O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR);O.bindTexture(O.TEXTURE_2D,null);t=h;t.Mh.drawImage(f[n].Mh.canvas,0,0);q(t);d[l]=h}g.push(h);k.push(l)}a[c].qa=g}};a.sZ=function(a,b){for(var c=[],f=0;f<a.length;f++)d(a[f].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return Z.ja(255*a,0,255)}))};a.EW=d;a.wZ=function(a,b){for(var d=new Float32Array(3),c=new Float32Array(3),f=
[],e=0;e<a.length;e++){for(var g=a[e].data.value,k=[],h=g.curve_mapping.curves_data,l=g.curve_mapping.curve_extend,t=g.curve_mapping.curves_handle_types,g=0;g<h.length;g++){for(var B=l[g],v=h[g],r=[],m=t[g],H=0;H<v.length;H++)r.push([new Float32Array(3),new Float32Array(v[H].concat(0)),new Float32Array(3)]);ba.rE(r[0],null,r[1],m[0],m[0]);for(H=1;H<r.length-1;H++)ba.rE(r[H],r[H-1],r[H+1],m[H],m[H]);ba.rE(r[r.length-1],r[r.length-2],null,m[r.length-1],m[r.length-1]);if(2<r.length){if("AUTO"==m[0]){wa.subtract(r[0][2],
r[0][1],d);H=wa.length(d);wa.copy(r[1][0],c);c[0]<r[0][1][0]&&(c[0]=r[0][1][0]);wa.subtract(c,r[0][1],c);var q=wa.length(c);1E-8<q&&(wa.scale(c,H/q,c),wa.add(r[0][1],c,r[0][2]),wa.subtract(r[0][1],c,r[0][0]))}v=r.length-1;"AUTO"==m[0]&&(wa.subtract(r[v][0],r[v][1],d),H=wa.length(d),wa.copy(r[v-1][2],c),c[0]>r[v][1][0]&&(c[0]=r[v][1][0]),wa.subtract(c,r[v][1],c),q=wa.length(c),1E-8<q&&(wa.scale(c,H/q,c),wa.add(r[v][1],c,r[v][0]),wa.subtract(r[v][1],c,r[v][2])))}for(v=0;v<r.length-1;v++)ba.yX(r[v][1],
r[v][2],r[v+1][0],r[v+1][1]);v=[];3>=h.length?(H=Math.round(-b/2),m=Math.round(b/2)):(H=0,m=b);for(;H<m;H++){var q=H/(m-1),p=n(r,q,!1),x=X(r,q,!1);p&&x?v.push(ba.RK(q,p[1],p[2],x[0],x[1],.001)):x&&!p?"EXTRAPOLATED"==B?(q=x[1][0]==x[2][0]?x[1][1]:ba.XO(q,x[1],x[2]),v.push(q)):v.push(x[1][1]):p&&!x&&("EXTRAPOLATED"==B?(q=p[0][0]==p[1][0]?p[1][1]:ba.XO(q,p[0],p[1]),v.push(q)):v.push(p[1][1]))}k.push(v)}f.push(k)}d=[];for(H=0;H<f.length;H++)for(k=f[H],g=0;g<k[0].length;g++)3>=k.length?(c=Z.ja(127.5*(k[0][g]+
1),0,255),e=Z.ja(127.5*(k[1][g]+1),0,255),h=Z.ja(127.5*(k[2][g]+1),0,255),v=255):(c=Z.ja(255*k[0][g],0,255),e=Z.ja(255*k[1][g],0,255),h=Z.ja(255*k[2][g],0,255),v=Z.ja(255*k[3][g],0,255)),d.push(c,e,h,v);return new Uint8Array(d)};a.UL=function(b,d){var c=G(a.Ci,!1);c.source="NODE_TEX";c.repeat=!1;P(c,{width:d,height:b.length/(4*d),data:b});return c};a.d9=function(a,d,c,f,e){var g=Z.Bl(e);if("WORLD"!=a.type){var k=fa(g,d);if(!k){k=b();k.type=d.type;k.anisotropic_filtering=d.anisotropic_filtering;k.source=
d.source;k.ew=d.ew;k.width=d.width;k.height=d.height;k.iu=d.iu;k.Ol=d.Ol;k.Am=d.Am;k.Mh=d.Mh;k.Eb=d.Eb;k.Mb=d.Mb;k.Zf=d.Zf;k.Om=d.Om;k.Fw=d.Fw;k.qb=d.qb;k.hD=d.hD;k.Um=d.Um;k.Oi=d.Oi;k.Ha=d.Ha;k.qc=d.qc;k.Dm=d.Dm;k.ii=d.ii;k.ij=d.ij;k.ie=d.ie;k.Vv=d.Vv;k.Uv=d.Uv;k.Jl=d.Jl;k.Xv=d.Xv;k.hn=d.hn;k.Dw=d.Dw;k.OI=d.OI;k.Xl=d.Xl;k.Cn=d.Cn;k.repeat=d.repeat;k.ir=d.ir;k.Mo=d.Mo;k.No=d.No;k.cG=d.cG;k.bG=d.bG;k.Im=d.Im;var n=k;O.bindTexture(d.Eb,d.Mb);var l=O.getTexParameter(d.Eb,O.TEXTURE_MAG_FILTER),t=O.getTexParameter(d.Eb,
O.TEXTURE_MIN_FILTER),B=O.getTexParameter(d.Eb,O.TEXTURE_WRAP_S);d=O.getTexParameter(d.Eb,O.TEXTURE_WRAP_T);n.Mb=O.createTexture();O.bindTexture(n.Eb,n.Mb);O.texParameteri(n.Eb,O.TEXTURE_MAG_FILTER,l);O.texParameteri(n.Eb,O.TEXTURE_MIN_FILTER,t);O.texParameteri(n.Eb,O.TEXTURE_WRAP_S,B);O.texParameteri(n.Eb,O.TEXTURE_WRAP_T,d);O.bindTexture(n.Eb,null);h(k,e,g);P(k,f,0)}C(a,c,k)}else k=d,h(k,e,g),P(k,f,0),T.X4(a,k),T.XC(a)};a.BL=R;a.hf=function(a){return a.texture.I};a.K2=function(){O=null};a.wN=function(){return Q.qa};
a.i_=function(a){a=Q.qa.indexOf(a);return-1==a?!1:Q.yr[a]};a.b3=function(a){a=Q.qa.indexOf(a);-1!=a&&(Q.yr[a]=!0)}};b4w.module.__texcomp=function(a,u){function m(a,b,c,m){var e=new Int32Array(c,0,31),g,x,l,y,v,K;if(542327876!=e[0])return h.error("Invalid magic number in DDS header"),0;if(!e[20]&4)return h.error("Unsupported format, must contain a FourCC code"),0;g=e[21];switch(g){case q:x=8;l=b?b.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case w:x=16;l=b?b.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case A:x=16;l=b?b.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return h.error("Unsupported FourCC code:",p(g)),null}K=
1;e[2]&131072&&!1!==m&&(K=Math.max(1,e[7]));y=e[4];v=e[3];e=e[1]+4;if(b)for(g=0;g<K;++g)m=Math.max(4,y)/4*Math.max(4,v)/4*x,b=new Uint8Array(c,e,m),a.compressedTexImage2D(a.TEXTURE_2D,g,l,y,v,0,b),e+=m,y=Math.max(.5*y,1),v=Math.max(.5*v,1);else if(g==q){c=b=new Uint16Array(c);x=e/2;l=y;e=new Uint16Array(4);b=new Uint16Array(l*v);for(var k,D,M,E,u,F,z=l/4,C=v/4,r=0;r<C;r++)for(var f=0;f<z;f++)g=x+4*(r*z+f),e[0]=c[g],e[1]=c[g+1],k=e[0]&31,D=e[0]&2016,M=e[0]&63488,E=e[1]&31,u=e[1]&2016,F=e[1]&63488,
e[2]=5*k+3*E>>3|5*D+3*u>>3&2016|5*M+3*F>>3&63488,e[3]=5*E+3*k>>3|5*u+3*D>>3&2016|5*F+3*M>>3&63488,k=c[g+2],D=4*r*l+4*f,b[D]=e[k&3],b[D+1]=e[k>>2&3],b[D+2]=e[k>>4&3],b[D+3]=e[k>>6&3],D+=l,b[D]=e[k>>8&3],b[D+1]=e[k>>10&3],b[D+2]=e[k>>12&3],b[D+3]=e[k>>14],k=c[g+3],D+=l,b[D]=e[k&3],b[D+1]=e[k>>2&3],b[D+2]=e[k>>4&3],b[D+3]=e[k>>6&3],D+=l,b[D]=e[k>>8&3],b[D+1]=e[k>>10&3],b[D+2]=e[k>>12&3],b[D+3]=e[k>>14];a.texImage2D(a.TEXTURE_2D,0,a.RGB,y,v,0,a.RGB,a.UNSIGNED_SHORT_5_6_5,b);m&&a.generateMipmap(a.TEXTURE_2D)}else return h.error("No manual decoder for",
p(g),"and no native support"),0;return K}function c(a,b,c,h,q){var e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";e.onload=function(){if(200==e.status){a.bindTexture(a.TEXTURE_2D,h);var c=m(a,b,e.response,!0);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<c?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}q&&q(h)};e.send(null)}function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}
function p(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var h=u("__print"),G=u("__util"),q=b("DXT1"),w=b("DXT3"),A=b("DXT5");a.v5=m;a.w5=function(a,b,c){var e=new Uint32Array(c,0,13);if(55727696==e[0]){var g=e[7],h=e[6],m=e[11],l=52+e[12];switch(e[2]){case 0:var q=2,v=1;break;case 1:q=2;v=3;break;case 2:q=4;v=0;break;case 3:q=4;v=2;break;default:G.J("Unsupported PVR V3 format.")}}else if(559044176==e[11]){g=e[2];h=e[1];m=e[3];l=e[0];m++;var p=e[4]&255,e=0<e[10];25==p?(q=4,v=e?
2:0):24==p?(q=2,v=e?3:1):G.J("Unsupported PVR V2 format.")}else G.J("Unsupported PVR version.");p=2==q?8:4;e=4;switch(v){case 0:var k=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:k=b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:k=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:k=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=p*e*q/8;for(q=0;q<m;q++){var v=Math.max(g>>q,1),w=Math.max(h>>q,1),y=v/p,E=w/e;2>y&&(y=2);2>E&&(E=2);y=y*E*b;E=new Uint8Array(c,l,y);a.compressedTexImage2D(a.TEXTURE_2D,q,k,v,w,0,E);
l+=y}};a.ZN=function(a,b){switch(b){case "dds":var c=new Int32Array(a,0,31);return{width:c[4],height:c[3]};case "pvr":c=new Uint32Array(a,0,13);if(55727696==c[0])var e=c[7],c=c[6];else e=c[2],c=c[1];return{width:e,height:c}}};a.l_=function(a,b){var c=1;if("dds"==b){var e=new Int32Array(a,0,31),g=e[21];switch(g){case q:c=6;break;case w:case A:c=4;break;default:h.error("Unsupported FourCC code:",p(g))}}else if("pvr"==b)if(e=new Uint32Array(a,0,13),55727696==e[0])switch(e[2]){case 0:c=12;break;case 1:c=
16;break;case 2:c=6;break;case 3:c=8}else g=e[4]&255,e=0<e[10],25==g?c=e?8:6:24==g&&(c=e?16:12);return c};a.nca=function(a,b,h,m){var e=a.createTexture();c(a,b,h,e,m);return e}};b4w.module.__time=function(a,u){function m(){return-1!==c.Yn.kz?c.Yn.kz:A}var c=u("__config"),b=0,p=0,h=[],G=0,q=0,w=[],A=-1,g=0;a.hR=function(a){b=a;p=performance.now();for(a=0;a<h.length;a++){var c=h[a];b>c.pF&&(h.splice(a,1),a--,c.callback())}for(a=0;a<w.length;a++){var c=w[a],e=1-(c.pF-b)/c.duration,e=Math.min(e,1);c.callback(c.from+e*(c.to-c.from));1==e&&(w.splice(a,1),a--)}};a.Ko=function(){return b};a.h3=function(a){g=a};a.o_=function(){return g};a.OB=function(a,c){var e;G++;e=G;h.push({id:e,
callback:a,pF:b+(performance.now()-p+c)/1E3});return e};a.Fq=function(a){for(var b=0;b<h.length;b++)if(h[b].id==a){h.splice(b,1);break}};a.pm=function(a){for(var b=w.length;b--;)if(w[b].id==a){w.splice(b,1);break}};a.wj=function(a,c,g,h){g/=1E3;var e;q++;e=q;w.push({id:e,callback:h,from:a,to:c,pF:b+g,duration:g});h(a);return e};a.reset=function(){p=b=0;h.length=0;q=G=w.length=0};a.fe=m;a.n3=function(a){A=a};a.wz=function(a){return a*m()}};b4w.module.__objects=function(a,u){function m(a){var b=a.P;a=a.v;for(var d=0;d<b.length;d++){var c=b[d].vb;c.I.outline&&a.cj&&ha.H2(c)}}function c(a){a.v.cj=0;a=xa.indexOf(a);-1!=a&&xa.splice(a,1)}function b(a){if(a.Vq)for(var b=a.P,d=0;d<b.length;d++)ha.nS(b[d].vb,a)}function p(a,b){for(var d=a.P,c=b.P,f=0;f<d.length;f++){for(var e=!1,g=0;g<c.length;g++)if(d[f].vb==c[g].vb){e=!0;break}e||h(b,d[f].vb)&&R.Hx(b,d[f].vb)}}function h(a,b){return!b.jK&&"SPEAKER"==a.type||!b.xV&&"LAMP"==a.type?!1:!0}function G(a){var b=
a.b4w_do_not_batch,d=a.b4w_collision,c=a.b4w_vehicle,f=a.b4w_floating,e=a.b4w_character,g=t.Z_(a),k=n.ZK(a),h=0<a.data.b4w_shape_keys.length,l=a.b4w_dynamic_geometry,B=q(a);if(!(b=M.YK(a)||b||d||c||h||f||g||e||k||l))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(d=a.materials[b],d.ia.Zj||d.Yj||A(d.se)){b=!0;break a}b=!1}return b||B}function q(a){var b=!1,d=a.constraints.length;if(d){for(var c=null,d=d-1;0<=d;d--){var f=a.constraints[d];if("LOCKED_TRACK"!=f.type||"REFLECTION PLANE"!=f.name){c=f;break}}if(!c||
!c.target)return!1;a=c.target;c=a.type;if(a.parent)return c=a.parent.type,"MESH"==c?b=b||G(a.parent):"EMPTY"==c?b=b||w(a.parent):b=!0,b;"MESH"==c?b=b||G(a):"EMPTY"==c?b=b||w(a):b=!0}return b}function w(a){var b=n.ZK(a),d=a.b4w_do_not_batch,c=!!a.b4w_anchor,f=q(a);return M.YK(a)||b||d||c||f}function A(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var d=a[b];if("VECT_TRANSFORM"==d.type){var c=d.convert_from,f=d.convert_to,e=d.outputs[0];if(!(!e.is_linked||"WORLD"==c&&"CAMERA"==f||"CAMERA"==
c&&"WORLD"==f||"OBJECT"==c&&"OBJECT"==f))return!0}if("NORMAL_MAP"==d.type&&(c=d.space,e=d.outputs[0],e.is_linked&&("OBJECT"==c||"BLENDER_OBJECT"==c))||"TEX_COORD"==d.type&&d.outputs[3].is_linked||"OBJECT_INFO"==d.type&&(e=d.outputs[1],c=d.outputs[3],d.outputs[0].is_linked||e.is_linked||c.is_linked))return!0}return!1}function g(a){if(P(a,ca.ALL,!1,-1)){for(var b=1,d;;){d="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!P(a+d,ca.ALL,!1,-1))break;b++}la.error('Object "'+a+'" already exists. Name was replaced by "'+
a+d+'".');return d}return""}function e(a,b,d){b=ca[b]||[];for(var c=[],f=0;f<b.length;f++){var e=b[f];if(e.v.Le==d||-1==d)for(var g=e.P,k=0;k<g.length;k++)g[k].vb==a&&c.push(e)}return c}function y(a,b){var d=ca[a]||[];if(-1==b)return d;for(var c=[],f=0;f<d.length;f++){var e=d[f];e.v.Le==b&&c.push(e)}return c}function x(a,b,d,c){for(var f=0;f<a.P.length;f++)for(var e=a.P[f].aa,g=0;g<e.length;g++){var k=e[g];k.Ga&&(k.Ga.Nh=b);k.Nh=b;k.zb&&(k.zb.Nh=d);""!==k.Qe&&(k=X.Cz(k.Qe))&&(k.AL=c)}}function P(a,
b,d,c,f){for(var e=null,g=0;g<b.length;g++){var k=b[g];if(!((d?k.Qf:k.name)!=a||k.v.Le!=c&&-1!=c||f&&k.Nm||(e=k,R.Qj(e))))break}return e}function J(a){ca.ALL.push(a);ca[a.type]||(ca[a.type]=[]);ca[a.type].push(a);var b=a.v.te;if(null!=b)for(var d=0;d<Q.length;d++){var c=Q[d];c.v.te==b&&c.Nv.push(a)}}function L(a,b,d){if(!b.nl)return!0;a=a.Sm;if(a.Lj!=a.Ff)if(a.yw){var c=da.sign(a.Lj-a.Ff);a.Ff+=c*Z.o_()/.4;a.Ff=da.ja(a.Ff,0,1)}else a.Ff=a.Lj;c="STATIC"==b.type?b.nv:ba.add(b.af.T,b.GA,na);d=ba.dist(c,
d);0==a.hr?(c=Math.max(b.kh-a.gr/2,0),b=b.jh+a.fr/2):-1==a.hr?(c=b.kh+a.gr/2,b=b.jh+a.fr/2):(c=Math.max(b.kh-a.gr/2,0),b=Math.max(b.jh-a.fr/2,0));a.hr=d<c?-1:d<b?0:1;a.Lj=d<c||d>b?0:1;a.gy=a.Lj?1:-1;Math.abs(d-a.oB)>aa.lod_leap_smooth_threshold&&(0==a.Ff||1==a.Ff)&&(a.Ff=a.Lj);a.oB=d;return!!a.Lj||0!=a.Ff}function l(a,b){x(a,!0,!1,!0);for(var d=y("ALL",-1),c=0;c<d.length;c++){var f=d[c];f!=a&&x(f,!1,!1,!1)}ha.gQ(a,b);for(c=0;c<a.P.length;c++)for(f=a.P[c].aa.length-1;0<=f;f--){var e=a.P[c].aa[f];0!=
e.Ac.length&&-1==e.Ac.indexOf(b)||R.uQ(a.P[c],f)}fa.Ca(a)&&fa.sp(a);for(c=0;c<d.length;c++)d[c]!=a&&x(d[c],!0,!0,!0);M.PY(a,b);d=a.Rn.Oa;a.Rn.Oa=a;return d}function I(a,b){a.Rn.Oa=b;x(a,!0,!0,!0)}function v(a,b,d,c){var f=d.lh.Nr.indexOf(c);b=a.Bc[a.lh.Nr.indexOf(b)];d.Bc[f]=b;a=b.name;b.name=c;for(c=0;c<d.Bc.length;c++)d.lh.Ro[c]=c!=f;return a}function K(a,b,d,c){for(var f=0;f<d.Bc.length;f++)d.lh.Ro[f]=!1;a.Bc[a.lh.Nr.indexOf(b)].name=c}function k(a,b,d,c,e){for(var g=1;g<a.v.uh.length;g++)f.zK(a,
a.v.uh[g].name,a.v.uh[g].value);if(M.wO(a))for(g=0;g<a.za.length;g++){var k=a.za[g];if(k)switch(k.type){case M.vU:M.LB(a,M.kN(a,g),g);break;case M.tU:if(k.Ir)for(var h=k.Ir.length-1;0<=h;h--)-1!=k.Ir[h].Ac.indexOf(b)&&k.Ir.splice(h,1)}}c&&E.pG(a,b,function(b){if(b.Qa){var d=b.Qa.name;if(c[d]){var f=b.Qa.Hq!=c[d].Hq;b.Qa=t.HL(c[d]);f&&t.j3(a,d,b.Qa.Hq)}}},"PARTICLES");e&&(g=E.Cm(a,b))&&(g.gd.set(e.gd),g.pg=e.pg,g.vo=e.vo,g.ce.set(e.ce),g.Eg.set(e.Eg),g.ms=e.ms,g.on.set(e.on),g.Dg=e.Dg,g.ff=e.ff,g.$e=
e.$e,g.Gk=e.Gk,g.fp=e.fp,g.Jr=e.Jr,g.pi=e.pi,g.ri=e.ri,g.Fo.set(e.Fo),g.Or=e.Or,g.vi.set(e.vi),g.as.set(e.as),g.bs=e.bs,g.cs.set(e.cs),g.ds=e.ds,g.Ni=e.Ni,g.Ts=e.Ts,g.$i=e.$i.slice(),g.Re=e.Re.slice());E.pG(a,b,function(b){for(var c=0;c<b.gg.length;c++){var f=b.gg[c],e=b.qa[c];if("IMAGE"==e.source||"ENVIRONMENT"==e.source){var g=B.O_(d,f);g&&e.Mo!=g.Mo&&B.F3(a,f,g)}}})}function D(a,b){for(var d=a[b],c=b+1;c<a.length;c++)d+="%join%"+a[c];return d}var M=u("__animation"),E=u("__batch"),S=u("__boundings"),
F=u("__camera"),z=u("__config"),C=u("__constraints"),r=u("__container"),f=u("__geometry"),W=u("__lights"),d=u("__material"),n=u("__nla"),X=u("__nodemat"),R=u("__obj_util"),t=u("__particles"),fa=u("__physics"),la=u("__print"),H=u("__primitives"),za=u("__quat"),ha=u("__scenes"),ua=u("__subscene"),ga=u("__sfx"),B=u("__textures"),Z=u("__time"),ea=u("__transform"),Aa=u("__tsr"),da=u("__util"),ba=u("__vec3"),wa=u("__armature"),T=u("__anchors"),ma=u("__renderer"),aa=z.K,ja=z.Ad,ca={ALL:[]},oa=0,pa=0,Q=[],
xa=[],na=new Float32Array(3),O=new Float32Array(4);a.LD=0;a.KD=1;a.cd=2;a.Tc=-1;a.update=function(a){for(var b=0;b<xa.length;b++){var d=xa[b],f=d,e=a,g=0,k=f.GP;0==k.LC&&(k.LC=e);e-=k.LC;if(k.sH&&e/k.qh>=k.sH)c(f);else{e%=k.qh;if(e<k.$G)switch(k=e/(k.$G/5),e=Math.floor(k),e){case 0:g=(k-e)/2;break;case 1:g=(k-e)/2+.5;break;case 2:g=1;break;case 3:g=1-(k-e)/2;break;case 4:g=.5-(k-e)/2}f.v.cj=g}d.v.cj&&m(d)}if(a=ca.ARMATURE)for(b=0;b<a.length;b++)d=a[b],d.RG&&(ea.V(d),d.RG=!1)};a.bR=function(a,b){a.v.cj=
b;m(a)};a.wq=function(a,b,d,c){var f=a.GP;f.LC=0;f.$G=b;f.qh=d;f.sH=c;-1==xa.indexOf(a)&&xa.push(a)};a.$t=c;a.YL=function(a,b){var d=R.ou(b?"%meta_world%"+a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==d.type)for(var c=0;c<a.data.materials.length;c++)d.Bc.push(a.data.materials[c]);for(c=0;c<a.ke.length;c++)R.Hx(d,a.ke[c]);a.Oa=d;if(b)d.md=a.uuid,d.Nm=!1,d.uo=a.tq,d.ba=a.Ek,d.v=R.Jq(d.type),d.ww=a.b4w_use_default_animation,d.Xn=M.$D(a.b4w_anim_behavior);else{d.md=
a.uuid;d.Nm=!1;d.uo=a.tq;d.ba=a.Ek;d.av=a.iK||!1;d.ug=a.b4w_vehicle;d.ml=a.b4w_character;d.Uo=a.b4w_floating;d.Gs=a.b4w_collision;d.Rb=a.b4w_collision_id;d.my=a.b4w_correct_bounding_offset;c=a.game;d.Rd={zv:c.physics_type,tk:c.use_ghost,FS:c.use_sleep,gi:c.mass,KS:c.velocity_min,JS:c.velocity_max,oM:c.damping,pQ:c.rotation_damping,a1:c.lock_location_x,b1:c.lock_location_y,c1:c.lock_location_z,d1:c.lock_rotation_x,e1:c.lock_rotation_y,f1:c.lock_rotation_z,Ej:c.collision_margin,Dj:c.collision_group,
Fj:c.collision_mask,QI:c.use_collision_bounds,iy:c.collision_bounds_type,vw:c.use_collision_compound};if(c=a.b4w_vehicle_settings)d.Jg={name:c.name,Ag:c.part,t4:c.suspension_rest_length,pI:c.suspension_compression,rI:c.suspension_stiffness,qI:c.suspension_damping,XI:c.wheel_friction,DH:c.roll_influence,DG:c.max_suspension_travel_cm,Hu:c.force_max,St:c.brake_max,vs:c.steering_max,zr:c.max_speed_angle,uu:c.delta_tach_angle,gw:c.speed_ratio,hw:c.steering_ratio,Zu:c.inverse_control,Ao:c.floating_factor,
Mp:c.water_lin_damp,Np:c.water_rot_damp,PR:c.synchronize_position};if(c=a.b4w_floating_settings)d.Yq={name:c.name,Ag:c.part,Ao:c.floating_factor,Mp:c.water_lin_damp,Np:c.water_rot_damp,PR:c.synchronize_position};if(c=a.b4w_character_settings)d.lL={O5:c.walk_speed,P2:c.run_speed,m4:c.step_height,H0:c.jump_strength,S5:c.waterline};for(c=0;c<a.constraints.length;c++){var f=a.constraints[c];"RIGID_BODY_JOINT"==f.type&&d.hH.push({target:f.target.Oa,Y1:f.pivot_type,Z1:f.pivot_x,a2:f.pivot_y,b2:f.pivot_z,
Za:f.axis_x,$a:f.axis_y,ab:f.axis_z,B5:f.use_limit_x,C5:f.use_limit_y,D5:f.use_limit_z,x5:f.use_angular_limit_x,y5:f.use_angular_limit_y,z5:f.use_angular_limit_z,R0:f.limit_max_x,S0:f.limit_max_y,T0:f.limit_max_z,U0:f.limit_min_x,V0:f.limit_min_y,W0:f.limit_min_z,L0:f.limit_angle_max_x,M0:f.limit_angle_max_y,N0:f.limit_angle_max_z,O0:f.limit_angle_min_x,P0:f.limit_angle_min_y,Q0:f.limit_angle_min_z})}c=d.v=R.Jq("MESH"===d.type?d.ba?"DYNAMIC":"STATIC":d.type);a.parent?(d.parent=a.parent.Oa,"BONE"==
a.parent_type&&"ARMATURE"==a.parent.type&&(d.wv=a.parent_bone),a.pinverse_tsr&&(d.jB=Aa.create(),Aa.copy(a.pinverse_tsr,d.jB))):a.dg_parent&&(d.parent=a.dg_parent.Oa,d.cn=!0);var f=a.location,e=a.scale[0];da.oH(a.rotation_quaternion,O);ea.je(d,f);ea.Ll(d,O);ea.Ue(d,e);d.ww=a.b4w_use_default_animation;d.Xn=M.$D(a.b4w_anim_behavior);a.b4w_object_tags&&(d.LA={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});d.Dy=a.b4w_custom_prop;a.b4w_viewport_alignment&&
(d.lD={BV:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});c.ci=a.b4w_hidden_on_load;c.iO=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":wa.Ds(a,d);f=c.Lh;e=M.IW(f);a.b4w_animation_mixing?(c.ve=new Float32Array(e.Ub),c.tf=new Float32Array(e.Ub),c.Ce=new Float32Array(e.trans),c.xf=new Float32Array(e.trans)):(c.ve=e.Ub,c.tf=e.Ub,c.Ce=e.trans,c.xf=e.trans);for(var g in f){var k=f[g];1==k.cy.length&&wa.P4(k,!0,e.trans,e.Ub)}c.Dv=e;c.sg=0;c.Ik=a.b4w_animation_mixing;
break;case "MESH":c.Lk=E.mW(a.data.b4w_boundings.bb);d.AO=a.data.is_boundings_overridden;c.df=a.b4w_do_not_render;c.gn=ja.outlining_overview_mode||a.b4w_selectable;c.bB=a.b4w_selectable;c.Ad=ja.outlining_overview_mode||a.b4w_outlining;c.aB=a.b4w_outlining;c.cB=ja.outlining_overview_mode||a.b4w_outline_on_select;c.Kh=a.b4w_billboard;c.Mt=a.b4w_pres_glob_orientation;c.Ot="BASIC";c.Nt="SPHERICAL"==a.b4w_billboard_geometry;g=c.ek;g.Ym=a.b4w_outline_settings.outline_duration;g.Zm=a.b4w_outline_settings.outline_period;
g.$m=a.b4w_outline_settings.outline_relapses;c.gn&&(c.rm=da.SM(oa),oa++);for(g=0;g<a.data.b4w_vertex_anim.length;g++)f=a.data.b4w_vertex_anim[g],d.Fd.push({name:f.name,Ha:f.frame_start,sb:f.frame_end,W8:f.averaging,X8:f.averaging_interval,CV:f.allow_nla});d.v.Fd=d.Fd.length?!0:!1;"MESH"!=a.type&&da.J("Wrong object type: "+a.name);g=d.v;if(a.data.b4w_shape_keys.length)for(g.Xf=!0,f=0;f<a.data.b4w_shape_keys.length;f++)e={},e.value=a.data.b4w_shape_keys[f].value,e.name=a.data.b4w_shape_keys[f].name,
g.uh.push(e);else g.Xf=!1;c.Tf=a.b4w_shadow_cast;c.ze=a.b4w_shadow_receive;c.uf=a.b4w_shadow_cast_only&&c.Tf;c.Se=a.b4w_reflexible;c.xe=a.b4w_reflexible_only&&c.Se;c.we=a.b4w_reflective;c.gj=a.b4w_reflection_type;if(!c.we)for(g=d.Bc,f=0;f<g.length;f++)e=g[f],!e.zh||-1==e.se.Ax.indexOf("BSDF_GLOSSY")&&-1==e.se.Ax.indexOf("BSDF_DIFFUSE")||(d.v.we=!0,d.v.gj="CUBE");c.ah=a.b4w_caustics;if(c.Af=a.b4w_wind_bending)c.Pp=a.b4w_wind_bending_angle,g=E.WS(da.cf(a.b4w_wind_bending_angle),c.Lk,a.scale[0]),c.Mg=
g,c.Ng=a.b4w_wind_bending_freq,c.og=a.b4w_detail_bending_freq,c.ng=a.b4w_detail_bending_amp,c.hg=a.b4w_branch_bending_amp,c.vl=a.b4w_main_bend_stiffness_col,g=a.b4w_detail_bend_colors,c.Hf.tG=g.leaves_stiffness_col,c.Hf.sG=g.leaves_phase_col,c.Hf.aH=g.overall_stiffness_col;c.ef=a.b4w_dynamic_geometry;if(c.ef)for(d.Rn=a,g=0;g<d.Bc.length;g++)d.lh.Nr.push(d.Bc[g].name),d.lh.Ro.push(!1);g=d.Bc[0];c.Vh=g.Rd.Vh;c.Ph=g.Rd.Ph;c.kh=0;c.jh=R.ND;c.fk=a.pass_index;break;case "LINE":c.Aa=S.Gf();c.Ib=S.mu();c.Hi=
S.Gf();c.lm=S.mu();break;case "CAMERA":F.MW(a,d);F.dW(d);break;case "LAMP":W.I0(a,d);break;case "SPEAKER":d.ka=ga.$X();c=!1;for(g=0;g<d.P.length;g++)if(d.P[g].vb.pd){c=!0;break}c&&ga.Ds(a,d);break;case "EMPTY":g=S.Gf(),c.Aa=g,g=S.py(),c.yc=g,a.field&&(d.Vq={type:a.field.type,JR:a.field.strength}),a.b4w_anchor&&(d.anchor={type:a.b4w_anchor.type,Qq:a.b4w_anchor.detect_visibility,zm:a.b4w_anchor.element_id,r1:a.b4w_anchor.max_width})}}J(d);return d};a.h5=function(a,b){var d=b.v;if("MESH"==b.type){var c=
M.dN(a);if(c){var f=c.Oa,e=f.v.Dv,g=b.v,k=a.data;b.Kx=f;k=k.vertex_groups;if(k.length){var f=f.v.Lh,h=0,n={},l;for(l in f){var t=da.Oe("name",l,k);t&&(n[l]={NS:t.index,zj:f[l].zj,dF:h++})}g.Aj=n;l=h;k=M.xN();g.Yi=l;l>2*k?(g.Pm=!1,la.error('too many bones for "'+a.name+'" / '+g.Yi+" bones (max "+k+" with blending, "+2*k+" without blending). Skinning will be disabled.")):g.Pm=!0}e=M.vZ(e.trans,e.Ub,d.Aj);c.b4w_animation_mixing?(d.ve=new Float32Array(e.Ub),d.tf=new Float32Array(e.Ub),d.Ce=new Float32Array(e.trans),
d.xf=new Float32Array(e.trans)):(d.ve=e.Ub,d.tf=e.Ub,d.Ce=e.trans,d.xf=e.trans);d.Ft=new Float32Array(4);d.Et=za.create();d.Dv=e;d.sg=0}if(d.we)if(d=b.v,"CUBE"==d.gj)d.Ke=pa++;else if("PLANE"==d.gj){a:{c=a.constraints;for(e=0;e<c.length;e++)if(g=c[e],"LOCKED_TRACK"==g.type&&"REFLECTION PLANE"==g.name){if(g.target&&g.target.Oa){c=g.target.Oa;break a}la.warn('Reflection plane target for object: "'+b.name+"\" is not present on the scene. Using object's Z-axis.")}c=null}c||(c=da.rw("%reflection%"),c=
R.ou(c,"EMPTY"),e=R.Jq("EMPTY"),c.v=e,p(b,c),C.tK(c,b,[0,0,0],null,1),J(c));e=null;for(g=0;g<Q.length;g++)if(Q[g]==c){e=g;break}null==e&&(e=Q.length,Q.push(c));c.v.te=e;d.te=e;c.Nv.push(b)}}};a.Y4=b;a.C9=p;a.WW=h;a.i5=function(a){for(var b=0;b<a.length;b++){var d=a[b];!d.v||"DYNAMIC"!=d.v.type&&"CAMERA"!=d.v.type||ea.V(d);d.ww&&M.H1(d)&&(M.xK(d),d.za.length&&M.play(d,null,M.vt))}};a.$K=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Ek||a.parent&&a.parent.Ek)return!0;switch(a.type){case "MESH":return G(a);
case "EMPTY":return w(a);default:return!0}};a.Jo=function(a){return da.X(a.LA)};a.Qu=function(a){return a.Dy};a.Ja=function(){pa=oa=0;Q.length=0;xa.length=0;ca={ALL:[]}};a.copy=function(a,b,c){var e=R.Qj(a),e=e?R.TM(e.name,b):b,k=g(e);b=R.ou(e+k,a.type,b+k);b.Nm=a.Nm;b.Rn=a.Rn;b.lh.Nr=R.ku(a.lh.Nr);b.lh.Ro=R.ku(a.lh.Ro);b.ba=a.ba;b.av=a.av;b.ww=a.ww;b.uo=a.uo;b.v=R.EE(a.v);b.v.nl=!1;b.LA=R.lu(a.LA);b.Dy=R.lu(a.Dy);p(a,b);b.Sn=R.ku(a.Sn);b.parent=R.ku(a.parent);b.cn=a.cn;b.wv=a.wv;b.Fd=R.ku(a.Fd);
b.Xn=a.Xn;!a.L||a.ug||a.ml||a.Uo||(b.Gs=a.Gs,b.L=null);b.Rb=a.Rb;b.my=a.my;b.Rd=R.lu(a.Rd);e=[];for(k=0;k<a.P.length;k++){var h=b.P[k],n=a.P[k].aa;if(c){for(var l=h.aa,t=0;t<n.length;t++)if(!n[t].Uh){var r=R.lu(n[t]);r.Ga=f.oX(n[t].Ga);R.Xg(b,h.vb,r);e.push(n[t].Ga)}for(t=0;t<n.length;t++)if(n[t].Uh){r=R.lu(n[t]);R.Xg(b,h.vb,r);for(var v=0;v<e.length;v++)e[v]==n[t].Ga&&(r.Ga=l[v].Ga)}for(t=0;t<l.length;t++)l[t].Ga&&f.oS(l[t].Ga),aa.ZD&&l[t].Ga&&ma.gW(l[t]),l[t].Xm=E.ZZ(l[t],b.v,b.md),E.K4(l[t]);B.Q3(l)}else for(t=
0;t<n.length;t++)R.Xg(b,h.vb,n[t])}for(e=0;e<a.Bc.length;e++)b.Bc.push(d.pX(a.Bc[e]));R.IH(b,!1);J(b);b.v.jG=!0;b.v.iA=c;b.v.rm=da.SM(oa);oa++;return b};a.eN=function(a,b){var d=[],c=a.animation_data,f=a.data?a.data.animation_data:null;c&&c.action&&(c=c.action,(c.I.type==M.uU||c.I.type==M.qU&&"ARMATURE"==a.type||c.I.type==M.sU&&"LAMP"==a.type||c.I.type==M.rU&&b)&&d.push(M.rO(null,c)));f&&f.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&d.push(M.rO(null,f.action));"MESH"==a.type&&d.push.apply(d,M.g_(a));
b&&d.push.apply(d,M.h_(a));return d};a.MI=function(a){for(var b=a.v,d=null,c=a.P[0].aa,e=0;e<c.length;e++){var g=c[e],k=a.P[0].$g[e];if(g.Ga&&k.fg&&k.Ef){var h=f.Kz("a_position");if(h=f.RF(g.Ga.Sc,h)){var n=g.Ga.bd.a_position.offset,l=g.Ga.bd.a_position.length+n;E.c5(g,h.subarray(n,l));R.wS(g,b.C,k);"MAIN"==g.type&&(d?S.az(d,g.Cb.Ef):d=S.fy(g.Cb.Ef))}}}d=d||S.Gf();if(b.Kh)R.rS(a,d);else{k=[];for(e=0;e<c.length;e++)if(g=c[e],"MAIN"==g.type&&(h=f.Kz("a_position"),h=f.RF(g.Ga.Sc,h)))g=c[e].Ga.bd,n=g.a_position.offset,
l=g.a_position.length+n,k.push(h.subarray(n,l));R.n5(a,d,k)}if(aa.debug_view)for(e=0;e<c.length;e++)if("DEBUG_VIEW"===c[e].type&&c[e].Yk){a=b.Ib;b=H.wF(1,a.T);f.tQ(b,[a.Za[0],a.$a[1],a.ab[2]],a.T);f.AC(b,1,!0);b.Da.a_polyindex=f.bz(b);E.J4(c[e],b);break}};a.vc=e;a.KN=function(a,b,d){b=ca[b]||[];for(var c=[],f=0;f<b.length;f++){var e=b[f];if(!(e.v.Le!=d&&-1!=d||e.Nm))for(var g=e.P,k=0;k<g.length;k++)g[k].vb==a&&c.push(e)}return c};a.Pj=y;a.uz=function(a){var b=ca.MESH;if(b)for(var d=0;d<b.length;d++){var c=
b[d];if(fa.cO(c))for(var f=c.P,e=0;e<f.length;e++)if(f[e].vb==a)return c}return null};a.Mr=x;a.Gz=function(){var a=[],b=ca.MESH;if(b)for(var d=0;d<b.length;d++){var c=b[d];c.v.gn&&!c.Nm&&a.push(c)}return a};a.BN=function(){var a=[],b=ca.MESH;if(b)for(var d=0;d<b.length;d++){var c=b[d];c.v.Ad&&!c.Nm&&a.push(c)}return a};a.Gc=function(b,d,c,f){var e=null,g=ca.ALL;switch(b){case a.LD:e=P(d,g,!0,c,f);break;case a.KD:a:{for(b=0;b<g.length;b++)if(e=g[b],e.Qf==c&&(e.v.Le==f||-1==f)){var k=R.Qj(e);if(k&&
k.Qf==d)break a}e=null}break;case a.cd:a:{for(f=0;f<g.length;f++){b=g[f];for(var e=d.length-1,k=b,h=!0;0<=e&&h;)h=k&&k.Qf==d[e]&&(k.v.Le==c||-1==c),k&&(k=R.Qj(k)),e--;if(h&&!k){e=b;break a}}e=null}}return e};a.Lz=function(a,b){return P("%meta_world%"+a,ca.WORLD,!0,b)};a.qba=function(a){return a.Qf.replace("%meta_world%","")};a.op=function(b,d){var c=ha.Si();if(!c)return la.error("No active scene"),null;var f=ha.Xb(c,ua.Eh);f&&f.enable_hmd_stereo&&(f=r.Xh(),b=f.clientHeight/2,d=f.clientWidth/2);if(f=
T.V1(b,d))return f;f=ha.X1(c,b,d);if(!f)return null;for(var c=e(c,"MESH",-1),g=0;g<c.length;g++){var k=c[g].v,h=k.rm;if(h&&3>Math.abs(255*h[0]-f[0])&&3>Math.abs(255*h[1]-f[1])&&3>Math.abs(255*h[2]-f[2]))return k.Ad&&k.cB&&(ja.outlining_overview_mode?a.wq(c[g],ja.Ym,ja.Zm,ja.$m):(f=k.ek,a.wq(c[g],f.Ym,f.Zm,f.$m))),c[g]}return null};a.kR=function(a,d){for(var c=e(a,"EMPTY",-1),f=0;f<c.length;f++){var g=c[f];if(g.Vq&&"WIND"===g.Vq.type){var k=g;break}}if(!k)return la.error("There is no wind on the scene"),
0;"number"==typeof d.wind_dir&&(c=da.cf(d.wind_dir),ba.set(Math.sin(c),-Math.cos(c),0,na),da.hF(na,da.fc,O),ea.Ll(k,O));"number"==typeof d.wind_strength&&(k.Vq.JR=d.wind_strength);b(k)};a.sp=function(a){C.XW(a)&&C.remove(a);var b=ca.ALL,d=ca[a.type],c=b.indexOf(a);a=d.indexOf(a);-1!=c&&b.splice(c,1);-1!=a&&d.splice(a,1)};a.I1=J;a.Eca=function(a){return ca[a.type]&&-1<ca[a.type].indexOf(a)};a.d5=function(a,b){if(a.v.nl){var d=a.v,c=b.I;if(d.nl)for(var f=ea.Me(b.Dk,na),e=0;e<a.P.length;e++)if(a.P[e].vb==
b)for(var g=0;g<a.P[e].aa.length;g++){var k=a.P[e].aa[g],h=k.Sm;if(aa.lod_smooth_transitions){var n=c.g1;if("ALL"==n||"NON-OPAQUE"==n&&(k.Bb||k.Fk))h.yw=!0}L(k,d,f);h.Ff=h.Lj;h.gr=Math.min(c.aP,.6*d.tl);h.fr=Math.min(c.aP,.6*d.ul)}}};a.e5=L;a.p3=function(a){var b=a.v,d=b.Mg,c=b.Ng,e=b.og,g=b.ng,k=b.hg;a=a.P;for(b=0;b<a.length;b++)for(var h=a[b].aa,n=0;n<h.length;n++){var l=h[n].Ga,t=l.bd,B=t.au_wind_bending_amp,r=t.au_wind_bending_freq,v=t.au_detail_bending_amp,m=t.au_detail_bending_freq,t=t.au_branch_bending_amp;
if(r){var H=Array.apply(null,Array(r.length)).map(function(){return c});f.sw(l,f.qq,new Float32Array(H),r.offset)}B&&(H=Array.apply(null,Array(B.length)).map(function(){return d}),f.sw(l,f.qq,new Float32Array(H),B.offset));v&&(H=Array.apply(null,Array(v.length)).map(function(){return g}),f.sw(l,f.qq,new Float32Array(H),v.offset));m&&(H=Array.apply(null,Array(m.length)).map(function(){return e}),f.sw(l,f.qq,new Float32Array(H),m.offset));t&&(H=Array.apply(null,Array(t.length)).map(function(){return k}),
f.sw(l,f.qq,new Float32Array(H),t.offset))}};a.k0=function(a,b,d,c){if(a.v.ef&&d.v.ef){var f=E.Cm(a,b),g=null;E.pG(d,c,function(a){g||(g={});a.Qa&&(g[a.Qa.name]=a.Qa)},"PARTICLES");for(var h=l(d,c),n=v(a,b,d,c),t=ha.N(),B=0;B<d.P.length;B++){var r=d.P[B].vb;ha.Zr(r);var m=e(r,"LAMP",0),H=d.P[B].aa;d.P[B].aa=[];d.P[B].$g=[];E.XM(r,[d.Rn],m,[]);E.ry(d,ha.yz(r),r);ha.GK(r,[d]);ha.jm(r,d,!1,!0);for(m=0;m<H.length;m++)R.Xg(d,r,H[m])}K(a,b,d,n);I(d,h);k(d,c,a,g,f);ha.Zr(t)}};a.SE=function(a){a=a||"";a+=
g(a);a=R.ou(a,"LINE");a.v=R.Jq("EMPTY");a.ba=!0;E.WM(ha.Si(),[a]);ha.jm(ha.Si(),a);J(a);return a};a.YZ=function(a,b){var d=b.v,c=S.fy(d.Lk);d.Kh?R.rS(b,c):R.m5(b,c,a.data.b4w_boundings)};a.RH=function(a,b,d,c){for(var f=R.pl(a),e=0;e<a.P.length;e++)for(var g=a.P[e].aa,k=0;k<g.length;k++){var h=g[k];if(f||-1!=h.Ac.indexOf(b))h.$i[d]=c}f&&ha.XC(a)};a.QH=function(a,b,d,c,f,e){for(var g=R.pl(a),k=0;k<a.P.length;k++)for(var h=a.P[k].aa,n=0;n<h.length;n++){var l=h[n];if(g||-1!=l.Ac.indexOf(b))l.Re[3*d]=
c,l.Re[3*d+1]=f,l.Re[3*d+2]=e}g&&ha.XC(a)};a.AN=function(a,b){return a.$i[b]};a.zN=function(a,b,d){d[0]=a.Re[3*b];d[1]=a.Re[3*b+1];d[2]=a.Re[3*b+2];return d};a.JF=function(a,b){for(var d=D(b,1),c=0;c<a.length;c+=3)if(a[c]==d)return 4*a[c+1]+a[c+2];return null};a.IF=function(a,b,d){b=D(b,d);for(d=0;d<a.length;d+=2)if(a[d]==b)return a[d+1];return null}};b4w.module.__animation=function(a,u){function m(a,b){var d=a.za[b];d&&d.fz&&d.Du&&(d.Du=!1,d.fz(a,b))}function c(a,b,d){d=a.za[d];d.type=30;var c=b.Ha,f=b.sb-c+1;d.start=c;d.length=f;d.bh=c;d.Jk=b.name;for(f=c=0;f<a.Fd.length;f++){var e=a.Fd[f];if(e==b)break;else c+=e.sb-e.Ha+1}d.HS=c}function b(a,b){a.type=50;a.Jk=b.name;a.start=b.Ha;a.length=b.sb-a.start;b.be||(a.length+=b.jv)}function p(a){return a.replace(/_B4W_BAKED$/,"")}function h(a,b){return{Dr:a,action:b}}function G(a,b,d){if(a.animation_data){var c=
a.animation_data.action;c&&60==c.I.type&&b.push(h(d,c))}a=a.nodes;for(c=0;c<a.length;c++){var f=a[c];if(f.node_group){var e=f.node_group.node_tree;if(e){var g=d.slice();g.push(f.name);G(e,b,g)}}}}function q(a){return la.mf(a)&&a.v.Fd?!0:!1}function w(a,b,d){var c=a.za;if(-1==d)for(d=0;8>d;d++){var f=c[d];f&&(f.bh=b,g(a,0,d,!0))}else if(f=c[d])f.bh=b,g(a,0,d,!0)}function A(a,b,d){if(-1==b)for(b=0;8>b;b++){var c=a[b];c&&d(c)}else(c=a[b])&&d(c)}function g(a,b,d,c){J(a,b,d,c);m(a,d);a.v.Ik&&(K(a,b),l(a,
b))}function e(a,b,d,c){var f=d.frame_range;if(f[0]>f[1])return ha.warn('Incompatible action "'+d.name+'" has been applied to object "'+a.name+'"'),!1;var e=d.I,g=a.za[c];g.Jk=d.name;g.WD=f;g.oK=e.KP;g.mK=e.SK;g.Sk.set(e.Sk);g.start=f[0];g.length=f[1]-f[0];g.bh=f[0];switch(e.type){case 10:if(la.$u(a)){g.type=10;var h=y(a,b,d);if(!h){for(var h=a.v.Lh,f=[],n=[],l=[],t=[],B=d.I.TG,r=0;r<B;r++){for(var v in h){var m=h[v],q=m.qw,p=d.I.lE[v];p?ba.copy(p.subarray(8*r,8*r+8),q):ba.identity(q);m.SC=!1}m=k(h);
f.push(m.trans);n.push(m.Ub);l.push(m.Nk);t.push(m.Mk)}h={trans:f,Ub:n,Nk:l,Mk:t};a.Sn.push(d,b?b.join("%join%"):null,h)}g.trans=h.trans;g.Ub=h.Ub;g.Mk=h.Mk;g.Nk=h.Nk;b=h;g=a.v;h=g.gs;f=a.za[c];v=f.fI;a:{n=g.$B;for(l=0;l<n.length;l+=2)if(d==n[l]){n=n[l+1];break a}n=null}if(n)f.fI=n;else{for(f=0;f<h.length;f++){n=h[f].Aj;l=[];t=[];B=b.trans;r=b.Ub;for(m=0;m<B.length;m++)q=D(B[m],r[m],n),l.push(q.trans),t.push(q.Ub);v.push({trans:l,Ub:t})}g.$B.push(d,v)}g.Ik&&(b=g.co,c>b[1]?(g=b[1],b[1]=c,b[0]=g):c>
b[0]&&c<b[1]&&(b[0]=c),x(a))}break;case 40:la.Qm(a)&&(g.volume=e.lb.volume||null,g.pitch=e.lb.pitch||null,g.type=40);break;case 70:la.nr(a)&&(g.color=e.lb.color||null,g.al=e.lb.energy||null,g.type=70);break;case 60:if("MESH"==a.type||"WORLD"==a.type){g.type=60;v=la.pl(a);f=[];n=[];l=[];t=[];B=[];d=d.I;r=b?b[0]:null;for(h in d.lb){m=b;q=h.match(/"(.*?)"/)[1];if(m&&1<m.length){for(var p=m[1],C=2;C<m.length;C++)p=p+"%join%"+m[C];p+="%join%"+q}else p=q;m=p;for(q=0;q<a.P.length;q++)for(p=a.P[q].aa,C=0;C<
p.length;C++){var z=p[C];if(v||!r||-1!=z.Ac.indexOf(r)){var w=z.ki,Q;Q=h;var K=m,E=d,F=n,A=f,J=z.li;if(J){for(var M=!1,u=0;u<J.length;u+=3)K==J[u]&&(A.push(4*J[u+1]+J[u+2]),F.push(new Float32Array(E.lb[Q])),M=!0);Q=M}else Q=!1;K=h;E=m;F=d;A=t;J=l;if(w){M=!1;for(u=0;u<w.length;u+=2)E==w[u]&&(J.push(w[u+1]),A.push(new Float32Array(F.lb[K])),M=!0);w=M}else w=!1;(Q||w)&&B.push(z)}}}g.li=f;g.xP=n;g.ki=l;g.wP=t;g.Ir=B}break;case 20:if(h=e.lb.tsr){g.type=20;v=y(a,b,d);if(!v){v=d.I.TG;f=[];n=[];for(l=0;l<
v;l++)f.push(h.subarray(8*l,8*l+4)),n.push(h.subarray(8*l+4,8*l+8));v={trans:f,Ub:n};a.Sn.push(d,b?b.join("%join%"):null,v)}g.trans=v.trans;g.Ub=v.Ub;H.UG(a)&&H.u5(a,g.trans[0],g.Ub[0])}else return ha.warn('Incompatible action "'+d.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:la.pl(a)&&(g.al=e.lb["light_settings.environment_energy"]||null,g.re=e.lb.horizon_color||null,g.Ee=e.lb.zenith_color||null,g.fog_intensity=e.lb["mist_settings.intensity"]||null,g.fog_depth=e.lb["mist_settings.depth"]||
null,g.fog_start=e.lb["mist_settings.start"]||null,g.fog_height=e.lb["mist_settings.height"]||null,g.Bo=e.lb.b4w_fog_color||null,g.type=80)}la.$u(a)&&10!=e.type&&P(a,c);return!0}function y(a,b,d){a=a.Sn;b=b?b.join("%join%"):null;for(var c=0;c<a.length;c+=3)if(d==a[c]&&b==a[c+1])return a[c+2];return null}function x(a){var b=a.v.co;if(-1!=b[0]&&-1!=b[1]){var d=a.za;a=d[b[1]].bh;var c=Math.floor(a),f=a-c,b=d[b[0]];a=b.bh;c=Math.floor(a);b.bh=c+f}}function P(a,b){var d=a.v.co,c=d[1];d[0]=-1;d[1]=-1;if(-1!=
b)for(var f=a.za;0<=c;c--){var e=f[c];if(e&&10==e.type)if(c>d[1])d[1]=c;else{c>d[0]&&(d[1]=c);break}}}function J(a,b,d,c){if((d=a.za[d])&&null!=d.type&&(d.play||c)){var f=a.v,e=d.bh,g=d.start,k=d.length,e=e+d.speed*b*Aa.fe(),h=d.type,n=d.speed;if(0<=n&&e>=g+k||0>n&&e<g)switch(c||(d.Du=!0),d.behavior){case 10:0<=n?e=(e-g)%k+g:e=g+k-1E-6;break;case 20:0<=n?e=g:e=g+k-1E-6;d.play=!1;break;case 30:0<=n?e=g+k-1E-6:e=g,d.play=!1}d.bh=e;switch(h){case 10:if(!f.Ik){c=L(d);b=c[0];var l=c[1];c=c[2];f.ve=d.Ub[b];
f.tf=d.Ub[l];f.Ce=d.trans[b];f.xf=d.trans[l];f.sg=c;c=f.gs;d=d.fI;for(var t=0;t<c.length;t++){var r=c[t],v=d[t];r.ve=v.Ub[b];r.tf=v.Ub[l];r.Ce=v.trans[b];r.xf=v.trans[l];r.sg=f.sg}da.V(a)}break;case 20:c=L(d);var f=ca,l=c[0],t=c[1],r=c[2],v=d.trans,m=v[l][1],e=v[l][2],g=v[t][1],k=v[t][2];f[0]=(1-r)*v[l][0]+r*v[t][0];f[1]=(1-r)*m+r*g;f[2]=(1-r)*e+r*k;l=O;e=c[0];t=c[1];r=c[2];v=d.Ub;m=Oa;m[0]=v[e][0];m[1]=v[e][1];m[2]=v[e][2];m[3]=v[e][3];e=Na;e[0]=v[t][0];e[1]=v[t][1];e[2]=v[t][2];e[3]=v[t][3];ua.slerp(m,
e,r,l);t=c[2];r=d.trans;c=(1-t)*r[c[0]][3]+t*r[c[1]][3];a.parent&&a.jB&&(t=Y,ba.si(f,c,l,t),ba.multiply(a.jB,t,t),ba.Yb(t,f),ba.Db(t,l),c=ba.ge(t));d.HI&&(t=oa,da.Me(a,t),wa.mC(f,t,b,d.HI,f));d.pH&&(t=Oa,da.Rj(a,t),wa.xR(l,t,b,d.pH,l));e=d.Sk;e[0]&&da.QB(a,f);e[1]&&da.NB(a,l);e[2]&&da.WH(a,c);da.V(a);za.Z(a);break;case 30:c=d.bh-d.start;0>c&&(c=0);c>=d.length&&(c=d.length);a=Math.floor(c);b=a+1;c-=a;10!=d.behavior&&b==d.length&&(b=--a,c=1);d=d.HS;ja[0]=a+d;ja[1]=b+d;ja[2]=c;c=ja;f.dD=c[0];f.eD=c[2];
break;case 40:c=L(d);b=c[0];f=c[1];c=c[2];d.volume&&Z.$H(a,(1-c)*d.volume[b]+c*d.volume[f]);d.pitch&&Z.iH(a,(1-c)*d.pitch[b]+c*d.pitch[f]);break;case 50:b=10==d.behavior?(e-g)/Aa.fe():e/Aa.fe();H.G3(a,d.Jk,b);break;case 60:c=L(d);b=c[0];f=c[1];c=c[2];m=d.xP;e=d.li;l=d.wP;t=d.ki;r=d.Ir;for(d=0;d<e.length;d++)for(g=m[d],v=e[d],k=(1-c)*g[b]+c*g[f],g=0;g<r.length;g++)r[g].$i[v]=k;for(d=0;d<t.length;d++)for(m=l[d],v=t[d],m=T.lerp(m.subarray(3*b,3*b+3),m.subarray(3*f,3*f+3),c,ca),g=0;g<r.length;g++)r[g].Re[3*
v]=m[0],r[g].Re[3*v+1]=m[1],r[g].Re[3*v+2]=m[2];la.pl(a)&&B.XC(a);break;case 70:c=L(d);b=c[0];f=c[1];c=c[2];e=d.Sk;(k=d.al)&&e[0]&&fa.s3(a.yd,(1-c)*k[b]+c*k[f]);(d=d.color)&&e[1]&&(ca[0]=(1-c)*d[3*b]+c*d[3*f],ca[1]=(1-c)*d[3*b+1]+c*d[3*f+1],ca[2]=(1-c)*d[3*b+2]+c*d[3*f+2],fa.r3(a.yd,ca));g=a.P;for(d=0;d<g.length;d++)B.a5(a,g[d].vb);break;case 80:c=L(d);b=c[0];f=c[1];c=c[2];e=d.Sk;g=a.P;n=B.Xb(g[0].vb,ea.Wb);k=d.al;k=e[0]?(1-c)*k[b]+c*k[f]:n.al;h=d.re;e[1]?(ca[0]=(1-c)*h[3*b]+c*h[3*f],ca[1]=(1-c)*
h[3*b+1]+c*h[3*f+1],ca[2]=(1-c)*h[3*b+2]+c*h[3*f+2],h=ca):h=n.re;var q=d.Ee;e[2]?(oa[0]=(1-c)*q[3*b]+c*q[3*f],oa[1]=(1-c)*q[3*b+1]+c*q[3*f+1],oa[2]=(1-c)*q[3*b+2]+c*q[3*f+2],n=oa):n=n.Ee;q=d.fog_intensity;e[3]&&(l=(1-c)*q[b]+c*q[f]);q=d.fog_depth;e[4]&&(t=(1-c)*q[b]+c*q[f]);q=d.fog_start;e[5]&&(r=(1-c)*q[b]+c*q[f]);q=d.fog_height;e[6]&&(v=(1-c)*q[b]+c*q[f]);d=d.Bo;e[7]&&(O[0]=(1-c)*d[3*b]+c*d[3*f],O[1]=(1-c)*d[3*b+1]+c*d[3*f+1],O[2]=(1-c)*d[3*b+2]+c*d[3*f+2],m=O);for(d=0;d<g.length;d++)b=a.P[d].vb,
(e[0]||e[1]||e[2])&&B.MH(b,k,h,n),e[3]&&B.OQ(b,l),e[4]&&B.MQ(b,t),e[5]&&B.PQ(b,r),e[6]&&B.NQ(b,v),e[7]&&B.OH(b,m);break;default:wa.J("Unknown animation type:"+h)}}}function L(a){var b=a.WD[0],d=a.WD[1]-b,b=a.bh-b;0>b&&(b=0);b>=d&&(b=d);b/=a.oK;d=Math.floor(b);a=a.mK[d]?b-d:0;b=Math.ceil(d+a);ja[0]=d;ja[1]=b;ja[2]=a;return ja}function l(a,b){var d=a.v,c=d.Fi,f=d.co,e=f[0],f=f[1];if(-1!=f){if(-1!=e){var g=a.za[e];if(g.play||0==b||d.Zi){var k=L(g),h=k[0],n=k[1];d.sg=k[2];var k=g.Ub[h],l=g.Ub[n],t=g.trans[h],
B=g.trans[n]}else c=1}else c=1;f=a.za[f];if(f.play||0==b||d.Zi){var e=L(f),r=e[0],m=e[1];d.sg=e[2]}else if(-1!=e&&g.play)c=0;else return;var e=f.Ub[r],H=f.Ub[m],q=f.trans[r],p=f.trans[m];if(1!=c||d.Zi)if(0!=c||d.Zi){c=d.Lh;if(d.Zi&&!d.vn&&!d.dn){d.vn=new Float32Array(d.Ce.length);d.dn=new Float32Array(d.ve.length);for(var C in c)k=c[C],k.Qr||v(d,k)}for(C in c)k=c[C],k.Qr||I(d,k,g,f,h,n,r,m)}else d.ve.set(k),d.tf.set(l),d.Ce.set(t),d.xf.set(B);else d.ve.set(e),d.tf.set(H),d.Ce.set(q),d.xf.set(p);da.V(a);
R.r5(a)}}function I(a,b,d,c,f,e,g,k){var h=b.Qr,n=a.Fi,l=O,t=Oa,B=pa,r=Q,v=Na,m=ta,H=xa,q=na,p=4*b.zj,C=c.Mk[g],x=c.Nk[g],z=c.Mk[k],w=c.Nk[k];if(!a.Zi)var K=d.Mk[f],y=d.Nk[f],D=d.Mk[e],E=d.Nk[e];for(var F=0;4>F;F++)t[F]=C[p+F],r[F]=x[p+F],m[F]=z[p+F],q[F]=w[p+F],a.Zi?(l[F]=a.dn[p+F],B[F]=a.vn[p+F],v[F]=a.dn[p+F],H[F]=a.vn[p+F]):(l[F]=K[p+F],B[F]=y[p+F],v[F]=D[p+F],H[F]=E[p+F]);ua.slerp(l,t,n,l);wa.Sx(B,r,n,B);ba.jn(B,Y);ba.Ec(l,Y);h&&ba.multiply(h.VC,Y,Y);ba.copy(Y,b.VC);ba.multiply(Y,b.LI,Y);ba.cr(Y,
B);ba.Db(Y,l);ua.slerp(v,m,n,v);wa.Sx(H,q,n,H);ba.jn(H,Y);ba.Ec(v,Y);h&&ba.multiply(h.UC,Y,Y);ba.copy(Y,b.UC);ba.multiply(Y,b.LI,Y);ba.cr(Y,H);ba.Db(Y,v);for(F=0;4>F;F++)a.ve[p+F]=l[F],a.Ce[p+F]=B[F],a.tf[p+F]=v[F],a.xf[p+F]=H[F];b=b.Ly;for(F=0;F<b.length;F++)I(a,b[F],d,c,f,e,g,k)}function v(a,b){for(var d=4*b.zj,c=b.Qr,f=a.Fi,e=pa,g=O,k=Q,h=Oa,n=0;4>n;n++)e[n]=a.Ce[d+n],g[n]=a.ve[d+n],k[n]=a.xf[d+n],h[n]=a.tf[d+n];ba.jn(e,Y);ba.Ec(g,Y);ba.multiply(Y,b.mj,Y);ba.copy(Y,b.VC);c&&(ba.invert(c.VC,ia),
ba.multiply(ia,Y,Y));ba.cr(Y,e);ba.Db(Y,g);ba.jn(k,Y);ba.Ec(h,Y);ba.multiply(Y,b.mj,Y);ba.copy(Y,b.UC);c&&(ba.invert(c.UC,ia),ba.multiply(ia,Y,Y));ba.cr(Y,k);ba.Db(Y,h);ua.slerp(g,h,f,g);wa.Sx(e,k,f,e);for(n=0;4>n;n++)a.dn[d+n]=g[n],a.vn[d+n]=e[n];d=b.Ly;for(n=0;n<d.length;n++)v(a,d[n])}function K(a,b){var d=a.v,c=d.Fi,f=d.vq;if(0!=f){!d.Zi||d.vn||d.dn||(c=d.Fi=0);var c=d.uq-c,e=f*b;wa.sign(c)==wa.sign(f)&&Math.abs(e)<Math.abs(c)?d.Fi+=e:(d.Fi=d.uq,d.vq=0,d.Hk&&(d.Hk(),d.Hk=null),d.Zi&&(d.vn=null,
d.dn=null,d.Zi=!1))}}function k(a){var b=[],d=[],c=[],f=[],e=new Float32Array(4),g=new Float32Array(4),k;for(k in a){var h=a[k],n=e,l=g,t=h.cy,B=t[t.length-1],r=B.KI;B.SC||ba.identity(r);for(B=t.length-1;0<=B;B--){var v=t[B],m=v.KI;if(v.SC)r=m;else{var H=v.mj,q=v.qw;ba.invert(H,Y);ba.multiply(q,Y,Y);ba.multiply(H,Y,Y);ba.multiply(r,Y,m);r=m;v.SC=!0}}t=v.KI;n[0]=t[0];n[1]=t[1];n[2]=t[2];n[3]=t[3];l[0]=t[4];l[1]=t[5];l[2]=t[6];l[3]=t[7];ua.normalize(l,l);n=h.zj;ba.multiply(h.RC,h.qw,Y);for(h=0;4>h;h++)l=
4*n+h,b[l]=e[h],d[l]=g[h],c[l]=Y[h],f[l]=Y[h+4]}return{trans:b,Ub:d,Nk:c,Mk:f}}function D(a,b,d){var c=[],f=[],e;for(e in d)for(var g=d[e],k=g.zj,g=g.dF,h=0;4>h;h++){var n=4*g+h,l=4*k+h;c[n]=a[l];f[n]=b[l]}c=new Float32Array(c);f=new Float32Array(f);return{trans:c,Ub:f}}function M(a){var b=a.I,d;if(b.lE)d=10;else if(b.lb)if("volume"in b.lb||"pitch"in b.lb)d=40;else{var c;a:{if(c=a.I.lb)for(var f in c)if(-1!=f.indexOf("nodes")){c=!0;break a}c=!1}if(c)d=60;else{var e;a:{if(a.I.lb){c=a.fcurves;for(e in c)if("color"==
e&&!c[e][3]){e=!0;break a}if("energy"==e){e=!0;break a}}e=!1}if(e)d=70;else if(e=a.I.lb,"light_settings.environment_energy"in e||"horizon_color"in e||"zenith_color"in e||"mist_settings.intensity"in e||"mist_settings.depth"in e||"mist_settings.start"in e||"mist_settings.height"in e||"b4w_fog_color"in e)d=80;else{a:{if(a.I.lb)for(d in a=a.fcurves,a)if("location"==d||"rotation_quaternion"==d||"scale"==d){d=!0;break a}d=!1}d=d?20:0}}}else d=0;b.type=d}function E(a,b){b[0]=b[1]=b[2]=0;for(var d in a)"location"==
d?b[0]=1:"rotation_quaternion"==d?b[1]=1:"scale"==d&&(b[2]=1)}function S(a,b){b[0]=b[1]=0;for(var d in a)"energy"==d?b[0]=1:"color"==d&&(b[1]=1)}function F(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var d in a)"light_settings.environment_energy"==d?b[0]=1:"horizon_color"==d?b[1]=1:"zenith_color"==d?b[2]=1:"mist_settings.intensity"==d?b[3]=1:"mist_settings.depth"==d?b[4]=1:"mist_settings.start"==d?b[5]=1:"mist_settings.height"==d?b[6]=1:"b4w_fog_color"==d&&(b[7]=1)}function z(a,b,d,c,f,
e,g){var k=a+(b-a)/2,h=C(k,c,f,e,g)-d;return.02>Math.abs(h)?k:0<h?z(a,k,d,c,f,e,g):z(k,b,d,c,f,e,g)}function C(a,b,d,c,f){var e=1-a;return b*e*e*e+3*d*e*e*a+3*c*e*a*a+f*a*a*a}function r(a,b){var d={type:null,Jk:null,WD:null,oK:0,mK:null,Sk:new Int8Array(8),Ub:null,trans:null,Mk:null,Nk:null,fI:[],play:!1,behavior:20,bh:0,start:0,length:0,HI:0,pH:0,Du:!1,HS:null,speed:1,volume:null,pitch:null,color:null,al:null,Ee:null,re:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Bo:null,
xP:[],li:[],wP:[],ki:[],Ir:null};if(!a.za.length)for(var c=0;8>c;c++)a.za.push(null);a.za[b]=d;-1==ka.indexOf(a)&&ka.push(a)}function f(a,b){da.V(a);za.Z(a);g(a,0,b,!0)}function W(a,g,k,h){h=h||0;if(la.mf(a)){var l=d(a,k);if(l)return r(a,h),c(a,l,h),f(a,h),!0;if((l=n(a,k))&&"EMITTER"==l.eB){r(a,h);g=l.name;k=h;for(var l=a.P,t=0;t<l.length;t++)for(var B=l[t].aa,v=0;v<B.length;v++){var m=B[v].Qa;m&&m.name==g&&b(a.za[k],m)}f(a,h);return!0}}if(l=wa.Oe("name",k,Ba)||wa.Oe("name",k+"_B4W_BAKED",Ba)){r(a,
h);if(e(a,g,l,h))return f(a,h),!0;a.za[h]=null}ha.error('Unsupported object: "'+a.name+'" or animation name: "'+k+'"');return!1}function d(a,b){for(var d=0;d<a.Fd.length;d++){var c=a.Fd[d];if(c.name===b)return c}return null}function n(a,b){for(var d=a.P,c=0;c<d.length;c++)for(var f=d[c].aa,e=0;e<f.length;e++){var g=f[e].Qa;if(g&&g.name===b)return g}return null}function X(a){a=a.modifiers;for(var b=0;b<a.length;b++){var d=a[b];if("ARMATURE"==d.type)return d.object}return null}var R=u("__armature"),
t=u("__config"),fa=u("__lights"),la=u("__obj_util"),H=u("__particles"),za=u("__physics"),ha=u("__print"),ua=u("__quat"),ga=u("__reformer"),B=u("__scenes"),Z=u("__sfx"),ea=u("__subscene"),Aa=u("__time"),da=u("__transform"),ba=u("__tsr"),wa=u("__util"),T=u("__vec3"),ma=t.Yn,aa=t.Ki;a.C7=1E-6;a.G7=0;a.qU=10;a.uU=20;a.I7=30;a.H7=40;a.vU=50;a.tU=60;a.sU=70;a.rU=80;a.J7=0;a.K7=1;a.L7=2;a.M7=3;a.N7=4;a.O7=5;a.P7=6;a.Q7=7;a.vt=-1;a.X5=10;a.Y5=20;a.bT=30;var ja=Array(3),ca=new Float32Array(3),oa=new Float32Array(3),
pa=new Float32Array(4),Q=new Float32Array(4),xa=new Float32Array(4),na=new Float32Array(4),O=new Float32Array(4),Oa=new Float32Array(4),Na=new Float32Array(4),ta=new Float32Array(4),Y=ba.create(),ia=ba.create(),ka=[],Ba=[];a.xN=function(){return wa.trunc((aa.JA-50)/4)};a.Q$=function(a){return a/Aa.fe()};a.update=function(a){for(var b=0;b<ka.length;b++){for(var d=ka[b],c=0;8>c;c++)J(d,a,c);d.v.Ik&&(K(d,a),l(d,a))}for(b=0;b<ka.length;b++)for(d=ka[b],c=0;8>c&&d.za.length;c++)m(d,c)};a.b_=function(){return Ba};
a.daa=function(a){var b=[];if(q(a))for(var d=0;d<a.Fd.length;d++)b.push(a.Fd[d].name);for(var c=[],d=0;d<Ba.length;d++){var f=Ba[d],e=f.I;20==e.type?c.push(f):60!=f.I.type||"MESH"!=a.type&&"WORLD"!=a.type?10==e.type&&"ARMATURE"==a.type?c.push(f):40==e.type&&"SPEAKER"==a.type?c.push(f):80==e.type&&"WORLD"==a.type&&c.push(f):c.push(f)}for(d=0;d<c.length;d++)b.push(p(c[d].name));if(H.UG(a)&&H.CP(a))for(a=a.P,d=0;d<a.length;d++)for(c=a[d].aa,f=0;f<c.length;f++)(e=c[f].Qa)&&b.push(e.name);return b};a.LR=
p;a.faa=function(a,b){var d=a.za[b];return d?d.type:0};a.xK=function(a){for(var d=0,g=a.P,k=0;k<g.length;k++)for(var h=g[k].aa,n=0;n<h.length;n++){var l=h[n].Qa;l&&"EMITTER"==l.eB&&!h[n].Uh&&(r(a,d),b(a.za[d],l),f(a,d),l.be?a.za[d].behavior=10:a.za[d].behavior=a.Xn,d++)}g=a.uo.slice();for(k=0;k<g.length;k++)n=g[k],h=n.Dr,n=n.action,r(a,d),e(a,h,n,d)?(f(a,d),a.za[d].behavior=a.Xn,d++):a.za[d]=null;q(a)&&(r(a,d),c(a,a.Fd[0],d),f(a,d),a.za[d].behavior=a.Xn)};a.$D=function(a){switch(a){case "CYCLIC":return 10;
case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:wa.J("Wrong animation behavior")}};a.g_=function(a){var b=[];a=a.data.materials;for(var d=0;d<a.length;d++){var c=a[d],f=c.se;f&&G(f,b,[c.name])}return b};a.h_=function(a){var b=[],d=a.node_tree;d&&G(d,b,[a.name]);return b};a.rO=h;a.play=function(a,b,d){A(a.za,d,function(a){a.play=!0;b?a.fz=b:a.fz=null;a.Du=!1});a.v.Ik&&x(a)};a.stop=function(a,b){A(a.za,b,function(a){a.play=!1;a.fz=null;a.Du=!1})};a.qr=function(a,b){var d=a.za;if(-1==
b)for(var c=0;8>c;c++){if(d[c]&&d[c].play)return!0}else if(d=d[b])return d.play;return!1};a.LB=w;a.k3=function(a,b){b=b||0;A(a.za,b,function(d){w(a,d.start,b)})};a.kN=function(a,b){var d=a.za[b];return d&&d.bh?d.bh:0};a.kG=function(a,b){var d=a.za[b];return d&&10==d.behavior};a.KH=function(a,b,d){A(a.za,d,function(a){a.behavior=b})};a.iaa=function(a,b){var d=a.za[b];return d&&d.behavior};a.L8=function(a,b,d,c){A(a.za,c,function(a){a.HI=b||0;a.pH=d||0})};a.Qca=function(a,b){if(-1==b)for(var d=0;8>
d;d++)a.za[d]=null;else a.za[b]=null;a.v.Ik&&P(a,b)};a.Eea=g;a.H1=function(a){if("ARMATURE"==a.type||a.Kx||"WORLD"==a.type)return!0;for(var b=0;b<a.uo.length;b++){var d=a.uo[b].action.I.type;if(20==d||10==d||40==d&&"SPEAKER"==a.type||70==d&&"LAMP"==a.type||60==d&&"MESH"==a.type)return!0}return H.UG(a)&&H.CP(a)||"MESH"==a.type&&a.Fd.length?!0:!1};a.YK=function(a){if(X(a))return!0;if(a.tq)for(var b=0;b<a.tq.length;b++){var d=a.tq[b].action.I.type;if(20==d||60==d&&"MESH"==a.type)return!0}return H.xW(a)&&
H.wW(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};a.wO=function(a){return!!a.za.length};a.PY=function(a,b){for(var d=a.Sn,c=[],f=0;f<d.length;f+=3)(60!=d[f].I.type||null!==d[f+1]&&d[f+1].split("%join%")[0]!=b)&&c.push(d[f],d[f+1],d[f+2]);a.Sn=c};a.IW=k;a.vZ=D;a.FV=function(a){function b(a,b){for(var d=0;d<b;d++){var c=a.subarray(8*d+4,8*d+8);ua.normalize(c,c)}}function d(a,b){if(-1<a.indexOf("location"))var d=0,c=b;else-1<a.indexOf("rotation_quaternion")?(d=4,c=0==b?3:b-1):-1<a.indexOf("scale")?
(d=3,c=0):(d=0,c=b);return d+c}function c(a,b,d,c,g){if(-1<d.search(f)){a=b;d=d.split('"')[1];var k=e}else 8==g?(d="tsr",k=e):1<g?k=new Float32Array(g):k=0;if(!a[d]){g=a;b=d;if("object"==typeof k&&k.length)for(var h=k.length,n=new Float32Array(c*h),l=0;l<c;l++)for(var t=0;t<h;t++)n[l*h+t]=k[t];else if("number"==typeof k)for(n=new Float32Array(c),l=0;l<c;l++)n[l]=k;else wa.J("Wrong storage default value");g[b]=n}return a[d]}var f=new RegExp(/pose.bones\[\".+\"\]/g),e=ba.create(),g=a.I={type:0,TG:0,
KP:0,lb:null,lE:null,SK:null,Sk:new Int8Array(8)};g.KP=1/ma.Do;var k=a.fcurves,h={},n={},l=0,t;for(t in k){var B=k[t],r;for(r in B){var v=B[r],m=v.Wg;ga.RW(v,a);v=v.num_channels;l||(l=m.length);for(var v=c(h,n,t,l,v),H=v.length/l,q=d(t,r|0),p=0;p<l;p++)v[p*H+q]=m[p]}}if(wa.kl(h)){for(var C in h)"tsr"==C&&b(h[C],l);g.lb=h}if(wa.kl(n)){for(var x in n)b(n[x],l);g.lE=n}g.TG=l;g.SK=a.vV;"tsr"in h&&E(k,g.Sk);("color"in h||"energy"in h)&&S(k,g.Sk);("light_settings.environment_energy"in h||"horizon_color"in
h||"zenith_color"in h||"mist_settings.intensity"in h||"mist_settings.depth"in h||"mist_settings.start"in h||"mist_settings.height"in h||"b4w_fog_color"in h)&&F(k,g.Sk);M(a);Ba.push(a)};a.d_=function(a,b){return(b-a)*ma.Do+1};a.aW=function(a,b,d,c,f,e){var g=new Float32Array(2),k=new Float32Array(2),h=new Float32Array(2),n=new Float32Array(2),l=b[1],t=b[2],B=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var v=0,r=0,m=null;f<=e;f++)if(f<l)for(var H=0;H<ma.Do;H++)d[v++]=t;else if(f>B)for(H=
0;H<ma.Do;H++)d[v++]=a;else{var q=b[r],p=3;0===q&&(p+=2);0===m&&(p+=2);var x=2===q?0:1;if(b[r+1]==b[r+p+1])m=q,r+=p;else{H=0;f==b[r+1]&&(x&&(c[v]=1),d[v]=b[r+2],v++,H++);if(f==B)for(;H<ma.Do;H++)d[v++]=a;else for(g[0]=b[r+1],g[1]=b[r+2],0!==q?(k[0]=0,k[1]=0):0===m?(k[0]=b[r+5],k[1]=b[r+6]):(k[0]=b[r+3],k[1]=b[r+4]),0!==q?(h[0]=0,h[1]=0):(h[0]=b[r+p+3],h[1]=b[r+p+4]),n[0]=b[r+p+1],n[1]=b[r+p+2];H<ma.Do;H++){var w=f+H/ma.Do;switch(q){case 0:var Q,K,y,D=g,E=k,F=h,A=n,J=[],M=[];J[0]=D[0]-E[0];J[1]=D[1]-
E[1];M[0]=A[0]-F[0];M[1]=A[1]-F[1];Q=A[0]-D[0];y=Math.abs(J[0]);K=Math.abs(M[0]);y+K&&y+K>Q&&(Q/=y+K,E[0]=D[0]-Q*J[0],E[1]=D[1]-Q*J[1],F[0]=A[0]-Q*M[0],F[1]=A[1]-Q*M[1]);x&&(c[v]=1);d[v]=C(z(0,1,w,g[0],k[0],h[0],n[0]),g[1],k[1],h[1],n[1]);v++;break;case 1:x&&(c[v]=1);D=g[0];E=g[1];F=(n[1]-E)/(n[0]-D);d[v]=F*w+(E-F*D);v++;break;case 2:x&&(c[v]=1);d[v]=b[r+2];v++;break;default:wa.J("Unknown keyframe interpolation mode: "+q)}}f+1==b[r+p+1]&&(m=q,r+=p)}}};a.apply=W;a.YV=function(a,b,d,c){c=c||0;var g=
wa.Oe("uuid",d,Ba);if(g){r(a,c);if(e(a,b,g,c)){f(a,c);return}a.za[c]=null}ha.error('Unsupported object: "'+a.name+'" or animation uuid: "'+d+'"')};a.Iea=function(a,b){var c=wa.Oe("name",b,Ba)||wa.Oe("name",b+"_B4W_BAKED",Ba);if(c){if(0==c.I.type)return!1}else if(!(n(a,b)||la.mf(a)&&d(a,b)))return!1;return!0};a.Zaa=function(a,b){for(var d=a.za,c=0;c<d.length;c++){var f=d[c];if(f&&p(f.Jk)==p(b))return c}return-1};a.baa=function(a,b){var d=a.za[b];return d&&d.Jk?p(d.Jk):null};a.remove=function(a){a.za.length=
0;a=ka.indexOf(a);-1!=a&&ka.splice(a,1)};a.t2=function(a){for(var b=Ba.length-1;0<=b;b--)Ba[b].wV==a&&Ba.splice(b,1)};a.M8=function(a,b){if(!a.za.length)return W(a,null,b,0)?0:-1;for(var d=0;d<a.za.length;d++)if(!a.za[d])return W(a,null,b,d)?d:-1};a.Jda=function(a,b,d,c){a=a.v;a.vq=(b-a.Fi)/d;a.uq=b;a.Hk&&a.Hk();a.Hk=c};a.sca=function(a,b,d,c){a=a.v;a.co[1]=b;a.vq=1/d;a.uq=1;a.Hk&&a.Hk();a.Hk=c;a.vn=null;a.dn=null;a.Zi=!0};a.Lda=function(a,b,d){A(a.za,d,function(a){a.speed=b})};a.$aa=function(a,b){return a.za[b].speed};
a.eaa=function(a,b){return a.za[b].start};a.caa=function(a,b){return a.za[b].length};a.Ja=function(){ka.length=0;Ba.length=0};a.AZ=function(a){var b=(a[0]||a[1]||a[2]).Wg.length,d=O,c=ca,f=!!a[0];f||(a[0]={Wg:new Float32Array(b),num_channels:8});var e=!!a[1];e||(a[1]={Wg:new Float32Array(b),num_channels:8});var g=!!a[2];g||(a[2]={Wg:new Float32Array(b),num_channels:8});a[3]={Wg:new Float32Array(b),num_channels:8};for(var k=0;k<b;k++)c[0]=f?a[0].Wg[k]:0,c[1]=e?a[1].Wg[k]:0,c[2]=g?a[2].Wg[k]:0,wa.bl(c,
d),a[0].Wg[k]=d[3],a[1].Wg[k]=d[0],a[2].Wg[k]=d[1],a[3].Wg[k]=d[2]};a.dN=X;a.U3=function(a,b){for(var c=7,f=0,e=0;e<Ba.length;e++){var g=Ba[e];if(g.name==b){f=g.I.type;break}}0==f&&(d(a,b)?f=30:(e=n(a,b))&&"EMITTER"==e.eB&&(f=50));for(e=0;8>e;e++)if(g=a.za[e]){if(g.type==f)return e}else e<c&&(c=e);return c}};b4w.module.__armature=function(a,u){function m(a){a=a.v;for(var b=a.gs,c=a.KA,e=0;e<b.length;e++){for(var g=b[e],h=c[e],v=0;v<h.length;v+=2)for(var m=h[v],k=h[v+1],q=0;4>q;q++)g.ve[m+q]=a.ve[k+q],g.tf[m+q]=a.tf[k+q],g.Ce[m+q]=a.Ce[k+q],g.xf[m+q]=a.xf[k+q];g.sg=a.sg}}function c(a,b,e,g){var h=a.eS,m=a.mj,v=a.TC,q=a.Qr;q?(q=q.TC,b?p.multiply(q,h,v):(b=A,p.invert(q,b),p.multiply(b,v,h))):b?p.copy(h,v):p.copy(v,h);h=w;p.invert(m,h);p.multiply(v,h,h);m=a.zj;e[4*m]=h[0];e[4*m+1]=h[1];e[4*m+2]=h[2];e[4*
m+3]=h[3];g[4*m]=h[4];g[4*m+1]=h[5];g[4*m+2]=h[6];g[4*m+3]=h[7];a=a.Ly;for(m=0;m<a.length;m++)v=a[m],v.zc||c(v,!0,e,g)}var b=u("__util"),p=u("__tsr"),h=u("__quat"),G=u("__mat4"),q=u("__vec3"),w=p.create(),A=p.create(),g=new Float32Array(4),e=new Float32Array(4),y=new Float32Array(4);a.Ds=function(a,c){for(var e=a.data.bones,g=a.pose.bones,h={},m=0;m<g.length;m++){var v=g[m],x=v.bone,k=x.name,y=h[k]={zj:0,NS:-1,Qr:null,Ly:[],cy:[],zc:null,RC:p.create(),eS:p.create(),mj:p.create(),LI:p.create(),TC:p.create(),
VC:p.create(),UC:p.create(),qw:p.create(),KI:p.create(),SC:!1,SR:new Float32Array(3)},k=new Float32Array(x.matrix_local),A=new Float32Array(16);G.invert(k,A);var v=new Float32Array(v.matrix_basis),E=y.SR;q.subtract(b.Rh(x.tail_local),b.Rh(x.head_local),E);b.F5(E,A,E);p.Wh(k,y.mj);p.Wh(v,y.qw);p.copy(y.mj,y.TC);p.invert(y.mj,y.LI)}for(m=0;m<e.length;m++){k=e[m].name;v=b.Oe("name",k,g);y=h[k];x=v.parent_recursive;y.cy.push(y);for(A=0;A<x.length;A++)v=x[A],v=v.name,v=h[v],y.cy.push(v);x.length?(v=x[0],
v=v.name,v=h[v],y.Qr=v,p.invert(v.mj,w),p.multiply(w,y.mj,y.RC),v.Ly.push(y)):p.copy(y.mj,y.RC);y.zj=m;y.name=k;p.multiply(y.RC,y.qw,y.eS)}c.v.Lh=h};a.BF=function(a,b,c){var m=a.v,l=m.sg;b=m.Lh[b];var q=b.zj;a=b.mj;var v=m.Ce,x=m.xf,k=m.ve,m=m.tf,D=v[4*q+1],J=v[4*q+2],E=v[4*q+3],u=x[4*q+1],F=x[4*q+2],z=x[4*q+3];g[0]=(1-l)*v[4*q]+l*x[4*q];g[1]=(1-l)*D+l*u;g[2]=(1-l)*J+l*F;g[3]=(1-l)*E+l*z;e[0]=k[4*q];e[1]=k[4*q+1];e[2]=k[4*q+2];e[3]=k[4*q+3];y[0]=m[4*q];y[1]=m[4*q+1];y[2]=m[4*q+2];y[3]=m[4*q+3];h.slerp(e,
y,l,e);l=w;p.jn(g,l);p.Ec(e,l);q=A;p.translate(a,b.SR,q);p.multiply(l,q,l);p.copy(l,c)};a.a3=function(a,b,e){var g=a.v;b=g.Lh[b];var h=g.Ce,q=g.ve;p.copy(e,b.TC);c(b,!1,h,q);g.sg=0;m(a)};a.r5=m;a.P4=c;a.h9=function(a,b){return b in a.v.Lh}};b4w.module.__lights=function(a,u){function m(a){p.scale(a.color,a.al,a.fu)}var c=u("__tsr"),b=u("__util"),p=u("__vec3"),h=new Float32Array(3);a.I0=function(a,q){var w=a.data,A=q.yd={name:"",type:w.type,RP:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),fu:new Float32Array(3),OY:0,RI:!1,ns:0,tC:0,bu:.1,au:30,YM:!1,uP:!1,cZ:!1,Ep:!0,Ip:!0,al:1,distance:25,L$:"INVERSE_SQUARE"};A.name=q.name;A.Ep=w.use_diffuse;A.Ip=w.use_specular;var g=c.ha(q.v.C),g=b.Jc(g,b.fc,h);p.normalize(g,
g);A.direction.set(g);A.color[0]=w.color[0];A.color[1]=w.color[1];A.color[2]=w.color[2];A.al=A.OY=w.energy;m(A);A.distance=w.distance;A.RI=w.use_sphere;A.bu=w.clip_start;A.au=w.clip_end;if("POINT"===A.type||"SPOT"===A.type)A.distance=w.distance;"SPOT"===A.type?(A.tC=w.spot_blend,A.ns=w.spot_size):"POINT"===A.type&&(A.ns=Math.PI/2);A.YM=w.b4w_generate_shadows;A.cZ=w.b4w_dynamic_intensity};a.r3=function(a,b){a.color[0]=b[0];a.color[1]=b[1];a.color[2]=b[2];m(a)};a.oda=function(a,b){a.tC=b};a.nda=function(a,
b){a.distance=b};a.pda=function(a,b){a.ns=b};a.s3=function(a,b){a.al=b;m(a)};a.b5=function(a){var h=a.yd;if(h){a=c.ha(a.v.C);b.Jc(a,b.fc,h.direction);p.normalize(h.direction,h.direction);if("SUN"==h.type){a=Math.acos(p.dot(h.RP,b.UD));var m=Math.acos(p.dot(h.direction,b.UD));h.uP=Math.floor(a/.025)!=Math.floor(m/.025)?!0:!1}p.copy(h.direction,h.RP)}}};b4w.module.__obj_util=function(a,u){function m(a){a={type:a,Le:0,C:P.oo(),tD:P.oo(),pivot:new Float32Array(3),Hc:new Float32Array(3),Jm:0,Km:0,jG:!1,iA:!1,rm:null,cj:0,pk:!1,Ve:L.create(),use_panning:!1,yb:0,Ps:1,Os:1,Qs:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,oe:!1,dof_object:null,hc:null,Ya:null,Kb:null,xd:null,wd:null,he:null,Qh:!0,ek:{Ym:1,Zm:1,$m:0},Ke:-1,te:-1,Kc:new Float32Array(4),Vh:0,Ph:0,nl:!1,nv:new Float32Array(3),
GA:new Float32Array(3),kh:0,jh:Infinity,tl:0,ul:0,df:!1,Tf:!1,ze:!1,uf:!1,Se:!1,xe:!1,we:!1,gj:"",Af:!1,ef:!1,hd:!1,ci:!1,iO:!1,gn:!1,bB:!1,Ad:!1,aB:!1,cB:!1,Mm:!1,vr:!1,Iu:!1,Pp:0,Mg:0,Ng:0,og:0,ng:0,hg:0,vl:"",Hf:{tG:"",sG:"",aH:""},bo:!1,by:new Float32Array(3),Kh:!1,Mt:!1,Ot:"",Nt:!1,sg:0,dD:0,eD:0,Yi:0,Eo:!1,Fd:!1,Xf:!1,uh:[],Pm:!1,Ik:!1,Fi:1,vq:0,uq:1,Hk:null,Zi:!1,co:new Int8Array([-1,-1]),gs:[],KA:[],$B:[],ve:null,tf:null,Ce:null,xf:null,vn:null,dn:null,Lh:null,Aj:null,Dv:null,Ft:null,Et:null,
Lk:y.Gf(),Aa:y.Gf(),Hi:y.Gf(),yc:y.py(),af:y.py(),Ib:y.mu(),lm:y.mu(),Id:y.vy(),NK:y.vy(),Lt:y.n0(),Jt:y.l0(),Kt:y.m0(),fk:0};L.copy(J.fc,a.Ve);return a}function c(a){return{vb:a,hA:!1,aa:[],$g:[],gk:[],Wk:null,cI:[],lv:0,DP:!1,na:[],rR:[]}}function b(a){if(!(a instanceof Object))return a;var c=null,e=null,g=null,h=null,l=null,v=null;a.qa&&(c=a.qa,a.qa=null);a.Hg&&(e=a.Hg,a.Hg=null);a.gg&&(g=a.gg,a.gg=null);a.wb&&(h=a.wb,a.wb=null);a.zb&&(l=a.zb,a.zb=null);a.Yf&&(v=a.Yf,a.Yf=null);var m;m=a.constructor;
switch(m){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:m=new m(a);break;case Array:m=new m(a.length);for(var q=0;q<a.length;q++)m[q]=b(a[q]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:m=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:m=null;break;case Function:m=a;break;default:for(q in m=new m,a)m[q]=b(a[q])}c&&(m.qa=c,a.qa=
c);e&&(m.Hg=e,a.Hg=e);g&&(m.gg=g,a.gg=g);h&&(m.wb=h,a.wb=h);l&&(m.zb=l,a.zb=l);v&&(m.Yf=J.vm(),a.Yf=v);return m}function p(a,b){y.Gj(b,a.Aa);y.Dq(a.Aa,a.C,a.Hi)}function h(a,b,c){a.yc=y.aL(b,c);y.Vx(a.yc,a.C,a.af)}function G(a,b,c,e,g,h){a.Ib=y.gE(b,c,e,h);L.scale(a.Ib.Za,g[0],a.Ib.Za);L.scale(a.Ib.$a,g[1],a.Ib.$a);L.scale(a.Ib.ab,g[2],a.Ib.ab);y.mE(a.Ib,a.C,a.lm)}function q(a,b,c,e){a.Lt=y.QK(b,e);a.Jt=y.OK(c,e);a.Kt=y.PK(b,e)}function w(a,b,c,e,g,h){a.Id=y.L2(h,b,c,e,g);y.nE(a.Id,a.C,a.NK)}function A(a,
b,c){y.Dq(a.Cb.Ef,b,c.Ef);a.Bn&&y.mE(a.Cb.fg,b,c.fg);y.Vx(a.Cb.ig,b,c.ig)}function g(a,b){for(var c=a.P,e=0;e<c.length;e++){var g=c[e];if(g.vb==b)return g}return null}function e(a){return a.cn?a.parent:a.parent?e(a.parent):null}var y=u("__boundings"),x=u("__config"),P=u("__tsr"),J=u("__util"),L=u("__vec3"),l=u("__vec4"),I=x.K;a.ND=Infinity;a.Jq=m;a.EE=function(a){var b=m(a.type);b.Le=a.Le;P.copy(a.C,b.C);P.copy(a.tD,b.tD);L.copy(a.pivot,b.pivot);L.copy(a.Hc,b.Hc);b.Jm=a.Jm;b.Km=a.Km;b.jG=a.jG;b.iA=
a.iA;a.rm&&(b.rm=L.clone(a.rm));b.cj=a.cj;b.pk=a.pk;L.copy(a.Ve,b.Ve);b.use_panning=a.use_panning;b.yb=a.yb;b.Ps=a.Ps;b.Os=a.Os;b.Qs=a.Qs;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.oe=a.oe;b.dof_object=a.dof_object;b.hc=J.X(a.hc);b.Ya=J.X(a.Ya);b.Kb=J.X(a.Kb);b.xd=J.X(a.xd);b.wd=J.X(a.wd);
b.he=a.he;b.Qh=a.Qh;b.ek.Ym=a.ek.Ym;b.ek.Zm=a.ek.Zm;b.ek.$m=a.ek.$m;b.Ke=a.Ke;b.te=a.te;b.Kc=a.Kc;b.Vh=a.Vh;b.Ph=a.Ph;b.nl=a.nl;L.copy(a.nv,b.nv);L.copy(a.GA,b.GA);b.kh=a.kh;b.jh=a.jh;b.tl=a.tl;b.ul=a.ul;b.df=a.df;b.Tf=a.Tf;b.ze=a.ze;b.uf=a.uf;b.Se=a.Se;b.xe=a.xe;b.we=a.we;b.gj=a.gj;b.Af=a.Af;b.ef=a.ef;b.hd=a.hd;b.ci=a.ci;b.gn=a.gn;b.bB=a.bB;b.Ad=a.Ad;b.aB=a.aB;b.cB=a.cB;b.Mm=a.Mm;b.vr=a.vr;b.Iu=a.Iu;b.Pp=a.Pp;b.Mg=a.Mg;b.Ng=a.Ng;b.og=a.og;b.ng=a.ng;b.hg=a.hg;b.vl=a.vl;b.Hf=a.Hf;b.bo=a.bo;L.copy(a.by,
b.by);b.Kh=a.Kh;b.Mt=a.Mt;b.Ot=a.Ot;b.Nt=a.Nt;b.sg=a.sg;b.dD=a.dD;b.eD=a.eD;b.Yi=a.Yi;b.Eo=a.Eo;b.Fd=a.Fd;b.Xf=a.Xf;b.uh=J.X(a.uh);b.Pm=a.Pm;b.Ik=a.Ik;b.Fi=a.Fi;b.vq=a.vq;b.uq=a.uq;b.co.set(a.co);b.gs=J.X(a.gs);b.KA=J.X(a.KA);b.$B=J.X(a.$B);b.ve=J.X(a.ve);b.tf=J.X(a.tf);b.Ce=J.X(a.Ce);b.xf=J.X(a.xf);b.Lh=J.X(a.Lh);b.Aj=J.X(a.Aj);b.Dv=J.X(a.Dv);b.Ft=J.X(a.Ft);b.Et=J.X(a.Et);y.Gj(a.Lk,b.Lk);y.Gj(a.Aa,b.Aa);y.Gj(a.Hi,b.Hi);y.tm(a.yc,b.yc);y.tm(a.af,b.af);y.Gq(a.Ib,b.Ib);y.Gq(a.lm,b.lm);y.uX(a.Jt,b.Jt);
y.wX(a.Lt,b.Lt);y.vX(a.Kt,b.Kt);b.fk=a.fk;return b};a.ou=function(a,b,c){c||(c=a);return{name:a,md:J.pz(),Qf:c,type:b,Bc:[],Nm:!0,Rn:null,lh:{Nr:[],Ro:[]},ba:!1,av:!1,ww:!1,AO:!1,v:null,zc:null,ka:null,yd:null,Kx:null,anchor:null,Vq:null,LA:null,Dy:null,P:[],Fd:[],bf:J.vm(),JE:J.vm(),za:[],Nv:[],zg:[],Sn:[],jj:null,wp:[],parent:null,cn:!1,wv:"",lD:null,jB:null,Gs:!1,Rb:"",my:"AUTO",ug:!1,ml:!1,Uo:!1,jE:!1,L:null,O:null,Th:null,Jg:null,Yq:null,lL:null,hH:[],Rd:{zv:"NO_COLLISION",tk:!1,FS:!1,gi:0,KS:0,
JS:0,oM:0,pQ:0,a1:!1,b1:!1,c1:!1,d1:!1,e1:!1,f1:!1,Ej:0,Dj:0,Fj:0,QI:!1,iy:"BOX",vw:!1},GP:{LC:0,$G:0,qh:0,sH:0},Xn:0,uo:[],RG:!1,tP:!1,ov:[]}};a.Vba=c;a.ku=function(a){return a instanceof Array?a.slice():a};a.lu=b;a.ba=function(a){return a.ba};a.So=function(a){return"MESH"==a.type&&a.ba};a.Hx=function(a,b){a.P.push(c(b))};a.Xg=function(a,b,c){var e=a.v;a=g(a,b);a.aa.push(c);b=y.sO();A(c,e.C,b);a.$g.push(b)};a.rS=function(a,b){var c=a.v,e=Math.max(Math.abs(b.max_x),Math.abs(b.min_x)),g=Math.max(Math.abs(b.max_y),
Math.abs(b.min_y)),l=Math.max(Math.abs(b.max_z),Math.abs(b.min_z)),l=Math.sqrt(e*e+g*g+l*l),e=Math.sqrt(e*e+g*g),g=y.Gf();g.max_x=g.max_y=g.max_z=l;g.min_x=g.min_y=g.min_z=-l;p(c,g);h(c,l,[0,0,0]);G(c,[1,0,0],[0,1,0],[0,0,1],[l,l,l],[0,0,0]);a.ba?q(c,e,e,g):w(c,[1,0,0],[0,1,0],[0,0,1],[l,l,l],[0,0,0])};a.m5=function(a,b,c){var e=a.v,g=c.bs_rad,k=c.bc_rad,l=c.bs_cen,m=c.be_cen,v=c.caxis_x,C=c.caxis_y,r=c.caxis_z,f=c.be_ax,x=c.rbb.rbb_c;c=c.rbb.rbb_s;p(e,b);h(e,g,l);b=a.ba;G(e,b?v:[1,0,0],b?C:[0,1,
0],b?r:[0,0,1],f,m);a.ba?q(e,k,k,e.Aa):w(e,v,C,r,c,x)};a.n5=function(a,b,c){for(var e=a.v,g=b.max_x-b.min_x,k=b.max_y-b.min_y,l=b.max_z-b.min_z,m=(b.max_x+b.min_x)/2,v=(b.max_y+b.min_y)/2,C=(b.max_z+b.min_z)/2,r=m,f=C,x=Math.max(g,Math.max(k,l))/2,d=Math.max(g,l)/2,n=[m/(g?g:1),v/(k?k:1),C/(l?l:1)],y=.5,A=0;A<c.length;A++)for(var t=c[A],J=0;J<t.length;J+=3){var K=t[J],H=t[J+1],u=t[J+2],L=Math.sqrt((m-K)*(m-K)+(v-H)*(v-H)+(C-u)*(C-u));if(L>x)var P=m-x*(K-m)/L,I=v-x*(H-v)/L,L=C-x*(u-C)/L,m=(P+K)/2,
v=(I+H)/2,C=(L+u)/2,x=Math.sqrt((m-K)*(m-K)+(v-H)*(v-H)+(C-u)*(C-u));I=Math.sqrt((r-K)*(r-K)+(f-u)*(f-u));I>d&&(P=r-d*(K-r)/I,L=f-d*(u-f)/I,r=(P+K)/2,f=(L+u)/2,d=Math.sqrt((r-K)*(r-K)+(f-u)*(f-u)));K/=g?g:1;H/=k?k:1;u/=l?l:1;L=Math.sqrt((n[0]-K)*(n[0]-K)+(n[1]-H)*(n[1]-H)+(n[2]-u)*(n[2]-u));L>y&&(P=n[0]-y*(K-n[0])/L,I=n[1]-y*(H-n[1])/L,L=n[2]-y*(u-n[2])/L,n[0]=(P+K)/2,n[1]=(I+H)/2,n[2]=(L+u)/2,y=Math.sqrt((n[0]-K)*(n[0]-K)+(n[1]-H)*(n[1]-H)+(n[2]-u)*(n[2]-u)))}c=g?g*n[0]:b.max_x;r=k?k*n[1]:b.max_y;
n=l?l*n[2]:b.max_z;g*=y;k*=y;l*=y;p(e,b);h(e,x,[m,v,C]);G(e,[1,0,0],[0,1,0],[0,0,1],[g,k,l],[c,r,n]);a.ba?q(e,d,d,e.Aa):w(e,[(e.Aa.max_x-e.Aa.min_x)/2,0,0],[0,(e.Aa.max_y-e.Aa.min_y)/2,0],[0,0,(e.Aa.max_z-e.Aa.min_z)/2],[1,1,1],[(e.Aa.max_x+e.Aa.min_x)/2,(e.Aa.max_y+e.Aa.min_y)/2,(e.Aa.max_z+e.Aa.min_z)/2])};a.wS=A;a.Pca=function(a,b){for(var c=a.P,e=0;e<c.length;e++)if(c[e].vb==b){c.splice(e,1);break}};a.La=g;a.qS=function(a,b){for(var c=0;c<a.length;c++)l.copy(b,a[c].v.Kc)};a.IH=function(a,b,c){for(var e=
0;e<a.P.length;e++){var g=a.P[e];c&&g.vb!=c||(g.hA=b)}};a.uQ=function(a,b){a.aa.splice(b,1);a.$g.splice(b,1)};a.Hz=function(a,b){for(var c=[],e=b?I.lP-1:I.lP,g=0;g<a.length;g++){var h=a[g];h.yd.YM&&c.length<e&&c.push(h)}return c.length?c:a[0]?[a[0]]:[]};a.w1=function(a,b){P.identity(b.C);b.rm=null;a.v=b};a.qL=function(a,b){if(b.b4w_enable_soft_particles&&0<b.b4w_particles_softness){var c=b.material-1,e=a.Bc;if(0<=c&&c<e.length&&("ADD"==e[c].xb||"ALPHA"==e[c].xb||"ALPHA_SORT"==e[c].xb))return!0}return!1};
a.cX=function(a){a=a.P;for(var b=0;b<a.length;b++)for(var c=a[b].aa,e=0;e<c.length;e++)for(var g=c[e].mb.Li,h=0;h<g.length;h++){var l=g[h];if("USE_MODEL_TSR_INVERSE"==l[0]&&"1"==l[1])return!0}return!1};a.TM=function(a,b){return a+"*"+b};a.CN=function(a){return a.cn?null:a.parent};a.Qj=e;a.DF=function(a,b){for(var c=[],g=0;g<b.length;g++){var h=b[g];e(h)==a&&c.push(h)}return c};a.KF=function(a){return a.v.Le};a.mf=function(a){return"MESH"===a.type};a.$u=function(a){return"ARMATURE"===a.type};a.Qm=
function(a){return"SPEAKER"===a.type};a.pb=function(a){return"CAMERA"===a.type};a.nr=function(a){return"LAMP"===a.type};a.mr=function(a){return"EMPTY"===a.type};a.bv=function(a){return"LINE"===a.type};a.pl=function(a){return"WORLD"===a.type}};b4w.module.__particles=function(a,u){function m(){y.J("_rand() undefined")}function c(a,b){return{name:a,eB:b,time:0,pB:-1,Is:!1,Hq:1,Ha:0,sb:0,KC:0,jv:0,xA:0,be:0,gi:0,Gr:0,Oz:0,cl:0,Kf:0,sD:0,size:0,Fx:0,Ex:0,ky:0,jy:new Float32Array(16),TA:!1,positions:null,Ev:null,GC:null,kw:null,Oq:null,tu:null,dh:null,dB:null,IC:0,JC:0}}function b(a,b,c,g,h,m){var k=a.Oq,q=a.dh,v=a.time;a=a.pB;for(var p=0;p<k.length;p+=4){var r=k[p];if(v>a&&v>=r&&r>a||v<a&&(r>a||v>=r))for(r=0;8>r;r++)q[8*p+r]=g[r],L[r]=g[r];
else for(r=0;8>r;r++)L[r]=q[8*p+r];r=l;r[0]=b[3*p];r[1]=b[3*p+1];r[2]=b[3*p+2];e.Lc(r,L,r);h[3*p]=r[0];h[3*p+1]=r[1];h[3*p+2]=r[2];var f=w.Io(c,p,J);w.pP(f,L,f);w.lk(m,f,p);for(r=1;4>r;r++)h[3*(p+r)]=h[3*p],h[3*(p+r)+1]=h[3*p+1],h[3*(p+r)+2]=h[3*p+2],w.lk(m,f,p+r)}}function p(a){a?(y.j4(a),m=function(){return y.q2()}):m=function(){return Math.random()}}var h=u("__config"),G=u("__batch"),q=u("__geometry"),w=u("__tbn"),A=u("__textures"),g=u("__time"),e=u("__tsr"),y=u("__util"),x=u("__vec3"),P=h.K,J=
w.create(),L=new Float32Array(8),l=new Float32Array(3),I=[];a.HL=function(a){var b=c(a.name,a.type);b.time=a.time;b.pB=a.pB;b.Is=a.Is;b.Hq=a.Hq;b.Ha=a.Ha;b.sb=a.sb;b.KC=a.KC;b.jv=a.jv;b.xA=a.xA;b.be=a.be;b.gi=a.gi;b.Gr=a.Gr;b.Oz=a.Oz;b.cl=a.cl;b.Kf=a.Kf;b.sD=a.sD;b.size=a.size;b.Fx=a.Fx;b.Ex=a.Ex;b.ky=a.ky;b.jy.set(a.jy);b.TA=a.TA;b.positions=y.X(a.positions);b.Ev=y.X(a.Ev);b.GC=y.X(a.GC);b.kw=y.X(a.kw);b.Oq=y.X(a.Oq);b.tu=y.X(a.tu);b.dh=y.X(a.dh);b.dB=y.X(a.dB);b.IC=a.IC;b.JC=a.JC;return b};a.update=
function(){for(var a=0;a<I.length;a++)for(var c=I[a],e=c.P,g=0;g<e.length;g++)for(var h=c,l=e[g].aa,m=0;m<l.length;m++){var q=l[m],p=q.Qa;p&&p.Is&&!q.Uh&&(b(p,p.positions,p.GC,h.v.C,p.Ev,p.kw),p.TA=!0)}};a.UG=function(a){a=a.P;for(var b=0;b<a.length;b++)for(var c=a[b].aa,e=0;e<c.length;e++)if(c[e].Qa)return!0;return!1};a.Aca=function(a,b){for(var c=a.P,e=0;e<c.length;e++)for(var g=c[e].aa,h=0;h<g.length;h++){var l=g[h].Qa;if(l&&l.name==b)return!0}return!1};a.CP=function(a){a=a.P;for(var b=0;b<a.length;b++)for(var c=
a[b].aa,e=0;e<c.length;e++){var g=c[e].Qa;if(g&&"EMITTER"==g.eB)return!0}return!1};a.xW=function(a){return 0<a.particle_systems.length};a.wW=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};a.Z_=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};a.UX=function(a,b,e){var h=a.Qa=c(b.name,b.settings.type);h.Ha=b.settings.frame_start;
h.sb=b.settings.frame_end;h.KC=(h.sb-h.Ha)/g.fe();h.jv=b.settings.lifetime;h.xA=h.jv/g.fe();h.be=b.settings.b4w_cyclic?1:0;h.gi=b.settings.mass;h.Gr=b.settings.normal_factor;h.Oz=9.81*b.settings.effector_weights.gravity;h.cl=b.settings.b4w_fade_in/g.fe();h.Kf=b.settings.b4w_fade_out/g.fe();h.sD=b.settings.effector_weights.wind;h.Is="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var k,l,m;a.Uu?(k=e.er.size,l=e.er.Vu,30>l?(l=.5,m=.9):40>l?(l=.1,m=1):50>l?(l=0,m=.8):(l=0,m=.5)):(k=b.settings.particle_size,
m=l=1);h.size=k;h.Fx=l;h.Ex=m;e.zh&&"BILLBOARD"==b.settings.render_type&&(G.Sf(a,"NODES",1),G.Sf(a,"PARTICLE_BATCH",1),a.Uj=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&P.Dx&&(b=b[0].texture,k=[],A.EW(b.color_ramp,A.LJ,k),k=new Uint8Array(k.map(function(a){return y.ja(255*a,0,255)})),k=A.UL(k,A.LJ),G.km(a,k,"u_color_ramp_tex",b.name),G.Sf(a,"USE_COLOR_RAMP",1));e=e.wh;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(e[0]&&
"STRAND"==e[0].texture_coords&&e[0].texture&&"BLEND"==e[0].texture.type&&e[0].texture.use_color_ramp){e=e[0].texture.color_ramp.elements;b=Math.min(4*e.length,a.length);for(k=0;k<b;k+=4)l=e[k/4],a[k]=l.position,a[k+1]=l.color[0],a[k+2]=l.color[1],a[k+3]=l.color[2];h.ky=e.length}h.jy.set(a)};a.TZ=function(a,c,e,h){var k=a.Qa,l=h.C;h=e.settings.count;var v=e.settings.frame_start/g.fe(),F=e.settings.frame_end/g.fe(),z=e.settings.lifetime/g.fe(),C=e.settings.lifetime_random,r=e.settings.emit_from,f=e.settings.factor_random;
if(e.settings.use_rotations)var A=e.settings.angular_velocity_mode,d=e.settings.angular_velocity_factor;else A="NONE",d=0;var n=e.settings.b4w_randomize_emission,D=e.settings.b4w_cyclic;k.IC=e.settings.billboard_tilt;k.JC=e.settings.billboard_tilt_random;p(e.seed);var u;c=q.IM(c,["a_position","a_tbn"],null);switch(r){case "VERT":var t=c.la[0].a_position;u=c.la[0].a_tbn;e=t.length/3;c=[];for(r=0;r<h;r++){var K=Math.round((e-1)*m());c.push(K);c.push(K);c.push(K);c.push(K)}e=[];for(r=0;r<c.length;r++)e.push(t[3*
c[r]]),e.push(t[3*c[r]+1]),e.push(t[3*c[r]+2]);t=new Float32Array(e);e=w.create(c.length);for(r=0;r<c.length;r++)K=w.Io(u,c[r],J),w.lk(e,K,r);u=e;break;case "FACE":t=[];u=[];y.fA(0,u);e=q.xF(c,h,!1,u);y.fA(0,u);c=q.xF(c,h,!0,u);u=w.create(4*e.length);for(r=0;r<e.length;r++)t.push(e[r][0],e[r][1],e[r][2]),t.push(e[r][0],e[r][1],e[r][2]),t.push(e[r][0],e[r][1],e[r][2]),t.push(e[r][0],e[r][1],e[r][2]),w.lk(u,c[r],4*r),w.lk(u,c[r],4*r+1),w.lk(u,c[r],4*r+2),w.lk(u,c[r],4*r+3);t=new Float32Array(t);break;
case "VOLUME":y.J("Particle emission from volume is not supported");break;default:y.J("Wrong emit from option")}u=[t,u];t=u[0];u=u[1];k.positions=new Float32Array(t);k.GC=new Float32Array(u);k.Ev=new Float32Array(t.length);k.kw=new Float32Array(u.length);c=[];F=(F-v)/h;for(e=0;e<h;e++)r=n?F*e+10*F*(.5-m()):F*e,D||(r+=v),c.push(r),c.push(r),c.push(r),c.push(r);v=new Float32Array(c);k.Oq=new Float32Array(v);k.tu=new Float32Array(v);if(k.Is){k.dh=new Float32Array(8*v.length);for(n=0;n<8*v.length;n++)for(D=
0;8>D;D++)k.dh[8*n+D]=l[D];b(k,t,u,l,t,u)}l=q.ei("EMITTER_PARTICLES");n=y.Ij();n.a_position=t;n.a_tbn=u;l.la[0]=n;a.Mj=q.Nw;a=[];for(n=0;n<h;n++)a.push(4*n,4*n+2,4*n+1,4*n,4*n+3,4*n+2);a=new Uint16Array(a);l.Ea=a;l.Da.a_p_bb_vertex=q.RM(h);l.gb=t.length/3;a=[];C=z*C;for(n=0;n<h;n++)D=C*m(),a.push(z-D),a.push(z-D),a.push(z-D),a.push(z-D);z=l.Da;C=[];for(n=0;n<h;n++)D=Math.random(),C.push(a[4*n],v[4*n],D),C.push(a[4*n+1],v[4*n+1],D),C.push(a[4*n+2],v[4*n+2],D),C.push(a[4*n+3],v[4*n+3],D);C=new Float32Array(C);
z.a_p_data=C;z=l.Da;C=[];for(a=0;a<h;a++){v=[m()-.5,m()-.5,m()-.5];x.normalize(v,v);C.push(f*v[0]);C.push(f*v[1]);C.push(f*v[2]);switch(A){case "NONE":C.push(0);break;case "SPIN":case "VELOCITY":C.push(d);break;case "RAND":C.push(2*d*(m()-.5));break;default:y.J("Undefined velocity factor")}v=C.slice(-4);for(n=0;12>n;n++)C.push(v[n%4])}h=new Float32Array(C);z.a_p_vels=h;k.dB=new Float32Array(l.Da.a_p_data);return l};a.G3=function(a,b,c){a=a.P;for(var e=0;e<a.length;e++)for(var g=a[e].aa,h=0;h<g.length;h++){var k=
g[h].Qa;k&&k.name==b&&!g[h].Uh&&(k.pB=k.time,k.time=c)}};a.i2=function(a){for(var b=a.gb,c=a.la[0].a_position,e=[],g=[],h=0;h<b;h++)g.push(c[3*h]),e.push(c[3*h+1]),g.push(c[3*h+2]);e=new Float32Array(e);g=new Float32Array(g);a.Da.a_lf_dist=e;a.Da.a_lf_bb_vertex=g;return a};a.Ida=function(a,b,c){a=a.P;for(var e=0;e<a.length;e++)for(var g=a[e].aa,h=0;h<g.length;h++){var k=g[h].Qa;k&&k.name==b&&(k.size=c)}};a.vda=function(a,b,c){a=a.P;for(var e=0;e<a.length;e++)for(var g=a[e].aa,h=0;h<g.length;h++){var k=
g[h].Qa;k&&k.name==b&&(k.Gr=c)}};a.Daa=function(a,b){for(var c=a.P,e=0;e<c.length;e++)for(var g=c[e].aa,h=0;h<g.length;h++){var l=g[h].Qa;if(l&&l.name==b)return l.Gr}return 0};a.j3=function(a,b,c){a=a.P;for(var e=0;e<a.length;e++)for(var g=a[e].aa,h=0;h<g.length;h++){var k=g[h],l=k.Qa;if(l&&l.name==b){l.Hq=c;var m=l.Oq;if(1==c)var p=m;else if(0==c)for(var p=l.tu,r=0;r<p.length;r+=4)p[r]=1E4,p[r+1]=p[r],p[r+2]=p[r],p[r+3]=p[r];else for(var f=4/c,p=l.tu,v=0,r=0;r<p.length;r+=4)r>=v?(p[r]=m[r],v+=f):
p[r]=1E4,p[r+1]=p[r],p[r+2]=p[r],p[r+3]=p[r];k=k.Ga;if(k.bd.a_p_data){l=l.dB;for(r=0;r<l.length;r+=3)l[r+1]=p[Math.round(r/3)];q.S4(k,"a_p_data",3,l)}}}};a.u5=function(a,b,c){a=a.P;for(var e=0;e<a.length;e++)for(var g=a[e].aa,h=0;h<g.length;h++){var k=g[h].Qa;if(k&&k.Is)for(var l=0;l<8*k.Oq.length;l++)k.dh[8*l]=b[0],k.dh[8*l+1]=b[1],k.dh[8*l+2]=b[2],k.dh[8*l+3]=b[3],k.dh[8*l+4]=c[0],k.dh[8*l+5]=c[1],k.dh[8*l+6]=c[2],k.dh[8*l+7]=c[3]}};a.l5=function(a,b,c){a.Da.a_tbn=w.create(4*c);w.identity(a.Da.a_tbn);
if(b.xv){for(var e=[],g=0;g<c;g++)e.push(g,g,g,g);a.Da[b.xv.name]=new Float32Array(e)}};a.k5=function(a){-1==I.indexOf(a)&&I.push(a)};a.w2=function(a){a=I.indexOf(a);-1!=a&&I.splice(a,1)};a.Ja=function(){I.length=0}};b4w.module.__physics=function(a,u){function m(a,b){for(var d=a.bf,c=0;c<d.length;c++)d[c].Rd.vw&&b.push(d[c]),m(d[c],b)}function c(a,b,d){for(var c=a.Oc.Ra,e=0;e<c.length;e++)for(var f=c[e].L,g=0;g<f.jg.length;g++){var h=f.jg[g];"ANY"!=h.Rb&&d!=h.Rb||v(h,a,b)}}function b(a,b,c){if(d.hA(a))switch(b){case d.tT:var e=p(a);e.Oc.XS=!0;d.wa(a,d.VU,Date.now()-performance.now(),B.max_fps,B.oE?Z.OM:0);break;case d.uT:X.Pd("URANIUM:",c.slice(1));break;case d.pT:X.error(c);break;case d.qT:W.dz.apply(this,c.slice(1));
break;case d.qJ:if(a=h(c.ma)){var f=a;a=c.trans;e=c.quat;b=c.ak;var g=c.vj,k=f.L;k.Cy=c.time;c=H.ge(f.v.C);H.si(a,c,e,k.$E);ha.copy(b,k.ak);ha.copy(g,k.vj)}break;case d.oJ:(a=h(c.uE))&&H.si(c.trans,1,c.quat,a.O.Gv[c.nH]);break;case d.rT:if(e=h(c[1]))a=c[4],e=e.Th.Ux[c[2]],la.je(e,c[3]),la.Ll(e,a),la.V(e);break;case d.xT:if(a=h(c[1]))a.O.speed=c[2];break;case d.mJ:e=p(a);G(e,c.eo,c.fo,c.result,null,null,0);break;case d.nJ:e=p(a);G(e,c.eo,c.fo,c.result,c.ko,c.coll_norm,c.coll_dist);break;case d.nT:if(a=
h(c[1]))a=a.L,a.jo&&a.jo(c[2]);break;case d.MD:case d.pJ:e=p(a);if(a=e.Oc.en[c.id])e=h(c.Cq),b==d.MD?(b=a.callback,b(a.id,c.hit_fract,e,c.hit_time)):(b=c.hit_fract,g=c.hit_time,k=c.hit_pos,f=a.callback,k?f(a.id,b,e,g,k,c.hit_norm):f(a.id,b,e,g));break;case d.wT:D(c.id);break;case d.vT:a=da.indexOf(a);console.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+" ms");break;case d.sT:Aa=c[1];break;case d.oT:a=
da.indexOf(a);console.log("Worker: #"+String(a));console.log(c[1]);break;default:X.error("Wrong message: "+b)}}function p(a){for(var b=0;b<da.length;b++)if(da[b]==a)return ba[b]}function h(a){return wa[a]||null}function G(a,b,d,c,e,f,g){a=a.Oc.Ra;for(var k=0;k<a.length;k++)for(var n=a[k].L,l=0;l<n.jg.length;l++){for(var t=n.jg[l],B=t.bn,r=!1,m=0;m<B.length;m++){var H=B[m];if(H[0]===b&&H[1]===d){t.vv[m]=c;r=!0;break}}r&&(B=q(t),e&&t.kE!=b&&(r=e,m=f,H=g,r[0]+=m[0]*H,r[1]+=m[1]*H,r[2]+=m[2]*H,m[0]*=
-1,m[1]*=-1,m[2]*=-1),t.callback(B,B?t.kE==b?h(d):h(b):null,e,f,g))}}function q(a){a=a.vv;for(var b=!1,d=0;d<a.length;d++)b=b||a[d];return b}function w(){aa.body++;return aa.body}function A(a){var b=ma.indexOf(a);return-1==b?(ma.push(a),ma.length-1):b}function g(a,b){return{ma:a,type:b,gi:0,kA:!1,ln:!0,ug:!1,ml:!1,y0:!1,ly:null,Rb:"",eu:0,z9:{},jg:[],jo:null,Cy:0,$E:new Float32Array([0,0,0,1,0,0,0,1]),ak:new Float32Array(3),vj:new Float32Array(3),$x:new Float32Array(3),Tt:new Float32Array(4),pv:null}}
function e(a,b){switch(a){case "BOX":var d=b.Aa;break;case "CYLINDER":d=b.Lt;break;case "CONE":d=b.Kt;break;case "SPHERE":d=b.yc;break;case "CAPSULE":d=b.Jt}return d}function y(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);"object"===typeof a.T&&(b.center=
a.T);"number"===typeof a.ub&&(b.radius=a.ub);"number"===typeof a.height&&(b.height=a.height);return b}function x(a,b,c,e,f){var g=H.W(a.v.C),h=H.invert(b.v.C,oa),k=new Float32Array(3);H.Lc(g,h,k);switch(b.O.type){case 10:b=b.Jg;a=a.v.Aa;d.wa(f,d.yU,c,k,b.t4,b.DH,(a.max_z-a.min_z)/2,e);break;case 20:d.wa(f,d.xU,c,k,a.jE)}}function P(a){return a.L&&a.L.ly}function J(a,b,c,e,f,g,h,k,n,l){var t;aa.zc++;t=aa.zc.toString(16);var B=b.L.ma;d.wa(L(B),d.FU,t,a,k,B,c,e,f.L.ma,g,h,n,l);b.L.ly=t}function L(a){for(var b=
0;b<ba.length;b++)for(var d=ba[b].Oc.Ra,c=0;c<d.length;c++)if(d[c].L.ma==a)return da[b];return null}function l(a){var b=a.L;if(b=b?0===b.gi?!0:!0===b.kA?!0:!1===b.ln?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=H.Yb(a.v.C,ja),c=H.Db(a.v.C,ca),b=b[0]!=a.L.$x[0]||b[1]!=a.L.$x[1]||b[2]!=a.L.$x[2]||c[0]!=a.L.Tt[0]||c[1]!=a.L.Tt[1]||c[2]!=a.L.Tt[2]||c[3]!=a.L.Tt[3];if(b){var b=a.L,e=a.v,c=d.yN(d.rt);c.ma=b.ma;var f=H.Yb(e.C,c.trans),e=H.Db(e.C,c.quat);ha.copy(f,b.$x);R.copy(e,b.Tt);"DYNAMIC"==
b.type&&R.identity(c.quat);d.wa(L(b.ma),d.rt)}a=a.bf;for(b=0;b<a.length;b++)l(a[b])}function I(a,b,d,c,e){e=e||new Float32Array(3);a=H.ha(a.v.C);e[0]=b;e[1]=d;e[2]=c;ha.transformQuat(e,a,e)}function v(a,b,c){var e=a.bn,f=a.vv,g=a.kE,h=[],k=a.Rb;h||za.J("At least one destination required");for(var n=0;n<b.Oc.Ra.length;n++){var l=b.Oc.Ra[n];if("ANY"==k||l.L.Rb==k&&"NAVMESH"!=l.L.type)l=l.L.ma,h&&-1==h.indexOf(l)&&h.push(l)}for(b=0;b<h.length;b++)k=h[b],g<k&&!K(e,g,k)?(e.push([g,k]),f.push(!1)):g>k&&
!K(e,k,g)&&(e.push([k,g]),f.push(!1));d.wa(c,d.wU,g);d.wa(c,d.EU,e,a.Cj)}function K(a,b,d){for(var c=0;c<a.length;c++)if(a[c][0]==b&&a[c][1]==d)return!0;return!1}function k(a){a.L&&a.L.jo&&(a=a.L,d.wa(L(a.ma),d.RU,a.ma),a.jo=null)}function D(a){var b=E(a),c=M(a).Oc;c.en[a]&&(delete c.en[a],c.rH.splice(c.rH.indexOf,1),d.wa(b,d.$U,a))}function M(a){for(var b=0;b<ba.length;b++){var d=ba[b];if(d.Oc.en[a])return d}return null}function E(a){for(var b=0;b<ba.length;b++)if(ba[b].Oc.en[a])return da[b];return null}
function S(a,b,c){if(b.ws){a=a.L.ma;var e=b.Uq*b.Hu,f=b.Rt*b.St,g=-b.us*b.vs*2*Math.PI/b.hw;b.Zu&&(g*=-1);switch(b.type){case 10:d.wa(c,d.nV,a,e,f,g);break;case 20:d.wa(c,d.mV,a,e,f,g)}}}function F(a){return a.ug&&"CHASSIS"==a.Jg.Ag}function z(a){return a.ug&&"HULL"==a.Jg.Ag}function C(a){return"NAVMESH"==a.Rd.zv}function r(a){return a.Uo&&"MAIN_BODY"==a.Yq.Ag}var f=u("__config"),W=u("__debug"),d=u("__ipc"),n=u("__obj_util"),X=u("__print"),R=u("__quat"),t=u("__scenes"),fa=u("__subscene"),la=u("__transform"),
H=u("__tsr"),za=u("__util"),ha=u("__vec3"),ua=u("__version"),ga=u("__navmesh"),B=f.L,Z=f.K,ea=f.Je,Aa=0,da=[],ba=[],wa={},T=[],ma=["ANY"],aa={body:0,zc:0,cQ:0},ja=new Float32Array(3),ca=new Float32Array(4),oa=H.create(),pa=H.create();a.r0=function(a){a.Oc={XS:!1,Ra:[],en:{},rH:[]};var c=B.uw;ea.prevent_caching&&(c+="?v="+ua.get_build_version());X.log("%cLOAD PHYSICS","color: #0a0",B.Jp?"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+B.max_fps);X.log("%cPHYSICS PATH","color: #0a0",
c);var e=d.EY(c,!B.Jp);d.hW(e,b);da.push(e);ba.push(a);B.ping&&setInterval(function(){d.wa(e,d.XU,performance.now())},1E3)};a.fX=function(a){return a.Oc?a.Oc.XS:!0};a.Ja=function(){for(var a=0;a<da.length;a++)d.terminate(da[a]);da.length=0;ba.length=0;wa={};T.length=0;ma=["ANY"];for(var b in aa)aa[b]=0};a.jm=function(a,b){if(b.Oc){var f;a:{for(var h=0;h<ba.length;h++)if(ba[h]==b){f=da[h];break a}f=void 0}var k=[];a.Rd.vw&&m(a,k);var l=b.Oc.Ra;if(F(a)||z(a)||a.ml||r(a)||a.Gs){var t=C(a),B;if(t){var q=
w(),p=g(q,"NAVMESH"),v=n.La(a,b).aa;p.pv=null;for(var E=0;E<v.length;E++){var D=v[E];if("PHYSICS"==D.type){p.pv=ga.C1(D.Ga);break}}B=p}else{var u=f,Q=a.v,fa=a.Rd,K=fa.zv,L=w();if("CAMERA"==a.type)var M=fa.QI?fa.iy:"BOX",Z=e(M,Q),G=.5,I=0;else if("EMPTY"==a.type)M="EMPTY",Z=null,I=G=0;else{var M=fa.QI?fa.iy:"BOX",Z=e(M,Q),W=H.ge(Q.C);if(1!=W){var la=Z;switch(M){case "BOX":la.min_x*=W;la.max_x*=W;la.min_y*=W;la.max_y*=W;la.min_z*=W;la.max_z*=W;break;case "CYLINDER":case "CONE":case "CAPSULE":la.height*=
W;la.ub*=W;break;case "SPHERE":la.ub*=W}}G=Q.Vh;I=Q.Ph}var ha=H.W(Q.C),ea=H.ha(Q.C),xa=fa.tk,ua=fa.FS,aa=fa.gi,ma=fa.KS,Aa=fa.JS,ja=fa.oM,U=fa.pQ,bb=a.Rb,Za=A(bb),Ea=fa.Ej,Ra=fa.Dj,Jb=fa.Fj,xb=Q.yc.ub,Pa=y(Z),Ja=a.my,ab;var jb=M;if(k.length){var ub=[],qb={};qb.quat=new Float32Array([0,0,0,1]);qb.trans=new Float32Array(3);qb.worker_bounding=Pa;qb.bounding_type=jb;ub.push(qb);var sc=H.invert(Q.C,oa),Hb=ca,tc=H.ha(Q.C);R.invert(tc,Hb);for(var hb=0;hb<k.length;hb++){var kb={},yb=k[hb],Wa=yb.Rd.iy,Cb=
new Float32Array(4),Zc=new Float32Array(3),mb=H.W(yb.v.C),Db=H.ha(yb.v.C);H.Lc(mb,sc,Zc);R.multiply(Hb,Db,Cb);kb.trans=Zc;kb.quat=Cb;kb.bounding_type=Wa;kb.worker_bounding=y(e(Wa,yb.v));ub.push(kb)}ab=ub}else ab=[];d.wa(u,d.BU,L,ha,ea,K,xa,ua,aa,ma,Aa,ja,U,Za,Ea,Ra,Jb,M,Pa,xb,G,I,ab,Ja);wa[L]=a;T.push(a);var rb=g(L,"BOUNDING");rb.type=K;rb.gi=aa;rb.kA=xa;rb.Rb=bb;rb.eu=Za;B=rb}var Eb=B;a.L=Eb;var nb={Fa:null,L:Eb};t||(l.push(nb),c(b,f,Eb.Rb))}else for(var ic=n.La(a,b).aa,Ob=0;Ob<ic.length;Ob++){var Fb=
ic[Ob],bc;if(bc="PHYSICS"==Fb.type){var Pc;a:{for(var Qc=b.Oc.Ra,Ec=0;Ec<Qc.length;Ec++){var uc=Qc[Ec].Fa;if(uc&&uc.id==Fb.id){Pc=!0;break a}}Pc=!1}bc=!Pc}if(bc)if(Fb.Be.gb)if(Fb.nj&&b.I.Xd){var vb=Fb,ec=b,$c=f,$a=ec.I.Xd;d.wa($c,d.KU,$a.vk);if(vb.Q5){var cb={};cb.dst_noise_scale0=vb.dst_noise_scale0;cb.dst_noise_scale1=vb.dst_noise_scale1;cb.dst_noise_freq0=vb.dst_noise_freq0;cb.dst_noise_freq1=vb.dst_noise_freq1;cb.dir_min_shore_fac=vb.dir_min_shore_fac;cb.dir_freq=vb.dir_freq;cb.dir_noise_scale=
vb.dir_noise_scale;cb.dir_noise_freq=vb.dir_noise_freq;cb.dir_min_noise_fac=vb.dir_min_noise_fac;cb.dst_min_fac=vb.dst_min_fac;cb.waves_hor_fac=vb.waves_hor_fac;var Rc=$a.waves_height,Vb=$a.waves_length;$a.kn?d.wa($c,d.IJ,cb,$a.fs[0],$a.fs[1],$a.es[0],$a.es[1],$a.CG,Rc,Vb,$a.eI,ec.I.dI):d.wa($c,d.IJ,cb,0,0,0,0,0,Rc,Vb,0,null)}}else{var Fc;if(Fb.tk){var ob=a,Gc=Fb,Sc=f,Hc=w(),ad=Gc.Be,jc=ad.la[0].a_position,bd=ad.Ea||null,Tc=Gc.Rb,kc=A(Tc),cd=Gc.Ej,Mb=Gc.Dj,Uc=Gc.Fj,Ad=H.W(ob.v.C);d.wa(Sc,d.HU,Hc,
jc,bd,Ad,kc,cd,Mb,Uc);var Ic=g(Hc,"STATIC_MESH");Ic.kA=!0;Ic.Rb=Tc;Ic.eu=kc;Fc=Ic}else{var Gb=a,Pb=Fb,pb=f,Xa=w(),Wb=Pb.Be,dd=Wb.la[0].a_position,Vc=Wb.Ea||null,fc=H.W(Gb.v.C),Jc=Pb.Vh,Qb=Pb.Ph,Kc=Pb.Rb,lc=A(Kc);d.wa(pb,d.JU,Xa,dd,Vc,fc,Jc,Qb,lc,Pb.Ej,Pb.Dj,Pb.Fj);var Lc=g(Xa,"STATIC_MESH");Lc.Rb=Kc;Lc.eu=lc;Fc=Lc}Eb=Fc;a.L=Eb;nb={Fa:Fb,L:Eb};l.push(nb);c(b,f,Eb.Rb)}else X.error("Object "+a.name+" has collision material with no assigned vertices")}if(F(a)||z(a)){var Rb=f,Ib=a.L.ma;F(a)?(a.O.type=
10,d.wa(Rb,d.CU,Ib,a.O.pI,a.O.rI,a.O.qI,a.O.XI,a.O.DG)):z(a)&&(a.O.type=20,d.wa(Rb,d.AU,Ib,a.O.Ao,a.O.Mp,a.O.Np));if(a.O.pp){var sb=a.O.pp;switch(a.O.type){case 10:x(sb[0],a,Ib,!0,Rb);x(sb[1],a,Ib,!0,Rb);x(sb[2],a,Ib,!1,Rb);x(sb[3],a,Ib,!1,Rb);break;case 20:for(var mc=0;mc<sb.length;mc++)x(sb[mc],a,Ib,!1,Rb)}}S(a,a.O,f)}else if(a.ml){var lb=f,Wc=a.v,ed=a.L,Mc=Wc.Aa.max_z-Wc.Aa.min_z,zb=ed.ma,Ab=a.lL,Sb=Ab.O5,Xb=Ab.P2,Kb=Ab.m4,gc=Ab.H0,Lb=Ab.S5,wb=za.SY(a);d.wa(lb,d.DU,zb,wb,Mc,Sb,Xb,Kb,gc,Lb);ed.ml=
!0}else if(r(a)){var Ta=f,Yb=a.L.ma;d.wa(Ta,d.GU,Yb,a.Th.Ao,a.Th.Mp,a.Th.Np);if(a.Th.Ux)for(var Nb=a.Th.Ux,eb=0;eb<Nb.length;eb++){var db=Nb[eb],Zb=H.W(db.v.C),hc=H.invert(a.v.C,oa),zc=new Float32Array(3);H.Lc(Zb,hc,zc);d.wa(Ta,d.zU,Yb,zc,db.jE)}a.L.y0=!0}for(Ob=0;Ob<T.length;Ob++){var Xc=T[Ob];if(Xc.L){var vc=Xc;if(!P(vc))for(var pc=0;pc<vc.hH.length;pc++){var tb=vc.hH[pc],wc=tb.target,fd=tb.Y1;if(wc.L){var Yc=new Float32Array([tb.Z1,tb.a2,tb.b2]),fb=za.bl(new Float32Array([tb.Za,tb.$a,tb.ab]),new Float32Array(4)),
Tb=H.identity(oa),Tb=H.Bd(Yc,Tb),Tb=H.Ec(fb,Tb),$b=H.multiply(vc.v.C,Tb,oa),ac=H.invert(wc.v.C,pa),Ac=H.multiply(ac,$b,ac),Ub=H.W(Ac),nd=H.ha(Ac),gb=tb,ib={};ib.use_limit_x=gb.B5;ib.use_limit_y=gb.C5;ib.use_limit_z=gb.D5;ib.use_angular_limit_x=gb.x5;ib.use_angular_limit_y=gb.y5;ib.use_angular_limit_z=gb.z5;ib.limit_max_x=gb.R0;ib.limit_min_x=gb.U0;ib.limit_max_y=gb.S0;ib.limit_min_y=gb.V0;ib.limit_max_z=gb.T0;ib.limit_min_z=gb.W0;ib.limit_angle_max_x=gb.L0;ib.limit_angle_min_x=gb.O0;ib.limit_angle_max_y=
gb.M0;ib.limit_angle_min_y=gb.P0;ib.limit_angle_max_z=gb.N0;ib.limit_angle_min_z=gb.Q0;J(fd,vc,Yc,fb,wc,Ub,nd,ib,null,null)}}}}}};a.DZ=h;a.update=function(a,b){for(var c=0;c<da.length;c++){var e=da[c],f=a;e&&d.GO(e)&&d.wa(e,d.oV,f,b);for(var g=0;g<T.length;g++){var h=T[g],k=h.L;if(k.ln&&k.Cy){var n=d.GO(e)?f-k.Cy:performance.now()/1E3-k.Cy,n=Math.min(n,10/B.max_fps),n=n-1/B.max_fps;Z.D1&&(n=0);var r=oa;H.t0(k.$E,n,k.ak,k.vj,oa);la.mk(h,r);la.V(h);l(h);if(h.O)for(var k=h,n=k.O.pp,r=k.v.C,m=oa,q=0;q<
n.length;q++){var p=n[q];H.multiply(r,k.O.Gv[q],m);la.mk(p,m);la.V(p)}h.O&&h.O.ws&&(m=h,n=m.O,k=n.ws)&&(q=m.O.FR,H.multiply(m.v.C,m.O.GR,k.v.C),r=ja,H.Td(q,m.v.C,r),m=ca,R.setAxisAngle(r,-n.us*n.vs*2*Math.PI,m),n=H.ha(k.v.C),R.multiply(m,n,n),la.V(k));h.O&&h.O.iI&&(m=h,n=m.O,k=n.iI)&&(q=m.O.AR,H.multiply(m.v.C,m.O.BR,k.v.C),r=ja,H.Td(q,m.v.C,r),m=ca,q=Math.abs(n.speed)*n.gw,q>n.zr&&(q=n.zr),R.setAxisAngle(r,-q,m),n=H.ha(k.v.C),R.multiply(m,n,n),R.normalize(n,n),la.V(k));h.O&&h.O.sI&&(r=h,k=r.O,h=
k.sI)&&(m=r.O.QR,H.multiply(r.v.C,r.O.RR,h.v.C),n=ja,H.Td(m,r.v.C,n),r=ca,R.setAxisAngle(n,-Math.abs(k.Uq)*k.uu,r),k=H.ha(h.v.C),R.multiply(r,k,k),R.normalize(k,k),la.V(h))}}d.h2(e);e=ba[c];(f=e.I.Xd)&&0<f.waves_height&&(e=t.Xb(e,fa.Wb),f=ha.length(e.pj)||1,d.wa(da[c],d.lV,e.time*f))}};a.a_=function(){return ba[0]};a.pause=function(){for(var a=0;a<da.length;a++)d.wa(da[a],d.WU)};a.resume=function(){for(var a=0;a<da.length;a++)d.wa(da[a],d.aV)};a.CM=function(a){(a=a.L)||za.J("No object physics");if(!a.ln){var b=
a.ma,c=L(b);a.ln=!0;d.wa(c,d.UU,b)}};a.jF=function(a){(a=a.L)||za.J("No object physics");if(a.ln){var b=a.ma,c=L(b);a.ln=!1;d.wa(c,d.TU,b)}};a.DB=function(a){return!!a.Oc};a.Ca=function(a){return!!a.L};a.eO=function(a){return(a=a.L)&&a.ln&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.gi&&0==a.kA?!0:!1};a.ZF=function(a){return(a=a.L)&&a.ln?!0:!1};a.VQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.kV,c,b)};a.Y_=P;a.wK=J;a.DL=function(a){a=a.L;d.wa(L(a.ma),d.ZU,a.ly);a.ly=null};a.WP=function(b,d,c,e,f,g){d=
H.si(d,1,c,oa);f=H.si(f,1,g,pa);H.invert(d,d);H.multiply(f,d,d);la.Gm(e,f);H.multiply(f,d,d);la.mk(b,d);la.V(b);e=H.W(b.v.C);f=H.ha(b.v.C);a.PB(b,e,f)};a.PB=function(a,b,c){var e=a.L,f=d.yN(d.rt),g=H.Yb(a.v.C,f.trans);a=H.Db(a.v.C,f.quat);H.si(g,1,a,e.$E);f.ma=e.ma;ha.copy(b,f.trans);R.copy(c,f.quat);d.wa(L(e.ma),d.rt)};a.Z=l;a.BK=function(a,b,c,e){var f=ja;I(a,b,c,e,f);a=a.L.ma;b=Math.abs(0);c=Math.abs(0);e=Math.abs(0);var g=Math.abs(f[0]),h=Math.abs(f[1]),k=Math.abs(f[2]);f[0]=g?f[0]/g*Math.max(g,
b):0;f[1]=h?f[1]/h*Math.max(h,c):0;f[2]=k?f[2]/k*Math.max(k,e):0;d.wa(L(a),d.KJ,a,f[0],f[1],f[2])};a.CK=function(a,b,c,e){a=a.L.ma;d.wa(L(a),d.KJ,a,b,c,e)};a.dE=function(a,b,c,e,f){var g=ja;f?(g[0]=b,g[1]=c,g[2]=e):I(a,b,c,e,g);a=a.L.ma;d.wa(L(a),d.LU,a,g[0],g[1],g[2])};a.AK=function(a,b,c,e){var f=ja;I(a,b,c,e,f);a=a.L.ma;d.wa(L(a),d.NU,a,f[0],f[1],f[2])};a.yQ=function(a,b,c,e){a=a.L.ma;d.wa(L(a),d.bV,a,b,c,e)};a.LH=function(a,b,c){a=a.L.ma;d.wa(L(a),d.eV,a,b,c)};a.IB=function(a,b){var c=a.L.ma;
d.wa(L(c),d.fV,c,b)};a.FQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.jV,c,b)};a.EQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.hV,c,b)};a.BQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.cV,c,b)};a.jL=function(a){a=a.L.ma;d.wa(L(a),d.PU,a)};a.kL=function(a,b,c){a=a.L.ma;d.wa(L(a),d.QU,a,b,c)};a.JB=function(a,b,c){a=a.L.ma;d.wa(L(a),d.gV,a,b,c)};a.CQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.dV,c,b)};a.DQ=function(a,b){var c=a.L.ma;d.wa(L(c),d.iV,c,b)};a.bE=function(a,b,d,c){var e=a.L;if(!e.pv){for(var f=e.ma,g=0;g<
e.jg.length;g++)if(a=e.jg[g],a.Rb==b&&a.callback==d)return;a={kE:f,Cj:c||!1,Rb:b,callback:d,bn:[],vv:[]};e.jg.push(a);b=L(f);v(a,p(b),b)}};a.tH=function(a,b,c){a=a.L;for(var e=L(a.ma),f=p(e),g=0;g<a.jg.length;g++){var h=a.jg[g];if(h.Rb==b&&h.callback==c){if(q(h)){var k=ha.set(0,0,0,ja);h.callback(!1,null,k,k,0)}a.jg.splice(g,1);g--;for(var k=e,h=h.bn,n=f.Oc.Ra,l=0;l<n.length;l++)for(var t=n[l].L,B=0;B<t.jg.length;B++)for(var r=t.jg[B],m=0;m<r.bn.length;m++)for(var H=r.bn[m],v=0;v<h.length;v++){var x=
h[v];H[0]==x[0]&&H[1]==x[1]&&(h.splice(v,1),v--)}h.length&&d.wa(k,d.JJ,h)}}};a.cE=function(a,b){a.L&&a.L.jo&&k(a);var c=a.L;d.wa(L(c.ma),d.MU,c.ma);c.jo=b};a.CE=k;a.Gx=function(a,b,c,e,f,g,h,k,n){var l;aa.cQ++;l=aa.cQ;a={id:l,ma:a?a.L.ma:0,from:new Float32Array(b),to:new Float32Array(c),Rb:e,eu:A(e),LK:g,DW:h,Cj:k,dA:n,callback:f};b=L(a.ma)||da[0];c=p(b).Oc;c.en[l]=a;c.rH.push(a);d.wa(b,d.IU,a.id,a.ma,a.from,a.to,a.eu,a.LK,a.DW,a.Cj,a.dA);return l};a.uH=D;a.iL=function(a,b,c){var e=E(a),f=M(a).Oc.en[a];
f&&!f.LK&&(f.from.set(b),f.to.set(c),d.wa(e,d.OU,a,b,c))};a.JO=function(a){return M(a).Oc.en[a]?!0:!1};a.Ns=function(a,b){var d=a.O;d.Uq=b;S(a,d,L(a.L.ma))};a.Ms=function(a,b){var d=a.O;d.us=b;S(a,d,L(a.L.ma))};a.SI=function(a,b){var d=a.O;d.Rt=b;S(a,d,L(a.L.ma))};a.vg=F;a.wg=z;a.fca=C;a.x0=function(a){if(!a.ug)return!1;a=a.Jg.Ag;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};a.w0=function(a){return a.ug?"BOB"==a.Jg.Ag?!0:!1:!1};a.z0=function(a){return a.Uo?
"BOB"==a.Yq.Ag?!0:!1:!1};a.LO=function(a){return a.ug&&"STEERING_WHEEL"==a.Jg.Ag?!0:!1};a.KO=function(a){return a.ug&&"SPEEDOMETER"==a.Jg.Ag?!0:!1};a.MO=function(a){return a.ug&&"TACHOMETER"==a.Jg.Ag?!0:!1};a.SN=function(a){return a.O.speed};a.U5=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.cO=function(a){return a.L&&a.L.ml};a.bca=r;a.y_=function(){return Aa};a.MY=function(){for(var a=
0;a<da.length;a++)d.wa(da[a],d.SU)};a.sp=function(a){var b=a.L.ma;if("BOUNDING"==a.L.type){var c=T.indexOf(a);-1==c&&X.error("Object "+a.name+" doesn't have bounding physics");delete wa[b];T.splice(c,1)}for(var c=L(b),e=p(c),f=e.Oc.Ra,g=[],h=0;h<f.length;h++)for(var n=f[h].L,l=0;l<n.jg.length;l++)for(var t=n.jg[l],B=0;B<t.bn.length;B++){var r=t.bn[B],m=t.vv[B];if(r[0]==b||r[1]==b)t.bn.splice(B,1),t.vv.splice(B,1),B--,m&&!q(t)&&(m=ha.set(0,0,0,ja),t.callback(!1,null,m,m,0)),g.push(r)}g.length&&d.wa(c,
d.JJ,g);a.L&&a.L.jo&&k(a);a=e.Oc.Ra;for(e=0;e<a.length;e++)a[e].L.ma==b&&(a.splice(e,1),e--);d.wa(c,d.YU,b)};a.$_=function(a){var b=a.Rd;return a.ug||a.Uo||a.ml||a.Gs&&!b.tk&&0<b.gi&&("DYNAMIC"==b.zv||"RIGID_BODY"==b.zv)}};b4w.module.__ipc=function(a,u){function m(a,b,c){for(var g=0;g<y.length;g+=2)y[g+1]==a&&(e[g+Number(!b)]=c)}function c(a){for(var b=0;b<a.length;b++){var c=a[b],e=0,g;for(g in c){var h=c[g];switch(h.constructor){case Float32Array:e+=h.length;break;case Number:e+=1}}--e;c.len=e}}var b=!0;a.tT=0;a.mJ=1;a.nJ=2;a.nT=3;a.pT=4;a.qT=5;a.rT=6;a.uT=7;a.oJ=8;a.MD=9;a.pJ=10;a.wT=11;a.qJ=12;a.xT=13;a.vT=14;a.sT=15;a.oT=16;var p=a.mJ,h=a.nJ,G=a.oJ,q=a.MD,w=a.pJ,A=a.qJ;a.VU=100;a.wU=101;a.xU=102;a.yU=103;a.zU=
104;a.BU=105;a.AU=106;a.CU=107;a.DU=108;a.EU=109;a.FU=110;a.GU=111;a.HU=112;a.JU=113;a.KU=114;a.YU=115;a.LU=116;a.MU=117;a.NU=118;a.PU=119;a.QU=120;a.RU=121;a.TU=122;a.UU=123;a.WU=124;a.IU=125;a.$U=126;a.OU=127;a.JJ=128;a.ZU=129;a.aV=130;a.cV=131;a.dV=132;a.eV=133;a.fV=134;a.gV=135;a.hV=136;a.iV=137;a.jV=138;a.kV=139;a.KJ=140;a.rt=141;a.lV=142;a.IJ=143;a.mV=144;a.nV=145;a.XU=146;a.SU=147;a.oV=148;a.bV=149;var g=a.rt,e=b4w.worker_listeners,y=b4w.worker_namespaces,x={nh:A,ma:0,time:0,trans:new Float32Array(3),
quat:new Float32Array(4),ak:new Float32Array(3),vj:new Float32Array(3),len:0},P={nh:G,uE:0,nH:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},J={nh:q,id:0,Cq:0,hit_fract:0,hit_time:0,len:0},L={nh:w,id:0,Cq:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},l={nh:p,eo:0,fo:0,result:0,len:0},I={nh:h,eo:0,fo:0,result:0,ko:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},v={nh:g,ma:0,trans:new Float32Array(3),quat:new Float32Array(4),
len:0},K=[x,P,J,L,l,I,v];a.EY=function(a,c){var g={lA:a?!0:!1,Zl:null,Bj:[],Sh:""};if(c){var h=u("__util"),k=u("__container");g.Zl={addEventListener:function(a,b){"message"!=a&&h.J("Wrong web worker event");m(g.Sh,g.lA,b)},removeEventListener:function(a){"message"!=a&&h.J("Wrong web worker event");m(g.Sh,g.lA,null)},postMessage:function(a){var b;a:{for(b=0;b<y.length;b+=2)if(y[b+1]==g.Sh){b=e[b+Number(!!g.lA)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<y.length;a+=2)if(y[a+1]==
g.Sh){e.splice(a,2);y.splice(a,2);break}}};if(g.lA){var l=b4w.get_namespace(u),q=h.rw(l+"_worker");y.push(l);y.push(q);e.push(null);e.push(null);g.Sh=q;(k=k.FZ(a))?b?k.addEventListener("load",function(){b4w.require("__bindings",g.Sh)},!1):(b4w.Ja("__bindings",g.Sh),b4w.Ja("__ipc",g.Sh),b4w.require("__bindings",g.Sh)):(k=document.createElement("script"),k.src=a,k.defer="defer",k.async="async",k.addEventListener("load",function(){b=!1;b4w.require("__bindings",g.Sh)},!1),document.head.appendChild(k))}else g.Sh=
b4w.get_namespace(u)}else a?g.Zl=new Worker(a):g.Zl=self;return g};a.hW=function(a,b){function e(c){if(c.constructor==ArrayBuffer)c=new Float32Array(c);else if(c[0].constructor==ArrayBuffer){for(var k=0;k<c.length;k++)e(c[k]);return}k=c[0]|0;switch(k){case A:var m=x;m.ma=c[1]|0;m.time=c[2];m.trans[0]=c[3];m.trans[1]=c[4];m.trans[2]=c[5];m.quat[0]=c[6];m.quat[1]=c[7];m.quat[2]=c[8];m.quat[3]=c[9];m.ak[0]=c[10];m.ak[1]=c[11];m.ak[2]=c[12];m.vj[0]=c[13];m.vj[1]=c[14];m.vj[2]=c[15];break;case G:m=P;m.uE=
c[1]|0;m.nH=c[2]|0;m.trans[0]=c[3];m.trans[1]=c[4];m.trans[2]=c[5];m.quat[0]=c[6];m.quat[1]=c[7];m.quat[2]=c[8];m.quat[3]=c[9];break;case q:m=J;m.id=c[1]|0;m.Cq=c[2]|0;m.hit_fract=c[3];m.hit_time=c[4];break;case w:m=L;m.id=c[1]|0;m.Cq=c[2]|0;m.hit_fract=c[3];m.hit_time=c[4];m.hit_pos[0]=c[5];m.hit_pos[1]=c[6];m.hit_pos[2]=c[7];m.hit_norm[0]=c[8];m.hit_norm[1]=c[9];m.hit_norm[2]=c[10];break;case p:m=l;m.eo=c[1]|0;m.fo=c[2]|0;m.result=!!c[3];break;case h:m=I;m.eo=c[1]|0;m.fo=c[2]|0;m.result=!!c[3];
m.ko[0]=c[4];m.ko[1]=c[5];m.ko[2]=c[6];m.coll_norm[0]=c[7];m.coll_norm[1]=c[8];m.coll_norm[2]=c[9];m.coll_dist=c[10];break;case g:m=v;m.ma=c[1]|0;m.trans[0]=c[2];m.trans[1]=c[3];m.trans[2]=c[4];m.quat[0]=c[5];m.quat[1]=c[6];m.quat[2]=c[7];m.quat[3]=c[8];break;default:m=c}b(a,k,m)}c(K);a.Zl.addEventListener("message",function(a){e(a.data)},!1)};a.Ja=function(){};a.wa=function(a,b){if(a)switch(b){case A:var c=x,e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.ma;e[2]=c.time;e[3]=c.trans[0];e[4]=c.trans[1];
e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];e[10]=c.ak[0];e[11]=c.ak[1];e[12]=c.ak[2];e[13]=c.vj[0];e[14]=c.vj[1];e[15]=c.vj[2];a.Bj.push(e.buffer);break;case G:c=P;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.uE;e[2]=c.nH;e[3]=c.trans[0];e[4]=c.trans[1];e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];a.Bj.push(e.buffer);break;case q:c=J;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.id;e[2]=c.Cq;e[3]=c.hit_fract;e[4]=c.hit_time;a.Bj.push(e.buffer);
break;case w:c=L;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.id;e[2]=c.Cq;e[3]=c.hit_fract;e[4]=c.hit_time;e[5]=c.hit_pos[0];e[6]=c.hit_pos[1];e[7]=c.hit_pos[2];e[8]=c.hit_norm[0];e[9]=c.hit_norm[1];e[10]=c.hit_norm[2];a.Bj.push(e.buffer);break;case p:c=l;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.eo;e[2]=c.fo;e[3]=c.result;a.Bj.push(e.buffer);break;case h:c=I;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.eo;e[2]=c.fo;e[3]=c.result;e[4]=c.ko[0];e[5]=c.ko[1];e[6]=c.ko[2];e[7]=c.coll_norm[0];e[8]=c.coll_norm[1];
e[9]=c.coll_norm[2];e[10]=c.coll_dist;a.Bj.push(e.buffer);break;case g:c=v;e=new Float32Array(c.len);e[0]=c.nh;e[1]=c.ma;e[2]=c.trans[0];e[3]=c.trans[1];e[4]=c.trans[2];e[5]=c.quat[0];e[6]=c.quat[1];e[7]=c.quat[2];e[8]=c.quat[3];a.Bj.push(e.buffer);break;default:e=[];for(c=1;c<arguments.length;c++)e.push(arguments[c]);a.Zl.postMessage(e)}};a.h2=function(a){a&&a.Bj.length&&(a.Zl.postMessage(a.Bj),a.Bj.length=0)};a.yN=function(a){switch(a){case A:return x;case G:return P;case q:return J;case w:return L;
case p:return l;case h:return I;case g:return v;default:return null}};a.terminate=function(a){a.Zl.terminate();a.Zl=null};a.hA=function(a){return!!a.Zl};a.GO=function(a){return!!a.Sh}};b4w.module.__scenes=function(a,u){function m(){kb||(kb=c(Wa));return kb}function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.Gh||!c.Gh.length)return c}return null}function b(){yb||Ea.J("No active scene available");return yb}function p(a,b,c){if(!h(a,b,c))return null;c=a.b4w_shadow_settings;var d={};c.csm_resolution>ab.jc?(d.csm_resolution=ab.jc,Ia.error("Shadow map texture has unsupported size. Changed to "+ab.jc+".")):d.csm_resolution=c.csm_resolution;Ja.shadow_blur_samples=Ja.shadow_blur_samples?
Ja.shadow_blur_samples:c.blur_samples;d.W3=c.soft_shadows;a=ya.Hz(b,Ja.ssao&&a.b4w_enable_ssao);d.self_shadow_polygon_offset=c.self_shadow_polygon_offset;d.self_shadow_normal_offset=c.self_shadow_normal_offset;d.enable_csm=c.b4w_enable_csm&&1==a.length;c.b4w_enable_csm&&1<c.csm_num&&1<a.length&&Ia.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");d.Xi=[];d.CR=[];d.bu=[];d.au=[];for(b=0;b<a.length;b++)d.Xi.push(a[b].yd.type),d.CR.push(a[b].yd.ns),d.bu.push(a[b].yd.bu),
d.au.push(a[b].yd.au),"SPOT"!=d.Xi[b]&&"POINT"!=d.Xi[b]||!d.enable_csm||(Ia.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),d.enable_csm=!1);d.enable_csm?(d.csm_num=c.csm_num,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=c.fade_last_cascade,d.blend_between_cascades=c.blend_between_cascades):
(d.csm_num=1,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=!1,d.blend_between_cascades=!1);return d}function h(a,b,c){if(0!=b.length&&Ja.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var d=!1,e=!1;a=Ja.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<c.length;b++){var f=
c[b];f.b4w_shadow_cast&&(d=!0);f.b4w_shadow_receive&&(e=!0);if((a||d)&&e)return!0}return!1}function G(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].yd.type)return!0;return!1}function q(a){if(!Ja.Uf)return!1;a=da(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.ia.Zj&&c.ia.Uf)return!0}return!1}function w(a){for(var b=0;b<a.length;b++)for(var c=a[b].particle_systems,d=0;d<c.length;d++)if(ya.qL(a[b].Oa,c[d].settings))return!0;return!1}function A(a){for(var b=da(a),c=[],d=0;d<b.length;d++){var e=b[d];if(e.ia.Zj){for(var f=
{},g=0;g<a.length;g++)for(var h=a[g],k=h.Oa.Bc,n=0;n<k.length;n++)k[n]==e&&(f.vk=h.location[2]);f.pe=new Float32Array(4);f.pe.set(e.ia.Bo);f.pe[3]=e.ia.iz;e.ia.ba?(f.zu=!0,f.waves_height=e.ia.waves_height,f.waves_length=e.ia.waves_length,f.dst_noise_scale0=e.ia.dst_noise_scale0,f.dst_noise_scale1=e.ia.dst_noise_scale1,f.dst_noise_freq0=e.ia.dst_noise_freq0,f.dst_noise_freq1=e.ia.dst_noise_freq1,f.dir_min_shore_fac=e.ia.dir_min_shore_fac,f.dir_freq=e.ia.dir_freq,f.dir_noise_scale=e.ia.dir_noise_scale,
f.dir_noise_freq=e.ia.dir_noise_freq,f.dir_min_noise_fac=e.ia.dir_min_noise_fac,f.dst_min_fac=e.ia.dst_min_fac,f.waves_hor_fac=e.ia.waves_hor_fac):(f.zu=!1,f.waves_height=0,f.waves_length=0);f.ah=e.ia.Xy;f.OW=e.ia.Qk;f.NW=e.ia.Pk;f.PW=new Float32Array([.3,.7]);f.kn=null;e=e.wh;for(g=0;g<e.length;g++)h=e[g].texture,!0===h.b4w_shore_dist_map&&"FILE"==h.image.source&&(f.kn=h.image,f.eI=h.image.size[0],f.CG=h.b4w_max_shore_dist,h=h.b4w_shore_boundings,f.es=[(h[0]+h[1])/2,(h[2]+h[3])/2],f.fs=[h[0]-h[1],
h[2]-h[3]]);c.push(f)}}if(0<c.length){f=c[0];if(!f.zu)for(d=0;d<c.length;d++)c[d].zu&&(f=c[d]);return f}return null}function g(a){function b(a){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d];"GROUP"==e.type&&e.node_group&&b(e.node_group.node_tree);"GROUP"==e.type&&"B4W_REFRACTION"==e.node_tree_name&&(c.refractions=!0);"BSDF_TRANSPARENT"==e.type&&(c.refractions=!0)}}}var c={refractions:!1};a=da(a);for(var d=0;d<a.length;d++){var e=a[d];e.Xo&&(c.refractions=!0);e.se&&b(e.se)}return c}function e(a,
b,c){if(Ja.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var d=0,e=!1,f=!1,g=0;g<b.length;g++){var h=b[g];h.v.we&&"CUBE"==h.v.gj&&d++;if(h.Nv.length){for(var k=null,n=0;n<a.length;n++)if(a[n]==h){k=n;break}null==k&&a.push(h)}}for(g=0;g<c.length;g++){b=c[g];b.b4w_reflexible&&(e=!0);a:if(b.b4w_reflexible){b=b.Oa.Bc;for(h=0;h<b.length;h++)if(k=b[h].xb,"OPAQUE"!=k&&"CLIP"!=k&&"ALPHA_ANTIALIASING"!=k){b=!0;break a}b=!1}else b=void 0;b&&(f=!0)}return{eQ:a,zP:d,
Wk:[],YE:[],gk:[],kB:[],YF:e,bO:f}}function y(a,b){var c=a.b4w_sky_settings,d={};d.hQ=c.render_sky||c.procedural_skydome;d.procedural_skydome=c.procedural_skydome;d.use_as_environment_lighting=c.use_as_environment_lighting;d.mn=c.color;d.rayleigh_brightness=c.rayleigh_brightness;d.mie_brightness=c.mie_brightness;d.spot_brightness=c.spot_brightness;d.scatter_strength=c.scatter_strength;d.rayleigh_strength=c.rayleigh_strength;d.mie_strength=c.mie_strength;d.rayleigh_collection_power=c.rayleigh_collection_power;
d.mie_collection_power=c.mie_collection_power;d.mie_distribution=c.mie_distribution;d.Se=c.reflexible;d.xe=c.reflexible_only;!b&&c.procedural_skydome&&Ia.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return d}function x(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.e0=a.hemisphere;b.uW=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;b.dist_factor=a.dist_factor;b.S2=a.samples;return b}function P(a){if(!Ja.bloom||
!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function J(a){var b={};a=a.b4w_motion_blur_settings;b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function L(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b}function l(a){var b=
{};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.Tm=a.max_ray_length;b.pn=a.steps_per_pass;return b}function I(a){var b={};b.bj=a.b4w_outline_color;b.mp=a.b4w_outline_factor;return b}function v(a){var b={};a=a.b4w_glow_settings;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b}function K(a,b){var c=a.light_settings,d={};d.eh=c.environment_energy;
d.xw=c.use_environment_light;d.mF=c.environment_color;d.re=a.horizon_color.slice(0);d.Ee=a.zenith_color.slice(0);d.Gp=a.use_sky_paper;d.Fp=a.use_sky_blend;d.Hp=a.use_sky_real;d.gC=null;d.xp=null;d.Zy=null;d.Qe="";b.render_sky&&a.use_nodes&&a.node_tree&&(c=Qa.ML(a.node_tree,a.uuid,!1,a.name,"MAIN"),d.Qe=c.id);c=!0;if(d.xw&&"SKY_TEXTURE"==d.mF&&(!b.procedural_skydome||!b.use_as_environment_lighting)){for(var e=null,f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_environment_lighting&&
!a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];break}e?d.Zy=e:c=!1}for(f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];e.texture.image&&(c=!0,d.gC=e,f=Math.min(ab.mh,bb.pE(e.texture.image.size[0]/3)),d.xp={VR:f,VK:e.blend_factor,kO:e.horizon_factor,$S:e.zenith_up_factor,ZS:e.zenith_down_factor,color:e.color,Pa:e.default_value,invert:e.invert,ES:e.use_rgb_to_intensity,WK:e.blend_type,zS:e.use_map_blend,AS:e.use_map_horizon,
CS:e.use_map_zenith_up,BS:e.use_map_zenith_down});break}d.xw=d.xw?c:!1;return d}function k(a){var b=a.fog_settings,c={};c.A5=b.use_fog;c.intensity=b.intensity;c.depth=b.depth;c.start=b.start;c.height=b.height;c.zZ=b.falloff;c.color=b.use_custom_color?b.color.slice(0):a.horizon_color.slice(0);a=c.color;c.pe=new Float32Array([a[0],a[1],a[2],1/c.depth]);c.rg=new Float32Array([c.intensity,c.depth,c.start,c.height]);return c}function D(a,b){if(!Ja.hd)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;
case "ON":return!0}for(var c=!1,d=!1,e=0;e<b.length;e++){for(var f=b[e],g=f.Oa.Bc,h=0;h<g.length;h++)g[h].qk.sr&&(c=!0);f=f.particle_systems;for(h=0;h<f.length;h++)g=f[h].settings,"HAIR"==g.type&&g.b4w_dynamic_grass&&(d=!0);if(c&&d)return!0}return!1}function M(a,b){if(jb.outlining_overview_mode)return!0;if(Ja.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.v.gn)return!0;return!1}else return!1}function E(a,
b){if(jb.outlining_overview_mode)return!0;if(Ja.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.v.Ad)return!0;return!1}else return!1}function S(a,b){if(Ja.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)for(var d=b[c].Oa.Bc,e=0;e<d.length;e++)if(Qa.pL(d[e]))return!0;return!1}else return!1}function F(a,b){if(Ja.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return b.refractions}else return!1}function z(a){for(var b=0;b<a.length;b++)for(var c=a[b].Oa.Bc,d=0;d<c.length;d++){var e=c[d];if(e.Fl&&"OPAQUE"!=e.xb&&"CLIP"!=e.xb&&"ALPHA_ANTIALIASING"!=e.xb)return!0}return!1}function C(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++){var d=b[c].Oa;if(d.anchor&&d.anchor.Qq)return!0}return!1}}function r(a,b){for(var c=aa(a,[U.Wb,U.Gd,U.Ge]),d=0;d<c.length;d++)c[d].Xx=
b}function f(a,b,c,e,f,g){for(var h=b.v,k=ya.La(b,f),n=k.aa,l=0;l<n.length;l++){var t=n[l];if(!(t.uf||t.xe||"MAIN"!=t.type&&"NODES_GLOW"!=t.type&&"PARTICLES"!=t.type&&"LINE"!=t.type)&&("OPAQUE"==t.Hb&&"OPAQUE"==e||"BLEND"==t.Hb&&"BLEND"==e||"XRAY"==t.Hb&&"XRAY"==e||"NODES_GLOW"==t.type&&"GLOW"==e)){if(!g&&(d(t,a,b,c,e,f),!ka.Ed(t)))if("DEBUG"===xb.type())ka.Jx(t,"error.glslv","error.glslf"),ka.Ed(t);else continue;var B=U.Xj(t,h,k.$g[l]);U.qd(a,B);sa.mo(c,a,t);X(t)}}}function W(a){a.Sm.yw&&ka.Sf(a,
"USE_LOD_SMOOTHING",1)}function d(a,b,c,d,e,f){var g=c.v,h=f.I,k=ya.La(c,f),l="NO_SHADOWS";c=aa(f,[U.$d]);if(c.length&&a.ze){switch(e){case "OPAQUE":l="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":l="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":l="NO_SHADOWS";break;case "SHADOW":l="SHADOW_MASK_GENERATION";break;default:Ea.J("Wrong subscene type")}for(var t=0;t<c.length;t++)ka.HK(a,f.I.Cd)}t="NO_SOFT_SHADOWS";if(h.Cd&&h.Cd.W3)switch(Ja.shadow_blur_samples){case "16x":t=
"POISSON_X_16";break;case "8x":t="POISSON_X_8";break;case "4x":t="POISSON_X_4"}c=a.mb;ra.xa(c,"SHADOW_USAGE",l);ra.xa(c,"POISSON_DISK_NUM",t);W(a);a.hd&&(t=sa.uc(d,U.yk))&&R(a,t,g);n(c,b.F);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.Uj){e=b.Kr;ra.xa(c,"NUM_LIGHTS",e);ra.xa(c,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);ra.xa(c,"REFLECTION_PASS","REFL_PASS_NONE");ra.xa(c,"SSAO_ONLY",0);if(e=h.Xd)ra.xa(c,"WATER_EFFECTS",1),ra.xa(c,"WAVES_HEIGHT",ra.da(e.waves_height)),ra.xa(c,"WAVES_LENGTH",ra.da(e.waves_length)),
ra.xa(c,"WATER_LEVEL",ra.da(e.vk));if(b.ah&&a.ah){ra.xa(c,"CAUSTICS",1);if(t=h.Cd){g=t.Xi;for(t=l=0;t<g.length;t++)"SUN"==g[t]&&(l=t);ra.xa(c,"SUN_NUM",l)}ra.xa(c,"CAUST_SCALE",ra.da(b.Qk));ra.xa(c,"CAUST_SPEED",ra.da(b.ay,2));ra.xa(c,"CAUST_BRIGHT",ra.da(b.Pk))}t=k.Wk;g=k.gk;k=sa.uc(d,U.Xe);if(-1!==a.Hg.indexOf("u_mirrormap"))ra.xa(c,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.we&&t)b=t.F.tc,h.fj.YF||(t.Co=!0,k&&(b=k.F.tc)),ka.km(a,b,"u_cube_reflection"),ra.xa(c,"REFLECTION_TYPE","REFL_CUBE");
else if(a.we&&g)for(t=0;t<g.length;t++)b=g[t].F.tc,ka.km(a,b,"u_plane_reflection"),ra.xa(c,"REFLECTION_TYPE","REFL_PLANE");else ra.xa(c,"REFLECTION_TYPE","REFL_NONE");k?a.Sy?(b=k.F.tc,ka.km(a,b,"u_sky")):k.procedural_skydome&&(a.kg=k.kg,ra.xa(c,"PROCEDURAL_FOG",1)):ra.xa(c,"PROCEDURAL_FOG",0);b=h.Hn;b.xw&&(ra.xa(c,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.mF?(b.Zy?(k=b.Zy.texture,b=bb.hf(b.Zy),ka.km(a,b,"u_sky_texture",k.name)):k&&(b=k.F.tc,ka.km(a,b,"u_sky_texture")),ra.xa(c,"SKY_TEXTURE",1)):
"SKY_COLOR"==b.mF&&ra.xa(c,"SKY_COLOR",1));b=h.YS;b.A5&&(ra.xa(c,"USE_FOG",1),ra.xa(c,"FOG_TYPE",b.zZ));a.Dl&&a.Bb?(Ja.Ky&&ra.xa(c,"USE_REFRACTION_CORRECTION",1),"MAIN"==a.type&&a.Uj||"NODES_GLOW"==a.type?(ra.xa(c,"REFRACTIVE",1),h.refractions?ra.xa(c,"USE_REFRACTION",1):ra.xa(c,"USE_REFRACTION",0)):h.refractions?ra.xa(c,"REFRACTIVE",1):ra.xa(c,"REFRACTIVE",0),(h.jP.refractions||h.refractions)&&ra.xa(c,"HAS_REFRACT_TEXTURE",1)):(ra.xa(c,"REFRACTIVE",0),ra.xa(c,"USE_REFRACTION",0),ra.xa(c,"USE_REFRACTION_CORRECTION",
0));a.nj&&(Ja.Uf&&a.Gw&&sa.uc(d,U.eJ)?ra.xa(c,"SHORE_SMOOTHING",1):ra.xa(c,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?ra.xa(c,"DYNAMIC",1):ra.xa(c,"DYNAMIC",0));"PARTICLES"==a.type&&ra.xa(c,"COLOR_RAMP_LENGTH",a.Qa.ky);if(!a.Uh)for(a=a.qa,d=0;d<a.length;d++)if(b=a[d],"SCENE"==b.source)for(h=0;h<Wa.length;h++)for(c=Wa[h],k=Wa[h].Gh,e=0;e<k.length;e++)k[e]==b&&va.H(Cb,c,f,null)}}function n(a,b){b.type==Fa.Ze||b.type==Fa.Di||b.type==Fa.Ck?ra.xa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):ra.xa(a,
"CAMERA_TYPE","CAM_TYPE_PERSP")}function X(a){8<a.qa.length&&Ia.warn(a.type,"too many textures used - "+a.qa.length+' (max 8), materials "'+a.Ac.join(", ")+'"')}function R(a,b,c){a.Nd=b.Nd;var d=b.Nd[0],e=b.Nd[1],f=b.Nd[2];c=c.Aa;c=Math.max(c.max_x-c.min_x,c.max_y-c.min_y);f=0==f?c:Math.max(f,c);b.Nd[2]=f;b=b.F;Fa.SQ(b,f/2,f/2,-e,-d);Fa.Kl(b,!1);d=a.ll||0;d=0==d?c:Math.max(d,c);a.ll=d}function t(a,b,c,e,f,g){for(var h=b.v,k=ya.La(b,f),n=k.aa,l=0;l<n.length;l++){var t=n[l];if(("MAIN"==t.type||"PARTICLES"==
t.type||"LINE"==t.type)&&"REFLECT"==t.Hb&&t.Bb==e){if(a.type==U.He||a.type==U.Tg){var B;a:{var m=f.I.fj.gk;for(B=0;B<m.length;B++)for(var r=0;r<m[B].length;r++)if(m[B][r]==a)break a;m=f.I.fj.kB;for(B=0;B<m.length;B++)for(r=0;r<m[B].length;r++)if(m[B][r]==a)break a;B=null}if(B==h.te)continue}else if(B=ia(f,a),B==h.Ke)continue;if(!g&&(d(t,a,b,c,"REFLECT",f),B=t.mb,ra.xa(B,"WATER_EFFECTS",0),a.type==U.He||a.type==U.Tg?ra.xa(B,"REFLECTION_PASS","REFL_PASS_PLANE"):ra.xa(B,"REFLECTION_PASS","REFL_PASS_CUBE"),
ra.xa(B,"TEXTURE_NORM",0),!ka.Ed(t)))if("DEBUG"===xb.type())ka.Jx(t,"error.glslv","error.glslf"),ka.Ed(t);else continue;B=U.Xj(t,h,k.$g[l]);U.qd(a,B);sa.mo(c,a,t);X(t)}}}function fa(a){Z(a);var b=ja(a,U.Wb),c=!0,d=a.I.Cd;va.fa(a.I.Ia,function(e,f){f.type===U.$d&&(H(f,a,b.F,d,c),c=!1)})}function la(a){va.fa(a.I.Ia,function(a,b){b.type===U.pq&&(b.xu=1)})}function H(a,b,c,d,e){if(0!=a.ib.length){var f=a.F;Za.copy(c.C,f.C);Za.copy(c.Lg,f.$v);if("SUN"===d.Xi[a.th]||"HEMI"===d.Xi[a.th]){var g=c.C,h=bc;
Ba.W5(h);for(var k=0;k<a.ib.length;k++)for(var n=a.ib[k].Ra,l=0;l<n.length;l++){var t=n[l].Fa,B=n[l].oh;if(t.hd){var m=Za.Db(g,Eb),r=Ra.transformQuat(Ea.mc,m,rb),m=-r[0],r=r[1],H=Za.Yb(g,rb),m=H[0]-t.ll*(1+m)/2,r=H[1]-t.ll*(1-r)/2,B=Ba.Dq(t.Cb.Ef,B.C,Pc),B=B.max_z-B.min_z,H=Pc;H.min_x=m;H.min_y=r;H.min_z=t.Nd[0]-B;H.max_x=m+t.ll;H.max_y=r+t.ll;H.max_z=t.Nd[1]+B}else H=B.Hi;k||l?Ba.az(h,H):Ba.Gj(H,h)}g=Ba.HM(h,Ob);Ea.Ur(g,f.ec,g);if(d.enable_csm){b=Ra.copy(c.Jj[a.qu],Db);d=qa.invert(c.ec,ic);Ea.Ur(b,
d,b);Ea.Ur(b,f.ec,b);a=c.ru[a.qu];if(e)for(Qc=0,Ec=-Infinity,e=2;e<g.length;e+=3)Qc=Math.min(Qc,g[e]),Ec=Math.max(Ec,g[e]);e=bc;e.max_x=b[0]+a;e.max_y=b[1]+a;e.max_z=Ec;e.min_x=b[0]-a;e.min_y=b[1]-a;e.min_z=Qc}else{c=e=bc;d=Fb;d.set(g);g=Zc/9;h=qa.identity(ic);qa.rotate(h,g,Ea.mc,h);n=k=-1;for(l=0;10>l;l++){t=Ba.fE(d,0,d.length,Pc);B=(t.max_x-t.min_x)*(t.max_y-t.min_y);if(-1==k||.1<k-B)k=B,n=l,Ba.Gj(t,c);Ea.Ur(d,h,d)}c=n*g;0<c&&(d=qa.identity(ic),qa.rotate(d,c,Ea.mc,d),qa.multiply(d,f.ec,f.ec),Za.Wh(f.ec,
f.Lg));c=e.max_x-e.min_x;d=e.max_y-e.min_y;c&&d&&(g=Math.abs(c-d)/2,2<c/d?(e.max_y+=g,e.min_y-=g):2<d/c&&(e.max_x+=g,e.min_x-=g));e.max_x+=.005;e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;za(a,b.I.Ia)}Fa.o3(f,e.min_x,e.max_x,e.min_y,e.max_y,-e.max_z,-e.min_z);Fa.Kl(f,!1);Ea.zo(f.Wd,f.Qi)}else"SPOT"!==d.Xi[a.th]&&"POINT"!==d.Xi[a.th]||Fa.Kl(f,!1)}}function za(a,b){for(var c=a.F,d=sa.K_(b,a),e=0;e<d.length;e++){var f=d[e];if(f.type==U.Wb||f.type==U.Ug||f.type==U.Gd||f.type==
U.Dh)if(Ja.FA)f.Bw.set(c.Lg,9*a.th);else{var g=Za.W(c.Lg),h=Za.ge(c.Lg),k=Za.ha(c.Lg);Jb.set(g[0],g[1],g[2],h,nb);f.Ls.set(nb,4*a.th);f.Ks.set(k,4*a.th)}}}function ha(a,b,c,e,f){for(var g=b.v,h=ya.La(b,e),k=h.aa,n=0;n<k.length;n++){var l=k[n];if("COLOR_ID"==l.type&&(a.type==U.Cf&&"COLOR_ID"==l.Hb||a.type==U.zi&&"COLOR_ID_XRAY"==l.Hb)){if(!f&&(d(l,a,b,c,"COLOR_ID",e),ka.Sf(l,"USE_OUTLINE",0),!ka.Ed(l)))continue;l=U.Xj(l,g,h.$g[n]);U.qd(a,l)}}}function ua(a,b){ga(a,b);for(var c=0;c<a.bf.length;c++)a.bf[c].parent==
a&&ua(a.bf[c],b)}function ga(a,b){a.v.ci=b;if(ya.nr(a))for(var c=0;c<a.P.length;c++)for(var d=a.P[c],e=aa(d.vb,sc),f=0;f<e.length;f++){var g=e[f],h=a.v,k=a.yd,n=d.lv,l=k.Ep&&!h.ci?1:0;g.bp[4*n+3]=l;l=k.Ip&&!h.ci?1:0;g.ap[4*n+3]=l;g.Ta=!0}}function B(a,b){for(var c=aa(b,sc),d=a.yd,e=a.v,f=ya.La(a,b),g=Za.W(e.C),e=Za.ha(e.C),h=0;h<c.length;h++){var k=c[h],n=k,l=a.v,t=a.yd,B=f.lv,m=Za.W(a.v.C),r=t.fu;n.kv.set(t.direction,3*B);nb[0]=m[0];nb[1]=m[1];nb[2]=m[2];nb[3]=t.Ep&&!l.ci?1:0;n.bp.set(nb,4*B);nb[0]=
r[0];nb[1]=r[1];nb[2]=r[2];nb[3]=t.Ip&&!l.ci?1:0;n.ap.set(nb,4*B);n.Ta=!0;switch(d.type){case "SUN":k.FC.set(e);k.EC=d.fu;Ra.copy(d.direction,k.DC);k.type==U.Xe&&k.procedural_skydome&&(k.Er=d.uP,Aa(b,k));break;case "HEMI":case "POINT":case "SPOT":break;default:Ia.error("Unknown light type: "+d.type+'".')}k=k.ib;for(n=0;n<k.length;n++)for(l=k[n].Ra,t=0;t<l.length;t++)B=l[t].Fa,B.$o&&ka.q3(B,a)}c=ja(b,U.Wb).F;f=f.cI;d=b.I.Cd;for(h=0;h<f.length;h++)k=f[h],Fa.ZH(k.F,g,e),H(k,b,c,d,!0),za(k,b.I.Ia)}function Z(a){var b=
Va.vc(a,"LAMP",Va.Tc),b=ya.Hz(b,Ja.ssao&&a.b4w_enable_ssao);if(b.length)for(var c=0;c<b.length;c++)for(var d=b[c],e=d.v,f=Za.Yb(e.C,Db),e=Za.Db(e.C,Eb),g=0;g<d.P.length;g++){var h=d.P[g],k=h.cI;if(h.vb==a)for(h=0;h<k.length;h++)Fa.ZH(k[h].F,f,e)}}function ea(a){var b=ja(a,U.Xe);b&&Aa(a,b)}function Aa(a,b){Ha.nB(b);Ca.Tq(b);if(b.Er)for(var c=aa(a,Hb),d=0;d<c.length;d++)for(var e=c[d].ib,f=0;f<e.length;f++)for(var g=e[f].Ra,h=0;h<g.length;h++){var k=g[h];k.pc&&(k=k.Fa,ka.TW(k)&&Ca.N4(k))}}function da(a){for(var b=
[],c=0;c<a.length;c++)for(var d=a[c].Oa.Bc,e=0;e<d.length;e++){var f=d[e];-1==b.indexOf(f)&&b.push(f)}return b}function ba(a,b,c,d){V.HO()&&(b*=window.devicePixelRatio,c*=window.devicePixelRatio);var e=m();e&&(e=e.I,b*=e.Wr,c*=e.Wr);b*=a.Ml;c*=a.Nl;d[0]=Math.floor(b);d[1]=Math.floor(c);return d}function wa(a,b,c){a=ba(a,b,c,mb);return a[0]>ab.jc||a[1]>ab.jc?(Ia.warn("Texture size exceeds platform limits, downscaling"),Math.min(ab.jc/a[0],ab.jc/a[0])):1}function T(a,b,c){for(var d=a.I,e=ya.La(a.Dk,
a).na,f=0!=c?b/c:1,g=0;g<e.length;g++){var h=e[g];Fa.Z2(h,f);Fa.Kl(h,!1);d.Cd&&Fa.NI(h,d.Cd)}if(d.Cd){d.UA=!0;d=aa(a,[U.Ug]);for(g=0;g<d.length;g++)d[g].Ta=!0;d=aa(a,[U.Gd]);for(g=0;g<d.length;g++)d[g].Ta=!0}ma(a,b,c)}function ma(a,b,c){var d=a.I.Ia,e=Infinity;sa.QC(d,function(a){a.Dp&&(e=Math.min(e,wa(a,b,c)))});sa.QC(d,function(f,g,h,k){if(f.Dp){var n,l;k&&k.type==U.Bk||h.ic&&!f.Ix?(n=b*f.Ml,l=c*f.Nl):(l=ba(f,b,c,mb),n=l[0]*e,l=l[1]*e);if(g)for(g=0;g<h.nb.length;g++)h.nb[g]==f&&bb.resize(f.fb,n,
l);else switch(bb.ur(f.fb)&&(bb.resize(f.fb,n,l),f.fb.yi&&(k.uA=f.fb.oP)),f=h.F,f.width=n,f.height=l,h.type){case U.dt:oa(a,{dof_power:h.F.dof_power});break;case U.ft:Q(a,{small_glow_mask_width:h.small_glow_mask_width,large_glow_mask_width:h.large_glow_mask_width});break;case U.Ys:pa(a,{blur:h.yq});break;case U.NJ:f.width=f.tc.width;f.height=f.tc.height;break;case U.pq:h=sa.td(d,h,U.nc);f=sa.td(d,h,U.nc);l=sa.td(d,f,U.nc);g=sa.td(d,l,U.nc);sa.ye(h,1/n,1/n);sa.ye(f,1/n,1/n);sa.ye(l,1/n,1/n);sa.ye(g,
1/n,1/n);break;default:sa.ye(h,1/n,1/l)}}})}function aa(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];a.I.Ia&&va.fa(a.I.Ia,function(a,b){b.type==e&&c.push(b)})}return c}function ja(a,b){return sa.uc(a.I.Ia,b)}function ca(a){var b=m();b&&va.fa(b.I.Ia,function(b,c){var d=c.F;d&&d.type==Fa.Df&&(c.Co=a)})}function oa(a,b){var c=aa(a,[U.dt]);if(!c.length)return Ia.error("DOF is not enabled on the scene. Check camera settings"),0;for(var d=0;d<c.length;d++){var e=c[d],f=b,g=a,h=e.F.dof_bokeh,k=h?aa(g,
[U.zD]):[],g=g.I.Ia;if("boolean"==typeof f.dof_on&&(e.F.dof_on=f.dof_on,h))for(var n=0;n<k.length;n++)k[n].F.dof_on=f.dof_on;if("number"==typeof f.dof_distance&&(e.F.dof_distance=f.dof_distance,h))for(n=0;n<k.length;n++)k[n].F.dof_distance=f.dof_distance;if("number"==typeof f.dof_front_start&&(e.F.dof_front_start=f.dof_front_start,h))for(n=0;n<k.length;n++)k[n].F.dof_front_start=f.dof_front_start;if("number"==typeof f.dof_front_end&&(e.F.dof_front_end=f.dof_front_end,h))for(n=0;n<k.length;n++)k[n].F.dof_front_end=
f.dof_front_end;if("number"==typeof f.dof_rear_start&&(e.F.dof_rear_start=f.dof_rear_start,h))for(n=0;n<k.length;n++)k[n].F.dof_rear_start=f.dof_rear_start;if("number"==typeof f.dof_rear_end&&(e.F.dof_rear_end=f.dof_rear_end,h))for(n=0;n<k.length;n++)k[n].F.dof_rear_end=f.dof_rear_end;"number"==typeof f.dof_bokeh_intensity&&(e.F.dof_bokeh_intensity=f.dof_bokeh_intensity,h&&(k=sa.zz(g,e,U.nc),k[0].F.dof_bokeh_intensity=f.dof_bokeh_intensity,k[1].F.dof_bokeh_intensity=f.dof_bokeh_intensity,k[0]=sa.td(g,
k[0],U.nc),k[0].F.dof_bokeh_intensity=f.dof_bokeh_intensity));if("number"==typeof f.dof_power)if(h){f=f.dof_power;e.F.dof_power=f;var f=f/2,h=e.F.width,n=e.F.height,l=[1/h,0],t=[1/h*.5,1/n*.866],B=[-1/h*.5,1/n*.866],k=sa.zz(g,e,U.nc);sa.Sd(k[0],f);sa.ye(k[0],B[0],B[1]);sa.Sd(k[1],f);sa.ye(k[1],t[0],t[1]);k[0]=sa.td(g,k[0],U.nc);sa.Sd(k[0],f);sa.ye(k[0],l[0],l[1]);e.F.oe&&(k[0]=sa.td(g,k[0],U.zD),k[0]=sa.td(g,k[0],U.nc),sa.ye(k[0],1/h,1/n),k[0]=sa.td(g,k[0],U.nc),sa.ye(k[0],1/h,1/n))}else e.F.dof_power=
f.dof_power,k=sa.td(g,e,U.nc),g=sa.td(g,k,U.nc),sa.Sd(k,e.F.dof_power),sa.ye(k,1/e.F.width,1/e.F.height),sa.Sd(g,e.F.dof_power),sa.ye(g,1/e.F.width,1/e.F.height)}}function pa(a,b){var c=aa(a,[U.kx]),d=aa(a,[U.Ys]);if(!c.length||!d.length)return Ia.error("Bloom is not enabled on the scene"),0;if("number"==typeof b.key)for(var e=0;e<c.length;e++)c[e].Bq=b.key,c[e].Ta=!0;if("number"==typeof b.edge_lum)for(e=0;e<c.length;e++)c[e].Aq=b.edge_lum,c[e].Ta=!0;if("number"==typeof b.blur)for(e=0;e<d.length;e++){d[e].yq=
b.blur;for(var f=a.I.Ia,g=d[e].F.width/.5,h=d[e].F.height/.5,k=sa.zz(f,d[e],U.nc),n=0;n<k.length;++n){var l=k[n],t=sa.td(f,l,U.nc),B=g*l.zq,m=h*l.zq;sa.Sd(l,b.blur);sa.ye(l,1/B,1/m);sa.Sd(t,b.blur);sa.ye(t,1/B,1/m)}}if("number"==typeof b.average_luminance)for(e=0;e<c.length;e++)c[e].Un||(c[e].average_luminance=b.average_luminance,c[e].Ta=!0)}function Q(a,b){var c=aa(a,[U.ft]);if(!c.length)return Ia.error("Glow is not enabled on the scene"),null;for(var d=0;d<c.length;d++){for(var e=c[d],f=b,g=a.I.Ia,
h=sa.E_(g,e),k=0;k<h.length;++k){var n=h[k];if(n.type==U.nc&&"GLOW_MASK_LARGE"==n.Hb)var l=n;if(n.type==U.nc&&"GLOW_MASK_SMALL"==n.Hb)var t=n}h=sa.td(g,l,U.nc);g=sa.td(g,t,U.nc);"number"==typeof f.small_glow_mask_coeff&&(e.small_glow_mask_coeff=f.small_glow_mask_coeff,e.Ta=!0);"number"==typeof f.large_glow_mask_coeff&&(e.large_glow_mask_coeff=f.large_glow_mask_coeff,e.Ta=!0);"number"==typeof f.small_glow_mask_width&&(e.small_glow_mask_width=f.small_glow_mask_width,sa.Sd(t,f.small_glow_mask_width),
sa.ye(t,1/e.F.width,1/e.F.height),t.Ta=!0,sa.Sd(g,f.small_glow_mask_width),sa.ye(g,1/e.F.width,1/e.F.height),g.Ta=!0);"number"==typeof f.large_glow_mask_width&&(e.large_glow_mask_width=f.large_glow_mask_width,sa.Sd(l,f.large_glow_mask_width),sa.ye(l,1/e.F.width,1/e.F.height),l.Ta=!0,sa.Sd(h,f.large_glow_mask_width),sa.ye(h,1/e.F.width,1/e.F.height),h.Ta=!0)}}function xa(a,b,c){var d=a.I,e=d.Xd;if(!e.zu)return e.vk;var f=e.waves_height,g=e.waves_length,h=e.vk,k=Ra.length(d.pj)||1;a=ja(a,U.Wb).time;
a*=k;k=mb;k[0]=20/g*(b-.25*a);k[1]=20/g*(c-.25*a);var n=Ea.hL(k);k[0]=17/g*(c+.1*a);k[1]=17/g*(b+.1*a);var k=n+Ea.hL(k)-1,l=e.dst_noise_scale0,n=e.dst_noise_scale1,t=e.dst_noise_freq0,B=e.dst_noise_freq1,m=mb;m[0]=l*(b+t*a);m[1]=l*(c+t*a);l=Ea.gI(m);m[0]=n*(c-B*a);m[1]=n*(b-B*a);n=f*l*Ea.gI(m);e.kn?(B=(b-e.es[0])/e.fs[0],m=(e.es[1]+c)/e.fs[1],B+=.5,m+=.5,1<B||0>B||1<m||0>m?b=n:(d=Ea.bN(d.dI,e.eI,B,m),B=e.dir_noise_scale,m=e.dir_noise_freq,l=Math.sqrt(d),t=Math.max(l,e.dst_min_fac),b=f*Math.max(d,
e.dir_min_shore_fac)*Math.sin(l/(g/e.CG/Math.PI)+e.dir_freq*a)*Math.max(Ea.gI([B/g*(b+m*a),B/g*(c+m*a)]),e.dir_min_noise_fac)*(1-t)+n*t,k*=d)):b=n;return h+(b+.05*k)}function na(a,b){a.Vo&&a.type==U.nc&&b.pc!=a.pc&&(a.pc=b.pc);b.pc||a.type!=U.pq||(a.xu=0)}function O(a,b,c,d){var e=va.jb(a,b);Fa.HB(e.F,c,d);e.Ht=!0;va.xn(a,b,function(b,e,f){f.active&&f.from==c&&sa.eX(f)&&Oa(a,b,f.to,d)});va.Wl(a,b,function(b,e,f){f.active&&f.from==c&&f.from==f.to&&O(a,b,c,d)})}function Oa(a,b,c,d){a=va.jb(a,b).ib;
for(b=0;b<a.length;b++)for(var e=a[b].Ra,f=0;f<e.length;f++)ka.F2(e[f].Fa,d,c)}function Na(a){for(var b=aa(a,[U.yk]),c=0;c<b.length;c++){var d=b[c],e=d.F,f=a.Dk.v,g=Za.Yb(f.C,Db),h=rb;h[0]=0;h[1]=0;h[2]=-d.Nd[2]/2;d=Za.Db(f.C,Eb);Ra.transformQuat(h,d,h);h[0]+=g[0];h[1]+=g[1];h[2]=0;Ma.identity(d);Fa.ZH(e,h,d)}}function ta(a,b){va.fa(a,function(c,d){if(d.type==U.tj){d.nb[0]&&d.wi[0]||Ea.J("Wrong MOTION_BLUR subscene");var e=d.nb[0],f=d.wi[0];d.wi[0]=d.F.tc;va.xn(a,c,function(b,c,d){d.active&&Oa(a,
b,d.to,f)});O(a,c,e.from,f);Oa(a,c,e.to,d.wi[0]);d.NA=Math.exp(-b/d.mb_factor)}})}function Y(a){return a.I.pj}function ia(a,b){if(!a.I.fj)return null;for(var c=a.I.fj.Wk,d=0;d<c.length;d++)if(c[d]==b)return d;c=a.I.fj.YE;for(d=0;d<c.length;d++)if(c[d]==b)return d;return null}var ka=u("__batch"),Ba=u("__boundings"),Fa=u("__camera"),Ka=u("__config"),V=u("__container"),Ya=u("__debug"),va=u("__graph"),N=u("__hud"),Ga=u("__input"),qa=u("__mat4"),Qa=u("__nodemat"),Va=u("__objects"),Ua=u("__textures"),ya=
u("__obj_util"),La=u("__physics"),Ha=u("__prerender"),Sa=u("__primitives"),Ia=u("__print"),Ma=u("__quat"),Ca=u("__renderer"),sa=u("__scenegraph"),Da=u("__sfx"),ra=u("__shaders"),U=u("__subscene"),bb=u("__textures"),Za=u("__tsr"),Ea=u("__util"),Ra=u("__vec3"),Jb=u("__vec4"),xb=u("__version"),Pa=Ka.so,Ja=Ka.K,ab=Ka.Ki,jb=Ka.Ad,ub=Ka.Yr,qb=[U.yk,U.$d,U.Wb,U.Gd,U.Dh,U.Ge,U.He,U.Zd,U.Tg,U.ag,U.Cf,U.zi,U.Ug,U.Bi,U.Ai];a.F7=qb;var sc=[U.Wb,U.Gd,U.Dh,U.Ge,U.He,U.Zd,U.mq,U.$w,U.Xe,U.Tg,U.ag,U.kx,U.Ug,U.$d,
U.Cf,U.zi,U.Bi],Hb=[U.Wb,U.sx,U.Gd,U.Dh,U.Ge,U.He,U.Zd,U.Tg,U.ag],tc=[U.$d,U.Wb,U.Gd,U.Dh,U.Ge,U.He,U.Zd,U.Tg,U.ag,U.Cf,U.zi,U.Ug,U.mq,U.Bi,U.Ai],hb=[U.Wb,U.Gd,U.Dh,U.Ge,U.He,U.Zd,U.Tg,U.ag],kb=null,yb=null,Wa=[],Cb=null,Zc=Math.PI/2,mb=new Float32Array(2),Db=new Float32Array(3),rb=new Float32Array(3),Eb=new Float32Array(4),nb=new Float32Array(4),ic=new Float32Array(16),Ob=new Float32Array(24),Fb=new Float32Array(24),bc=Ba.Gf(),Pc=Ba.Gf(),Qc=0,Ec=-Infinity,uc=new Uint8Array(4);a.E9=function(){return{}};
a.Zr=function(a){yb=a;Da.Y2(a)};a.k2=function(a,b){var c=a.I,d=sa.YX(c.Ia);if(a==b){T(a,V.UN(),V.TN());for(var e=0;e<d.length;e++)a.I.qp.push(d[e])}else for(e=a.Gh[0],T(a,e.Ol,e.Ol),e=0;e<d.length;e++)b.I.qp.push(d[e]);d=aa(a,tc);for(e=0;e<d.length;e++)d[e].pj.set(c.pj);for(e=0;e<c.qp.length;e++)c.qp[e].type==U.$d&&Ca.Tq(c.qp[e])};a.Si=m;a.ez=c;a.N=b;a.Ua=function(){return yb?!0:!1};a.Fm=function(a){return a.Dk};a.Pu=function(){return Wa};a.Ez=function(){if(1==Wa.length)return Wa;for(var a=0;a<Wa.length;a++){var b=
Wa[a].I.Ia;va.fa(b,function(b,c){for(var d=c.ib,e=0;e<d.length;e++)for(var f=d[e].Ra,g=0;g<f.length;g++){for(var h=f[g],k=h.Fa.qa,n=h.Fa.gg,l=null,t=0;t<k.length;t++)if("SCENE"==k[t].source&&k[t].ew==Wa[a].name&&c.type!=U.BD){Ia.error('Texture-scene loop detected. A scene is rendered to texture "'+n[t]+'" yet this texture belongs to the same scene.');l=h.Fa;break}if(l)for(k=l.qa,l.qa=[],l.Hg=[],ka.M4(l,null),ka.Ed(l),U.qd(c,h),t=0;t<k.length;t++)Ua.BL(k[t])}})}for(var c=[],a=0;a<Wa.length;a++)if(b=
Wa[a],!b.Gh.length){b=va.zl(Cb,b);va.lZ(Cb,b);b=va.rn(Cb,b,va.bm);b=va.yI(b);va.fa(b,function(a,b){c.push(b)});break}return c};a.LV=function(a,b,c,d,f){a.Gh=a.Gh||[];a.Na=null;var h=a.I,n=ya.La(a.Dk,a),t=a.Dk.v;h.Ss=[];var B=a.world;h.J0=c.length;h.sn=G(c);h.fC=y(B,h.sn);h.Hn=K(B,h.fC);h.YS=k(B);if(B=!a.Gh.length)a:{if("HMD"==Ja.stereo){if(n.na[0].type!=Fa.od){Ia.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ja.stereo="NONE";B=!1;break a}if(!Ga.Ok(Ga.Vb)){Ia.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");
Ja.stereo="NONE";B=!1;break a}}B="HMD"==Ja.stereo}h.$z=B;if(B=!a.Gh.length)n.na[0].type!=Fa.od&&"ANAGLYPH"==Ja.stereo?(Ia.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ja.stereo="NONE",B=!1):B="ANAGLYPH"==Ja.stereo;h.anaglyph_use=B;h.DV=!h.anaglyph_use&&C(a,f);h.fj=e(a,b,d);h.tW=P(a);h.s1=J(a);h.QW=L(a);h.U_=l(a);h.L1=I(a);h.Tj=v(a);h.dof=Ja.dof&&(0<t.dof_distance||t.dof_object);h.motion_blur=Ja.motion_blur&&a.b4w_enable_motion_blur;h.compositing=Ja.compositing&&a.b4w_enable_color_correction;
h.antialiasing=Ja.antialiasing&&1==Ja.kc&&"NONE"!=a.b4w_antialiasing_quality;h.ssao=Ja.ssao&&a.b4w_enable_ssao;h.god_rays=Ja.god_rays&&a.b4w_enable_god_rays&&h.sn;h.QY=Ja.Ky;h.Mz=a.b4w_glow_settings.render_glow_over_blend;h.k4=x(a);f=g(d);h.jP=f;h.refractions=F(a,f);h.Cd=p(a,c,d);h.Xd=A(d);h.rj=z(d);h.V3=w(d);h.Uf=q(d);h.hd=D(a,d);h.tX=M(a,d);h.outline=E(a,d);h.glow_materials=S(a,d);h.g1=a.b4w_lod_smooth_type;h.aP=a.b4w_lod_hyst_interval;switch(Ja.reflection_quality?Ja.reflection_quality:a.b4w_reflection_quality){case "LOW":h.Kj=
ub.kM;h.ej=ub.LP;break;case "MEDIUM":h.Kj=ub.IY;h.ej=ub.d2;break;case "HIGH":h.Kj=ub.HY;h.ej=ub.c2;break;default:h.Kj=ub.kM,h.ej=ub.LP}V.HO()?(Ia.log("%cENABLE HIDPI MODE","color: #00a"),h.kK="AA_QUALITY_LOW",h.Wr=1,Ja.kc=1):1<Ja.kc?(Ia.log("%cENABLE MSAA RENDERING: "+Ja.kc+"x","color: #00a"),h.Wr=1):(h.kK="AA_QUALITY_"+a.b4w_antialiasing_quality,h.Wr=Ja.quality===Ka.On?1.33:1);c=a.Gh.sort(function(a,b){return b.Ol-a.Ol});h.Ia=sa.XX(h,n,t,c);h.qp=[];h.UA=!1;h.PG=!1;h.QG=!1;h.pj=new Float32Array(3);
Wa.push(a);Cb||(Cb=va.create());va.Y(Cb,a);for(h=0;h<b.length;h++)ya.IH(b[h],!0,a);a=V.qe();V.resize(a.clientWidth,a.clientHeight,!0)};a.MV=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d].I;e&&e.Om&&(e.Fw=c,a.I.Ss.push(b[d]))}};a.yz=function(a){return a.I.Ia};a.UM=function(a,b){va.fa(b,function(c,d){var e=null;switch(d.type){case U.nc:e=ka.uy(d.Fv);break;case U.sx:e=ka.dY(d);break;case U.SD:e=ka.eY(d);break;case U.eJ:e=ka.KX();break;case U.mq:e=ka.OX(d.fB,d.nj,d.pn);break;case U.$w:e=ka.PX();
break;case U.tj:e=ka.SX();break;case U.zD:e=ka.FX(d.hy);break;case U.dt:var e=ka.LX(d),f=d.F.dof_power;if(d.F.dof_bokeh){var f=f/2,g=sa.zz(b,d,U.nc);sa.Sd(g[0],f);sa.Sd(g[1],f);g[0]=sa.td(b,g[0],U.nc);sa.Sd(g[0],f)}else{var g=sa.td(b,d,U.nc),h=sa.td(b,g,U.nc);sa.Sd(g,f);sa.Sd(h,f)}break;case U.pq:var e=ka.TX(),f=sa.td(b,d,U.nc),g=sa.td(b,f,U.nc),h=sa.td(b,g,U.nc),k=sa.td(b,h,U.nc);sa.Sd(g,d.Pt);sa.Sd(f,d.Pt);sa.Sd(k,d.Eu*d.mp);sa.Sd(h,d.Eu*d.mp);break;case U.ft:e=ka.NX();break;case U.AD:e=ka.GX();
break;case U.ZI:e=ka.BX(d);break;case U.QD:case U.qx:case U.wt:case U.rx:e=ka.bY(d.type);break;case U.Eh:e=ka.fY(d.Hb);break;case U.Xe:e=ka.HX(a,d);break;case U.LUMINANCE:e=ka.QX();break;case U.bJ:e=ka.CX();break;case U.kx:e=ka.RX(d.Un);break;case U.Ys:e=ka.EX(d.Tx);break;case U.NJ:e=ka.uy("NONE");break;case U.sV:e=ka.DY();break;case U.Qp:e=ka.AX();break;case U.st:e=ka.VX()}e&&(f=U.Xj(e,ya.Jq("NONE")),U.qd(d,f),sa.mo(b,d,e),X(e))})};a.jm=function(a,b,c,e){switch(b.type){case "MESH":case "LINE":case "WORLD":var g=
a.I.Ia,h=b.v;!sa.uc(g,U.$d)&&h.ze&&(h.ze=!1);h=aa(a,qb);(c||e)&&La.jm(b,a);for(e=0;e<h.length;e++){var k=h[e],l=b,m=g,r=a,q=c;switch(k.type){case U.Wb:f(k,l,m,"OPAQUE",r,q);break;case U.Gd:f(k,l,m,"BLEND",r,q);break;case U.Dh:f(k,l,m,"XRAY",r,q);break;case U.Ge:f(k,l,m,"GLOW",r,q);break;case U.He:case U.Zd:t(k,l,m,!1,r,q);break;case U.Tg:case U.ag:t(k,l,m,!0,r,q);break;case U.Ug:for(var p=ya.La(l,r),v=p.aa,x=0;x<v.length;x++){var w=v[x];if("SHADOW"==w.type&&"RECEIVE"==w.Hb&&w.ze){if(!q&&(d(w,k,l,
m,"SHADOW",r),!ka.Ed(w)))continue;var C=U.Xj(w,l.v,p.$g[x]);U.qd(k,C);sa.mo(m,k,w);X(w)}}break;case U.$d:p=!1;v=l.v;l=ya.La(l,r);x=l.aa;w=sa.uc(m,U.yk);for(C=0;C<x.length;C++){var z=x[C];if("SHADOW"==z.type&&"CAST"==z.Hb){p=!0;if(!q){W(z);var y=k.Kr;ka.Sf(z,"NUM_LIGHTS",y);ka.Sf(z,"NUM_LFACTORS",y%2?Math.floor(y/2)+1:y/2);n(z.mb,k.F);ra.xa(z.mb,"SHADOW_USAGE","SHADOW_CASTING");z.hd&&w&&R(z,w,v);ka.Sf(z,"SHADOW_TEX_RES",ra.da(r.I.Cd.csm_resolution));if(!ka.Ed(z))continue}z.hd&&(r.I.Cd.bZ=!0);y=U.Xj(z,
v,l.$g[C]);U.qd(k,y);sa.mo(m,k,z);X(z)}}p&&(l=r.I.Cd,q=sa.uc(m,U.Wb),H(k,r,q.F,l,!0));break;case U.Cf:ha(k,l,m,r,q);break;case U.zi:ha(k,l,m,r,q);break;case U.Bi:p=l.v;v=ya.La(l,r);x=v.aa;for(w=0;w<x.length;w++)if(C=x[w],"COLOR_ID"==C.type&&"OUTLINE"==C.Hb){if(!q&&(d(C,k,l,m,"COLOR_ID",r),ka.Sf(C,"USE_OUTLINE",1),!ka.Ed(C)))continue;C=U.Xj(C,p,v.$g[w]);U.qd(k,C)}break;case U.yk:m=l.v;l=ya.La(l,r);r=l.aa;for(p=0;p<r.length;p++)if(v=r[p],"GRASS_MAP"==v.type){if(!q&&!ka.Ed(v))if("DEBUG"===xb.type())ka.Jx(v,
"error.glslv","error.glslf"),ka.Ed(v);else continue;v=U.Xj(v,m,l.$g[p]);U.qd(k,v);v=k.F;z=m.Hi;x=k.Nd[0];w=k.Nd[1];C=k.Nd[2];0==x&&0==w?(x=z.min_z,w=z.max_z):(x=Math.min(x,z.min_z),w=Math.max(w,z.max_z));z=1E-4*(w-x);x-=z;w+=z;k.Nd[0]=x;k.Nd[1]=w;Fa.SQ(v,C/2,C/2,-w,-x);Fa.Kl(v,!1)}break;case U.Ai:for(p=l.v,l=ya.La(l,r),r=l.aa,v=0;v<r.length;v++)if(x=r[v],"DEBUG_VIEW"==x.type){if(!q&&(x.hd&&(w=sa.uc(m,U.yk))&&R(x,w,p),!ka.Ed(x)))if("DEBUG"===xb.type())ka.Jx(x,"error.glslv","error.glslf"),ka.Ed(x);
else break;w=U.Xj(x,p,l.$g[v]);U.qd(k,w);sa.mo(m,k,x);X(x)}}}break;case "LAMP":B(b,a)}c=ya.La(b,a);g=c.aa;for(h=0;h<g.length;h++)null==g[h].zb&&"PHYSICS"!=g[h].type&&(ya.uQ(c,h),h--);ya.IH(b,!0,a)};a.o0=function(a,b){if(a&&a.I&&a.I.Ia){var c=a.I.Ia,d=sa.uc(a.I.Ia,U.Xe);if(d){var e=null;sa.QC(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==U.Xe&&d.type==U.Bk)return e=a.fb,!0});if(e){var c=ub.By,f=ka.e_(b,a);if(f&&f.Uj)f=Qa.H_(Qa.Cz(f.Qe).Ia),-1!=f&&(c=Ua.pE(f/2));else if(f=a.I.Hn.xp)c=f.VR;c=Math.min(c,
ab.mh);d.F.width=c;d.F.height=c;bb.HQ(e,c);r(a,c)}}}};a.X4=function(a,b){for(var c=a.P,d=0;d<c.length;d++){var e=c[d].vb,f=e.I.Ia,g=sa.uc(e.I.Ia,U.Xe);if(g){var h=null;sa.QC(f,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==U.Xe&&d.type==U.Bk)return h=a.fb,!0});h&&(f=Ua.pE(b.height/2),f=Math.min(f,ab.mh),g.F.width=f,g.F.height=f,bb.HQ(h,f),r(e,f))}}};a.JH=function(a){a.I.UA=!0};a.q5=function(a,b){va.fa(b,function(b,c){c.type===U.$d&&(Za.copy(a.C,c.F.C),Za.copy(a.Lg,c.F.$v))})};a.Gea=za;a.m_=function(a,
b){for(var c=a.I.Cd,d=new Float32Array(c.csm_num),e=0;e<c.csm_num;e++)d[e]=Fa.GY(c,b,e);return d};a.Yt=ua;a.io=ga;a.lG=function(a){return a.v.ci};a.gQ=function(a,b){for(var c=0;c<a.P.length;c++)for(var d=aa(a.P[c].vb,qb),e=0;e<d.length;e++)for(var f=d[e].ib,g=0;g<f.length;g++)for(var h=f[g].Ra,k=h.length-1;0<=k;k--){var n=h[k];if(n.oh==a.v)if(n.Fa){if("undefined"==typeof b||-1!=n.Fa.Ac.indexOf(b)||0==n.Fa.Ac.length)ka.CL(n.Fa),h.splice(k,1)}else h.splice(k,1)}};a.a5=function(a,b){for(var c=a.yd,d=
ya.La(a,b).lv,e=aa(b,sc),f=0;f<e.length;f++){var g=e[f];g.ap.set(c.fu,4*d);g.Ta=!0}};a.Z4=B;a.XC=function(a){a=a.P;for(var b=0;b<a.length;b++)ea(a[b].vb)};a.YC=ea;a.s5=Aa;a.Ja=function(){for(var a=0;a<Wa.length;a++){var b=Wa[a];va.fa(b.I.Ia,function(a,b){if(b.type!=U.Bk){var c=b.F;Ca.z2(c.Lf,c.tc,c.mg,c.width,c.height);for(var c=b.ib,d=0;d<c.length;d++)for(var e=c[d].Ra,f=0;f<e.length;f++){var g=e[f].Fa;g&&ka.CL(g)}}});b.I.Ia=null;b.I.qp=[]}yb=kb=null;Wa.length=0;Cb=null};a.fP=function(a,b,c){a=Fa.tZ(a,
a.near,a.far,null,!0);var d=Sa.UZ(a);a=ya.Jq("DYNAMIC");a.Hi=a.Aa={max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12};a.af=a.yc=Ba.oW();var e=a.af.ub;a.lm=a.Ib=Ba.gE([e,0,0],[0,e,0],[0,0,e],a.af.T);c=ka.aY(d,c);c.$k=!0;c=U.Xj(c,a);U.qd(b,c)};a.Uaa=function(a){return[a.frame_start,a.frame_end]};a.lR=function(a,b,c){V.N3(a,b,c);yb&&T(yb,a,b)};a.vh=aa;a.Xb=ja;a.x2=function(){ca(!1)};a.y2=function(){ca(!0)};a.oN=function(a){a=ja(a,U.Wb);var b=a.re,c=a.Ee,d=[],e=[];d[0]=b[0];d[1]=b[1];
d[2]=b[2];e[0]=c[0];e[1]=c[1];e[2]=c[2];return[a.eh,d,e]};a.MH=function(a,b,c,d){for(var e=aa(a,sc),f=0;f<e.length;f++){var g=e[f];g.re.set(c);g.Ee.set(d);g.eh=b;g.Ta=!0}(b=sa.uc(a.I.Ia,U.Xe))&&Aa(a,b)};a.MN=function(a){if((a=ja(a,U.Xe))&&a.procedural_skydome){var b={};b.color=Array(3);Ra.copy(a.mn,b.color);b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=
a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;return b}return null};a.w_=function(a){return aa(a,Hb)[0].rg[0]};a.u_=function(a){return aa(a,Hb)[0].rg[1]};a.x_=function(a){return aa(a,Hb)[0].rg[2]};a.v_=function(a){return aa(a,Hb)[0].rg[3]};a.OQ=function(a,b){for(var c=aa(a,Hb),d=0;d<
c.length;d++){var e=c[d];e.rg[0]=b;e.Ta=!0}};a.MQ=function(a,b){for(var c=aa(a,Hb),d=0;d<c.length;d++){var e=c[d];e.rg[1]=b;e.Ta=!0}};a.PQ=function(a,b){for(var c=aa(a,Hb),d=0;d<c.length;d++){var e=c[d];e.rg[2]=b;e.Ta=!0}};a.NQ=function(a,b){for(var c=aa(a,Hb),d=0;d<c.length;d++){var e=c[d];e.rg[3]=b;e.Ta=!0}};a.rN=function(a,b){var c=b||[],d=aa(a,Hb)[0].pe;c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];return c};a.OH=function(a,b){for(var c=aa(a,Hb),d=0;d<c.length;d++){var e=c[d];e.pe.set(b);e.Ta=!0}};
a.NN=function(a){var b=ja(a,U.sx),c=ja(a,U.SD);a=ja(a,U.Wb);if(!b)return null;var d={};d.quality=b.zp;d.use_hemisphere=b.rs;d.use_blur_depth=c.os;d.blur_discard_value=c.ps;d.radius_increase=b.ts;d.influence=b.ss;d.dist_factor=b.qs;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};a.lN=function(a){a=ja(a,U.dt);if(!a)return null;var b={};b.dof_on=a.F.dof_on;b.dof_distance=a.F.dof_distance;b.dof_front_start=a.F.dof_front_start;b.dof_front_end=a.F.dof_front_end;b.dof_rear_start=a.F.dof_rear_start;
b.dof_rear_end=a.F.dof_rear_end;b.dof_power=a.F.dof_power;b.dof_bokeh=a.F.dof_bokeh;b.dof_bokeh_intensity=a.F.dof_bokeh_intensity;b.dof_object=a.F.dof_object;return b};a.KQ=oa;a.vN=function(a){var b=aa(a,[U.mq]);a=ja(a,U.$w);if(!b||!a)return null;var c={};c.god_rays_max_ray_length=b[0].Tm;c.god_rays_intensity=a.god_rays_intensity;c.god_rays_steps=ka.f_(b[0].ib[0].Ra[0].Fa)[1];return c};a.UQ=function(a,b){var c=aa(a,[U.mq]),d=aa(a,[U.$w]);if(!c.length||!d.length)return Ia.error("God Rays are not enabled on the scene"),
0;if("number"==typeof b.god_rays_intensity)for(var e=0;e<d.length;e++)d[e].god_rays_intensity=b.god_rays_intensity;if("number"==typeof b.god_rays_max_ray_length)for(var f=b.god_rays_max_ray_length,e=0;e<c.length;e++)c[e].Tm=f,c[e].Vr=f/c[e].pn/(e+1),c[e].Ta=!0;if("number"==typeof b.god_rays_steps)for(var g=ra.da(b.god_rays_steps,1),f=c[0].Tm,e=0;e<c.length;e++){c[e].pn=g;c[e].Vr=f/g/(e+1);c[e].Ta=!0;var h=c[e].ib[0].Ra[0],k=h.Fa;ka.Sf(k,"STEPS_PER_PASS",g);ka.Ed(k);U.qd(c[e],h)}for(e=0;e<d.length;e++)d.Ta=
!0};a.cN=function(a){var b=ja(a,U.kx);a=ja(a,U.Ys);if(!b||!a)return null;var c={};c.key=b.Bq;c.edge_lum=b.Aq;c.blur=a.yq;c.adaptive=b.Un;c.average_luminance=b.average_luminance;return c};a.zQ=pa;a.uN=function(a){a=ja(a,U.ft);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};a.TQ=Q;a.$N=function(a){var b=Y(a);a=Ra.length(b);
if(0==a)return null;var b=Ea.vB(Math.atan2(b[0],-b[1])),c={};c.wind_dir=b;c.wind_strength=a;return c};a.T2=function(a){a.I.PG=!0};a.YN=xa;a.XN=function(a,b){var c=a.I.Xd,d=ja(a,U.Wb);d&&c&&(b.waves_height=c.waves_height,b.waves_length=c.waves_length,b.water_fog_density=d.oj[3],c=b.water_fog_color=[],c[0]=d.oj[0],c[1]=d.oj[1],c[2]=d.oj[2])};a.jR=function(a,b){var c=a.I.Xd;if(!c)return Ia.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof b.dst_noise_scale0&&(c.dst_noise_scale0=
b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&(c.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&(c.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(c.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(c.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(c.dir_freq=b.dir_freq);"number"==typeof b.dir_noise_scale&&(c.dir_noise_scale=b.dir_noise_scale);"number"==typeof b.dir_noise_freq&&(c.dir_noise_freq=
b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&(c.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&(c.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(c.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(c.zu=b.water_dynamic);for(var d=aa(a,hb),e=0;e<d.length;e++){var f=d[e];"number"==typeof b.water_fog_density&&c.pe&&(f.oj[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&c.pe&&f.oj.set(b.water_fog_color);f.Ta=!0}};a.LN=function(a,
b,c){var d=a.I.Xd;if(!d.kn)return 100;var e=d.CG;a=d.vk;var f=(b[0]-d.es[0])/d.fs[0],g=(d.es[1]+b[1])/d.fs[1],f=f+.5,g=g+.5;if(!(1<f||0>f||1<g||0>g))return d=e*Ea.bN(yb.I.dI,d.eI,f,g),b=(a-b[2])*c,b=Math.sqrt(d*d+b*b)};a.update=function(a,c){for(var d=b().Dk.v,e=0;e<Wa.length;e++){var f=Wa[e],g=f.I.Ia,h=f.I;if(h.Xd)var k=Za.W(d.C),n=k[2]-xa(f,k[0],k[1]);for(k=0;k<h.Ss.length;k++){var l=h.Ss[k].I,t=l.qb,B=l.ie;if(!(f.b4w_use_nla&&l.Cn||!t&&!B)&&bb.RS(l)){var m=bb.OS(l),r=bb.QS(l);t&&Ja.is_mobile_device&&
(r-=5);var q=bb.I5(l);m>=q&&l.Xl||m<r?(bb.mQ(l),B&&(l.hn=bb.GB(l,a))):m>=q&&!l.Xl?bb.eH(l):bb.SS(l)&&(t?bb.uS(l):(t=bb.GB(l,a),t!=l.hn&&(bb.tS(l),l.Jl++),l.hn=t))}}va.fa(g,function(b,c){-1<tc.indexOf(c.type)&&(c.time=a);h.Xd&&(c.Ut=n)})}for(e=0;e<Wa.length;e++)if(f=Wa[e],h=f.I,g=h.Ia,d=h.qp,d.length)for(h.UA&&(fa(f),h.UA=!1),h.PG&&(Na(f),h.PG=!1),h.QG&&(la(f),h.QG=!1),h.motion_blur&&ta(g,c),f=sa.uc(g,U.Bi),k=0;k<d.length;k++)g=d[k],Ha.nB(g),f&&na(g,f),Ca.Tq(g);Ja.show_hud_debug_info&&N.S3(Wa,c)};
a.H2=function(a){a.I.QG=!0};a.yF=function(a){var b=[];va.fa(a.I.Ia,function(a,c){b.push(c)});return b};a.fN=function(){var a=ja(yb,U.Gd),b=yb;return a||b.I.Xd?a.Ut:null};a.sS=function(a){va.fa(a.I.Ia,function(a,b){b.Ta=!0})};a.e3=function(a,c){a.debug_view_mode=c;a.pc=c!=Ya.Pw;a.Bb=c==Ya.Qw;a.Ta=!0;for(var d=b(),e=0;e<hb.length;e++)for(var f=aa(d,[hb[e]]),g=0;g<f.length;g++)f[g].wu=c==Ya.et};a.d3=function(a,b){a.debug_colors_seed=b;a.Ta=!0};a.z3=function(a,b){a.Gy=b;a.Ta=!0};a.K3=function(a,b){for(var c=
a.ib,d=0;d<c.length;d++)for(var e=c[d].Ra,f=0;f<e.length;f++){var g=e[f].Fa;Ra.copy(b,g.wireframe_edge_color);g.zb.Fr=!0}};a.nS=function(a,b){var c=b.Vq,d=a.I.pj;if(c&&"WIND"==c.type&&d){var e=Za.ha(b.v.C);Ra.transformQuat(Ea.fc,e,d);Ra.normalize(d,d);Ra.scale(d,c.JR,d);c=aa(a,tc);for(e=0;e<c.length;e++)c[e].pj.set(d);return!0}return!1};a.X1=function(a,b,c){var d=ja(a,U.Cf);if(d){var e=Pa.enabled&&(Pa.iw===U.Cf||Pa.iw===U.zi);if(e)var f=V.Vt(b,c,mb,d.F);else{var g=V.Xh();Fa.c3(d.F,b,c,g.clientWidth,
g.clientHeight)}Ha.nB(d);d.pc&&Ca.Tq(d);(a=ja(a,U.zi))?(qa.copy(d.F.Fb,a.F.Fb),qa.copy(d.F.Wd,a.F.Wd),Ea.zo(a.F.Wd,a.F.Qi),Ha.nB(a),a.pc&&Ca.Tq(a),b=a.F):b=d.F;if(d.pc||a&&a.pc)return e?(f[1]=b.height-f[1],Ca.wB(b.Lf,f[0],f[1],1,1,uc)):Ca.wB(a?a.F.Lf:d.F.Lf,0,0,1,1,uc)}else Ia.error("Object Selection is not available on the scene");return null};a.aR=function(a){for(var c=b(),c=aa(c,[U.pq]),d=0;d<c.length;d++){var e=c[d];e.bj.set(a);e.Ta=!0}};a.oba=Y;a.Jo=function(a){var b={title:"",description:""};
a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};a.Qu=function(a){return a.b4w_custom_prop};a.mS=function(a,b){var c=Db;Ra.negate(b,c);for(var d=0;6>d;d++){var e=a.Xk[d],f=a.ro[d],g=a.F;qa.translate(Ea.mT[d],c,e);qa.multiply(g.Fb,e,g.Wd);Ea.zo(g.Wd,f)}};a.pS=function(a,b,c){Ea.C4(b,c,Ea.fc,a.F.Kc)};a.GK=function(a,b,c){var d=a.I.fj;if(d&&b)for(var e=0;e<b.length;e++){var f=b[e],g=ya.La(f,a);if(-1!=f.v.te){var h=d.gk,k=d.kB,f=f.v.te;k.length&&f<k.length?g.gk=k[f]:
h.length&&f<h.length&&(g.gk=h[f])}else-1!=f.v.Ke&&(h=d.Wk,k=d.YE,f=f.v.Ke,k.length?g.Wk=k[f]:h.length&&(g.Wk=h[f]))}if(c)for(b=ya.Hz(c,Ja.ssao&&a.b4w_enable_ssao),c=a.I.Cd,e=0;e<b.length;e++)if(g=ya.La(b[e],a),c)for(d=aa(a,[U.$d]),f=0;f<d.length;f++)e==d[f].th&&g.cI.push(d[f])};a.iP=function(a,b){return a.timeline_markers[b]};a.$r=function(a){var c=b();if(c=ja(c,U.Eh))a.distortion_coefs&&(c.Zk[0]=a.distortion_coefs[0],c.Zk[1]=a.distortion_coefs[1],c.Ta=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=
a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.Ta=!0),a.base_line_factor&&(c.Zk[2]=a.base_line_factor,c.Ta=!0),a.inter_lens_factor&&(c.Zk[3]=a.inter_lens_factor,c.Ta=!0),null!=a.enable_hmd_stereo&&(c.enable_hmd_stereo=a.enable_hmd_stereo,c.Ta=!0)};a.RA=function(b,c){for(var d=Wa,e=0;e<d.length;e++)sa.z1(a.yz(d[e]),b,c)};
a.Cea=function(a){for(var b=Va.vc(a,"LAMP",Va.Tc),c=aa(a,qb),d=0;d<c.length;d++)for(var e=c[d],f=e.ib,g=0;g<f.length;g++)for(var h=f[g].Ra,k=0;k<h.length;k++){var n=h[k],l=n.Fa;"MAIN"==l.type&&(ka.L4(l,b,a),ka.Ed(l),U.qd(e,n))}};a.Lca=function(a){for(var b=0;b<Wa.length;b++)va.fa(Wa[b].I.Ia,function(b,c){for(var d=c.ib,e=0;e<d.length;e++)for(var f=d[e].Ra,g=0;g<f.length;g++){var h=f[g];h.Fa==a&&U.qd(c,h)}})}};b4w.module.__hud=function(a,u){function m(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=0;a.shadowColor=null}function c(a){b(' SCENE "'+a.name+'"');b(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(a.I){var c=0,e=0,g=0;q.fa(a.I.Ia,function(a,h){if(h.type!=w.Bk){for(var l=Math.round(h.F.width)+"x"+Math.round(h.F.height),m=0,q=0;q<h.ib.length;q++)m+=h.ib[q].Ra.length;q=h.Mq;if(h.type==w.Zd||h.type==w.ag)m*=6;var k=h.pc&&!h.Co,p=k?h.lg:0;h.enqueue||
(h.lg=0);var x=k?" (\u2713)":" (\u2715)",y=w.CC(h);b(x,y,h.Kr,l,q,"of",m,"  ",p.toFixed(3));h.Mq=0;c+=m;k&&(e+=q,g+=p)}});return[c,e,g]}b("No INFO")}function b(){for(var a=80+20*e[0],b=arguments[0],c=1;c<arguments.length;c++){for(var h="",m=0;m<A[c]-String(arguments[c]).length;m++)h+=" ";b+=h+arguments[c]}e[0]++;g.fillText(b,30,a)}function p(a,b,c){b=a.Nc*b;c.x=a.x+b;c.y=a.y;c.Nc=a.Nc-2*b;c.Zb=a.Zb}function h(a){return a.x+a.Nc/2}function G(a){var b=g,c={x:0,y:0,Nc:0,Zb:0},e=b.canvas.width,b=b.canvas.height;
c.x=0;c.y=0;c.Nc=e;c.Zb=b;p(c,.01,c);e=.02*c.Zb;c.x=c.x;c.y+=e;c.Nc=c.Nc;c.Zb=c.Zb-2*e;e=c.Nc/8;c.x+=e*a;c.y=c.y;c.Nc=e;c.Zb=c.Zb;p(c,.02,c);return c}var q=u("__graph"),w=u("__subscene"),A=[5,30,4,10,5,3,5],g=null,e=[0,0];a.Mf=function(a){a=a.getContext("2d");m(a);return g=a};a.Dp=function(){g&&m(g)};a.reset=function(){var a=g;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),e[0]=0,e[1]=0)};a.S3=function(a,h){var m=g;
if(m){m.textAlign="left";m.fillStyle="rgba(0,255,0,255)";b(" FPS",(1/h).toFixed(2));e[0]++;for(var q=m=0,p=0,l=0;l<a.length;l++){var x=c(a[l]),m=m+x[0],q=q+x[1],p=p+x[2];e[0]++}b(" ----------------------------------------------------------------");b("    ","TOTAL ACTIVE","","",q,"of",m,"  ",p.toFixed(3))}};a.print=function(){var a=g;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",b.apply(Math,arguments))};a.OP=function(a,b,c,e,m,l,q){var p=g;if(p){b=G(b);var w=b.Zb/5;b.x=b.x;b.y+=4*w;b.Nc=
b.Nc;b.Zb=w;p.textAlign="center";p.fillStyle="#00FF00";g.fillText(a,h(b),b.y-10);p.strokeStyle="#00FF00";p.lineWidth=.5;p.beginPath();p.moveTo(b.x,b.y);p.lineTo(b.x+b.Nc,b.y);p.lineTo(b.x+b.Nc,b.y+b.Zb);p.lineTo(b.x,b.y+b.Zb);p.closePath();p.stroke();if(!l&&!q)for(l=1E6,q=-1E6,a=0;a<c.length;a++)l=Math.min(l,c[a]),q=Math.max(q,c[a]);p.textAlign="right";g.fillText(String(l),b.x-10,b.y+b.Zb);g.fillText(String(q),b.x-10,b.y);p.textAlign="center";g.fillText(String(e),b.x,b.y+b.Zb+15);g.fillText(String(m),
b.x+b.Nc,b.y+b.Zb+15);p.strokeStyle="#FF0000";p.lineWidth=1.5;p.beginPath();e=b.Nc/(c.length-1);q=b.Zb/(q-l);for(a=0;a<c.length;a++)m=b.x+e*a,w=b.y+b.Zb-(c[a]-l)*q,a?p.lineTo(m,w):p.moveTo(m,w);p.stroke()}};a.zM=function(a,b,c,e,m,l,q){var p=g;if(p)for(p.textAlign="center",p.fillStyle="#00FF00",p.font="bold 12px Courier",c=G(c),g.fillText(b?"["+a+"]":a,h(c),c.y),0<=l&&g.fillText(l?"[M]":"[ ]",h(c)-15,c.y+30),0<=q&&g.fillText(q?"[S]":"[ ]",h(c)+15,c.y+30),a={x:0,y:0,Nc:0,Zb:0},b=0;b<e.length;b++){l=
e[b];var w="VOLUME"==l[0];if(w){q=c.y+350;var k=c.Nc,x=a;x.x=c.x;x.y=q;x.Nc=k;x.Zb=250}else{q=c.y+50+50*b;var k=c.Nc,x=c.Zb,y=a;y.x=c.x;y.y=q;y.Nc=k;y.Zb=x}q=p;var k=a,y=b==m,A=l[0],x=l[1],u=l[2],J=l[3],z=(J-u)/l[4],z=1>z?Math.floor(1/z-1E-5).toFixed(0).length:0;l=l[5]?Math.log(x/u)/Math.log(J/u):(x-u)/(J-u);q.textAlign="center";y?q.fillText("["+A+"]",h(k),k.y):q.fillText(A,h(k),k.y);q.strokeStyle="#00FF00";q.lineWidth=w?3:1;w?(q.textAlign="right",q.fillText(J.toFixed(z),h(k)-10,k.y+15),q.textAlign=
"right",q.fillText(u.toFixed(z),h(k)-10,k.y+k.Zb-15)):(q.textAlign="right",q.fillText(u.toFixed(z),k.x+28,k.y+15),q.textAlign="left",q.fillText(J.toFixed(z),k.x+k.Nc-28,k.y+15));q.beginPath();if(w){var C=k.y+15+(k.Zb-30)*(1-l);q.moveTo(h(k),k.y+15);q.lineTo(h(k),k.y+k.Zb-15);q.moveTo(h(k)-5,k.y+15);q.lineTo(h(k)+5,k.y+15);q.moveTo(h(k)-5,k.y+k.Zb-15);q.lineTo(h(k)+5,k.y+k.Zb-15);q.moveTo(h(k)-5,C);q.lineTo(h(k)+5,C)}else{var r=k.x+30+(k.Nc-60)*l;q.moveTo(k.x+30,k.y+15);q.lineTo(k.x+k.Nc-30,k.y+15);
q.moveTo(k.x+30,k.y+15-5);q.lineTo(k.x+30,k.y+15+5);q.moveTo(k.x+k.Nc-30,k.y+15-5);q.lineTo(k.x+k.Nc-30,k.y+15+5);q.moveTo(r,k.y+15-5);q.lineTo(r,k.y+15+5)}q.stroke();"EQ_Q"==A?(l=Math.log(1+1/(2*x*x)+Math.sqrt((2+1/(x*x))*(2+1/(x*x))/4-1))/Math.log(2),w?(q.textAlign="left",q.fillText(x.toFixed(z),h(k)+10,C),q.textAlign="left",q.fillText("("+l.toFixed(z+1)+")",h(k)+10,C+10)):(q.textAlign="right",q.fillText(x.toFixed(z),r,k.y+30),q.textAlign="left",q.fillText("("+l.toFixed(z+1)+")",r,k.y+30))):w?(q.textAlign=
"left",q.fillText(x.toFixed(z),h(k)+10,C)):(q.textAlign="center",q.fillText(x.toFixed(z),r,k.y+30))}}};b4w.module.__input=function(a,u){function m(a){var b=X.ym();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&n())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function c(a,b){if(!m(a))return null;var c={type:a,rh:!1,mi:[],aj:[],wl:[],Pe:[],xl:[],yl:[],ev:[],PO:[],ql:[],Vl:[],Ul:[],Tl:[],element:b,hk:!0,rc:[],QA:new Float32Array(2),y1:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),Ov:null,Op:null,wk:null,Yd:null,orientation:za.create(),position:ua.create(),
Pi:window.VRFrameData?new VRFrameData:null,kI:H.create(),el:new Float32Array(4),fl:new Float32Array(4),Ui:0,xj:0,Tv:0,Gn:0,Vj:0,yj:0,Go:[],Em:[0,0,0,0,0,0,0,0,0,0,0,0],QM:[0,0,0,0,0,0,0,0,0,0,0,0],oz:[]};c.el[0]=c.el[1]=c.el[2]=c.el[3]=Math.PI/4;c.fl[0]=c.fl[1]=c.fl[2]=c.fl[3]=Math.PI/4;30==a||40==a||50==a?(c.rh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.hk=!1)):10==a?c.rh=!0:20==a&&p(c);return c}function b(b,d){10==b||20==b?d=window:d||(40==b?d=document:d=R.qe());for(var e=
0;e<oa.length;e++)if(oa[e].type==b&&oa[e].element==d)return oa[e];e=c(b,d);60!=b&&70!=b&&80!=b&&90!=b||e.oz.push(a.Xp,a.Yp,a.gq,a.hq,a.iq,a.jq,a.Ln,a.Mn,a.kq,a.lq,a.Zp,a.$p,a.aq,a.bq,a.cq,a.eq,a.fq,a.Rw,a.Sw,a.Tw,a.Uw,a.Vw,a.Ww,a.Xw,a.Yw,a.Zw,a.cm,a.Jn,a.dm,a.Kn,a.Vp,a.Wp,a.it,a.jt,a.kt,a.lt,a.gt,a.ht);e&&oa.push(e);return e}function p(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.Yd=b[0],a.rh=!0,a.Yd.getFrameData(a.Pi),a.Ov&&a.Ov())},function(){la.va("WebVR displays are not found.");
a.rh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(b){w(a,b);b.length&&(a.rh=!0);a.Ov&&a.Ov()},function(){la.va("WebVR devices are not found.");a.rh=!1}),G(a,Z.webvr)):(h(a),a.rh=!0))}function h(a){var b=Z.nonwebvr;a.Gn=b.Gn;a.Vj=b.Vj;a.yj=b.yj;G(a,b);a.Ui=b.Ui;a.xj=b.xj;a.Tv=b.Tv;q(a)}function G(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=
b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function q(a){var b=Math.atan(a.Ui/2/a.Tv*Z.nonwebvr.yM);b&&(a.el[0]=a.fl[0]=Math.min(b,Math.PI/3));b&&(a.el[1]=a.fl[3]=Math.min(b,Math.PI/3));b&&(a.el[2]=a.fl[2]=Math.min(b,Math.PI/3));b&&(a.el[3]=a.fl[1]=Math.min(b,Math.PI/3))}function w(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&
(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Op=d;a.wk=c}function A(a,b,c){switch(a.type){case 20:var d=e(a,0);if(d&1){var f="left"==b?a.el:a.fl;ga.copy(f,c)}else if(f=a.Yd||a.Op)f=f.getEyeParameters(b),(f=f.fieldOfView||f.currentFieldOfView)?(c[0]=ha.cf(f.upDegrees),c[1]=ha.cf(f.rightDegrees),c[2]=ha.cf(f.downDegrees),c[3]=ha.cf(f.leftDegrees)):d&16&&(d=da,"left"==b?fa.copy(a.Pi.leftProjectionMatrix,
d):fa.copy(a.Pi.rightProjectionMatrix,d),c[0]=Math.atan(-T[1]/T[2]),c[1]=Math.atan(-T[0]/T[2]),c[2]=Math.atan(T[1]/T[2]),c[3]=Math.atan(T[0]/T[2]));break;default:la.error("fov is undefined for device: ",a.type)}return c}function g(a,b,c){switch(a.type){case 20:a.Yd&&("left"==b?fa.copy(a.Pi.leftProjectionMatrix,c):"right"==b?fa.copy(a.Pi.rightProjectionMatrix,c):la.error("Unknown type of eye: ",b));break;default:la.error("Projection matrix is undefined for device: ",a.type)}return c}function e(a,b){switch(b){case 0:var c=
0;navigator.getVRDisplays&&(c|=8,a.Pi&&(c|=16));navigator.getVRDevices&&(c=B.is_mobile_device?c|4:c|2);return c||1;case 23:var d=a.Yd||a.Op;return d?(c=d.getEyeParameters("left"),d=d.getEyeParameters("right"),a.Yd?d.offset[0]-c.offset[0]:d.eyeTranslation.x-c.eyeTranslation.x):a.Ui}}function y(a,c){if(a){for(var d=0;d<a.buttons.length;d++)c.Go[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)c.Em[d]=a.axes[d];if(d=a.pose){var e=b(20).kI;d.position&&H.Lc(d.position,
e,c.position);d.orientation&&H.aS(d.orientation,e,c.orientation)}}}function x(a){for(var b=0;b<a.Go;b++)a.Go[b]=0;for(b=0;b<a.Em.length;b++)a.QM[b]=a.Em[b],a.Em[b]=0;a.position.set(ha.TD);a.orientation.set(ha.ox)}function P(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function J(a){return null===a}function L(a,b,c,d){switch(b){case 130:c&&P(a.mi,c);if(d||a.aj.every(J)&&a.mi.every(J))a.mi.length=0,a.aj.length=0,b=a.rc.indexOf(141),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("deviceorientation",
I,!1));break;case 140:c&&P(a.aj,c);if(d||a.aj.every(J)&&a.mi.every(J))a.mi.length=0,a.aj.length=0,b=a.rc.indexOf(141),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("deviceorientation",I,!1));break;case 50:c&&P(a.wl,c);if(d||a.wl.every(J))a.wl.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("mousedown",D,!1));break;case 40:c&&P(a.Pe,c);if(d||a.Pe.every(J))a.Pe.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("mousemove",K,!1));
break;case 41:c&&P(a.Pe,c);if(d||a.Pe.every(J))a.Pe.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("mousemove",k,!1));break;case 60:c&&P(a.xl,c);if(d||a.xl.every(J))a.xl.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("mouseout",M,!1),a.element.removeEventListener("mouseup",E,!1));break;case 70:c&&P(a.yl,c);if(d||a.yl.every(J))a.yl.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("wheel",S,!1));break;
case 90:c&&P(a.ev,c);if(d||a.ev.every(J))a.ev.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("keydown",F,!1));break;case 80:c&&P(a.ql,c);if(d||a.ql.every(J))a.ql.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("keyup",z,!1));break;case 100:c&&P(a.Vl,c);if(d||a.Vl.every(J))a.Vl.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("touchstart",C,!1));break;case 110:c&&P(a.Ul,c);if(d||a.Ul.every(J))a.Ul.length=
0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("touchmove",r,!1));break;case 120:if(c&&P(a.Tl,c),d||a.Tl.every(J))a.Tl.length=0,b=a.rc.indexOf(b),0<=b&&(a.rc.splice(b,1),a.element.removeEventListener("touchend",f,!1))}}function l(a,b){ha.XG(a,ha.VD,b);if("orientation"in window)var c=ha.cf(window.orientation);else"orientation"in window.screen?c=ha.cf(window.screen.orientation.angle):c=0;c=za.setAxisAngle(ha.mc,c,wa);za.multiply(b,c,b);return b}function I(a){var c=T;null===
a.alpha||null===a.beta||null===a.gamma?c[0]=c[1]=c[2]=0:(c[0]=ha.cf(a.alpha),c[1]=ha.cf(a.beta),c[2]=ha.cf(a.gamma));a=b(10,a.currentTarget);for(var d=0;d<a.aj.length;d++){var e=a.aj[d];e&&(ua.copy(c,aa),e(aa))}if(a.mi.length)for(c=l(c,ba),d=0;d<a.mi.length;d++)if(e=a.mi[d])za.copy(c,ja),e(ja);for(d=0;d<a.mi.length;d++)a.mi[d]||a.mi.splice(d,1);for(d=0;d<a.aj.length;d++)a.aj[d]||a.aj.splice(d,1)}function v(a,b){switch(a.type){case 30:a.QA[0]=b.clientX,a.QA[1]=b.clientY,a.y1=b.which}}function K(a){if(!ca||
!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);v(c,a);for(var d=0;d<c.Pe.length;d++){var e=c.Pe[d];e&&(ma[0]=a.clientX,ma[1]=a.clientY,e(ma))}c.hk&&a.preventDefault();for(d=0;d<c.Pe.length;d++)c.Pe[d]||c.Pe.splice(d,1)}}function k(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);v(c,a);for(var d=0;d<c.Pe.length;d++){var e=c.Pe[d];if(e){if("number"==typeof a.movementX)var f=
a.movementX,g=a.movementY;else"number"==typeof a.webkitMovementX?(f=a.webkitMovementX,g=a.webkitMovementY):"number"==typeof a.mozMovementX?(f=a.mozMovementX,g=a.mozMovementY):g=f=0;ma[0]=f;ma[1]=g;e(ma)}}c.hk&&a.preventDefault();for(d=0;d<c.Pe.length;d++)c.Pe[d]||c.Pe.splice(d,1)}}function D(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);v(c,a);for(var d=0;d<c.wl.length;d++){var e=c.wl[d];e&&e(a.which)}c.hk&&(window.frameElement&&
window.frameElement.focus(),a.preventDefault());for(d=0;d<c.wl.length;d++)c.wl[d]||c.wl.splice(d,1)}}function M(a){!R.CO(a.relatedTarget)&&a.which&&E(a)}function E(a){if(!ca||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);v(c,a);for(var d=0;d<c.xl.length;d++){var e=c.xl[d];e&&e(a.which)}c.hk&&a.preventDefault();for(d=0;d<c.xl.length;d++)c.xl[d]||c.xl.splice(d,1)}}function S(a){for(var c=b(30,a.currentTarget),d=0;d<c.yl.length;d++){var e=
c.yl[d];if(e){var f;f=a;var g=0;f.wheelDelta?f.wheelDelta%120?g=ha.sign(f.wheelDelta):g=f.wheelDelta/120:f.deltaY&&(g=f.deltaY%3?-ha.sign(f.deltaY):-f.deltaY/3);f=ha.ja(100*g,-2E3,2E3);e(f)}}c.hk&&a.preventDefault();for(d=0;d<c.yl.length;d++)c.yl[d]||c.yl.splice(d,1)}function F(a){for(var c=b(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?c.PO:c.ev,e=0;e<d.length;e++){var f=d[e];f?f(a.keyCode):d.splice(e--,1)}c.hk&&a.preventDefault()}function z(a){for(var c=b(40,a.currentTarget),d=0;d<c.ql.length;d++){var e=
c.ql[d];e&&e(a.keyCode)}c.hk&&a.preventDefault();for(d=0;d<c.ql.length;d++)c.ql[d]||c.ql.splice(d,1)}function C(a){for(var c=b(50,a.currentTarget),d=0;d<c.Vl.length;d++){var e=c.Vl[d];e&&e(a.targetTouches)}for(d=0;d<c.Vl.length;d++)c.Vl[d]||c.Vl.splice(d,1)}function r(a){for(var c=b(50,a.currentTarget),d=0;d<c.Ul.length;d++){var e=c.Ul[d];e&&e(a.targetTouches)}c.hk&&a.preventDefault();for(d=0;d<c.Ul.length;d++)c.Ul[d]||c.Ul.splice(d,1)}function f(a){for(var c=b(50,a.currentTarget),d=0;d<c.Tl.length;d++){var e=
c.Tl[d];e&&e(a.targetTouches)}for(d=0;d<c.Tl.length;d++)c.Tl[d]||c.Tl.splice(d,1)}function W(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function d(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",
b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function n(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var X=u("__compat"),R=u("__container"),
t=u("__config"),fa=u("__mat4"),la=u("__print"),H=u("__tsr"),za=u("__quat"),ha=u("__util"),ua=u("__vec3"),ga=u("__vec4"),B=t.K,Z=t.jO,ea=H.create(),Aa=H.create(),da=fa.create();a.sj=10;a.Vb=20;a.Uc=30;a.at=40;a.Rg=50;a.Mw=60;a.DD=70;a.ED=80;a.FD=90;a.oq=2;a.zk=4;a.em=1;a.Nn=8;a.jx=16;a.Sg=0;a.ex=10;a.fx=20;a.jJ=21;a.kJ=22;a.mt=23;a.dx=24;a.bx=25;a.hx=26;a.ix=27;a.gx=28;a.cx=29;a.r6=30;a.s6=31;a.uj=40;a.AJ=41;a.fm=50;a.pt=60;a.qt=70;a.ot=80;a.nt=90;a.rJ=91;a.hm=100;a.yt=110;a.Pn=120;a.ax=130;a.nq=140;
a.Xp=300;a.Yp=301;a.gq=302;a.hq=303;a.iq=304;a.jq=305;a.Ln=306;a.Mn=307;a.kq=308;a.lq=309;a.Zp=310;a.$p=311;a.aq=312;a.bq=313;a.cq=314;a.eq=315;a.fq=316;a.Rw=317;a.Sw=318;a.Tw=319;a.Uw=320;a.Vw=321;a.Ww=322;a.Xw=323;a.Yw=324;a.Zw=325;a.hJ=300;a.iJ=301;a.fJ=302;a.gJ=303;a.cm=326;a.Jn=327;a.dm=328;a.Kn=329;a.Vp=330;a.Wp=331;a.it=332;a.jt=333;a.kt=334;a.lt=335;a.gt=336;a.ht=337;var ba=za.create(),wa=za.create(),T=ua.create(),ma=new Float32Array(2),aa=ua.create(),ja=za.create(),ca="ontouchstart"in document.documentElement,
oa=[];a.Ok=m;a.Mf=function(){if("HMD"==B.stereo||"NONE"==B.stereo&&B.is_mobile_device){var a=b(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.Yd=b.display;a.rh=!0;a.Yd.getFrameData(a.Pi)})}};a.$=b;a.I2=p;a.jw=function(a,b){a.hk=b};a.zH=function(a){switch(a.type){case 20:if(a.rh)if(a.Yd)a.Yd.resetPose();else if(a.wk)for(var b=0;b<a.wk.length;b++)a.wk[b].resetSensor();break;default:la.error("reset_device() is undefined for device: ",a.type)}};a.$h=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:ua.copy(ha.ox,
c);if(a.Yd)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.wk)for(b=0;b<a.wk.length;b++){var d=a.wk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:la.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:ua.copy(ha.UD,c);if(a.Yd)c[0]=a.position[0],c[1]=
a.position[1],c[2]=a.position[2];else if(a.wk)for(b=0;b<a.wk.length;b++)d=a.wk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:la.error("position is undefined for device: ",a.type),a=c}return a;case 21:return A(a,"left",c);case 22:return A(a,"right",c);case 30:return g(a,"left",c);case 31:return g(a,"right",c);case 40:case 41:return c[0]=a.QA[0],c[1]=a.QA[1],c}};a.tg=e;a.kk=function(a,
b,c){switch(a.type){case 20:if(e(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.Ui=c;q(a);break;case 25:a.xj=c;q(a);break;case 26:a.Tv=c;q(a);break;case 27:a.Gn=c;q(a);break;case 28:a.Vj=c;q(a);break;case 29:a.yj=c,q(a)}break;case 60:case 70:case 80:case 90:a.oz[b]=c}};a.B_=function(a,b){var c=b-300;return c<a.Go.length?a.Go[a.oz[c]-300]:!1};a.A_=function(a,b){return b-326<a.Em.length?a.Em[a.oz[b-300]-326]:0};a.HF=function(a,b){b.set(a.position);
return b};a.GF=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<oa.length;b++){var c=oa[b];switch(c.type){case 60:x(c);y(a[0],c);break;case 70:x(c);y(a[1],c);break;case 80:x(c);y(a[2],c);break;case 90:x(c);y(a[3],c);break;case 20:if(c.Yd){var d=c.Yd;if(c.Pi&&d.getFrameData(c.Pi)){var e=c.Pi.pose,f=ha.zG(c.Pi.leftViewMatrix,T);c.Ui=2*ua.length(f)}else e=d.getPose();
e&&(f=za.setAxisAngle(ha.Bf,Math.PI/2,ba),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=H.Wh(d.stageParameters.sittingToStandingTransform,ea),H.identity(Aa),f=H.Ec(f,Aa),d=H.multiply(f,d,c.kI)):(H.identity(ea),d=H.Ec(f,c.kI)),e.orientation&&H.aS(e.orientation,d,c.orientation),e.position&&H.Lc(e.position,d,c.position))}}}};a.Hd=function(a,b,c){switch(b){case 130:a.mi.push(c);b=141;break;case 140:a.aj.push(c);b=141;break;case 50:a.wl.push(c);break;case 40:case 41:a.Pe.push(c);break;
case 60:a.xl.push(c);break;case 70:a.yl.push(c);break;case 90:a.ev.push(c);break;case 91:a.PO.push(c);b=90;break;case 80:a.ql.push(c);break;case 100:a.Vl.push(c);break;case 110:a.Ul.push(c);break;case 120:a.Tl.push(c)}if(-1==a.rc.indexOf(b)&&(a.rc.push(b),a.rh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",D,!1);break;case 40:a.element.addEventListener("mousemove",K,!1);break;case 41:a.element.addEventListener("mousemove",k,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||
(a.element!=window&&a.element.addEventListener("mouseout",M,!1),a.element.addEventListener("mouseup",E,!1));break;case 70:a.element.addEventListener("wheel",S,!1);break;case 90:a.element.addEventListener("keydown",F,!1);break;case 80:a.element.addEventListener("keyup",z,!1);break;case 100:a.element.addEventListener("touchstart",C,!1);break;case 110:a.element.addEventListener("touchmove",r,!1);break;case 120:a.element.addEventListener("touchend",f,!1);break;case 141:a.element.addEventListener("deviceorientation",
I,!1)}};a.ne=function(a,b,c){L(a,b,c,!1)};a.W_=l;a.Ja=function(){for(var a=0;a<oa.length;a++)for(var b=oa[a],c=0;c<b.rc.length;c++)L(b,b.rc[c],null,!0);oa.length=0};a.MF=function(a){a=b(W(a));for(var c=0;c<a.Go.length;c++)if(a.Go[c])return c+300;return-1};a.Bz=function(a){a=b(W(a));for(var c=0;c<a.Em.length;c++)if(a.QM[c]-a.Em[c])return c+326;return-1};a.vz=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;
return 0};a.T_=function(){var a=b(20);return a&&a.Yd};a.AV=function(a){a.element.addEventListener("mousedown",function(){a.value||d(a)},!1)};a.Hh=function(a,b){B.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.yB=function(a,b){B.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.Eq=n};b4w.module.__prerender=function(a,u){function m(a,c){var g=a.oh;g.vr=!1;if(g.ci)return!1;var m=c.F,p=c.type==q.$d?m.CA:w.Yb(m.C,e),l=a.Fa;if(!h.e5(l,g,p))return!1;g.vr=!0;if(c.type==q.Ai)l=c.debug_view_mode==b.Ow?l.Yk:!l.Yk;else{if(!(g=c.type==q.Bi&&0==g.cj)&&(g=!l.$k&&a.YI)){var m=m.Qi,x=a.YI.ig,g=a.YI.fg,p=x.T;if(A.e4(p,m,x.ub))g=!0;else if(l.Bn)var l=g.Za,x=g.$a,v=g.ab,p=g.T,g=A.gZ(p,m,l,x,v);else g=!1}l=g?!1:!0}return l}function c(a){var b=a.Qa;if(b&&b.TA){a=a.Ga;p.j1(a);var c=a.bd;p.IS(a.Sc,
"a_position",b.Ev,c.a_position.offset);p.IS(a.Sc,"a_tbn",b.kw,c.a_tbn.offset);p.oS(a)}}var b=u("__debug"),p=u("__geometry"),h=u("__objects"),G=u("__renderer"),q=u("__subscene"),w=u("__tsr"),A=u("__util"),g=[q.Wb,q.Gd,q.He,q.Zd,q.Tg,q.ag,q.Ge,q.Dh,q.$d,q.Ug,q.Bi,q.Ai,q.Cf,q.zi],e=new Float32Array(3);a.nB=function(a){if(-1<g.indexOf(a.type)){for(var b=!1,e=a.type==q.Zd||a.type==q.ag,h=a.ib,p=0;p<h.length;p++){for(var l=h[p],w=l.Ra,v=!1,y=0;y<w.length;y++){var k=w[y],A=k.Fa;if(e)for(var u=0;6>u;u++)a.F.Qi=
a.ro[u],k.lF[u]=m(k,a),k.lF[u]&&(v=b=!0,c(A));else k.pc=m(k,a),k.pc&&(v=b=!0,c(A));a.Ta&&(A.zb.Fr=!0)}l.pc=v}a.Ta=!1;switch(a.type){case q.Ai:break;default:a.type==q.Wb||a.type==q.Ug||a.type==q.Ge||a.type==q.He||a.type==q.Zd||b?a.pc=!0:(a.pc&&G.clear(a),a.pc=!1)}}else if(a.Ta){h=a.ib;for(p=0;p<h.length;p++)for(w=h[p].Ra,y=0;y<w.length;y++)k=w[y],A=k.Fa,A.zb.Fr=!0;a.Ta=!1}a.rv&&q.X3(a)}};b4w.module.__primitives=function(a,u){function m(a,b,c,h){for(var e=[],g=[],m=[],l=a*b,p=2*c/(a-1),v=2*h/(b-1),x=0;x<a;x++)for(var k=-c+x*p,y=0;y<b;y++)if(g.push(k,-h+y*v,0),m.push(x/(a-1),y/(b-1)),x&&y){var A=x*b+y,u=A-1,S=(x-1)*b+y,F=S-1;e.push(A,u,S);e.push(u,F,S)}a=w.Ij();a.a_position=new Float32Array(g);a.a_tbn=q.create(l);l=G.ei("GRID_PLANE");l.la[0]=a;l.Da.a_texcoord=new Float32Array(m);l.Ea=new Uint32Array(e);l.gb=g.length/3;return l}function c(a){var b=a.length;b%4&&w.J("Wrong array");for(var c=
[],g=[],h=0;h<b;h+=4){var m=a[h+1],A=a[h+2],l=a[h+3];p(a[h],g);p(m,g);p(A,g);p(l,g);c.push(h,h+1,h+2);c.push(h,h+2,h+3)}a=w.Ij();a.a_position=new Float32Array(g);a.a_tbn=q.create(b/4);b=G.ei("FROM_QUADS");b.la[0]=a;b.Ea=new Uint32Array(c);b.gb=g.length/3;return b}function b(a,b){var c=3*b;return[a[c],a[c+1],a[c+2]]}function p(a,b){b.push(a[0],a[1],a[2])}var h=u("__config"),G=u("__geometry"),q=u("__tbn"),w=u("__util"),A=h.K;a.XZ=function(){var a=G.ei("LINE"),b=w.Ij();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.la[0]=b;a.Ea=new Uint32Array(1);a.gb=1;return a};a.$Z=function(){var a=m(2,2,1,1);a.name="PLANE";return a};a.$$=m;a.RZ=function(a,b,c){function e(a,b){return 1==a%2&&(0==b||b==l-1)||1==b%2&&(0==a||a==m-1)?!0:!1}var g=c/=Math.pow(2,a-1),h=c,m=b+1,l=b+1;b=[];c=[];for(var p=0,v=0,y=0,k=-1,u=[],M=0;M<a;M++){for(var E=2*g/(m-1),S=2*h/(l-1),F=[],z=[],C=0,r=0;r<m;r++){for(var f=-g+r*E,W=[],d=0;d<l;d++){var n=-h+d*S;if(f>-v&&f<v&&n>-y&&n<y)W.push(-1),C++;else{for(var X=
null,R=0;R<u.length;R+=3)if(f==u[R]&&n==u[R+1]){X=u[R+2];break}R=null!==X?X:k+1;e(r,d)?(W.push(-2),C++):(null==X&&(d&&d!=l-1&&r&&r!=m-1?X=E:(X=M==a-1?E:2*E,F.push(f,n,R)),c.push(f,n,X),p++,k++),W.push(R));if(r&&d)if(1==r)if(e(r-1,d)){if(1<d){var n=R-1,X=z[r-1][d+1],t=X-1;b.push(t,n,R)}else X=z[r-1][d+1],t=X-1;b.push(X,t,R)}else e(r,d)||(n=R-1,X=z[r-1][d],b.push(X,n,R));else if(r==m-1){if(!e(r,d))if(d==l-1)n=R-1,X=z[r-1][d-1],t=z[r-2][d],b.push(X,n,R),b.push(t,X,R);else{var n=R-1,X=z[r-1][d],t=X-1,
fa=X+1;b.push(t,n,R);b.push(X,t,R);b.push(fa,X,R);2==d&&(fa=z[r-2][d-2],b.push(t,fa,n))}}else 1==d?e(r,d-1)?(n=z[r-1][d],X=z[r-1][d-1],b.push(n,X,R)):(n=W[d-1],X=z[r-1][d],t=z[r-2][d-1],b.push(X,n,R),b.push(X,t,n)):d==l-1?e(r,d)||(n=W[d-1],X=z[r-1][d-1],t=z[r-2][d],b.push(X,n,R),b.push(t,X,R)):-1!=z[r-1][d]&&-1!=z[r-1][d-1]&&-1!=W[d-1]?(n=W[d-1],X=z[r-1][d],t=z[r-1][d-1],b.push(X,n,R),b.push(X,t,n),d==l-2&&e(r,d+1)&&(fa=z[r-1][d+1],b.push(fa,X,R))):d==l-2&&e(r,d+1)&&(X=z[r-1][d],fa=z[r-1][d+1],b.push(fa,
X,R))}}z.push(W)}u=F;v=g;y=h;g*=2;h*=2}2E4>v&&(a=-(2*v)/(m-1),c.push(-2E4,-2E4,a),c.push(-2E4,2E4,a),c.push(-v,-y,a),c.push(-v,y,a),c.push(2E4,-2E4,a),c.push(2E4,2E4,a),c.push(v,-y,a),c.push(v,y,a),R=k+1,b.push(R+1,R+2,R+3,R+1,R+0,R+2,R+2,R+4,R+6,R+2,R+0,R+4,R+1,R+7,R+5,R+1,R+3,R+7,R+7,R+4,R+5,R+6,R+4,R+7),p+=8);a=w.Ij();a.a_position=new Float32Array(c);a.a_tbn=q.create(p);q.OG(a.a_tbn,[.707,0,0,.707],a.a_tbn);g=G.ei("MULTIGRID_PLANE");g.la[0]=a;g.Ea=new Uint32Array(b);g.gb=c.length/3;A.VS&&(G.AC(g,
1,!0),a.a_polyindex=G.bz(g));return g};a.Z$=function(a){var b=a.length;b%3&&w.J("Wrong array");for(var c=[],g=[],h=0;h<b;h+=3){var m=a[h+1],q=a[h+2];p(a[h],g);p(m,g);p(q,g);c.push(h,h+1,h+2)}a=w.Ij();a.a_position=new Float32Array(g);b=G.ei("FROM_TRIANGLES");b.la[0]=a;b.Ea=new Uint32Array(c);b.gb=g.length/3;return b};a.Y$=c;a.UZ=function(a){a=w.G5(a);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);
b.push(a[4],a[5],a[6],a[7]);a=c(b);a.name="FRUSTUM";return a};a.Md=function(){var a=G.ei("FULLSCREEN_TRI"),b=w.Ij();b.a_position=new Float32Array([0,0,1,0,0,1]);a.la[0]=b;a.Ea=new Uint32Array([0,1,2]);a.gb=3;return a};a.VZ=function(){var a=G.ei("FULLSCREEN_QUAD"),b=w.Ij();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.la[0]=b;a.Ea=new Uint32Array([0,2,1,1,2,3]);a.gb=4;return a};a.QZ=function(){var a=G.ei("BILLBOARD"),b=w.Ij();b.a_bb_vertex=G.RM(1);a.la[0]=b;a.Ea=new Uint32Array([0,2,1,0,3,
2]);a.gb=4;return a};a.wF=function(a,c){var e=G.ei("UV_SPHERE"),g,h,m=[],w=[],l=[];for(h=0;8>=h;h++)for(g=0;16>=g;g++){var A=g/16,v=h/8;w.push(-a*Math.cos(2*A*Math.PI)*Math.sin(v*Math.PI)+c[0],a*Math.cos(v*Math.PI)+c[1],a*Math.sin(2*A*Math.PI)*Math.sin(v*Math.PI)+c[2])}for(h=A=0;8>h;h++)for(g=0;16>g;g++){var v=b(w,17*h+g+1),u=b(w,17*h+g),k=b(w,17*(h+1)+g),D=b(w,17*(h+1)+g+1);Math.abs(v[1])==a+c[1]?(p(v,m),p(k,m),p(D,m),l.push(A,A+1,A+2),A+=3):Math.abs(k[1])==a+c[1]?(p(v,m),p(u,m),p(k,m),l.push(A,
A+1,A+2),A+=3):(p(v,m),p(u,m),p(k,m),p(D,m),l.push(A,A+1,A+2),l.push(A,A+2,A+3),A+=4)}g={};g.a_position=m;w=G.JW(l,w,m);w=G.HW(l,m,w);g.a_tbn=q.$q(w);e.la[0]=g;e.Ea=l;e.gb=m.length/3;return e};a.VM=function(a){var b=G.ei("INDEX"),c=w.Ij();c.a_index=new Float32Array(3*a);for(var g=new Uint16Array(3*a),h=0;h<3*a;h++)c.a_index[h]=h,g[h]=h;b.la[0]=c;b.Ea=g;b.gb=3*a;return b}};b4w.module.__scenegraph=function(a,u){function m(a,b){var c=[];r.xi(a,function(b,d,e){-1<c.indexOf(e)?r.E2(a,b,d,e,I(e)):c.push(e)});r.fa(a,function(a,e){for(var f=0;f<e.nb.length;f++){var g=e.nb[f];b||e.type!=d.He&&e.type!=d.Zd&&e.type!=d.Dh||(g.De=!0);-1<c.indexOf(g)?e.nb[f]=I(g):c.push(g)}})}function c(a,c){r.fa(a,function(b,e){e.type==d.ZI&&r.Wl(a,b,function(a,b){if(b.type==d.tj)for(var c=0;c<b.nb.length;c++){var e=b.nb[c];e.oa=n.S;e.ra=n.S}});c||r.Wl(a,b,function(a,b,c){"DEPTH"==c.from&&(c.De=
!0)})});r.fa(a,function(c){var d={};b(a,c,d);for(var e in d){c=d[e];for(var f=c[0],g=0;g<c.length;g++)if(c[g].oa==n.S){f=c[g];break}for(var h=c[0],g=0;g<c.length;g++)if(c[g].ra==n.S){h=c[g];break}for(var k=c[0],g=0;g<c.length;g++)if(!c[g].De){k=c[g];break}for(g=0;g<c.length;g++)c[g].oa=f.oa,c[g].ra=h.ra,c[g].De=k.De}})}function b(a,c,e){r.Wl(a,c,function(c,d,f){f.active&&f.from==f.to&&(e[f.from]=e[f.from]||[],-1==e[f.from].indexOf(f)&&e[f.from].push(f),b(a,c,e))});r.xn(a,c,function(a,b,c){c.active&&
(e[c.from]=e[c.from]||[],-1==e[c.from].indexOf(c)&&e[c.from].push(c))});c=r.jb(a,c);if(c.type==d.tj)for(var f=0;f<c.nb.length;f++){var g=c.nb[f];e[g.from].push(g)}}function p(a){var b=[d.tj,d.QD,d.rx,d.He,d.Zd,d.st];t.Nb||b.push(d.bJ);var c=r.yI(a),e=[];r.fa(c,function(a,d){for(var f=0;f<d.nb.length;f++){var g=d.nb[f];-1<b.indexOf(d.type)&&(g.zn=!0);var k=A(e,g,h(g));g.fb=k;d.wi[f]=k}for(f=0;f<d.wi.length;f++)k=d.wi[f],w(e,k);r.xn(c,a,function(f,g,k){if(!k.fb){if(-1<b.indexOf(d.type))k.zn=!0;else if((f=
G(c,a,k.from))&&k.active&&!k.fb){q(e,f);k.fb=f;return}f=A(e,k,h(k));k.fb=f}});r.Wl(c,a,function(a,b,c){w(e,c.fb)});r.xn(c,a,function(a,b,c){c.fb&&"NONE"==c.to&&w(e,c.fb)})})}function h(a){var b=a.to,c=a.active,d=a.fb;a.to="";a.active=!1;a.fb=null;var e=X.cL(a);a.to=b;a.active=c;a.fb=d;return e}function G(a,b,c){var d=null;r.Wl(a,b,function(a,b,e){if(e.active&&e.from==e.to&&e.from==c&&e.fb)return d=e.fb,!0});r.xn(a,b,function(a,b,e){if(e.active&&e.from==c&&e.fb)return d=e.fb,!0});return d}function q(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.vI===b&&d.Mv++}}function w(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.vI===b&&d.Mv&&d.Mv--}}function A(a,b,c){if(b.np)return q(a,b.np.fb),b.np.fb;if(b.zn)return g(b);for(var d=null,e=0;e<a.length;e++){var f=a[e];if(f.id==c&&0===f.Mv){d=f;break}}if(d&&!t.KM)return d.Mv++,d.vI;b=g(b);a.push({id:c,Mv:1,vI:b});return b}function g(a){var b=a.Ml*a.size,c=a.Nl*a.size,d=a.aD,e=a.yi;switch(a.from){case "COLOR":return a.De?(d=n.wm(a.dk?n.wx:n.vx,d,e),n.resize(d,
b,c)):(d=n.wm(n.Ci,d,e),n.resize(d,b,c),n.NH(d,a.oa,a.ra)),d;case "DEPTH":return a.De?(d=n.wm(a.dk?n.ux:n.tx,d,e),n.resize(d,b,c)):(d=n.wm(n.Qn,d,e),n.resize(d,b,c),n.NH(d,a.oa,a.ra)),d;case "CUBEMAP":return d=n.IX(b,e);case "SCREEN":case "NONE":return null;default:X.J("Wrong slink param: "+a.from)}}function e(a,b){var c=!1;r.xi(a,function(d,e,f){if(f&&(d=r.jb(a,d),e=r.jb(a,e),b(f,!1,d,e)))return c=!0});c||r.fa(a,function(a,c){for(var d=0;d<c.nb.length;d++)if(b(c.nb[d],!0,c,null))return!0})}function y(a){r.fa(a,
function(b,c){if(c.type!=d.Bk){var e=c.F;r.xn(a,b,function(a,b,c){c.fb&&c.active&&c.fb&&(F.HB(e,c.from,c.fb),c.from==c.to&&b.F&&F.HB(b.F,c.from,c.fb))});for(var g=0;g<c.nb.length;g++){var h=c.nb[g];h.active&&h.from==h.to&&F.HB(e,h.from,c.wi[g])}!e.tc&&!e.mg||e.Lf||(e.Lf=f.A2(e.tc,e.mg))}});r.fa(a,function(b,c){if(c.type==d.px||c.type==d.BD){var e=k(a,c);c.F.Ju=e[0].F.Lf}})}function x(a){var b=null,c=0;r.fa(a,function(a,d){if(d.type==R.iw){if(c==R.s4)return b=d,!0;c++}});return b}function P(a,b){var c=
r.zl(a,b),e=d.$c("NONE"),f=r.Y(a,e),g=r.Ru(a)[0];r.xi(a,function(b,c){c==g&&r.s2(a,b,g,b,f)});var h=J(b,a);r.xi(a,function(f,g,k){if(f==c){if(h){f=d.xy();r.Y(a,f);g=l("COLOR","RESOLVE",1,1,1,!0,!0);g.dk=!0;g.De=!0;var n=l("DEPTH","RESOLVE",1,1,1,!0,!0);n.dk=!0;n.De=!0;r.H(a,b,f,g);r.H(a,b,f,n);b=f}r.H(a,b,e,l(R.T3,"u_color",k.size,k.Ml,k.Nl,k.Dp,k.Ix));return!0}});r.Zc(a,f,g,l("SCREEN","NONE",.5,.5,.5,!0,!0))}function J(a,b){var c=!1,d=r.zl(b,a);r.ph(b,d)&&(c=r.Zh(b,d,0),d=r.jd(b,d,c,0),"COLOR"==
d.from&&"COLOR"==d.to||"DEPTH"==d.from&&"DEPTH"==d.to?(d=r.jb(b,c),c=J(d,b)):c="RESOLVE"==d.to);return c}function L(a,b,c,e){for(var f=c.na,g=b.$z,h=b.fj.gk,k=b.fj.kB,m=r.rn(a,r.I_(a,e),r.bm),q=[],p=[],H=[],m=r.clone(m,function(b){var e;if(-1<la.indexOf(b.type))p.push(b),e=b;else{e=d.sX(b);if(e.type==d.He)for(var n=0;n<h.length;n++)if(h[n][0]==b){h[n]=[b,e];e.F.Kc=b.F.Kc;c.na.push(e.F);break}if(b.type==d.Tg)for(n=0;n<h.length;n++){if(k[n][0]==b){k[n]=[b,e];e.F=h[n][1].F;break}}else-1<f.indexOf(b.F)&&
(g?(F.HA(b.F,F.bg),F.HA(e.F,F.Df),e.Co=!0):(F.HA(b.F,F.Xc),F.HA(e.F,F.ed)),f.push(e.F));var l=r.zl(a,b);r.Wl(a,l,function(a,b,c){-1<la.indexOf(b.type)&&q.push([b,e,c])});if(b.type!==d.tj)for(n=0;n<b.nb.length;n++)e.nb[n].np=b.nb[n];b=!0;for(n=0;n<r.Wj(a,l);n++){var t=r.gh(a,l,n),t=r.jb(a,t);-1==la.indexOf(t.type)&&(b=!1)}b&&H.push(e)}return e},function(a){var b=I(a,!0);b.np=a;return b}),v=0;v<p.length;v++)r.Bg(m,r.zl(m,p[v]));r.BE(m);b=d.BY(g);v=r.Y(a,b);if(t.gA)var w=d.$c("NONE"),C=l("COLOR","u_color",
1,1,1,!0,!0);else w=d.VE(),C=l("COLOR","COPY",1,1,1,!0,!0);C.oa=n.S;C.ra=n.S;r.Y(a,w);r.H(a,e,w,C);var z=l("COLOR","u_sampler_left",1,1,1,!0,!0);z.zn=!0;z.oa=n.S;z.ra=n.S;r.H(a,w,b,z);if(!e.ic){if(t.gA)var z=d.$c("NONE"),x=l("COLOR","u_color",1,1,1,!0,!0);else z=d.VE(),x=l("COLOR","COPY",1,1,1,!0,!0);r.Y(m,z);x.np=C;var y=r.Ru(m)[0],y=r.jb(m,y);r.H(m,y,z,x)}z=l("COLOR","u_sampler_right",1,1,1,!0,!0);e.ic&&(z.np=C);z.oa=n.S;z.ra=n.S;r.vK(m,a,[r.Ru(m)[0],v,z]);for(v=0;v<q.length;v++)r.H(a,q[v][0],q[v][1],
q[v][2]);e=l("SCREEN","NONE",0,0,0,!1,!1);for(v=0;v<H.length;v++)r.H(a,w,H[v],e);r.xi(a,function(b,c,e){r.jb(a,b).type===d.tj&&(e.np=null)});return b}function l(a,b,c,d,e,f,g){return{from:a,to:b,size:c,Ml:d,Nl:e,Dp:f,Ix:g,active:!0,fb:null,dk:!1,De:!1,oa:n.Vg,ra:n.Vg,zn:!1,aD:!1,yi:!1}}function I(a,b){var c=l(a.from,a.to,a.size,a.Ml,a.Nl,a.Dp,a.Ix);c.active=a.active;!b&&a.fb&&X.J("Failed to clone slink with attached texture");c.fb=a.fb;c.dk=a.dk;c.De=a.De;c.oa=a.oa;c.ra=a.ra;c.zn=a.zn;c.aD=a.aD;c.yi=
a.yi;return c}function v(a,b,c){if(b.type==c)return!0;b=D(a,b);for(var d=0;d<b.length;d++)if(v(a,b[d],c))return!0;return!1}function K(a,b,c){if(b.type==c)return!0;b=k(a,b);for(var d=0;d<b.length;d++)if(K(a,b[d],c))return!0;return!1}function k(a,b){var c=r.zl(a,b);c==r.OD&&X.J("Subscene not in graph");for(var d=[],e=r.Wj(a,c),f=0;f<e;f++){var g=r.gh(a,c,f);g!=c&&d.push(r.jb(a,g))}return d}function D(a,b){var c=r.zl(a,b);c==r.OD&&X.J("Subscene not in graph");for(var d=[],e=r.ph(a,c),f=0;f<e;f++){var g=
r.Zh(a,c,f);g!=c&&d.push(r.jb(a,g))}return d}function M(a){var b=[],c=[];e(a,function(a){a.fb&&-1==b.indexOf(a.fb)&&(b.push(a.fb),c.push(a.fb,b.length-1))});return c}function E(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.Dp){var d=a.Ml,e=a.Nl;Math.round(d)!=d&&(d=d.toFixed(2));Math.round(e)!=e&&(e=e.toFixed(2));c=c+((1==d?"":d)+"Sx"+((1==e?"":e)+"S"))+(a.Ix?" FACT":" VIEW")}else d=a.Ml,e=a.Nl,c+=a.size*d+"x"+a.size*e;if("SCREEN"!=a.from){c+=" ";if(a.De)c+="RR";else{var d=
a.oa,e=a.ra,f="";d==n.S?f+="L":d==n.Vg&&(f+="N");e==n.S?f+="L":e==n.Vg&&(f+="N");c+=f}for(d=0;d<b.length;d+=2)b[d]==a.fb&&(c+=" "+b[d+1])}return c+")\\n"}var S=u("__batch"),F=u("__camera"),z=u("__config"),C=u("__debug"),r=u("__graph"),f=u("__renderer"),W=u("__shaders"),d=u("__subscene"),n=u("__textures"),X=u("__util"),R=z.so,t=z.K,fa=z.Yr,la=[d.yk,d.$d,d.Zd,d.ag];a.eX=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;
default:return!0}};a.QC=e;a.XX=function(a,b,e,f){function g(c){var e=F.fd(La,!0);b.na.push(e);e=d.qo(c,e,!1,G,K,ka,ia,Ba,a.sn);r.Y(h,e);c==d.Dh?(r.H(h,q[0],e,l("COLOR","COLOR",1,1,1,!0,!0)),e.nb.push(l("DEPTH","DEPTH",1,1,1,!0,!0))):(c=Qa&&q[0].type==d.px?mb:q[0],r.H(h,mb,e,Ua),r.H(h,c,e,Va));Ha&&(r.H(h,Ha,e,Ia),r.H(h,Ha,e,Ma));for(c=0;c<w.length;c++)r.H(h,w[c],e,H[c]);uc&&r.H(h,uc,e,vb);if(z.length){var f=z.length;for(c=0;c<f;c++)r.H(h,z[c],e,A[c])}if(u.length)for(c=0;c<u.length;c++)r.H(h,u[c],e,
J[c]);bc&&r.H(h,bc,e,Qc);return e}var h=r.create(),q=[],v=[],w=[],H=[],z=[],A=[],u=[],J=[],E=[],K=a.J0,G=a.Xd,W=a.Uf,la=a.V3,M=a.ssao,za=a.god_rays,ha=a.fj,S=a.jP,ua=a.tW,Na=a.motion_blur,ta=a.compositing,Y=a.antialiasing,ia=a.Hn,ka=a.YS,Ba=a.Cd,Fa=a.s1,Ka=a.QW,V=a.U_,Ya=a.L1,va=a.dof,N=a.QY,Ga=a.refractions,qa=!!f.length,Qa=1<t.kc,Va=l("COLOR","COLOR",1,1,1,!0,!0),Ua=l("DEPTH","DEPTH",1,1,1,!0,!0);if(Qa){var ya=I(Ua);Va.dk=!0;Va.De=!0;Ua.dk=!0;Ua.De=!0}var La=b.na[0];if(a.hd){var Ha=d.pY();r.Y(h,
Ha);var Sa=fa.Tu;Ha.F.width=Sa;Ha.F.height=Sa;var Ia=l("DEPTH","u_grass_map_depth",Sa,1,1,!1,!1);t.Nb||(Ia.oa=n.S,Ia.ra=n.S);var Ma=l("COLOR","u_grass_map_color",Sa,1,1,!1,!1);Ma.oa=n.S;Ma.ra=n.S}else Ma=Ia=Ha=null;if(Ba){F.NI(La,Ba);for(var Ca=0;Ca<Ba.Xi.length;Ca++)for(var sa=Ba.csm_num,Da=0;Da<sa;Da++){var ra=d.wY(Da,Ca,Ba,K);r.Y(h,ra);w.push(ra);var Sa=Ba.csm_resolution,U=ra.F;b.rR.push(U);U.width=Sa;U.height=Sa;ra.Gb=!0;var bb=0<Ca?Ca:Da;if(t.Sv){H.push(l("COLOR","u_shadow_map"+bb,Sa,1,1,!1,
!1));var Za=l("DEPTH","DEPTH",Sa,1,1,!1,!1);Za.De=!0;ra.nb.push(Za)}else{var Ea=l("DEPTH","u_shadow_map"+bb,Sa,1,1,!1,!1);t.gu&&(Ea.oa=n.S,Ea.ra=n.S,Ea.aD=!0);H.push(Ea);(C.YW()||t.sR)&&ra.nb.push(l("COLOR","COLOR",Sa,1,1,!1,!1))}Ha&&(r.H(h,Ha,ra,Ia),r.H(h,Ha,ra,Ma))}}if(ha&&ha.zP&&!qa)for(Da=0;Da<ha.zP;Da++){U=F.Ld(F.od);U.width=a.Kj;U.height=a.Kj;F.RQ(U,Math.PI/2,.1,100);F.Kl(U,!1);var Ra=d.qo(d.Zd,U,!1,G,K,ka,ia,null,a.sn);Ra.Xk=X.WZ();for(Ca=0;6>Ca;Ca++)Ra.ro.push(F.MX());r.Y(h,Ra);var Jb=l("CUBEMAP",
"u_cube_reflection",a.Kj,1,1,!1,!1);Jb.oa=n.S;Jb.ra=n.S;J.push(Jb);if(!ha.YF){var xb=l("CUBEMAP","u_cube_reflection",a.Kj,1,1,!1);xb.yi=!0;xb.oa=n.xt;xb.ra=n.S;E.push(xb)}Ha&&(r.H(h,Ha,Ra,Ia),r.H(h,Ha,Ra,Ma));if(ha.bO){var Pa=d.qo(d.ag,U,!1,G,K,ka,ia,null,a.sn);Pa.Xk=Ra.Xk;Pa.ro=Ra.ro;r.Y(h,Pa);var Ja=l("DEPTH","DEPTH",a.Kj,1,1,!1,!1),ab=l("COLOR","COLOR",a.Kj,1,1,!1,!1);r.H(h,Ra,Pa,Ja);r.H(h,Ra,Pa,ab);u.push(Pa);ha.YE.push(Pa);Ha&&(r.H(h,Ha,Pa,Ia),r.H(h,Ha,Pa,Ma))}else{var jb=l("DEPTH","DEPTH",a.Kj,
1,1,!1,!1);Ra.nb.push(jb);u.push(Ra)}ha.Wk.push(Ra)}if(ha&&0<ha.eQ.length&&!qa)for(Ca=0;Ca<ha.eQ.length;Ca++)U=F.fd(La,!0),U.Kc=new Float32Array(4),b.na.push(U),Ra=d.qo(d.He,U,!1,G,K,ka,ia,null,a.sn),r.Y(h,Ra),Jb=l("COLOR","u_plane_reflection",1,a.ej,a.ej,!0,!0),Jb.oa=n.S,Jb.ra=n.S,A.push(Jb),Ha&&(r.H(h,Ha,Ra,Ia),r.H(h,Ha,Ra,Ma)),ha.bO?(Pa=d.qo(d.Tg,U,!1,G,K,ka,ia,null,a.sn),r.Y(h,Pa),Ja=l("DEPTH","DEPTH",1,a.ej,a.ej,!0,!0),ab=l("COLOR","COLOR",1,a.ej,a.ej,!0,!0),ab.oa=n.Vg,ab.ra=n.Vg,r.H(h,Ra,Pa,
Ja),r.H(h,Ra,Pa,ab),ha.kB.push([Pa]),z.push(Pa),Ha&&(r.H(h,Ha,Pa,Ia),r.H(h,Ha,Pa,Ma))):(jb=l("DEPTH","DEPTH",1,a.ej,a.ej,!0,!0),Ra.nb.push(jb),z.push(Ra)),ha.gk.push([Ra]);if(Ba){var ub=F.fd(La,!0);b.na.push(ub);var qb=d.xY(ub,K);r.Y(h,qb);qb.self_shadow_normal_offset=Ba.self_shadow_normal_offset;for(Da=0;Da<w.length;Da++)ra=w[Da],r.H(h,ra,qb,H[Da]);if(M){var sc=l("COLOR","u_color",1,1,1,!0,!0),Hb=l("DEPTH","u_depth",1,1,1,!0,!0),tc=F.fd(La,!0);b.na.push(tc);var hb=a.k4,kb=d.zY(tc,ka,hb);r.Y(h,kb);
var yb=l("COLOR","u_ssao_mask",1,1,1,!0,!0);r.H(h,qb,kb,sc);r.H(h,qb,kb,Hb);var Wa=F.fd(La,!0);b.na.push(Wa);var Cb=d.AY(Wa,hb);r.Y(h,Cb);var Zc=l("COLOR","u_shadow_mask",1,1,1,!0,!0);r.H(h,kb,Cb,yb);r.H(h,qb,Cb,Hb)}Qa?Ea=l("DEPTH","DEPTH",1,1,1,!0,!0):t.Sv?(Ea=l("DEPTH","DEPTH",1,1,1,!0,!0),Ea.De=!0):Ea=Ua;qb.nb.push(Ea);Ha&&(r.H(h,Ha,qb,Ia),r.H(h,Ha,qb,Ma))}else qb=null;var mb=d.qo(d.Wb,La,!0,G,K,ka,ia,null,a.sn);r.Y(h,mb);if(Qa){var Db=d.xy();r.Y(h,Db);v.push(Db);var rb=l("COLOR","RESOLVE",1,1,
1,!0,!0);rb.dk=!0;rb.De=!0;var Eb=l("DEPTH","RESOLVE",1,1,1,!0,!0);Eb.dk=!0;Eb.De=!0;r.H(h,mb,Db,rb);r.H(h,mb,Db,Eb)}else v.push(mb);qb&&(yb?r.H(h,Cb,mb,Zc):Ba?r.H(h,qb,mb,l("COLOR","u_shadow_mask",1,1,1,!0,!0)):X.J("Internal error"));Ha&&(r.H(h,Ha,mb,Ia),r.H(h,Ha,mb,Ma));if(z.length)for(var nb=z.length,Ca=0;Ca<nb;Ca++)r.H(h,z[Ca],mb,A[Ca]);if(u.length)for(Ca=0;Ca<u.length;Ca++)r.H(h,u[Ca],mb,J[Ca]);q=v;v=[];if(!qa&&a.tX){var ic=R.enabled&&(R.iw===d.Cf||R.iw===d.zi),U=F.fd(La,!0);ic||(U.width=U.height=
1);b.na.push(U);var Ob=d.cM(U,!1,K);r.Y(h,Ob);if(a.rj){U=F.fd(La,!0);ic||(U.width=U.height=1);b.na.push(U);var Fb=d.cM(U,!0,K);r.Y(h,Fb);r.H(h,Ob,Fb,l("COLOR","COLOR",1,1,1,ic,!0));r.H(h,Ob,Fb,l("DEPTH","DEPTH",1,1,1,ic,!0))}}else Ob=null;if(!S.refractions&&!Ga||qa)bc=null;else{if(Qa)bc=Db;else{if(t.gA)var bc=d.$c("NONE"),Pc=l("COLOR","u_color",1,1,1,!0,!0);else bc=d.VE(),Pc=l("COLOR","COPY",1,1,1,!0,!0);r.Y(h,bc);r.H(h,q[0],bc,Pc)}var Qc=l("COLOR","u_refractmap",1,1,1,!0,!0)}if(N&&(Ga||W||la)){var Ec=
F.fd(La,!0);b.na.push(Ec);var uc=d.mY(Ec);r.Y(h,uc);r.H(h,Qa?Db:mb,uc,l("DEPTH","u_depth",1,1,1,!0,!0));var vb=l("COLOR","u_scene_depth",1,1,1,!0,!0);vb.oa=n.Vg;vb.ra=n.Vg}else uc=null;if(a.Mz){var ec=g(d.Gd);v.push(ec);q=v;v=[]}if(a.glow_materials){var $c=F.fd(La,!0);b.na.push($c);var $a=d.qo(d.Ge,$c,!1,G,K,ka,ia);r.Y(h,$a);uc&&r.H(h,uc,$a,vb);bc&&r.H(h,bc,$a,Qc);Ha&&(r.H(h,Ha,$a,Ia),r.H(h,Ha,$a,Ma));if(z.length)for(nb=z.length,Ca=0;Ca<nb;Ca++)r.H(h,z[Ca],$a,A[Ca]);if(u.length)for(Ca=0;Ca<u.length;Ca++)r.H(h,
u[Ca],$a,J[Ca]);a.Mz&&r.H(h,$a,ec,l("SCREEN","NONE",0,0,0,!1,!1));r.H(h,Qa?Db:mb,$a,Qa?ya:Ua);var cb=d.$c("X_GLOW_BLUR");cb.Hb="GLOW_MASK_SMALL";cb.vf=a.Tj.small_glow_mask_width;var Rc=l("COLOR","u_color",1,1,1,!0,!0);Rc.oa=n.S;Rc.ra=n.S;r.Y(h,cb);r.H(h,$a,cb,Rc);var Vb=d.$c("Y_GLOW_BLUR");Vb.Hb="GLOW_MASK_SMALL";Vb.vf=a.Tj.small_glow_mask_width;var Fc=l("COLOR","u_color",1,.5,.5,!0,!0);Fc.oa=n.S;Fc.ra=n.S;r.Y(h,Vb);r.H(h,cb,Vb,Fc);var ob=d.$c("X_GLOW_BLUR");ob.Hb="GLOW_MASK_LARGE";ob.vf=a.Tj.large_glow_mask_width;
var Gc=l("COLOR","u_color",1,.5,.5,!0,!0);Gc.oa=n.S;Gc.ra=n.S;r.Y(h,ob);r.H(h,Vb,ob,Gc);var Sc=d.$c("Y_GLOW_BLUR");Sc.Hb="GLOW_MASK_LARGE";Sc.vf=a.Tj.large_glow_mask_width;var Hc=l("COLOR","u_color",1,.25,.25,!0,!0);Hc.oa=n.S;Hc.ra=n.S;r.Y(h,Sc);r.H(h,ob,Sc,Hc);var ad=F.fd(La,!0);b.na.push(ad);var jc=d.nY(ad,a);r.Y(h,jc);var bd=l("COLOR","u_src_color",1,1,1,!0,!0);bd.oa=n.S;bd.ra=n.S;if(a.Mz)if(Qa){var Tc=d.xy();r.Y(h,Tc);r.H(h,ec,Tc,rb);r.H(h,ec,Tc,Eb);r.H(h,Tc,jc,bd)}else r.H(h,ec,jc,bd);else r.H(h,
Qa?Db:mb,jc,bd);var kc=l("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);kc.oa=n.S;kc.ra=n.S;r.H(h,Vb,jc,kc);var cd=l("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);cd.oa=n.S;cd.ra=n.S;r.H(h,Sc,jc,cd);q=[jc];v=[]}a.Mz||(ec=g(d.Gd),v.push(ec),q=v,v=[]);if(t.debug_view){U=F.fd(La,!0);b.na.push(U);var Mb=d.lY(U);v.push(Mb);r.Y(h,Mb);r.H(h,q[0],Mb,Va);r.H(h,q[0],Mb,Ua);Ha&&(r.H(h,Ha,Mb,Ia),r.H(h,Ha,Mb,Ma));C.f3(Mb);q=v;v=[]}if(Qa){var Uc=d.xy();r.Y(h,Uc);v.push(Uc);r.H(h,q[0],Uc,rb);r.H(h,q[0],Uc,Eb);q=v;v=
[]}var Ad=q.slice(0);if(!qa&&a.DV){U=F.fd(La,!0);b.na.push(U);var Ic=d.hY(U);r.Y(h,Ic);r.H(h,q[0],Ic,Qa?ya:Ua)}if(za&&N&&!qa){var Gb=V.Tm,Pb=V.intensity,pb=V.pn,Xa=q[0],Wb=G?!0:!1,dd=l("DEPTH","u_input",1,1,1,!0,!0),Vc=l("COLOR","u_input",1,.25,.25,!0,!0);Vc.oa=n.S;Vc.ra=n.S;var fc=Gb/pb,Jc=F.fd(La,!0);b.na.push(Jc);var Qb=d.WE(Jc,Wb,Gb,!0,fc,K,pb);r.Y(h,Qb);r.H(h,Xa,Qb,dd);var fc=Gb/pb*.5,Kc=F.fd(La,!0);b.na.push(Kc);var lc=d.WE(Kc,Wb,Gb,!1,fc,K,pb);r.Y(h,lc);r.H(h,Qb,lc,Vc);var fc=Gb/pb*.25,Lc=
F.fd(La,!0);b.na.push(Lc);var Rb=d.WE(Lc,Wb,Gb,!1,fc,K,pb);r.Y(h,Rb);r.H(h,lc,Rb,Vc);var Ib=d.oY(Pb,K);v.push(Ib);r.Y(h,Ib);var sb=l("COLOR","u_main",1,1,1,!0,!0);sb.oa=n.S;sb.ra=n.S;r.H(h,Xa,Ib,sb);var mc=l("COLOR","u_god_rays",1,1,1,!0,!0);mc.oa=n.S;mc.ra=n.S;r.H(h,Rb,Ib,mc);q=v;v=[]}if(ua&&!qa){var Xa=q[0],lb=d.qY();r.Y(h,lb);sb=l("COLOR","u_input",1,1,1,!0,!0);sb.oa=n.S;sb.ra=n.S;r.H(h,Xa,lb,sb);var Wc=ua.key,ed=ua.edge_lum,Mc=F.fd(La,!0);b.na.push(Mc);var zb=d.rY(Wc,ed,K,Mc);r.Y(h,zb);var Ab=
l("COLOR","u_luminance",1,.25,.25,!0,!0);Ab.oa=n.S;Ab.ra=n.S;if(ua.adaptive){var Sb=d.iY();r.Y(h,Sb);Sb.F.width=1;Sb.F.height=1;var Xb=l("COLOR","u_input",1,.25,.25,!0,!0);Xb.yi=!0;Xb.oa=n.xt;Xb.ra=n.S;if(t.Nb)Ab.yi=!0,Ab.oa=n.xt,r.H(h,lb,Sb,Xb);else{var Kb=d.ZX(),gc=l("COLOR","u_color",1,.25,.25,!0,!0);r.Y(h,Kb);r.H(h,lb,Kb,gc);r.H(h,Kb,Sb,Xb)}r.H(h,Sb,zb,l("COLOR","u_average_lum",1,1,1,!1,!1));zb.Un=!0}else zb.Un=!1,zb.average_luminance=ua.average_luminance;r.H(h,Xa,zb,l("COLOR","u_main",1,1,1,
!0,!0));r.H(h,lb,zb,Ab);for(var Lb=zb,wb=1,Ta=[],Da=0;5>Da;Da++)cb=d.$c("X_BLOOM_BLUR"),cb.vf=a.Tj.small_glow_mask_width,Rc=l("COLOR","u_color",1,wb,wb,!0,!0),Rc.oa=n.S,Rc.ra=n.S,r.Y(h,cb),r.H(h,Lb,cb,Rc),wb/=2,Vb=d.$c("Y_BLOOM_BLUR"),Vb.vf=a.Tj.small_glow_mask_width,Fc=l("COLOR","u_color",1,wb,wb,!0,!0),Fc.oa=n.S,Fc.ra=n.S,r.Y(h,Vb),r.H(h,cb,Vb,Fc),Lb=Vb,Vb.zq=wb,cb.zq=wb,Ta.push(Vb,wb);var Yb=d.jY(ua.blur);r.Y(h,Yb);for(Da=0;Da<Ta.length;Da+=2){var Vb=Ta[Da],Nb=Ta[Da+1],kc=l("COLOR","u_bloom_level_"+
(Da/2).toString(),1,Nb,Nb,!0,!0);kc.oa=n.S;kc.ra=n.S;r.H(h,Vb,Yb,kc)}r.H(h,Xa,Yb,l("COLOR","u_main",1,1,1,!0,!0));v.push(Yb);q=v;v=[]}if(va&&N&&!qa){var Xa=q[0],eb=F.fd(La,!0);b.na.push(eb);if(e.dof_bokeh){var db=l("COLOR","u_color",1,1,1,!0,!0);db.oa=n.S;db.ra=n.S;var Zb=l("DEPTH","u_depth",1,1,1,!0,!0),hc=l("COLOR","u_color",1,.5,.5,!0,!0);hc.oa=n.Vg;hc.ra=n.Vg;var zc=l("COLOR","u_color",1,.5,.5,!0,!0);zc.oa=n.Vg;zc.ra=n.Vg;var Xc=l("COLOR","u_blurred1",1,.5,.5,!0,!0);Xc.oa=n.S;Xc.ra=n.S;var vc=
l("COLOR","u_blurred2",1,.5,.5,!0,!0);vc.oa=n.S;vc.ra=n.S;var pc=Ad[0];if(e.oe){var tb=F.fd(La,!0);b.na.push(tb);var wc=d.UE(tb,"COC_FOREGROUND");tb.dof_distance=e.dof_distance;tb.dof_object=e.dof_object;tb.dof_front_start=e.dof_front_start;tb.dof_front_end=e.dof_front_end;tb.dof_rear_start=e.dof_rear_start;tb.dof_rear_end=e.dof_rear_end;tb.dof_power=e.dof_power;tb.dof_bokeh=e.dof_bokeh;tb.dof_bokeh_intensity=e.dof_bokeh_intensity;tb.oe=e.oe;tb.dof_on=!0;r.Y(h,wc);r.H(h,Xa,wc,db);r.H(h,pc,wc,Zb);
var fd=d.$c("X_ALPHA_BLUR");r.Y(h,fd);r.H(h,wc,fd,hc);var Yc=d.$c("Y_ALPHA_BLUR");r.Y(h,Yc);r.H(h,fd,Yc,zc);var fb=F.fd(La,!0),Tb=d.UE(fb,"COC_COMBINE");b.na.push(fb);fb.dof_distance=e.dof_distance;fb.dof_object=e.dof_object;fb.dof_front_start=e.dof_front_start;fb.dof_front_end=e.dof_front_end;fb.dof_rear_start=e.dof_rear_start;fb.dof_rear_end=e.dof_rear_end;fb.dof_power=e.dof_power;fb.dof_bokeh=e.dof_bokeh;fb.dof_bokeh_intensity=e.dof_bokeh_intensity;fb.oe=e.oe;fb.dof_on=!0;r.Y(h,Tb);r.H(h,Xa,Tb,
db);r.H(h,pc,Tb,Zb);r.H(h,Yc,Tb,l("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else fb=F.fd(La,!0),b.na.push(fb),Tb=d.UE(fb,"COC_ALL"),fb.dof_distance=e.dof_distance,fb.dof_object=e.dof_object,fb.dof_front_start=e.dof_front_start,fb.dof_front_end=e.dof_front_end,fb.dof_rear_start=e.dof_rear_start,fb.dof_rear_end=e.dof_rear_end,fb.dof_power=e.dof_power,fb.dof_bokeh=e.dof_bokeh,fb.dof_bokeh_intensity=e.dof_bokeh_intensity,fb.oe=e.oe,fb.dof_on=!0,r.Y(h,Tb),r.H(h,Xa,Tb,db),r.H(h,pc,Tb,Zb);var $b=d.$c("X_DOF_BLUR");
$b.F.dof_bokeh_intensity=e.dof_bokeh_intensity;r.Y(h,$b);r.H(h,Tb,$b,hc);var ac=d.$c("Y_DOF_BLUR");ac.F.dof_bokeh_intensity=e.dof_bokeh_intensity;r.Y(h,ac);r.H(h,$b,ac,zc);var Ac=d.$c("Y_DOF_BLUR");Ac.F.dof_bokeh_intensity=e.dof_bokeh_intensity;r.Y(h,Ac);r.H(h,$b,Ac,zc);var Ub=d.dM(eb);eb.dof_distance=e.dof_distance;eb.dof_object=e.dof_object;eb.dof_front_start=e.dof_front_start;eb.dof_front_end=e.dof_front_end;eb.dof_rear_start=e.dof_rear_start;eb.dof_rear_end=e.dof_rear_end;eb.dof_power=e.dof_power;
eb.dof_bokeh=e.dof_bokeh;eb.dof_bokeh_intensity=e.dof_bokeh_intensity;eb.oe=e.oe;eb.dof_on=!0;v.push(Ub);r.Y(h,Ub);r.H(h,Xa,Ub,l("COLOR","u_sharp",1,1,1,!0,!0));r.H(h,ac,Ub,Xc);r.H(h,Ac,Ub,vc)}else{var nd=l("COLOR","u_color",1,1,1,!0,!0);nd.oa=n.S;nd.ra=n.S;var gb=l("COLOR","u_color",1,1,1,!0,!0);gb.oa=n.S;gb.ra=n.S;$b=d.$c("X_BLUR");r.Y(h,$b);r.H(h,Xa,$b,nd);var ib=d.$c("Y_BLUR");r.Y(h,ib);r.H(h,$b,ib,gb);var Bd=Ad[0],Ub=d.dM(eb);eb.dof_distance=e.dof_distance;eb.dof_object=e.dof_object;eb.dof_front_start=
e.dof_front_start;eb.dof_front_end=e.dof_front_end;eb.dof_rear_start=e.dof_rear_start;eb.dof_rear_end=e.dof_rear_end;eb.dof_power=e.dof_power;eb.dof_bokeh=e.dof_bokeh;eb.dof_bokeh_intensity=e.dof_bokeh_intensity;eb.oe=e.oe;eb.dof_on=!0;v.push(Ub);r.Y(h,Ub);r.H(h,Xa,Ub,l("COLOR","u_sharp",1,1,1,!0,!0));r.H(h,ib,Ub,l("COLOR","u_blurred",1,1,1,!0,!0));r.H(h,Bd,Ub,l("DEPTH","u_depth",1,1,1,!0,!0))}q=v;v=[]}if(a.rj){var Nc=g(d.Dh);v.push(Nc);q=v;v=[]}if(Na&&!qa){var qc=q[0],td=d.sY(Fa.mb_decay_threshold,
Fa.mb_factor);v.push(td);r.Y(h,td);r.H(h,qc,td,l("COLOR","u_mb_tex_curr",1,1,1,!0,!0));td.nb.push(l("COLOR","u_mb_tex_accum",1,1,1,!0,!0));q=v;v=[]}if(!qa&&a.outline){var Xa=q[0],Qd=F.fd(La,!0);b.na.push(Qd);var Cd=d.uY(Qd,K);r.Y(h,Cd);var gd=d.$c("X_EXTEND"),Dd=l("COLOR","u_color",1,1,1,!0,!0),ud=l("COLOR","u_outline_mask",1,1,1,!0,!0);ud.oa=n.S;ud.ra=n.S;gd.Vo=!0;r.Y(h,gd);r.H(h,Cd,gd,Dd);var Ed=l("COLOR","u_color",1,.5,.5,!0,!0);Ed.oa=n.S;Ed.ra=n.S;var xc=d.$c("Y_EXTEND");xc.Vo=!0;r.Y(h,xc);r.H(h,
gd,xc,Ed);$b=d.$c("X_BLUR");$b.Vo=!0;r.Y(h,$b);r.H(h,xc,$b,Ed);var hd=l("COLOR","u_color",1,.25,.25,!0,!0);hd.oa=n.S;hd.ra=n.S;var cc=l("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);cc.oa=n.S;cc.ra=n.S;ib=d.$c("Y_BLUR");ib.Vo=!0;r.Y(h,ib);r.H(h,$b,ib,hd);var Bc=d.tY(Ya);r.Y(h,Bc);var Id=l("COLOR","u_outline_src",1,1,1,!0,!0);Id.oa=n.S;Id.ra=n.S;r.H(h,Xa,Bc,Id);r.H(h,Cd,Bc,ud);r.H(h,ib,Bc,cc);v.push(Bc);q=v;v=[]}m(h,N);if((a.anaglyph_use||a.$z)&&!qa){var Jd=L(h,a,b,q[0]);v.push(Jd);q=v;v=[]}if(ta&&
!qa){var Xa=q[0],yc=d.kY(Ka.brightness,Ka.contrast,Ka.exposure,Ka.saturation),od=l("COLOR","u_color",1,1,1,!0,!0);od.oa=n.S;od.ra=n.S;!a.anaglyph_use&&!a.$z||qa||(od.zn=!0);r.Y(h,yc);r.H(h,Xa,yc,od);v.push(yc);q=v;v=[]}if(!q[0].ic||q[0].type==d.tj||q[0].type==d.px){var vd=d.$c("NONE");r.Y(h,vd);var id=l("COLOR","u_color",1,1,1,!0,!0);id.oa=n.S;id.ra=n.S;r.H(h,q[0],vd,id);v.push(vd);q=v;v=[]}if(Y){Xa=q[0];if(t.smaa){var jd=l("COLOR","u_color",1,1,1,!0,!1);jd.oa=n.S;jd.ra=n.S;var pd=d.XE(d.qx,a);r.Y(h,
pd);r.H(h,Xa,pd,jd);var kd=d.XE(d.wt,a);r.Y(h,kd);r.H(h,pd,kd,jd);var wd=l("COLOR","u_search_tex",1,1,1,!1,!1),xd=l("COLOR","u_area_tex",1,1,1,!1,!1);wd.oa=n.S;wd.ra=n.S;xd.oa=n.S;xd.ra=n.S;kd.nb.push(wd);kd.nb.push(xd);var qd=d.XE(d.rx,a);r.Y(h,qd);r.H(h,Xa,qd,jd);var Kd=l("COLOR","u_blend",1,1,1,!0,!1);Kd.oa=n.S;Kd.ra=n.S;r.H(h,kd,qd,Kd);v.push(qd)}else{var nc=d.gY(a);r.Y(h,nc);var rd=l("COLOR","u_color",1,1,1,!0,!1);rd.oa=n.S;rd.ra=n.S;!a.anaglyph_use&&!a.$z||qa||(rd.zn=!0);r.H(h,Xa,nc,rd);v.push(nc)}q=
v;v=[]}v.push(q[0]);Ob&&(Fb?v.push(Fb):v.push(Ob));Ic&&v.push(Ic);Sa=1;if(a.fC.hQ){var Ld=a.fC,rc=a.Hn,Bb=rc.xp,Sa=Bb?Bb.VR:Sa,Md=d.yY(rc,K,Ld,Sa);r.Y(h,Md);v.push(Md)}var Cc=d.eM();r.Y(h,Cc);for(Da=0;Da<v.length;Da++){var oc=v[Da];switch(oc.type){case d.Cf:case d.zi:r.H(h,oc,Cc,l("COLOR","NONE",1,1,1,ic,!1));r.H(h,oc,Cc,l("DEPTH","NONE",1,1,1,ic,!1));break;case d.Xe:r.H(h,oc,Cc,l("CUBEMAP","u_sky",Sa,1,1,!1));for(Ca=0;Ca<E.length;Ca++)r.H(h,oc,mb,E[Ca]),ec&&r.H(h,oc,ec,E[Ca]),$a&&r.H(h,oc,$a,E[Ca]),
Nc&&r.H(h,oc,Nc,E[Ca]);break;case d.Qp:r.H(h,oc,Cc,l("COLOR","NONE",1,1,1,!0,!1));break;default:if(qa){var Nd=f[0],ld=l("COLOR","OFFSCREEN",1,1,1,!0,!0);ld.fb=Nd;r.H(h,v[Da],Cc,ld);for(Ca=1;Ca<f.length;Ca++){var sd=f[Ca],md=d.$c("NONE");r.Y(h,md);r.H(h,v[Da],md,l("COLOR","SCALE",1,1,1,!0,!0));var Od=sd.Ol/Nd.Ol,ld=l("COLOR","OFFSCREEN",1,Od,Od,!0,!0);ld.fb=sd;r.H(h,md,Cc,ld)}}else r.H(h,v[Da],Cc,l("SCREEN","NONE",1,1,1,!0,!1))}}Db&&!D(h,Db).length&&(r.Bg(h,r.zl(h,Db)),r.BE(h));m(h,N);c(h,N);if(R.enabled){var Fd=
x(h);Fd&&P(h,Fd)}p(h);y(h);Ba&&r.fa(h,function(a,b){if(b.type==d.Ug||b.type==d.Gd||b.type==d.Dh){for(var c=0,e=k(h,b),f=0,g=0;g<e.length;g++){var n=e[g];n.type==d.$d&&(f++,b.Cl=b.Cl||[],b.Cl[0<n.th?n.th:c]=n.F.Fb,c++)}b.Ls&&b.Ks||(t.FA?b.Bw=new Float32Array(9*f):(b.Ls=new Float32Array(4*f),b.Ks=new Float32Array(4*f)))}});if(!ha.YF)for(Da=0;Da<J.length;Da++)J[Da].active=!1;return h};a.z1=function(a,b,c){var e=[];r.fa(a,function(b,c){if(-1==la.indexOf(c.type)&&c.nb.length&&v(a,c,d.Eh))for(var f=0;f<
c.nb.length;f++){var g=c.nb[f];-1==e.indexOf(g)&&e.push(g)}});r.xi(a,function(b,c,f){b=r.jb(a,b);c=r.jb(a,c);-1==la.indexOf(b.type)&&v(a,c,d.Eh)&&-1==e.indexOf(f)&&e.push(f)});for(var f=0;f<e.length;f++)e[f].Ml*=b,e[f].Nl*=c};a.ye=function(a,b,c){var d=a.vf;a.lw[0]=b*a.Lb[0]*d;a.lw[1]=c*a.Lb[1]*d};a.Sd=function(a,b){a.vf=b};a.WX=function(){var a=r.create(),b=d.vY(),c=F.Ld(F.Wc);c.width=512;c.height=512;b.F=c;r.Y(a,b);b.nb.push(l("COLOR","u_color",512,1,1,!1,!1));c=d.eM();r.Y(a,c);r.H(a,b,c,l("COLOR",
"NONE",512,1,1,!1,!1));p(a);y(a);return a};a.EZ=function(a){var b=null;r.fa(a,function(a,c){return c.F&&null===c.F.Lf?(b=c,!0):!1});return b};a.td=function(a,b,c){a=k(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};a.zz=function(a,b,c){a=k(a,b);b=[];for(var d=0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};a.uba=v;a.xba=K;a.E_=k;a.K_=D;a.uc=function(a,b){var c=null;r.fa(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};a.KY=function(a){var b="digraph scenegraph {\n",
b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',c=M(a);r.fa(a,function(a,e){var f=b+="    ",g=d.CC(e);if(e.F){for(var g=g+"\\n",h=0;h<c.length;h+=2){var k=e.F.tc;c[h]==k&&(g=n.rr(k)?g+("CR"+c[h+1]+" "):g+("C"+c[h+1]+" "))}for(h=0;h<c.length;h+=2)k=e.F.mg,c[h]==k&&(g=n.rr(k)?g+("DR"+c[h+1]):g+("D"+c[h+1]))}e.nb.length&&(g+="\\n-----\\n");for(h=0;h<e.nb.length;h++)g+=E(e.nb[h],c);b=f+(String(a)+' [label="'+g+'" color="black" style="'+
((e.type==d.Bk?"dotted":e.enqueue?"solid":"dashed")+",bold")+'"];\n')});r.xi(a,function(a,d,e){b+="    ";b+=String(a)+" -> "+String(d)+' [label="'+E(e,c)+'" style="'+(e.active?"solid":"dotted")+'"];\n'});return b+="}"};a.YX=function(a){a=r.A4(a);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.enqueue&&b.push(d)}return b};a.mo=function(a,b,c){var e=r.zl(a,b);r.Wl(a,e,function(a,b,e){if(e.active){switch(e.from){case "COLOR":case "CUBEMAP":var f=b.F.tc;break;case "DEPTH":f=b.F.mg;break;case "SCREEN":f=
null;break;case d.Zd:return;default:X.J("Wrong slink")}switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;default:f||X.J("Connection of SCREEN is forbidden"),f.Zf&&X.J("Batch texture can't use renderbuffer"),W.tL(c.zb,e.to)&&S.km(c,f,e.to)}}});for(a=0;a<b.nb.length;a++){var e=b.nb[a],f=b.wi[a];switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;
default:f.Zf&&X.J("Batch texture can't use renderbuffer"),W.tL(c.zb,e.to)&&S.km(c,f,e.to)}}}};b4w.module.__shaders=function(a,u){function m(){return{Kg:"",gf:"",Li:[],Pf:[],status:0,Lx:0,HC:0}}function c(a){var b=m();b.Kg=a.Kg;b.gf=a.gf;b.Li=C.X(a.Li);b.Pf=C.X(a.Pf);b.status=a.status;b.Lx=a.Lx;b.HC=a.HC;return b}function b(a,b,c){var d=a.Li;"string"==typeof c?(a=p(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function p(a,b){for(var c=a.Li,d=0;d<c.length;d++)if(c[d][0]==b)return c[d];return!1}function h(a,b){var c=a+b;if(!(c in R)){var d=J(W.shaders_path,
a),e=J(W.shaders_path,b),d=l(d),e=l(e),f;for(f in e)d[f]=e[f];e=[];for(f in d)e.push([f,d[f]]);R[c]=e}return R[c]}function G(a,b){return a+b}function q(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(G,0)}function w(a,b){var c=P(a.type),d=P(b.type),e=a.ao,f=b.ao;return c>d?-1:c<d?1:e>f?-1:e<f?1:0}function A(a){if(r.Nb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=H}else b=za;a=a.split(";").map(function(a){return(a=
a.match(b))&&{type:a[2],ao:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return e(a,ga,f.IA)}function g(a,b,c){a=a.split(";");for(var d=[],f=0;f<a.length;f++){var g=a[f].match(la);g&&d.push({type:g[2],ao:g[4]?parseInt(g[4],10):1})}return e(d,b,c)}function e(a,b,c){function d(){for(var c=0;n<a.length;){var d=a[n];if(3!=P(d.type))break;c+=x(d.type)*d.ao;n++}h=k+c;if(h>Aa)return!1;y(b,k,c,0,3);return!0}function e(){for(var c=Aa-h,d=c,e=c;n<a.length;){var f=a[n];if(2!=P(f.type))break;f=x(f.type)*
f.ao;if(f<=d)d-=f;else if(f<=e)e-=f;else return!1;n++}e=c-e;y(b,h,c-d,0,2);y(b,Aa-e,e,2,2);return!0}function f(){for(;n<a.length;){for(var d=a[n],d=x(d.type)*d.ao,e=-1,f=c+1,g=-1,h=0;4>h;h++){var k=ua;k[0]=0;k[1]=1;var l;l=b;for(var t=h,m=d,r=k;ea<l.length&&15===l[ea];)ea++;for(;0<Aa&&15===l[Aa];)Aa--;if(Aa-ea<m)l=!1;else{for(var t=1<<t,q=0,B=-1,p=l.length+1,v=!1,w=ea;w<=Aa;w++)w<Aa&&!(l[w]&t)?v||(q=w,v=!0):(v&&(v=w-q,v>=m&&v<p&&(p=v,B=q)),v=!1);0>B?l=!1:(r[0]=B,r[1]=p,l=!0)}l&&k[1]<f&&(g=k[0],f=
k[1],e=h)}if(0>e)return!1;y(b,g,d,e,1);n++}return!0}if(!a.length)return!0;for(var g=0;g<c;g++)b[g]=0;Aa=c;a.sort(w);var h=0,k=0,n=0;return function(){for(;n<a.length;){var c=a[n];if(4!=P(c.type))break;k+=x(c.type)*c.ao;n++}if(k>Aa)return!1;ea=k;y(b,0,k,0,4);return!0}()&&d()&&e()&&f()}function y(a,b,c,d,e){for(var f=0,g=0;g<e;g++)f|=1<<d+g;for(g=0;g<c;g++)a[b+g]|=f}function x(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function P(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function J(a,b){var c=a+b;if(n[c])return n[c];if(X){var d=X[b];if(!d)return null;d=u("__gpp_parser").Fca.parse(d)}else if(d=u("shader_texts")[b],!d)return null;return n[c]=d}function L(a,b){for(var c={},d=b.Li||[],e=0;e<d.length;e++)c[d[e][0]]=[d[e][1]];for(e=0;e<b.Pf.length;e++)c["USE_NODE_"+b.Pf[e].id]=["1"];r.Nb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],
c.GLSL_IN=["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],r.wI?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=r.gu&&!r.Sv?["sampler2DShadow"]:["sampler2D"];for(var f in c)c[f][0].constructor!=String&&z.warn("Warning! The value of a directive '"+f+"' is not of type string.");return c}function l(a){function b(a){"var"==a.a?d[a.c]=a.b.join(""):"include"==a.a&&(a=J(W.shaders_path,
W.qR+a.D),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var e=0;e<a.length;e++)c(a[e],b,d);else if(a instanceof Object&&a){b&&b(a);for(e in a)c(a[e],b,d);d&&d(a)}}var d={};c(a,b);return d}function I(a,b,c){function d(b){b=b.f;for(var c=0;c<b.length;c++){var n=b[c];switch(n.a){case "cond":a:for(var n=n.f,r=0;r<n.length;r++){var p=n[r];switch(p.a){case "if":case "elif":if(e(p.j)){d(p.l);break a}break;case "else":d(p.l);break a;case "ifdef":p.c in m&&d(p.l);break;case "ifndef":p.c in m||d(p.l)}}break;
case "include":n=n.D;r=J(W.shaders_path,W.qR+n);B.push("include/"+n);d(r);B.pop();break;case "var":break;case "define":m[n.c]=n.b;break;case "error":C.J("Shader error: #error "+n.b.join(" "));break;case "line":break;case "pragma":t.push("#pragma "+n.c+" "+n.b.join(" "));break;case "undef":delete m[n.c];break;case "warning":z.warn("Shader warning: #warning "+n.b.join(" "));break;case "extension":n=k(n.b,m,q,!1);t.push("#extension "+n.join(" "));break;case "version":n=k(n.b,m,q,!1),t.push("#version "+
n.join(" "));case "#":break;case "node":v[n.c]=n;break;case "nodes_global":n=l;for(r=0;r<n.length;r++){var p=n[r],x=v[p.id];if(x)for(var H=0,y=0;y<x.A.length;y++){var F=x.A[y];if("node_param"==F.a){var E;if("PARTICLE_INFO"==p.id&&F.g)if(1==m.PARTICLE_BATCH)switch(E=!1,H){case 0:E=M(p.hb,"PART_INFO_IND")||M(p.hb,"PART_INFO_AGE")||M(p.hb,"PART_INFO_LT")||M(p.hb,"PART_INFO_SIZE");break;case 1:E=M(p.hb,"PART_INFO_LOC");break;case 2:E=M(p.hb,"PART_INFO_VEL");break;case 3:E=M(p.hb,"PART_INFO_A_VEL");break;
case 4:E=M(p.hb,"PART_INFO_IND")}else E=!1;else E=!0;E&&(F=F.i.join(" ")+" ","vert"==a?F+=p.zf[H]:"frag"==a&&(F+=p.lb[H],null!==p.Pr[H]&&(F+="="+p.Pr[H])),F+=";",h(g(F)));H++}}}break;case "nodes_main":n=l;for(r=0;r<n.length;r++)if(p=n[r],x=v[p.id]){H={};D=u=A=0;y=x;F=p;E=y;for(var fa={},K=0;K<E.B.length;K++){var L=E.B[K];fa[L.c]=[L.b.join("")]}E=fa;for(fa=0;fa<F.hb.length;fa++)K=F.hb[fa][0],K in E&&(E[K]=[F.hb[fa][1]]);for(fa=K=0;fa<y.A.length;fa++)L=y.A[fa],"node_out"==L.a&&(E["USE_OUT_"+L.c]=[-1<
w.indexOf(F.outputs[K])|0],K++);y=E;F=p;E=x.A;fa=H;K=y;for(L=0;L<E.length;L++){var G=E[L];switch(G.a){case "node_in":var R=F.inputs[A];if(null!==F.fG[A]){if(("MATERIAL_BEGIN"==F.id&&3===A||!K.MATERIAL_EXT&&("MATERIAL_BEGIN"==F.id&&4===A||"MATERIAL_END"==F.id&&3===A||"MATERIAL_END"==F.id&&4===A||"MATERIAL_END"==F.id&&5===A)||"TEXTURE_COLOR"==F.id||"TEXTURE_NORMAL"==F.id)&&G.g){fa[G.c]=F.fG[A];A++;continue}var la=G.i.join(" ")+" ",la=la+(R+"="+F.fG[A]+";");h(g(la))}fa[G.c]=R;A++;break;case "node_out":R=
F.outputs[u];if(!G.g||-1<w.indexOf(R))la=G.i.join(" ")+" ",la+=R+";",h(g(la)),fa[G.c]=R;u++;break;case "node_param":"vert"==a?R=F.zf[D]:"frag"==a&&(R=F.lb[D]),fa[G.c]=R,D++}}t.push("{");f(p,x.u,H,y);t.push("}")}break;case "txt":h(n.b);break;default:C.J("Unknown element type: "+n.a)}}}function e(a,b){var c;c=k(a,m,q,!0,b);for(var d=[],e=0;e<c.length;e++)if(c[e]instanceof Object)switch(c[e].a){case "conditional_expr":var f=d.pop(),g=d.pop();d.pop()?d.push(g):d.push(f);break;case "logical_or_expr":for(var g=
d.pop(),h=0;h<c[e].o-1;h++)f=d.pop(),g=g||f;d.push(g);break;case "logical_and_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)f=d.pop(),g=g&&f;d.push(g);break;case "logical_bitor_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g|=d.pop();d.push(g);break;case "logical_bitxor_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g^=d.pop();d.push(g);break;case "logical_bitand_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g&=d.pop();d.push(g);break;case "equal_expr":f=d.pop();g=d.pop();d.push(g==f);break;case "non_equal_expr":f=d.pop();g=
d.pop();d.push(g!=f);break;case "le_expr":f=d.pop();g=d.pop();d.push(g<=f);break;case "ge_expr":f=d.pop();g=d.pop();d.push(g>=f);break;case "l_expr":f=d.pop();g=d.pop();d.push(g<f);break;case "g_expr":f=d.pop();g=d.pop();d.push(g>f);break;case "left_shift_expr":g=d.pop();f=d.pop();d.push(g<<f);break;case "right_shift_expr":g=d.pop();f=d.pop();d.push(g>>f);break;case "add_expr":g=d.pop();f=d.pop();d.push(g+f);break;case "sub_expr":g=d.pop();f=d.pop();d.push(g-f);break;case "mul_expr":g=d.pop();f=d.pop();
d.push(g*f);break;case "div_expr":g=d.pop();f=d.pop();d.push(g/f);break;case "mod_expr":g=d.pop();f=d.pop();d.push(g%f);break;case "pre_inc_expr":case "post_inc_expr":f=d.pop();d.push(++f);break;case "pre_dec_expr":case "post_dec_expr":f=d.pop();d.push(--f);break;case "positive_expr":f=d.pop();d.push(+f);break;case "negative_expr":f=d.pop();d.push(-f);break;case "one_compl_expr":f=d.pop();d.push(~f);break;case "logic_negative_expr":f=d.pop();d.push(!f);break;default:C.J("Unknown operation type: "+
c[e].a)}else f=c[e],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(f)?(d.push(0),0!=f.indexOf("USE_NODE_")&&(g=B[B.length-1],g in p||(p[g]=[]),-1==p[g].indexOf(f)&&(p[g].push(f),z.error("Undefined directive '"+f+"' in shader '"+g+"'. Should it be defined with #var/#node_var or #define?")))):d.push(parseFloat(c[e]));1==d.length?c=d[0]:(C.J("Incorrect expression: "+c.join(" ")),c=void 0);return c}function f(a,b,c,d){for(var g=0;g<b.length;g++){var k=b[g];switch(k.a){case "node_cond":a:for(var n=a,k=k.f,l=c,t=d,
r=0;r<k.length;r++){var q=k[r];switch(q.a){case "node_if":case "node_elif":if(e(q.j,t)){f(n,q.u,l,t);break a}break;case "node_else":f(n,q.u,l,t);break a;case "node_ifdef":(q.c in m||q.c in t)&&f(n,q.u,l,t);break;case "node_ifndef":q.c in m||q.c in t||f(n,q.u,l,t)}}break;case "txt":n=[];for(l=0;l<k.b.length;l++)t=k.b[l],t in c?n.push(c[t]):n.push(t);h(n,d)}}}function g(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function h(b,c){var d=b;if(!r.Nb&&"frag"==a){var e=d.join(" ");y&&(e.match(/[^;]*;/)?
(e=e.replace(/[^;]*;/,""),y=!1):e="");e=e.replace(/GLSL_OUT [^;]*;/g,"");e.match(/GLSL_OUT(?:$| [^;]*)/)&&(e=e.replace(/GLSL_OUT(?:$| [^;]*)/,""),y=!0);e=e.replace(/ {2,}/g," ");(e=e.trim())?d=e.split(" "):d=[]}b=d;b.length&&(d=k(b,m,q,!1,c),t.push(d.join(" ")))}function k(a,b,c,d,e){var f=[];n(a,b,c,d,f,e);return f}function n(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=a[g];if(f&&h in f)h=f[h];else if(h in b)h=b[h];else{e.push(h);continue}0==h.length&&d?e.push(0):n(h,b,c,d,e,f)}}var l=c.Pf,t=
[],m=L(a,c),q={},B=[c[a]],p={},v={},w=[],x;for(x in l)for(var H in l[x].inputs)w.push(l[x].inputs[H]);var y=!1;d(b);var A=0,u=0,D=0;return t.join("\n")}function v(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function K(a){ba.deleteProgram(a.ik);ba.deleteShader(a.mD);ba.deleteShader(a.mz);delete d[a.bI]}function k(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return D(a);case 2:return"vec2("+D(a[0])+","+D(a[1])+")";case 3:return"vec3("+D(a[0])+","+D(a[1])+","+
D(a[2])+")";case 4:return"vec4("+D(a[0])+","+D(a[1])+","+D(a[2])+","+D(a[3])+")";case 9:return"mat3("+D(a[0])+","+D(a[1])+","+D(a[2])+","+D(a[3])+","+D(a[4])+","+D(a[5])+","+D(a[6])+","+D(a[7])+","+D(a[8])+")";case 16:return"mat4("+D(a[0])+","+D(a[1])+","+D(a[2])+","+D(a[3])+","+D(a[4])+","+D(a[5])+","+D(a[6])+","+D(a[7])+","+D(a[8])+","+D(a[9])+","+D(a[10])+","+D(a[11])+","+D(a[12])+","+D(a[13])+","+D(a[14])+","+D(a[15])+")";default:C.J("Wrong glsl value dimension")}}function D(a){return a%1?String(a):
String(a)+".0"}function M(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var E=u("__assets"),S=u("__config"),F=u("__debug"),z=u("__print"),C=u("__util"),r=S.K,f=S.Ki,W=S.Rf,d={},n={},X=null,R={},t="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.PJ=0;a.iT=1;a.hT=2;a.lT=4;a.kT=8;a.jT=16;a.eT=32;var fa=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,la=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,H=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,za=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
ha=/(?:\W|^)discard(\W|$)/,ua=new Int16Array(2),ga=null,B=null,Z=null,ea=0,Aa=0,da=[],ba=null,wa=!1;a.sh=function(a){ba=a};a.s0=m;a.qX=c;a.xa=b;a.q_=p;a.g3=function(a){a.Li=C.X(h(a.Kg,a.gf));b(a,"PRECISION",S.K.precision);"highp"==S.K.precision?b(a,"EPSILON",k(1E-6)):b(a,"EPSILON",k(1E-4));b(a,"CONSTANTS_HACK",r.aI|0);b(a,"SRGB",r.srgb_type);b(a,"COMPARED_MODE",r.gu|0)};a.mba=function(a){return a.Kg};a.vaa=function(a){return a.gf};a.k_=function(a){var b=JSON.stringify(a.Kg)+JSON.stringify(a.gf)+JSON.stringify(a.Li)+
JSON.stringify(a.Pf),e=d[b];if(e)return e;var h=a.gf,k=J(W.shaders_path,a.Kg),h=J(W.shaders_path,h);if(!k||!h)return null;var k=I("vert",k,a),h=I("frag",h,a),e=0,n=q(h,fa);a.HC=n;n>f.EG&&(e|=1);ga||(ga=new Uint32Array(f.IA));B||(B=new Uint32Array(f.AG));Z||(Z=new Uint32Array(f.JA));g(h,B,f.AG)||(e|=2);g(k,Z,f.JA)||(e|=4);n=r.Nb?(k.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(k.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.Lx=n;n>f.FG&&(e|=8);A(h)||
(e|=16);a.status=e;if(0===a.status){var e=ba,l=v(e,k,e.VERTEX_SHADER),t=v(e,h,e.FRAGMENT_SHADER),n=e.createProgram();e.attachShader(n,l);e.attachShader(n,t);e.linkProgram(n);for(var l={mD:l,mz:t,ik:n,attributes:{},Cp:{},yv:C.vm(),fH:C.vm(),gH:{},Fr:!0,VA:!1,dS:C.vm(),cS:C.vm(),mb:c(a),bI:b,dO:!!h.match(ha),Nh:!0},m=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),t=0;t<m;t++){var p=e.getActiveAttrib(n,t).name;l.attributes[p]=e.getAttribLocation(n,p)}m=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(t=
0;t<m;t++)p=e.getActiveUniform(n,t).name.split("[0]").join(""),l.Cp[p]=e.getUniformLocation(n,p);d[b]=e=l;n=!ba.getShaderParameter(e.mz,ba.COMPILE_STATUS);l=!ba.getShaderParameter(e.mD,ba.COMPILE_STATUS);t=!ba.getProgramParameter(e.ik,ba.LINK_STATUS);n?F.iQ(e.mz,b,h):l?F.iQ(e.mD,b,k):t&&F.G2(e.ik,b,k,h);if(n||l||t)a.status|=32,e=null}else e=null;return e};a.$0=function(){wa=!1;if(b4w.module_check("shader_texts"))wa=!0;else{for(var a=[],b=E.xD,c=0;c<t.length;c++){var d=C.Bl(W.shaders_path+t[c]);a.push({id:t[c],
type:b,url:d})}b=function(a,b){X||(X={});X[b]=a};a.length?E.enqueue(a,b,function(){wa=!0}):z.error("Shaders have not been found.")}};a.sL=function(){return wa};a.J9=function(){return da};a.hN=function(){return d};a.Ja=function(){for(var a in d)K(d[a]);for(var b in n)delete n[b];for(var c in da)delete da[c];Z=B=ga=null;R={}};a.jX=K;a.K9=function(a){var b=a.Li;z.log("Shader: "+a.Kg+" "+a.gf+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)z.log("  "+b[a][0],b[a][1])};a.da=k;a.tL=function(a,
b){return b in a.Cp?!0:!1};a.reset=function(){ba=null}};b4w.module.__assets=function(a,u){function m(){return P.BO()?u(P.Rf.Zx).data:null}function c(){var a={Bx:null,yV:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,e=new Int8Array(c),f=0;f<c;f++)e[f]=b.charCodeAt(f);return e.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Bx=c;a.readyState=1},send:function(){a.status=
404;a.readyState=4;var b=m();b&&a.Bx in b&&(a.status=200,b[a.Bx]&&(a.response=a.yV(b[a.Bx])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function b(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];20===e.state&&c++;if(c>=D.q1)break;if(10===e.state)switch(e.state=20,c++,e.type){case a.Ws:case a.Rp:case a.Vs:p(e,"arraybuffer");break;case a.am:p(e,"json");break;case a.xD:p(e,"text");break;case a.vD:h(e);break;case a.Sp:G(e);break;case a.wD:q(e);break;
case a.Kw:w(e);break;case a.Jw:A(e);break;default:v.J("Wrong asset type: "+e.type)}}}function p(b,e){var d=b.url.split("?v=")[0];if(d in F)"json"==e?b.gc(v.X(F[d]),b.id,b.type,b.url,b.Qb):b.gc(F[d],b.id,b.type,b.url,b.Qb);else{var f=m(),g=f&&b.url in f?new c:new XMLHttpRequest,f=null;if("GET"==b.jk)g.open("GET",b.url,!0);else if("POST"==b.jk)switch(g.open("POST",b.url,!0),b.type){case a.xD:f="text/plain";break;case a.am:f="application/json"}if(b.an)for(var h in b.an)"Content-Type"==h?f=b.an[h]:g.setRequestHeader(h,
b.an[h]);f&&g.setRequestHeader("Content-Type",f);"text"==e?(g.overrideMimeType("text/plain"),g.responseType="text"):"json"==e?(g.overrideMimeType("application/json"),g.responseType="text"):g.responseType=e;g.onreadystatechange=function(){if(40!=b.state&&4==g.readyState){if(200==g.status||0==g.status){var c=g.response;if(!c||"arraybuffer"==e&&0==c.byteLength)l.error("empty responce when trying to get "+b.url),b.gc(null,b.id,b.type,b.url,b.Qb);else{switch(b.type){case a.Ws:try{c=L.jr(c,{to:"string"})}catch(fa){l.error(fa+
" (parsing gzipped file "+b.url+")");b.gc(null,b.id,b.type,b.url,b.Qb);return}case a.am:try{c=JSON.parse(c,b.G0)}catch(fa){l.error(fa+" (parsing JSON "+b.url+")");b.gc(null,b.id,b.type,b.url,b.Qb);return}break;case a.Vs:try{c=L.jr(c).buffer}catch(fa){l.error(fa+" (parsing gzipped file "+b.url+")");b.gc(null,b.id,b.type,b.url,b.Qb);return}}b.lf&&(F[d]=b.type==a.am||b.type==a.Ws?v.X(c):c);b.gc(c,b.id,b.type,b.url,b.Qb)}}else l.error(g.status+" when trying to get "+b.url),b.gc(null,b.id,b.type,b.url,
b.Qb);b.state=30}};g.addEventListener("progress",function(a){a.lengthComputable&&b.VP(a.loaded/a.total)},!1);g.send(b.mB)}}function h(a){var b=a.url.split("?v=")[0];if(b in r)a.gc(r[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&v.J("Unsupported request type for audio buffer");var d=(b=m())&&a.url in b?new c:new XMLHttpRequest;d.open("GET",a.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=a.state&&4==d.readyState)if(200==d.status||0==d.status){var b=d.response;
b?I.NY(b,function(b){a.gc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.lf&&(r[a.url.split("?v=")[0]]=b)},function(){l.error("failed to decode "+a.url);a.gc(null,a.id,a.type,a.url,a.Qb);a.state=30}):(l.error("empty responce when trying to get "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else l.error(d.status+" when trying to get "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30};d.send()}}function G(a){var b=a.url.split("?v=")[0];if(b in z)a.gc(z[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=
a.jk&&v.J("Unsupported request type for image element");var c=document.createElement("img");k.allow_cors&&(c.crossOrigin="Anonymous");c.onload=function(){40!=a.state&&(a.gc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(z[a.url.split("?v=")[0]]=c))};c.addEventListener("error",function(){40!=a.state&&(l.error("could not load image: "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=m())&&a.url in b)if(b[a.url]){var f=e(a.url);c.src="data:"+f+";base64,"+b[a.url]}else J.Wo()?(b=document.createEvent("CustomEvent"),
b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url}}function q(a){var b=a.url.split("?v=")[0];if(b in C)a.gc(C[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&v.J("Unsupported request type for audio element");var c=document.createElement("audio");k.allow_cors&&(c.crossOrigin="Anonymous");c.addEventListener("loadeddata",function(){40!=a.state&&(a.gc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(C[a.url.split("?v=")[0]]=c))},!1);c.addEventListener("error",
function(){40!=a.state&&(l.error("could not load sound: "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);c.addEventListener("stalled",function(){40!=a.state&&(l.error("could not load sound: "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=m())&&a.url in b)if(b[a.url]){var e=y(a.url);c.src="data:"+e+";base64,"+b[a.url];40!=a.state&&(a.gc(c,a.id,a.type,a.url,a.Qb),a.state=30)}else J.Wo()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),
c.dispatchEvent(b);else c.src=a.url,k.is_mobile_device&&c.load();k.IG&&(c.autoplay=!0,c.pause());setTimeout(function(){c.zV=1},5E3)}}function w(a){function b(){40!=a.state&&(l.error("could not load video: "+a.url,a.Qb),a.gc(null,a.id,a.type,a.url),a.state=30)}var c=a.url.split("?v=")[0];if(c in z)a.gc(z[c],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&v.J("Unsupported request type for video element");var e=document.createElement("video");e.muted=!0;k.allow_cors&&(e.crossOrigin="Anonymous");
e.addEventListener("loadeddata",function(){e.removeEventListener("error",b,!1);40!=a.state&&(a.gc(e,a.id,a.type,a.url,a.Qb),a.state=30,a.lf&&(z[a.url.split("?v=")[0]]=e))},!1);e.addEventListener("error",b,!1);if((c=m())&&a.url in c)if(c[a.url]){var f=x(a.url);e.src="data:"+f+";base64,"+c[a.url];40!=a.state&&e.addEventListener("loadeddata",function(){a.gc(e,a.id,a.type,a.url,a.Qb);a.state=30},!1)}else J.Wo()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),
e.dispatchEvent(c);else e.src=a.url,k.is_mobile_device&&e.load();if(k.IG||k.vO)e.autoplay=!0,e.pause();setTimeout(function(){e.zV=1},1E4)}}function A(a){function b(b){a.gc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.lf&&(z[a.url.split("?v=")[0]]=b)}var d=a.url.split("?v=")[0];if(d in z)a.gc(z[d],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&v.J("Unsupported request type for seq video element");var e=(d=m())&&a.url in d?new c:new XMLHttpRequest;e.open("GET",a.url,!0);e.responseType="arraybuffer";
e.onreadystatechange=function(){if(40!=a.state&&4==e.readyState)if(200==e.status||0==e.status){var c=e.response;c?g(c,b):(l.error("empty responce when trying to get "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else l.error(e.status+" when trying to get "+a.url),a.gc(null,a.id,a.type,a.url,a.Qb),a.state=30};e.addEventListener("progress",function(b){b.lengthComputable&&a.VP(b.loaded/b.total)},!1);e.send()}}function g(a,b){for(var c=new Int32Array(a),e=new Int8Array(a),f=c[3],g={images:[],
XK:[],Oi:c[4]},h=20,k=0;k<f;k++){var l=c[h/4],m=new Blob([e.subarray(h+4,h+4+l)],{type:"image/jpg"}),r=document.createElement("img");r.src=window.URL.createObjectURL(m);g.images.push(r);g.XK.push(m);h+=l+8-l%4}r.onload=function(){for(var a=0;a<g.images.length;a++)window.URL.revokeObjectURL(g.images[a].src);delete g.XK;b(g)}}function e(a){var b="image";switch(v.FF(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function y(a){var b="audio";switch(v.FF(a).toLowerCase()){case "ogv":case "ogg":b+=
"/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function x(a){var b="video";switch(v.FF(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":b+="/mp4"}return b}var P=u("__config"),J=u("__compat"),L=u("__pako_inflate"),l=u("__print"),I=u("__sfx"),v=u("__util"),K=u("__version"),k=P.K,D=P.Je;a.Rp=10;a.Vs=20;a.am=30;a.Ws=40;a.xD=50;a.vD=60;a.Sp=70;a.wD=80;a.Kw=90;a.Jw=100;var M=[],E=0,S={},F={},z={},C={},r=
{};a.sC=function(a){a=a.split(".");var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};a.bba=function(a){if(S[a])return S[a];var b=D.prevent_caching?a+"?v="+K.get_build_version():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)v.J("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return S[a]=b;v.J("Error XHR: responce is empty, GET "+a)}};a.Ja=function(){for(var a=0;a<M.length;a++)M[a].state=
40;M=[];E=0;S={}};a.enqueue=function(a,c,d,e,g){for(var f=0;f<a.length;f++){var h=a[f],h={id:h.id,type:h.type,url:h.url,lf:h.lf,jk:h.jk?h.jk:"GET",an:h.an?h.an:null,mB:h.mB?h.mB:null,Qb:h.Qb?h.Qb:null,state:10,gc:c||function(){},HP:d||function(){},VP:e||function(){},G0:g||null,IP:E};if(D.prevent_caching){var k=m();k&&h.url in k||(h.url+="?v="+K.get_build_version())}M.push(h)}b(M);E++};a.update=function(){b(M);for(var a=M,c=0,d=!0,e=0;e<a.length;e++){var g=a[e];g.IP===a[c].IP?30!==g.state&&(d=!1):
(d&&(a[e-1].HP(),d=e-c,a.splice(c,d),e-=d),c=e,d=30===a[e].state?!0:!1);e===a.length-1&&d&&(g=a[e],a.splice(c),g.HP())}};a.bX=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};a.lX=function(){F={};z={};C={};r={}}};b4w.module.__pako_inflate=function(a){(function(a){var m;"undefined"!==typeof window?m=window:"undefined"!==typeof self?m=self:m=this;m.P1=a()})(function(){return function m(a,b,p){function c(h){if(!b[h]){if(!a[h]){if(G)return G(h,!0);var q=Error("Cannot find module '"+h+"'");throw q.code="MODULE_NOT_FOUND",q;}q=b[h]={exports:{}};a[h][0].call(q.exports,function(b){var e=a[h][1][b];return c(e?e:b)},q,q.exports,m,a,b,p)}return b[h].exports}for(var G=!1,q=0;q<p.length;q++)c(p[q]);return c}({1:[function(a,
c,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h])}}return a};b.vR=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var m={$n:function(a,b,c,h,g){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+h),g);else for(var e=0;e<h;e++)a[g+e]=b[c+e]},LM:function(a){var b,c,h,g,e;b=h=0;for(c=a.length;b<c;b++)h+=a[b].length;e=new Uint8Array(h);b=h=0;for(c=a.length;b<c;b++)g=a[b],e.set(g,h),h+=g.length;return e}},h={$n:function(a,b,c,h,g){for(var e=0;e<h;e++)a[g+e]=b[c+e]},LM:function(a){return[].concat.apply([],a)}};b.X2=function(a){a?(b.In=Uint8Array,b.Zs=Uint16Array,b.$s=Int32Array,b.assign(b,m)):(b.In=Array,b.Zs=Array,b.$s=Array,b.assign(b,h))};b.X2(a)},{}],2:[function(a,c,b){function m(a,b){if(65537>
b&&(a.subarray&&q||!a.subarray&&G))return String.fromCharCode.apply(null,h.vR(a,b));for(var c="",g=0;g<b;g++)c+=String.fromCharCode(a[g]);return c}var h=a("./common"),G=!0,q=!0,w=new h.In(256);for(a=0;256>a;a++)w[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;w[254]=w[254]=1;b.o4=function(a){var b,c,m,q,p,w=a.length,A=0;for(q=0;q<w;q++)c=a.charCodeAt(q),55296===(c&64512)&&q+1<w&&(m=a.charCodeAt(q+1),56320===(m&64512)&&(c=65536+(c-55296<<10)+(m-56320),q++)),A+=128>c?1:2048>c?2:65536>c?3:4;b=new h.In(A);
for(q=p=0;p<A;q++)c=a.charCodeAt(q),55296===(c&64512)&&q+1<w&&(m=a.charCodeAt(q+1),56320===(m&64512)&&(c=65536+(c-55296<<10)+(m-56320),q++)),128>c?b[p++]=c:(2048>c?b[p++]=192|c>>>6:(65536>c?b[p++]=224|c>>>12:(b[p++]=240|c>>>18,b[p++]=128|c>>>12&63),b[p++]=128|c>>>6&63),b[p++]=128|c&63);return b};b.a9=function(a){return m(a,a.length)};b.sW=function(a){for(var b=new h.In(a.length),c=0,m=b.length;c<m;c++)b[c]=a.charCodeAt(c);return b};b.BW=function(a,b){var c,g,h,q,p=b||a.length,A=Array(2*p);for(c=g=
0;c<p;)if(h=a[c++],128>h)A[g++]=h;else if(q=w[h],4<q)A[g++]=65533,c+=q-1;else{for(h&=2===q?31:3===q?15:7;1<q&&c<p;)h=h<<6|a[c++]&63,q--;1<q?A[g++]=65533:65536>h?A[g++]=h:(h-=65536,A[g++]=55296|h>>10&1023,A[g++]=56320|h&1023)}return m(A,g)};b.E5=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||!c?b:c+w[a[c]]>b?c:b}},{"./common":1}],3:[function(a,c){c.exports=function(a,c,h,m){var b=a&65535|0;a=a>>>16&65535|0;for(var p;0!==h;){p=2E3<h?2E3:
h;h-=p;do b=b+c[m++]|0,a=a+b|0;while(--p);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(a,c){c.exports={gK:0,o8:1,hK:2,l8:3,yx:4,d8:5,s8:6,rq:0,zx:1,uV:2,i8:-1,q8:-2,e8:-3,tV:-5,n8:0,b8:1,a8:9,f8:-1,j8:1,m8:2,p8:3,k8:4,g8:0,c8:0,r8:1,t8:2,h8:8}},{}],5:[function(a,c){var b=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var m=0;8>m;m++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();c.exports=function(a,c,m,q){m=q+m;for(a^=-1;q<m;q++)a=a>>>8^b[(a^c[q])&255];return a^-1}},{}],6:[function(a,
c){c.exports=function(){this.K1=this.V5=this.time=this.text=0;this.ee=null;this.qF=0;this.IE=this.name="";this.c0=0;this.done=!1}},{}],7:[function(a,c){c.exports=function(a,c){var b,m,q,p,A,g,e,y,x,P,J,L,l,I,v,K,k,D,M,E,S,F,z,C;b=a.state;m=a.Wm;z=a.input;q=m+(a.Zg-5);p=a.rf;C=a.dj;A=p-(c-a.ae);g=p+(a.ae-257);e=b.Ry;y=b.Pg;x=b.$l;P=b.Og;J=b.window;L=b.Hm;l=b.Jd;I=b.sl;v=b.wo;K=(1<<b.$j)-1;k=(1<<b.Rq)-1;a:do b:for(15>l&&(L+=z[m++]<<l,l+=8,L+=z[m++]<<l,l+=8),D=I[L&K];;){M=D>>>24;L>>>=M;l-=M;if(M=D>>>
16&255)if(M&16){E=D&65535;if(M&=15)l<M&&(L+=z[m++]<<l,l+=8),E+=L&(1<<M)-1,L>>>=M,l-=M;15>l&&(L+=z[m++]<<l,l+=8,L+=z[m++]<<l,l+=8);D=v[L&k];c:for(;;){M=D>>>24;L>>>=M;l-=M;M=D>>>16&255;if(M&16){D&=65535;M&=15;l<M&&(L+=z[m++]<<l,l+=8,l<M&&(L+=z[m++]<<l,l+=8));D+=L&(1<<M)-1;if(D>e){a.Pb="invalid distance too far back";b.mode=30;break a}L>>>=M;l-=M;M=p-A;if(D>M){M=D-M;if(M>x&&b.GH){a.Pb="invalid distance too far back";b.mode=30;break a}S=0;F=J;if(0===P){if(S+=y-M,M<E){E-=M;do C[p++]=J[S++];while(--M);
S=p-D;F=C}}else if(P<M){if(S+=y+P-M,M-=P,M<E){E-=M;do C[p++]=J[S++];while(--M);S=0;if(P<E){M=P;E-=M;do C[p++]=J[S++];while(--M);S=p-D;F=C}}}else if(S+=P-M,M<E){E-=M;do C[p++]=J[S++];while(--M);S=p-D;F=C}for(;2<E;)C[p++]=F[S++],C[p++]=F[S++],C[p++]=F[S++],E-=3;E&&(C[p++]=F[S++],1<E&&(C[p++]=F[S++]))}else{S=p-D;do C[p++]=C[S++],C[p++]=C[S++],C[p++]=C[S++],E-=3;while(2<E);E&&(C[p++]=C[S++],1<E&&(C[p++]=C[S++]))}}else if(M&64){a.Pb="invalid distance code";b.mode=30;break a}else{D=v[(D&65535)+(L&(1<<M)-
1)];continue c}break}}else if(M&64){M&32?b.mode=12:(a.Pb="invalid literal/length code",b.mode=30);break a}else{D=I[(D&65535)+(L&(1<<M)-1)];continue b}else C[p++]=D&65535;break}while(m<q&&p<g);E=l>>3;m-=E;l-=E<<3;a.Wm=m;a.rf=p;a.Zg=m<q?5+(q-m):5-(m-q);a.ae=p<g?257+(g-p):257-(p-g);b.Hm=L&(1<<l)-1;b.Jd=l}},{}],8:[function(a,c,b){function m(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function h(){this.mode=0;this.tA=!1;this.qj=0;this.aG=!1;this.total=this.check=this.Ry=this.ud=0;
this.head=null;this.Og=this.$l=this.Pg=this.Us=0;this.window=null;this.ee=this.offset=this.length=this.Jd=this.Hm=0;this.wo=this.sl=null;this.bi=this.qv=this.Hr=this.sP=this.Rq=this.$j=0;this.next=null;this.nf=new e.Zs(320);this.Iw=new e.Zs(288);this.xM=this.VO=null;this.P5=this.back=this.GH=0}function G(a){var b;if(!a||!a.state)return-2;b=a.state;a.zI=a.ow=b.total=0;a.Pb="";b.qj&&(a.Vn=b.qj&1);b.mode=1;b.tA=0;b.aG=0;b.Ry=32768;b.head=null;b.Hm=0;b.Jd=0;b.sl=b.VO=new e.$s(852);b.wo=b.xM=new e.$s(592);
b.GH=1;b.back=-1;return 0}function q(a){var b;if(!a||!a.state)return-2;b=a.state;b.Pg=0;b.$l=0;b.Og=0;return G(a)}function w(a,b){var c,e;if(!a||!a.state)return-2;e=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==e.window&&e.Us!==b&&(e.window=null);e.qj=c;e.Us=b;return q(a)}function A(a,b){var c;if(!a)return-2;c=new h;a.state=c;c.window=null;c=w(a,b);0!==c&&(a.state=null);return c}function g(a,b,c,g){var h=a.state;null===h.window&&(h.Pg=1<<h.Us,h.Og=0,h.$l=0,h.window=
new e.In(h.Pg));g>=h.Pg?(e.$n(h.window,b,c-h.Pg,h.Pg,0),h.Og=0,h.$l=h.Pg):(a=h.Pg-h.Og,a>g&&(a=g),e.$n(h.window,b,c-g,a,h.Og),(g-=a)?(e.$n(h.window,b,c-g,g,0),h.Og=g,h.$l=h.Pg):(h.Og+=a,h.Og===h.Pg&&(h.Og=0),h.$l<h.Pg&&(h.$l+=a)));return 0}var e=a("../utils/common"),y=a("./adler32"),x=a("./crc32"),P=a("./inffast"),J=a("./inftrees"),L=!0,l,I;b.Sba=q;b.Tba=w;b.Uba=G;b.Qba=function(a){return A(a,15)};b.i0=A;b.jr=function(a,b){var c,h,q,p,v,w,z,C,r,f,A,d,n,K,R,t,fa,la,H=new e.In(4),G=[16,17,18,0,8,7,
9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.dj||!a.input&&0!==a.Zg)return-2;c=a.state;12===c.mode&&(c.mode=13);v=a.rf;q=a.dj;z=a.ae;p=a.Wm;h=a.input;w=a.Zg;C=c.Hm;r=c.Jd;f=w;A=z;la=0;a:for(;;)switch(c.mode){case 1:if(0===c.qj){c.mode=13;break}for(;16>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if(c.qj&2&&35615===C){c.check=0;H[0]=C&255;H[1]=C>>>8&255;c.check=x(c.check,H,2,0);r=C=0;c.mode=2;break}c.ud=0;c.head&&(c.head.done=!1);if(!(c.qj&1)||(((C&255)<<8)+(C>>8))%31){a.Pb="incorrect header check";
c.mode=30;break}if(8!==(C&15)){a.Pb="unknown compression method";c.mode=30;break}C>>>=4;r-=4;n=(C&15)+8;if(0===c.Us)c.Us=n;else if(n>c.Us){a.Pb="invalid window size";c.mode=30;break}c.Ry=1<<n;a.Vn=c.check=1;c.mode=C&512?10:12;r=C=0;break;case 2:for(;16>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.ud=C;if(8!==(c.ud&255)){a.Pb="unknown compression method";c.mode=30;break}if(c.ud&57344){a.Pb="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=C>>8&1);c.ud&512&&(H[0]=C&255,H[1]=C>>>8&255,
c.check=x(c.check,H,2,0));r=C=0;c.mode=3;case 3:for(;32>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.head&&(c.head.time=C);c.ud&512&&(H[0]=C&255,H[1]=C>>>8&255,H[2]=C>>>16&255,H[3]=C>>>24&255,c.check=x(c.check,H,4,0));r=C=0;c.mode=4;case 4:for(;16>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.head&&(c.head.V5=C&255,c.head.K1=C>>8);c.ud&512&&(H[0]=C&255,H[1]=C>>>8&255,c.check=x(c.check,H,2,0));r=C=0;c.mode=5;case 5:if(c.ud&1024){for(;16>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.length=C;c.head&&
(c.head.qF=C);c.ud&512&&(H[0]=C&255,H[1]=C>>>8&255,c.check=x(c.check,H,2,0));r=C=0}else c.head&&(c.head.ee=null);c.mode=6;case 6:if(c.ud&1024&&(d=c.length,d>w&&(d=w),d&&(c.head&&(n=c.head.qF-c.length,c.head.ee||(c.head.ee=Array(c.head.qF)),e.$n(c.head.ee,h,p,d,n)),c.ud&512&&(c.check=x(c.check,h,d,p)),w-=d,p+=d,c.length-=d),c.length))break a;c.length=0;c.mode=7;case 7:if(c.ud&2048){if(0===w)break a;d=0;do n=h[p+d++],c.head&&n&&65536>c.length&&(c.head.name+=String.fromCharCode(n));while(n&&d<w);c.ud&
512&&(c.check=x(c.check,h,d,p));w-=d;p+=d;if(n)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.ud&4096){if(0===w)break a;d=0;do n=h[p+d++],c.head&&n&&65536>c.length&&(c.head.IE+=String.fromCharCode(n));while(n&&d<w);c.ud&512&&(c.check=x(c.check,h,d,p));w-=d;p+=d;if(n)break a}else c.head&&(c.head.IE=null);c.mode=9;case 9:if(c.ud&512){for(;16>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if(C!==(c.check&65535)){a.Pb="header crc mismatch";c.mode=30;break}r=C=0}c.head&&(c.head.c0=
c.ud>>9&1,c.head.done=!0);a.Vn=c.check=0;c.mode=12;break;case 10:for(;32>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}a.Vn=c.check=m(C);r=C=0;c.mode=11;case 11:if(0===c.aG)return a.rf=v,a.ae=z,a.Wm=p,a.Zg=w,c.Hm=C,c.Jd=r,2;a.Vn=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.tA){C>>>=r&7;r-=r&7;c.mode=27;break}for(;3>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.tA=C&1;C>>>=1;--r;switch(C&3){case 0:c.mode=14;break;case 1:n=c;if(L){l=new e.$s(512);I=new e.$s(32);for(d=0;144>d;)n.nf[d++]=
8;for(;256>d;)n.nf[d++]=9;for(;280>d;)n.nf[d++]=7;for(;288>d;)n.nf[d++]=8;J(1,n.nf,0,288,l,0,n.Iw,{Jd:9});for(d=0;32>d;)n.nf[d++]=5;J(2,n.nf,0,32,I,0,n.Iw,{Jd:5});L=!1}n.sl=l;n.$j=9;n.wo=I;n.Rq=5;c.mode=20;if(6===b){C>>>=2;r-=2;break a}break;case 2:c.mode=17;break;case 3:a.Pb="invalid block type",c.mode=30}C>>>=2;r-=2;break;case 14:C>>>=r&7;for(r-=r&7;32>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if((C&65535)!==(C>>>16^65535)){a.Pb="invalid stored block lengths";c.mode=30;break}c.length=C&65535;r=
C=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(d=c.length){d>w&&(d=w);d>z&&(d=z);if(0===d)break a;e.$n(q,h,p,d,v);w-=d;p+=d;z-=d;v+=d;c.length-=d;break}c.mode=12;break;case 17:for(;14>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.Hr=(C&31)+257;C>>>=5;r-=5;c.qv=(C&31)+1;C>>>=5;r-=5;c.sP=(C&15)+4;C>>>=4;r-=4;if(286<c.Hr||30<c.qv){a.Pb="too many length or distance symbols";c.mode=30;break}c.bi=0;c.mode=18;case 18:for(;c.bi<c.sP;){for(;3>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.nf[G[c.bi++]]=
C&7;C>>>=3;r-=3}for(;19>c.bi;)c.nf[G[c.bi++]]=0;c.sl=c.VO;c.$j=7;d={Jd:c.$j};la=J(0,c.nf,0,19,c.sl,0,c.Iw,d);c.$j=d.Jd;if(la){a.Pb="invalid code lengths set";c.mode=30;break}c.bi=0;c.mode=19;case 19:for(;c.bi<c.Hr+c.qv;){for(;;){R=c.sl[C&(1<<c.$j)-1];d=R>>>24;R&=65535;if(d<=r)break;if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if(16>R)C>>>=d,r-=d,c.nf[c.bi++]=R;else{if(16===R){for(n=d+2;r<n;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}C>>>=d;r-=d;if(0===c.bi){a.Pb="invalid bit length repeat";c.mode=30;break}n=
c.nf[c.bi-1];d=3+(C&3);C>>>=2;r-=2}else if(17===R){for(n=d+3;r<n;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}C>>>=d;r-=d;n=0;d=3+(C&7);C>>>=3;r-=3}else{for(n=d+7;r<n;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}C>>>=d;r-=d;n=0;d=11+(C&127);C>>>=7;r-=7}if(c.bi+d>c.Hr+c.qv){a.Pb="invalid bit length repeat";c.mode=30;break}for(;d--;)c.nf[c.bi++]=n}}if(30===c.mode)break;if(0===c.nf[256]){a.Pb="invalid code -- missing end-of-block";c.mode=30;break}c.$j=9;d={Jd:c.$j};la=J(1,c.nf,0,c.Hr,c.sl,0,c.Iw,d);c.$j=d.Jd;
if(la){a.Pb="invalid literal/lengths set";c.mode=30;break}c.Rq=6;c.wo=c.xM;d={Jd:c.Rq};la=J(2,c.nf,c.Hr,c.qv,c.wo,0,c.Iw,d);c.Rq=d.Jd;if(la){a.Pb="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=w&&258<=z){a.rf=v;a.ae=z;a.Wm=p;a.Zg=w;c.Hm=C;c.Jd=r;P(a,A);v=a.rf;q=a.dj;z=a.ae;p=a.Wm;h=a.input;w=a.Zg;C=c.Hm;r=c.Jd;12===c.mode&&(c.back=-1);break}for(c.back=0;;){R=c.sl[C&(1<<c.$j)-1];d=R>>>24;n=R>>>16&255;R&=65535;if(d<=r)break;if(0===w)break a;w--;C+=
h[p++]<<r;r+=8}if(n&&!(n&240)){K=d;t=n;for(fa=R;;){R=c.sl[fa+((C&(1<<K+t)-1)>>K)];d=R>>>24;n=R>>>16&255;R&=65535;if(K+d<=r)break;if(0===w)break a;w--;C+=h[p++]<<r;r+=8}C>>>=K;r-=K;c.back+=K}C>>>=d;r-=d;c.back+=d;c.length=R;if(!n){c.mode=26;break}if(n&32){c.back=-1;c.mode=12;break}if(n&64){a.Pb="invalid literal/length code";c.mode=30;break}c.ee=n&15;c.mode=22;case 22:if(c.ee){for(n=c.ee;r<n;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.length+=C&(1<<c.ee)-1;C>>>=c.ee;r-=c.ee;c.back+=c.ee}c.P5=c.length;
c.mode=23;case 23:for(;;){R=c.wo[C&(1<<c.Rq)-1];d=R>>>24;n=R>>>16&255;R&=65535;if(d<=r)break;if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if(!(n&240)){K=d;t=n;for(fa=R;;){R=c.wo[fa+((C&(1<<K+t)-1)>>K)];d=R>>>24;n=R>>>16&255;R&=65535;if(K+d<=r)break;if(0===w)break a;w--;C+=h[p++]<<r;r+=8}C>>>=K;r-=K;c.back+=K}C>>>=d;r-=d;c.back+=d;if(n&64){a.Pb="invalid distance code";c.mode=30;break}c.offset=R;c.ee=n&15;c.mode=24;case 24:if(c.ee){for(n=c.ee;r<n;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}c.offset+=C&(1<<c.ee)-
1;C>>>=c.ee;r-=c.ee;c.back+=c.ee}if(c.offset>c.Ry){a.Pb="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===z)break a;d=A-z;if(c.offset>d){d=c.offset-d;if(d>c.$l&&c.GH){a.Pb="invalid distance too far back";c.mode=30;break}d>c.Og?(d-=c.Og,n=c.Pg-d):n=c.Og-d;d>c.length&&(d=c.length);K=c.window}else K=q,n=v-c.offset,d=c.length;d>z&&(d=z);z-=d;c.length-=d;do q[v++]=K[n++];while(--d);0===c.length&&(c.mode=21);break;case 26:if(0===z)break a;q[v++]=c.length;z--;c.mode=21;break;case 27:if(c.qj){for(;32>
r;){if(0===w)break a;w--;C|=h[p++]<<r;r+=8}A-=z;a.ow+=A;c.total+=A;A&&(a.Vn=c.check=c.ud?x(c.check,q,A,v-A):y(c.check,q,A,v-A));A=z;if((c.ud?C:m(C))!==c.check){a.Pb="incorrect data check";c.mode=30;break}r=C=0}c.mode=28;case 28:if(c.qj&&c.ud){for(;32>r;){if(0===w)break a;w--;C+=h[p++]<<r;r+=8}if(C!==(c.total&4294967295)){a.Pb="incorrect length check";c.mode=30;break}r=C=0}c.mode=29;case 29:la=1;break a;case 30:la=-3;break a;case 31:return-4;default:return-2}a.rf=v;a.ae=z;a.Wm=p;a.Zg=w;c.Hm=C;c.Jd=
r;if((c.Pg||A!==a.ae&&30>c.mode&&(27>c.mode||4!==b))&&g(a,a.dj,a.rf,A-a.ae))return c.mode=31,-4;f-=a.Zg;A-=a.ae;a.zI+=f;a.ow+=A;c.total+=A;c.qj&&A&&(a.Vn=c.check=c.ud?x(c.check,q,A,a.rf-A):y(c.check,q,A,a.rf-A));a.JY=c.Jd+(c.tA?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===f&&0===A||4===b)&&0===la&&(la=-5);return la};b.g0=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};b.h0=function(a,b){var c;a&&a.state&&(c=a.state,c.qj&2&&(c.head=
b,b.done=!1))};b.j0=function(a,b){var c=b.length,e,h;if(!a||!a.state)return-2;e=a.state;if(0!==e.qj&&11!==e.mode)return-2;if(11===e.mode&&(h=y(1,b,c,0),h!==e.check))return-3;if(g(a,b,c,c))return e.mode=31,-4;e.aG=1;return 0};b.Pba="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,c){var b=a("../utils/common"),m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,
16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],q=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(a,c,g,e,p,x,P,J){var w=J.Jd,l,y,v,A,k,D,M,E,S,F,z,C,r,f=0,W,d=new b.Zs(16);k=new b.Zs(16);var n,X=0,R,t,fa;for(l=0;15>=l;l++)d[l]=0;for(y=0;y<e;y++)d[c[g+y]]++;A=w;for(v=15;1<=v&&0===
d[v];v--);A>v&&(A=v);if(!v)return p[x++]=20971520,p[x++]=20971520,J.Jd=1,0;for(w=1;w<v&&0===d[w];w++);A<w&&(A=w);for(l=D=1;15>=l;l++)if(D<<=1,D-=d[l],0>D)return-1;if(0<D&&(0===a||1!==v))return-1;k[1]=0;for(l=1;15>l;l++)k[l+1]=k[l]+d[l];for(y=0;y<e;y++)0!==c[g+y]&&(P[k[c[g+y]]++]=y);0===a?(r=n=P,W=19):1===a?(r=m,f-=257,n=h,X-=257,W=256):(r=G,n=q,W=-1);y=E=0;l=w;C=x;e=A;k=0;F=-1;M=1<<A;z=M-1;if(1===a&&852<M||2===a&&592<M)return 1;for(;;){R=l-k;P[y]<W?(t=0,fa=P[y]):P[y]>W?(t=n[X+P[y]],fa=r[f+P[y]]):
(t=96,fa=0);D=1<<l-k;w=S=1<<e;do S-=D,p[C+(E>>k)+S]=R<<24|t<<16|fa|0;while(S);for(D=1<<l-1;E&D;)D>>=1;D?(E&=D-1,E+=D):E=0;y++;if(!--d[l]){if(l===v)break;l=c[g+P[y]]}if(l>A&&(E&z)!==F){0===k&&(k=A);C+=w;e=l-k;for(D=1<<e;e+k<v;){D-=d[e+k];if(0>=D)break;e++;D<<=1}M+=1<<e;if(1===a&&852<M||2===a&&592<M)return 1;F=E&z;p[F]=A<<24|e<<16|C-x|0}}E&&(p[C+E]=l-k<<24|4194304);J.Jd=A;return 0}},{"../utils/common":1}],10:[function(a,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error",
"-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,c){c.exports=function(){this.input=null;this.zI=this.Zg=this.Wm=0;this.dj=null;this.ow=this.ae=this.rf=0;this.Pb="";this.state=null;this.JY=2;this.Vn=0}},{}],"/lib/inflate.js":[function(a,c,b){function m(a){if(!(this instanceof m))return new m(a);var b=this.options=q.assign({gX:16384,We:0,to:""},a||{});b.raw&&0<=b.We&&16>b.We&&(b.We=-b.We,b.We||(b.We=-15));!(0<=b.We&&16>b.We)||a&&a.We||
(b.We+=32);15<b.We&&48>b.We&&!(b.We&15)&&(b.We|=15);this.nF=0;this.Pb="";this.ended=!1;this.dy=[];this.Ap=new e;this.Ap.ae=0;a=G.i0(this.Ap,b.We);if(a!==A.rq)throw Error(g[a]);this.d0=new y;G.h0(this.Ap,this.d0)}function h(a,b){var c=new m(b);c.push(a,!0);if(c.nF)throw c.Pb||g[c.nF];return c.result}var G=a("./zlib/inflate"),q=a("./utils/common"),w=a("./utils/strings"),A=a("./zlib/constants"),g=a("./zlib/messages"),e=a("./zlib/zstream"),y=a("./zlib/gzheader"),x=Object.prototype.toString;m.prototype.push=
function(a,b){var c=this.Ap,e=this.options.gX,g=this.options.M9,h,m,k,p,y,J,P=!1;if(this.ended)return!1;m=b===~~b?b:!0===b?A.yx:A.gK;"string"===typeof a?c.input=w.sW(a):"[object ArrayBuffer]"===x.call(a)?c.input=new Uint8Array(a):c.input=a;c.Wm=0;c.Zg=c.input.length;do{0===c.ae&&(c.dj=new q.In(e),c.rf=0,c.ae=e);h=G.jr(c,A.gK);h===A.uV&&g&&("string"===typeof g?J=w.o4(g):"[object ArrayBuffer]"===x.call(g)?J=new Uint8Array(g):J=g,h=G.j0(this.Ap,J));h===A.tV&&!0===P&&(h=A.rq,P=!1);if(h!==A.zx&&h!==A.rq)return this.WG(h),
this.ended=!0,!1;!c.rf||0!==c.ae&&h!==A.zx&&(0!==c.Zg||m!==A.yx&&m!==A.hK)||("string"===this.options.to?(k=w.E5(c.dj,c.rf),p=c.rf-k,y=w.BW(c.dj,k),c.rf=p,c.ae=e-p,p&&q.$n(c.dj,c.dj,k,p,0),this.FP(y)):this.FP(q.vR(c.dj,c.rf)));0===c.Zg&&0===c.ae&&(P=!0)}while((0<c.Zg||0===c.ae)&&h!==A.zx);h===A.zx&&(m=A.yx);if(m===A.yx)return h=G.g0(this.Ap),this.WG(h),this.ended=!0,h===A.rq;m===A.hK&&(this.WG(A.rq),c.ae=0);return!0};m.prototype.FP=function(a){this.dy.push(a)};m.prototype.WG=function(a){a===A.rq&&
(this.result="string"===this.options.to?this.dy.join(""):q.LM(this.dy));this.dy=[];this.nF=a;this.Pb=this.Ap.Pb};b.u6=m;b.jr=h;b.Rba=function(a,b){b=b||{};b.raw=!0;return h(a,b)};b.Bea=h},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});a.jr=window.P1.jr};b4w.module.__sfx=function(a,u){function m(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(la){return I.error('Unable to initialize AudioContext: "'+la+'". The audio is disabled.'),null}if(b.createGain)return b;I.warn("deprecated WebAudio implementation");return null}I.warn("WebAudio is not supported");return null}function c(a,c,e){var f=a.ka;if("NONE"!=f.behavior){var g=f.loop,n=f.pitch;if(f.src&&(g||0<=e)){f.eE=Math.floor(5E4*Math.random());var k=W.currentTime+
c,k=Math.max(0,k);f.Fg=k;f.state=20;var l=d.pd;"POSITIONAL"==f.behavior&&"none"==l.vu&&(f.behavior="BACKGROUND_SOUND");b(a,d.pd);if("POSITIONAL"==f.behavior||"BACKGROUND_SOUND"==f.behavior){c=W.createBufferSource();c.buffer=f.src;c.playbackRate.value=n;if(g){f.xc&&f.xc.disconnect();f.Ae&&f.Ae.disconnect();c.loop=!0;c.loopStart=f.dP;if(c.loopEnd=f.EA)e=W.createBufferSource(),e.buffer=f.src,e.playbackRate.value=n,f.Ae=e,e.connect(f.ue);c.start(k);f.duration=0}else g=c.buffer?c.buffer.duration:0,e>g?
(g=k+e+f.Kf,c.loop=!0,c.start(k),c.stop(g),f.duration=e):(c.loop=!1,c.start(k),f.duration=g);c.connect(f.ue);f.xc=c;h(f);G(f);q(f)}else"BACKGROUND_MUSIC"==f.behavior&&(K.Fq(f.hE),K.Fq(f.iE),e=function(){var b=a.ka,c=b.src;c&&(c.volume=1,c.loop=b.loop,b.xc=b.xc||W.createMediaElementSource(c),b.xc.connect(b.ue),20==b.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==c?e():f.hE=K.OB(e,1E3*c),g?f.duration=0:f.duration=L(a));w(f,k)}}}function b(a,b){var c=a.ka;if(!c.ue){var d=k.W(a.v.C),e=k.ha(a.v.C);
if(S.MA){var f=W.createBiquadFilter();f.type="peaking"}else f=null;var g=W.createGain();switch(c.behavior){case "POSITIONAL":var h=W.createPanner();"string"!=typeof h.panningModel?(h.panningModel=h.EQUALPOWER,h.distanceModel=h.INVERSE_DISTANCE):(h.panningModel="equalpower",h.distanceModel=b.vu);h.setPosition(d[0],d[1],d[2]);M.copy(d,c.rG);d=F;D.Jc(e,D.mc,d);h.setOrientation(d[0],d[1],d[2]);h.refDistance=c.dist_ref;h.maxDistance=c.dist_max;h.rolloffFactor=c.attenuation;h.coneInnerAngle=c.NL;h.coneOuterAngle=
c.OL;h.coneOuterGain=c.PL;var n=W.createGain();n.gain.value=J(c);f?(h.connect(f),f.connect(n)):h.connect(n);n.connect(g);c.ue=h;if(c.Lp){var l=W.createGain();g.connect(l);l.connect(b.ue)}else l=null,g.connect(b.ue);break;case "BACKGROUND_SOUND":h=null;n=W.createGain();n.gain.value=J(c);f?(c.ue=f,f.connect(n)):c.ue=n;n.connect(g);c.Lp?(l=W.createGain(),g.connect(l),l.connect(b.ue)):(l=null,g.connect(b.ue));break;case "BACKGROUND_MUSIC":l=h=null,n=W.createGain(),n.gain.value=J(c),f?(c.ue=f,f.connect(n)):
c.ue=n,n.connect(g),g.connect(b.ue)}c.bH=h;c.Mi=f;c.br=n;c.Bm=g;c.qH=l}}function p(a){var b=a.ka;c(a,b.tM+b.uM*Math.random(),b.duration)}function h(a){var b=a.Ae||a.xc;D.Of(b.onended)&&(b.onended=function(){a.state=50})}function G(a){a.Lp&&a.qH.gain.cancelScheduledValues(a.Fg);a.Tr&&(a.xc.playbackRate.cancelScheduledValues(a.Fg),a.Ae&&a.Ae.playbackRate.cancelScheduledValues(a.Fg));a.Ew=a.Fg}function q(a){if(a.Lp||a.Tr){var b=a.qH,c=a.xc,d=c.buffer?c.buffer.duration:0;if(d){var e=a.Fg;X[0]=a.eE;for(var f=
0;5>f;){var g=a.pitch+a.Tr*D.oi(X);if(e>=a.Ew){if(a.Lp){var h=1-D.ja(a.Lp,0,1)*Math.random();b.gain.setValueAtTime(h,e)}a.Tr&&(c.playbackRate.setValueAtTime(g,e),a.Ae&&a.Ae.playbackRate.setValueAtTime(g,e));f++}e+=d/g}a.Ew=e-.001}}}function w(a,b){if(a.cl||a.Kf){var c=a.Bm;c.gain.cancelScheduledValues(b);a.cl?(c.gain.setValueAtTime(0,b),c.gain.linearRampToValueAtTime(1,b+a.cl)):c.gain.setValueAtTime(1,b);a.Kf&&!a.loop&&(c.gain.setValueAtTime(1,b+a.duration),c.gain.linearRampToValueAtTime(0,b+a.duration+
a.Kf))}}function A(a){"SPEAKER"!=a.type&&D.J("Wrong object type");var b=a.ka;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var c=b.Bm,d=W.currentTime;b.Kf&&(c.gain.setValueAtTime(c.gain.value,d),c.gain.linearRampToValueAtTime(0,d+b.Kf));"BACKGROUND_MUSIC"==b.behavior?b.src&&(K.Fq(b.hE),K.Fq(b.iE),b.iE=K.OB(function(){var b=a.ka.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Kf)):(c=b.xc,c.onended=function(){},b.duration<c.buffer.duration?b.Kf&&20==b.state?c.stop(d+b.Kf):
20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.Fg=0,b.dH=0,b.Yx=0);b.state=30}}function g(a){a=a.ka;if(20==a.state){var b=W.currentTime;a.dH=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.Fg?a.Yx=e(a,b):a.Yx=0,a.xc.onended=function(){},a.xc.stop(0),a.xc.disconnect(),G(a));a.state=40}}function e(a,b){X[0]=a.eE;for(var c=a.xc.buffer.duration,d=a.Fg,e;d<b;)e=a.pitch+a.Tr*D.oi(X),d+=c/e;return(c/e-(d-b))*e}function y(a){var b=a.ka;if(40==b.state){var c=W.currentTime;b.Fg+=c-b.dH;
if("BACKGROUND_MUSIC"==b.behavior)b.src.play();else{a=a.ka;var d=W.createBufferSource();d.loop=a.xc.loop;d.loopStart=a.xc.loopStart;d.loopEnd=a.xc.loopEnd;d.buffer=a.xc.buffer;d.playbackRate.value=a.xc.playbackRate.value;d.connect(a.ue);a.xc=d;a.Ae&&(d=W.createBufferSource(),d.loop=a.Ae.loop,d.buffer=a.Ae.buffer,d.playbackRate.value=a.Ae.playbackRate.value,d.connect(a.ue),a.Ae=d);b.Ew=c;c=b.xc;h(b);c.start(b.Fg,b.Yx);q(b)}w(b,b.Fg);b.state=20}}function x(a,b,c){var d;d=b.XY;if(0<d){var e=b.d4;if(0!=
M.dot(a.gD,a.gD)||0!=M.dot(b.cp,b.cp)){var f=M.subtract(a.rG,b.bk,F),g=M.length(f);b=M.dot(f,b.cp)/g;f=M.dot(f,a.gD)/g;g=e/d;b=Math.min(-b,g);f=Math.min(-f,g);d=(e-d*b)/(e-d*f);isFinite(d)||(d=0);d=Math.min(d,16);d=Math.max(d,.125);d=D.Rc(d,a.TO,c,.3);a.xc.playbackRate.value=d;a.TO=d}}}function P(a){a=a.ka;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function J(a){return a.muted?0:a.volume}function L(a){a=a.ka;return(a=a.src)?a.duration:0}var l=u("__config"),I=u("__print"),v=
u("__quat"),K=u("__time"),k=u("__tsr"),D=u("__util"),M=u("__vec3"),E=l.K,S=l.ka,F=new Float32Array(3),z=new Float32Array(3),C=v.create(),r=[],f=[],W=null,d=null,n=[],X=[1],R=null;a.aJ=10;a.uD=20;a.$I=30;a.$X=function(){return{md:-1,Oj:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,NL:360,OL:360,PL:1,autoplay:!1,be:!1,loop:!1,dP:0,EA:0,tM:0,uM:0,Lp:0,Tr:0,cl:0,Kf:0,Fg:0,dH:0,Yx:0,duration:0,Ew:0,eE:1,src:null,state:10,rG:new Float32Array(3),gD:new Float32Array(3),
Yy:!1,TO:1,hE:-1,iE:-1,yo:0,ue:null,xc:null,Ae:null,bH:null,Mi:null,br:null,Bm:null,qH:null,An:0}};a.Mf=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(r.push("ogg"),r.push("ogv"),r.push("oga")),""!=a.canPlayType("audio/mpeg")&&r.push("mp3"),""!=a.canPlayType("audio/mp4")&&(r.push("mp4"),r.push("m4v"),r.push("m4a")),""!=a.canPlayType("audio/webm")&&r.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(f.push("ogv"),
f.push("ogg"),f.push("oga")),""!=b.canPlayType("video/mp4")&&(f.push("m4v"),f.push("mp4")),""!=b.canPlayType("video/webm")&&f.push("webm"),""!=b.canPlayType("video/mpeg")&&f.push("mp3"))};a.iW=function(a){S.VI&&!W&&(W=m())&&I.log("%cINIT WEBAUDIO: "+W.sampleRate+"Hz","color: #00a");if(W){var b={bk:new Float32Array(3),cp:new Float32Array(3),An:0},c=W.createGain(),d=W.createGain();b.br=c;b.Bm=d;c.connect(d);d.connect(W.destination);if(a.b4w_enable_dynamic_compressor){var d=W.createDynamicsCompressor(),
e=a.b4w_dynamic_compressor_settings;d.threshold.value=e.threshold;d.knee.value=e.knee;d.ratio.value=e.ratio;d.attack.value=e.attack;d.release.value=e.release;d.connect(c);b.ju=d;b.ue=d}else b.ju=null,b.ue=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.vu="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.vu="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.vu="exponential";break;case "NONE":b.vu="none";break;default:D.J("Wrong audio distance model")}b.XY=a.audio_doppler_factor;
b.d4=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=J(b);b.yo=0}else b=null;a.pd=b};a.Y2=function(a){d=a};a.fF=function(a){a||(a="ogg");return-1<r.indexOf(a)?a:-1<r.indexOf("m4a")?"m4a":-1<r.indexOf("oga")?"oga":""};a.gF=function(a){a||(a="webm");return-1<f.indexOf(a)?a:-1<f.indexOf("m4v")?"m4v":-1<f.indexOf("webm")?"webm":""};a.Ds=function(a,b){var c=a.data,d=b.ka;if(a.data.sound){d.md=a.data.sound.uuid;d.Oj=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":d.behavior=
W?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var e;W?(window.MediaElementAudioSourceNode?e=!0:(I.warn("MediaElementAudioSourceNode not found"),e=!1),e=e&&!E.uL?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):e="NONE";d.behavior=e;break;default:D.J("Wrong speaker behavior")}c.sound||(d.behavior="NONE");d.Yy=c.b4w_enable_doppler;d.muted=c.muted;d.volume=c.volume;d.pitch=c.pitch;d.attenuation=c.attenuation;d.dist_ref=c.distance_reference;d.dist_max=c.distance_max||1E4;d.NL=c.cone_angle_inner;d.OL=c.cone_angle_outer;
d.PL=c.cone_volume_outer;d.autoplay=c.b4w_auto_play;d.be=c.b4w_cyclic_play;d.loop=c.b4w_loop;d.dP=c.b4w_loop_start;d.EA=c.b4w_loop_end;d.tM=c.b4w_delay;d.uM=c.b4w_delay_random;d.Lp=c.b4w_volume_random;d.Tr=c.b4w_pitch_random;d.cl=c.b4w_fade_in;d.Kf=c.b4w_fade_out;n.push(b)}};a.zR=function(b){"SPEAKER"!=b.type&&D.J("Wrong object type");switch(b.ka.behavior){case "POSITIONAL":return a.uD;case "BACKGROUND_SOUND":return a.uD;case "BACKGROUND_MUSIC":return a.$I;case "NONE":return a.aJ;default:D.J("Wrong speaker behavior")}};
a.t5=function(a,b){var c=a.ka;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:D.J("Wrong speaker behavior")}};a.MP=function(){var a=W.createBufferSource();a.buffer=W.createBuffer(1,22050,22050);a.connect(W.destination);a.start(0)};a.NY=function(a,b,c){W?W.decodeAudioData(a,b,c):c()};a.a4=function(a){A(a);a.ka=null;n.splice(n.indexOf(a),1)};a.Ja=function(){for(var a=0;a<n.length;a++){var b=n[a].ka;"BACKGROUND_MUSIC"==b.behavior?
(b=b.src)&&b.pause():(b.xc&&b.xc.disconnect(),b.Ae&&b.Ae.disconnect())}d&&d.pd&&(a=d.pd,a.bk[0]=0,a.bk[1]=0,a.bk[2]=0,a.cp[0]=0,a.cp[1]=0,a.cp[2]=0);d=null;n.splice(0);R=null};a.update=function(a){if(W&&n.length){for(var b=0;b<n.length;b++){var c=n[b],d=c.ka,e=d.xc,f=W.currentTime;!d.loop&&20==d.state&&d.duration&&d.Fg+d.duration<f&&("BACKGROUND_MUSIC"==d.behavior||e&&!D.Of(e.onended))&&(d.state=50);d.be&&50==d.state&&p(c);20==d.state&&3>d.Ew-f&&q(d)}R&&R.Pl.length&&(-1==R.active||a>R.qK+R.BM[R.active])&&
(b=R,-1<b.active&&A(b.Pl[b.active]),c=-1==b.active&&b.random?Math.round(Math.random()*(b.Pl.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.Pl.length-2))))%b.Pl.length:(b.active+1)%b.Pl.length,p(b.Pl[c]),b.active=c,b.qK=a)}};a.play=c;a.lB=p;a.stop=A;a.mG=function(a){return 20==a.ka.state};a.Z3=g;a.b4=y;a.eP=function(a,b){var c=a.ka,d=c.Ae;if(P(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&d){var e=W.currentTime+b;c.xc.stop(e);d.start(e,c.EA)}};a.iH=function(a,b){var c=
a.ka;c.pitch=b;!P(a)||"POSITIONAL"!=c.behavior&&"BACKGROUND_SOUND"!=c.behavior||(c.xc.playbackRate.value=b,c.Ae&&(c.Ae.playbackRate.value=b),G(c),q(c))};a.DN=function(a){return a.ka.pitch};a.be=function(a,b){a.ka.be=!!b};a.v0=function(a){return a.ka.autoplay};a.kG=function(a){return a.ka.be};a.Z0=function(a,b,c,d,e){if(a=a.pd){var f=F;f[0]=0;f[1]=0;f[2]=-1;M.transformQuat(f,c,f);z[0]=0;z[1]=1;z[2]=0;M.transformQuat(z,c,z);c=W.listener;c.setPosition(b[0],b[1],b[2]);c.setOrientation(f[0],f[1],f[2],
z[0],z[1],z[2]);if(d&&a.An!=e){if(a.xr)a.xr=!1,M.copy(b,a.bk);else for(c=a.cp,c[0]=(b[0]-a.bk[0])/d,c[1]=(b[1]-a.bk[1])/d,c[2]=(b[2]-a.bk[2])/d,M.copy(b,a.bk),b=0;b<n.length;b++)c=n[b],f=c.ka,P(c)&&"POSITIONAL"==f.behavior&&f.Yy&&x(f,a,d);a.An=e}else M.copy(b,a.bk)}};a.xr=function(){var a=d.pd;a&&(a.xr=!0)};a.c4=function(a,b,c){var e=a.ka;if(P(a)&&"POSITIONAL"==e.behavior){var f=k.Yb(a.v.C,F);a=k.Db(a.v.C,C);var g=e.bH;g.setPosition(f[0],f[1],f[2]);D.Jc(a,D.mc,z);g.setOrientation(z[0],z[1],z[2]);
e.Yy&&(a=e.rG,b&&e.An!=c?(e.KR?(M.copy(f,a),e.KR=!1):(g=e.gD,g[0]=(f[0]-a[0])/b,g[1]=(f[1]-a[1])/b,g[2]=(f[2]-a[2])/b,M.copy(f,a),x(e,d.pd,b)),e.An=c):M.copy(f,a))}};a.hI=function(a){var b=a.ka;P(a)&&"POSITIONAL"==b.behavior&&b.Yy&&(b.KR=!0)};a.PF=function(a){return a.ka.behavior};a.mL=function(){for(var a=0;a<n.length;a++)if(P(n[a]))return!0;return!1};a.t3=function(a){var b=d.pd;b&&(b.volume=a,W&&(b.br.gain.value=J(b)))};a.G_=function(){var a=d.pd;return a?a.volume:0};a.$H=function(a,b){var c=a.ka;
c.volume=b;P(a)&&(c.br.gain.value=J(c))};a.VN=function(a){return a.ka.volume};a.dc=function(a,b){a.ka.muted=!!b;P(a)&&(a.ka.br.gain.value=J(a.ka))};a.IO=function(a){return a.ka.muted};a.B1=function(a){var b=d.pd;b&&(b.muted=!!a,W&&(b.br.gain.value=J(b)))};a.C0=function(){var a=d.pd;return a?a.muted:!1};a.Iz=function(){return n};a.pause=function(){for(var a=0;a<n.length;a++)g(n[a])};a.resume=function(){for(var a=0;a<n.length;a++)y(n[a])};a.GQ=function(a,b){if(a.pd&&a.pd.ju){var c=a.pd.ju;c.threshold.value=
b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};a.iN=function(a){if(!a.pd||!a.pd.ju)return null;a=a.pd.ju;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};a.AM=function(a,b,c){if(P(a)){a=a.ka;var d=a.Bm,e=W.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(b,e+c);a.yo=c}};a.hS=function(a){if(P(a)){a=a.ka;var b=a.Bm,c=W.currentTime;b.gain.setValueAtTime(b.gain.value,
c);b.gain.linearRampToValueAtTime(1,c+a.yo);a.yo=0}};a.aZ=function(a,b){if(W){var c=d.pd,e=c.Bm,f=W.currentTime;e.gain.setValueAtTime(e.gain.value,f);e.gain.linearRampToValueAtTime(a,f+b);c.yo=b}};a.H4=function(){if(W){var a=d.pd,b=a.Bm,c=W.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.yo);a.yo=0}};a.yK=function(a,b,c){R={active:-1,qK:0,random:c,Pl:[],BM:[]};for(c=0;c<a.length;c++){var d=a[c],e=L(d);0==e?I.warn("Ignoring speaker with zero duration: "+d.name):
(A(d),d.ka.be=!1,R.Pl.push(d),R.BM.push(e+b))}};a.mN=L;a.FL=function(){if(R)for(var a=R.Pl,b=0;b<a.length;b++)A(a[b]);R=null};a.EN=function(a){return(a=a.ka)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};a.fR=function(a,b){var c=a.ka;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var d=c.bH;d&&(d.refDistance=c.dist_ref,d.maxDistance=c.dist_max,d.rolloffFactor=c.attenuation)}};a.LQ=function(a,
b){var c=a.ka;c&&c.Mi&&(c.Mi.frequency.value=b.freq,c.Mi.Q.value=b.Q,c.Mi.gain.value=b.gain)};a.qN=function(a){return(a=a.ka)&&a.Mi?{freq:a.Mi.frequency.value,Q:a.Mi.Q.value,gain:a.Mi.gain.value}:null};a.pN=function(a,b,c,d){a=a.ka;if(!a||!a.Mi)return null;a.Mi.getFrequencyResponse(b,c,d)};a.reset=function(){r.length=0;f.length=0;W=null}};b4w.module.__version=function(a){var u=new Date(2017,7,31,18,47,2),m=[17,8];a.version=function(){return m};a.Cw=function(){for(var a="",b=0;b<m.length;b++)a=1==b?a+(10>m[b]?"0"+m[b]:m[b]):a+m[b],b!=m.length-1&&(a+=".");return a};a.type=function(){return"RELEASE"};a.pM=function(){return u};a.bF=function(){var a=u.getDate(),a=10>a?"0"+String(a):String(a),b=u.getMonth()+1,b=10>b?"0"+String(b):String(b),m=String(u.getFullYear()),h=u.getHours(),h=10>h?"0"+String(h):String(h),G=u.getMinutes(),G=10>G?"0"+
String(G):String(G),q=u.getSeconds(),q=10>q?"0"+String(q):String(q);return a+"."+b+"."+m+" "+h+":"+G+":"+q};a.get_build_version=function(){return"17_08"}};b4w.module.shader_texts=function(a){a["anchors.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};a["anchors.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANCHOR_NUM",b:["0"]},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
a["color_id.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_OUTLINE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},
{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
D:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",D:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",
";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE",{a:"logic_negative_expr",o:1}],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_color_id",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_outline_intensity",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
D:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 C = normalize ( u_camera_eye_frag - h ) ; vec3 D ; vec3 E ; vec3 F ; vec4 G ; float H ; I ( C , D , E , F , G , H ) ; float J = H ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float J = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE",
"TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float L = u_alpha_factor * J ; L += ( 1.0 - step ( 0.0 , L ) ) ; J = mix ( L , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float J = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( J < 0.5 ) discard ; J = 1.0 ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! M ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["color_id.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},
{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",
c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"include",D:"scale_texcoord.glslv"},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",
";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",
";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},
{a:"include",D:"skin.glslv"},{a:"include",D:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:6},
{a:"logical_and_expr",o:3},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",
o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"txt",b:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{a:"cond",f:[{a:"if",
j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["I","(",")",";"]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};
a["debug_view.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIREFRAME_QUALITY",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DEBUG_SPHERE_DYNAMIC",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE_DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float aP ( ) { float aL = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIREFRAME_QUALITY",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{a:"elif",j:["WIREFRAME_QUALITY",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["return","aL",";","}"]}]}}]},{a:"txt",b:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float J = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; J = 1.0 ; } else discard ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; J = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; J = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; J = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; J = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; J = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; J = 1.0 ; }".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};a["debug_view.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"DEBUG_VIEW_SPECIAL_SKYDOME",b:["0"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",
c:"BILLBOARD",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","aD",";"]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"skin.glslv"},{a:"include",D:"wind_bending.glslv"},{a:"include",D:"dynamic_grass.glslv"}]}}]},{a:"txt",
b:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_VIEW_SPECIAL_SKYDOME"],l:{a:"grp",f:[{a:"txt",b:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["error.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",
D:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};a["error.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};a["grass_map.glslf"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["grass_map.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",
D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_grass_size",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","bd",";"]}]}},{a:"else",
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_size",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_color",";"]}]}}]}]}}]},{a:"txt",b:["gl_Position",
"=","f",";","}"]}]};a["halo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_sun_intensity",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"include",D:"color_util.glslf"},{a:"include",D:"halo_color.glslf"},{a:"txt",b:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};a["halo.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"include",D:"std.glsl"},
{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","be",";"]}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{a:"txt",b:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["lens_flares.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};
a["lens_flares.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"define",c:"LIGHT_INDEX",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bp = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bp ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bq = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bs = vec2 ( a_lf_bb_vertex . x / bq , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bt = 1.9 ; bs *= ( 1.0 + bt * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bs , 0.999999 , 1.0 ) ; }".split(" ")}]};
a["line.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ALPHA",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float J = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};
a["line.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bu = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bu . xyz /= bu . w ; vec4 bv = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bv . xyz /= bv . w ; float bq = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bw = ( bv - bu ) . xy ; bw . x *= bq ; float bx = M_PI / 2.0 ; mat2 by = mat2 ( cos ( bx ) , sin ( bx ) , - sin ( bx ) , cos ( bx ) ) ; bw = by * bw ; bw = normalize ( bw ) ; vec2 bz = ( u_line_width / u_height ) * vec2 ( 1.0 / bq , 1.0 ) ; gl_Position = vec4 ( bu . xy + bw . xy * bz / 2.0 , bu . z , 1.0 ) ; gl_Position *= bu . w ; }".split(" ")}]};
a["main.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},
{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",
b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",D:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",D:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",D:"pack.glslf"}]}}]},{a:"txt",b:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["GLSL1","USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",
b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",
{a:"logical_and_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_mirror_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",D:"nodes.glslf"},{a:"cond",
f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"float bA = length ( i ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bB = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"txt",b:"vec3 C = normalize ( u_camera_eye_frag - h ) ; vec3 D ; vec3 E ; vec3 F ; vec4 G ; float H ; I ( C , D , E , F , G , H ) ; vec3 aQ = D ; float J = H ; vec3 U = F ; vec4 bC = G ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",
b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bB , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bD ( aQ , bB , u_time , bC , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bA ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( J < 0.5 ) discard ; J = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"J = min ( 1.0 , J ) ;".split(" ")}]}}]}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["J","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! M ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bE ( aQ , bA , C , bB ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bE ( aQ , bA , C , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bF = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bF ) ;".split(" ")}]}}]},{a:"txt",b:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};
a["main.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",
b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"include",D:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],
l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bG",";"]},
{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bH",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",D:"dynamic_grass.glslv"},{a:"include",D:"shadow.glslv"},{a:"include",D:"skin.glslv"},
{a:"include",D:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",D:"nodes.glslv"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bI","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bI = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","N","=","u_view_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",
b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:["vec3","O","=","a_position",";"]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:14}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bJ = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","bJ",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{a:"elif",j:["NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"vec3 bK = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bJ ) ) ; vec3 C = bK - u_camera_eye ; vec3 W = cross ( C , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bJ ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{a:"logical_or_expr",o:10}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS",
"BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"O = ( bI * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bI * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bI * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , bI ) ;".split(" ")}]}}]},{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO",
"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bG = u_camera_eye - aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"bH = aw . aQ ;".split(" ")}]}},{a:"elif",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bH","=","a_color",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 bL = bI * vec4 ( aw . O , 1.0 ) ; bL . xyz = ap ( N , bL . xyz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 bL = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["i","=","bL",";"]}]}}]},{a:"txt",b:"vec4 f = u_proj_matrix * bL ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bM ( aw . O , aw . U ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bL . z / u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:["I","(",")",";"]}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["main_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},
{a:"var",c:"TEXTURE_SPEC_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"TEXTURE_COLOR0_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"TEXTURE_COLOR1_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_PLANE"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"TEXTURE_SPEC",b:["0"]},{a:"var",c:"ALPHA_AS_SPEC",b:["0"]},{a:"var",
c:"TEXTURE_STENCIL_ALPHA_MASK",b:["0"]},{a:"var",c:"TEXTURE_STENCIL_ALPHA_MASK_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",
b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"PARALLAX_LOD_DIST",b:["5.0"]},{a:"var",c:"PARALLAX_STEPS",b:["5.0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",D:"coverage.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",D:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",D:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_colormap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC","ALPHA_AS_SPEC",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_specmap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",
";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},
{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_specular_color_factor",";"]}]}}]},{a:"txt",b:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_parallax_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bG",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","bH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"shadow.glslf"}]}}]},{a:"include",D:"mirror.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"include",D:"refraction.glslf"}]}}]},{a:"include",D:"environment.glslf"},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"lighting_nodes.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",
o:3},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float bA = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bB = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["vec2","bN","=","A",";"]}]}}]},{a:"txt",b:"vec3 bO = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"bO = bO ; else bO = - bO ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( bO , k . xyz ) * k . w ; mat3 bP = mat3 ( k . xyz , W , bO ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",
o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"vec2 bQ = normalize ( _ ( N , j ) ) . st ; bQ = bQ * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( bA < PARALLAX_LOD_DIST ) { float bR = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bA ) , 0.0 , 1.0 ) ; float bS = u_parallax_scale * bR ; vec3 bT = normalize ( bG * bP ) ; float bU = 1.0 / PARALLAX_STEPS ; vec2 bV = bT . xy * bS / ( PARALLAX_STEPS * bT . z ) ; float bW = 1.0 ; float bX ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec2","bY","=","bQ",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","bY","=","bN",";"]}]}}]},{a:"txt",b:"bX = GLSL_TEXTURE ( u_normalmap0 , bY ) . a ; for ( float bZ = 1.0 ; bZ <= PARALLAX_STEPS ; bZ ++ ) { if ( bX < bW ) { bW -= bU ; bY -= bV ; bX = GLSL_TEXTURE ( u_normalmap0 , bY ) . a ; } } vec2 b_ = bY + bV ; float ca = GLSL_TEXTURE ( u_normalmap0 , b_ ) . a - ( bW + bU ) ; float cb = bX - bW ; float cc = cb / ( cb - ca ) ; bY = cc * b_ + ( 1.0 - cc ) * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"bN += bY - bQ ;".split(" ")}]}}]},{a:"txt",b:["bQ","=","bY",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"bQ += bY - bN ;".split(" ")}]}}]},{a:"txt",b:["bN","=","bY",";"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","cd",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cd = GLSL_TEXTURE ( u_normalmap0 , bQ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cd = GLSL_TEXTURE ( u_normalmap0 , bN ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 ce = cd . rgb - 0.5 ; ce = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , ce , u_normal_factor ) ; vec3 U = bP * ce ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","U",
"=","bO",";"]}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"bQ = normalize ( _ ( N , U ) ) . st ; bQ = bQ * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 C = normalize ( bG ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cf = bH ; cg ( cf ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 ch = vec4 ( cf , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","ch","=","u_diffuse_color",";"]}]}}]},{a:"txt",b:["float","ci","=","1.0",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cj = GLSL_TEXTURE ( u_colormap0 , bQ ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cj = GLSL_TEXTURE ( u_colormap0 , bN ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cg ( cj . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:["vec4","ck",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ck = GLSL_TEXTURE ( u_colormap1 , bQ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ck = GLSL_TEXTURE ( u_colormap1 , bN ) ;".split(" ")}]}}]},
{a:"txt",b:"cg ( ck . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cl = GLSL_TEXTURE ( u_stencil0 , bQ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 cl = GLSL_TEXTURE ( u_stencil0 , bN ) ;".split(" ")}]}}]},{a:"txt",b:"cj = mix ( cj , ck , cl . r ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"ch . rgb = mix ( ch . rgb , cj . rgb , u_diffuse_color_factor ) ; float L = u_alpha_factor * cj . a ; L += ( 1.0 - step ( 0.0 , L ) ) ; ch . a = mix ( L , 1.0 , u_diffuse_color . a ) ; ci = cj . a ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ch . rgb *= mix ( vec3 ( 1.0 ) , cj . rgb , u_diffuse_color_factor ) ; ch . a = cj . a ; ci = cj . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS"],l:{a:"grp",
f:[{a:"txt",b:"vec3 aQ = ch . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cm = u_diffuse_intensity * ch . rgb ; vec3 co = u_environment_energy * cn ( U ) ; vec3 cp = u_ambient * co ; vec4 bC = cq ( cm ) ; vec3 cr = u_emit * ch . rgb ; vec3 cs = u_specular_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_AS_SPEC"],l:{a:"grp",f:[{a:"txt",b:"vec3 ct = vec3 ( ci ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ct = GLSL_TEXTURE ( u_specmap0 , bQ ) . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ct = GLSL_TEXTURE ( u_specmap0 , bN ) . rgb ;".split(" ")}]}}]},{a:"txt",b:"cg ( ct . rgb ) ; cs = mix ( cs , ct , u_specular_color_factor ) ;".split(" ")}]}}]},{a:"txt",b:"float cu = u_specular_params [ 0 ] ; vec2 cv = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cw = cu * cs ; vec3 aQ ; vec3 cx ; cy ( cr , cp , cm , cw , h , U , C , cv , u_diffuse_params , bC , 0.0 , vec4 ( 0.0 ) , aQ , cx ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cz ( aQ , C , U , u_reflect_factor , N ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cz ( aQ , C , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cz ( aQ , C , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["aQ","+=","cx",";"]}]}}]},{a:"txt",b:"float J = ch . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bB , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bD ( aQ , bB , u_time , bC , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bA ) ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( J < 0.5 ) discard ; J = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float t = max ( max ( cx . r , cx . g ) , cx . b ) * u_specular_alpha ; J = ch . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["J","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],
l:{a:"grp",f:[{a:"txt",b:"if ( ! M ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 cA = - ( _ ( N , U ) ) . xy ; aQ = mix ( cB ( l , cA * u_refr_bump ) , aQ , J ) ; J = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bE ( aQ , bA , C , bB ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:"bE ( aQ , bA , C , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bF = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bF ) ;".split(" ")}]}}]},{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};a["node_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 cC ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",D:"nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",
f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:"vec3 C = - normalize ( cC ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","C",";"]}]}}]},{a:"txt",b:"vec3 D ; vec3 E ; vec3 F ; vec4 G ; float H ; I ( C , D , E , F , G , H ) ; D = max ( vec3 ( 0.0 ) , D ) ; aW ( D ) ; GLSL_OUT_FRAG_COLOR = vec4 ( D , _1_0 ) ; }".split(" ")}]};
a["particle_system.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",
b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",
b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",
":","enable"]}]}}]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",
";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},{a:"cond",
f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],
l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC",
"USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"fog.glslf"}]}}]},{a:"include",D:"math.glslv"},{a:"include",D:"particles_nodes.glslf"},{a:"txt",b:"void main ( ) { vec3 C = normalize ( u_camera_eye_frag - h ) ; vec3 D ; vec3 E ; vec3 F ; vec4 G ; float H ; I ( C , D , E , F , G , H ) ; vec3 aQ = D ; float J = H ;".split(" ")},
{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( J < 0.5 ) discard ; J = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"J = min ( 1.0 , J ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["J","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bE ( aQ , length ( i ) , C , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",
f:[{a:"txt",b:"float cD = - i . z / u_view_max_depth ; vec4 cE = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cG = cF ( cE ) ; float cH = cG - cD ; float cI = u_view_max_depth / SOFT_STRENGTH * cH ; J = J * min ( cI , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};
a["particle_system.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SOFT_PARTICLES",
b:["0"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"include",D:"std.glsl"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","cJ",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","bH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR",
"HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bG",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bf",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","j",";"]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["WORLD_SPACE",{a:"logic_negative_expr",o:1},"NODES","HALO_PARTICLES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"include",D:"particles.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",D:"particles_nodes.glslv"}]}}]},{a:"txt",b:"float cM ( vec2 cK , vec2 cL ) { return ( atan ( cL . y , cL . x ) - atan ( cK . y , cK . x ) ) ; } void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["mat4","bI","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bI = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; cN pp ; pp = cO ( ) ; float cP ; mat3 bk = cQ ( ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cR = ( bI * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cR = pp . O ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { cP = pp . bx ; bk = bj ( cR , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { cP = cM ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bx ; bk [ 0 ] = cR ; vec4 cS = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = cT ( cS , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { cP = pp . bx ; bk [ 0 ] = cR ; vec4 cU = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = cT ( cU , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { cP = pp . bx ; bk [ 0 ] = cR ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . cV * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . cV * u_p_size ) ; float cW = a_p_data [ 2 ] ; float cX = u_p_tilt * u_p_tilt_rand * ( 2.0 * cW - 1.0 ) ; float cY = ( cX + u_p_tilt ) * M_PI ; vec4 cZ = X ( TOWARD_VECTOR , cY + cP ) ; vec3 bo = ap ( bk , T ( cZ , bn ) ) ; vec4 bL = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bL ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["bf","=","cW",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 c_ = cQ ( ) ; cZ = X ( TOWARD_VECTOR , cP ) ; c_ = cT ( cZ , c_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",
o:2},{a:"logical_and_expr",o:2},"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , c_ ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",
"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"txt",b:"I ( pp . O , pp . da , pp . db , pp . dc , pp . cV , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , c_ ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["A","=","a_p_bb_vertex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cJ = pp . J ;".split(" ")}]}}]},{a:"txt",b:"bH = pp . aQ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",
o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bL",";"]}]}}]},{a:"txt",b:"gl_Position = f ; h = bo ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bG = u_camera_eye - bo ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["particle_system_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_sampler",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_diffuse_color_factor",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",
";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","cJ",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec3","bG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bf",";"]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",
b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",D:"lighting_nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"fog.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"include",D:"halo_color.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",
j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 C = normalize ( bG ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bH ; float dd = 0.9 * length ( A ) ; float de = smoothstep ( u_p_alpha_start , u_p_alpha_end , dd ) ; float J = bi . a * ( 1.0 - de ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4",
"ch","=","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"vec4 cj = GLSL_TEXTURE ( u_sampler , A ) ; cg ( cj . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ch . rgb = mix ( ch . rgb , cj . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ch . rgb *= mix ( vec3 ( 1.0 ) , cj . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"ch . a = cj . a ;".split(" ")}]}}]},{a:"txt",b:"ch . rgb *= bH ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 cm = u_diffuse_intensity * ch . rgb ; vec3 cr = u_emit * ch . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logic_negative_expr",o:1},"SKY_COLOR",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 co = u_environment_energy * cn ( vec3 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 co = u_environment_energy * cn ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cp = u_ambient * co ; float cu = u_specular_params [ 0 ] ; vec2 cv = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cw = cu * u_specular_color ; vec3 aQ ; vec3 cx ; cy ( cr , cp , cm , cw , h , U , C , cv , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cx ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ch . rgb ;".split(" ")}]}}]},{a:"txt",
b:"float J = ch . a * cJ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( J < 0.5 ) discard ; J = 1.0 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["J","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bE ( aQ , length ( i ) , C , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cD = - i . z / u_view_max_depth ; vec4 cE = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cG = cF ( cE ) ; float cH = cG - cD ; float cI = u_view_max_depth / SOFT_STRENGTH * cH ; J = J * min ( cI , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};a["proc_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 cC ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float df = 0.99 ; const float dg = 1.8 ; const int dh = 8 ; float dm ( vec3 O , vec3 bp ) { float a = dot ( bp , bp ) ; float b = 2.0 * dot ( bp , O ) ; float di = dot ( O , O ) - 1.0 ; float dj = b * b - 4.0 * a * di ; float dk = sqrt ( dj ) ; float q = ( - b - dk ) / 2.0 ; float dl = di / q ; return dl ; } float dp ( float J , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float di = 1.0 + J * J ; float dn = pow ( 1.0 + g * g - 2.0 * g * J , 1.5 ) ; dn = max ( dn , 0.00001 ) ; return ( a / b ) * ( di / dn ) ; } float du ( vec3 O , vec3 bp , float dq ) { float dr = dot ( bp , - O ) ; if ( dr < 0.0 ) { return 1.0 ; } vec3 ds = O + dr * bp ; if ( length ( ds ) < dq ) { return 0.0 ; } else if ( length ( ds ) >= dq ) { vec3 cL = normalize ( ds ) * dq - O ; float dt = acos ( dot ( normalize ( cL ) , bp ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dt * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dv ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 dw = normalize ( cC ) ; vec3 dx = u_sun_direction ; float J = dot ( dw , dx ) ; float dy = dp ( J , - 0.01 ) * u_rayleigh_brightness * dx . z ; float dz = dp ( J - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dx . z ) ; float dA = smoothstep ( 0.0 , 100.0 , dp ( J , 0.9995 ) ) * u_spot_brightness ; vec3 dB = vec3 ( 0.0 , 0.0 , df ) ; float dC = dm ( dB , dw ) ; float dD = dC / float ( dh ) ; float dE = du ( dB , dw , df - 0.3 ) ; vec3 dF = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dG = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int bZ = 0 ; bZ < dh ; bZ ++ ) { float dH = dD * float ( bZ ) ; vec3 O = dB + dw * dH ; float dI = du ( O , dx , df - 0.2 ) ; float dJ = dm ( O , dx ) ; vec3 dK = dv ( dJ , vec3 ( dg ) , u_scatter_strength ) * dI ; dF += dv ( sqrt ( dH ) , u_sky_color * dK , u_rayleigh_strength ) ; dG += dv ( dH , dK , u_mie_strength ) ; } dF = dF * dE * pow ( dC , u_rayleigh_collection_power ) / float ( dh ) ; dG = ( dG * dE * pow ( dC , u_mie_collection_power ) ) / float ( dh ) ; vec3 aQ = vec3 ( dA * dG + dz * dG + dy * dF ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
a["shadow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",
b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_VALUES",
b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",D:"depth_fetch.glslf"},{a:"include",D:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",D:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE",
"CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE",
"SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2",
"NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"include",D:"shadow.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 C = normalize ( u_camera_eye_frag - h ) ; vec3 D ; vec3 E ; vec3 F ; vec4 G ; float H ; I ( C , D , E , F , G , H ) ; float J = H ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float J = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float L = u_alpha_factor * J ; L += ( 1.0 - step ( 0.0 , L ) ) ; J = mix ( L , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float J = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( J < 0.5 ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","NO_SHADOWS",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! M ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"txt",b:"float dM = dL ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = dN ( dM ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = dO ( i . z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};
a["shadow.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",
c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"HAIR_BILLBOARD",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},
{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"include",D:"scale_texcoord.glslv"},
{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",
o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP",
"CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",
j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4",
"i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3",
"NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",D:"dynamic_grass.glslv"},{a:"include",D:"shadow.glslv"},{a:"include",D:"skin.glslv"},{a:"include",D:"wind_bending.glslv"},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO",
"USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bJ = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bJ ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=",
"a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HAIR_BILLBOARD",{a:"logic_negative_expr",o:1},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat3","dP","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","dP","=","N",";"]}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , dP , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ay","=","bJ",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 bL = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bL ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bL . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["I","(",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bM ( aw . O , aw . U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bL",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 dQ = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float dR = SHADOW_TEX_RES / 2.0 ; dQ = floor ( dQ * dR + 0.5 ) / dR - dQ ; f . xy += dQ ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["sky.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",
c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:["uniform","samplerCube","u_sky",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS",
"REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND","WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER","WO_SKYTEX",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"include",D:"sky_blending.glslf"}]}}]},{a:"txt",b:["GLSL_IN","vec3","cC",";"]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 dS ; vec3 dw = normalize ( cC ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","dT","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"dT = abs ( A . y ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dT = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{a:"txt",b:"vec3 dU = u_horizon_color ; vec3 dV = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec3 dW = vec3 ( A , 0.0 ) ; vec4 dX = GLSL_TEXTURE_CUBE ( u_sky , dw ) ; cg ( dX . rgb ) ; dS = dY ( dU , dV , dX , dT , dW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"dS = mix ( dU , dV , dT ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dS = GLSL_TEXTURE_CUBE ( u_sky , dw ) . rgb ; cg ( dS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float dZ = WATER_LEVEL - u_camera_eye_frag . z ; vec3 d_ = vec3 ( 0.0 ) ; vec3 ea = mix ( u_underwater_fog_color_density . rgb , d_ , min ( - dw . z , 1.0 ) ) ; ea *= min ( 1.0 - min ( 0.03 * dZ , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * dZ - dw . z ) , 0.0 , 1.0 ) ; dS = mix ( dS , ea , aL ) ;".split(" ")}]}}]},
{a:"txt",b:"aW ( dS ) ; GLSL_OUT_FRAG_COLOR = vec4 ( dS , 1.0 ) ; }".split(" ")}]};a["sky.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 cC ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",
o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 dw = u_sky_vp_inverse * O ; cC = dw . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};
a["skybox.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 cC ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",
";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 dw = u_cube_view_matrix * O ; cC = dw . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};a["tex_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",
b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 cC ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"include",D:"sky_blending.glslf"}]}}]},{a:"txt",b:"void main ( ) { vec3 dw = normalize ( cC ) ; vec3 dS ; float dT = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYPAPER"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"dS = GLSL_TEXTURE_CUBE ( u_sky_texture , dw ) . xyz ; cg ( dS ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dS = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"float J = acos ( dw . z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"dT = abs ( J * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dT = 1.0 - J * INV_PI ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 dU = u_horizon_color ; vec3 dV = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec4 dX = GLSL_TEXTURE_CUBE ( u_sky_texture , dw ) ; cg ( dX . rgb ) ; vec3 dW = vec3 ( cC . xy , 0.0 ) ; dS = dY ( dU , dV , dX , dT , dW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"dS = mix ( dU , dV , dT ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["dS","=","dU",";"]}]}}]}]}}]}]}}]},{a:"txt",b:"aW ( dS ) ; GLSL_OUT_FRAG_COLOR = vec4 ( dS , 1.0 ) ; }".split(" ")}]};a["water.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",
b:["0"]},{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"ABSORB",b:["6.0"]},{a:"var",c:"SSS_STRENGTH",b:["1.0"]},{a:"var",c:"SSS_WIDTH",b:["0.45"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",
c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"pack.glslf"},{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.002"]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",
f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_cam_water_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_foam",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap1_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap2_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec3 bG ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 k ; GLSL_IN vec3 eb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","ec",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","ed",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",
o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",D:"environment.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:3}],l:{a:"grp",
f:[{a:"include",D:"refraction.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",D:"fog.glslf"}]}}]},{a:"txt",b:"vec3 el ( in vec2 ee , in vec3 U , in vec3 ef , in vec3 eg , out float eh , in float ei ) { eh = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ej = ee . xy + U . xy * REFL_BUMP / m ; eh = u_reflect_factor ; vec3 ek ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ek = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ek = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"txt",b:"} else { ek = GLSL_TEXTURE ( u_plane_reflection , ej ) . rgb ; cg ( ek ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eh = u_mirror_factor ; vec3 ek = eg * GLSL_TEXTURE_CUBE ( u_mirrormap , ef ) . rgb ; cg ( ek ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"eh = u_reflect_factor ; vec3 ek = eg * vec3 ( 0.3 , 0.5 , 1.0 ) ; cg ( ek ) ;".split(" ")}]}}]},{a:"txt",b:"eh = min ( eh * ei , 1.0 ) ; return ek ; }".split(" ")},{a:"include",D:"lighting_nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bP = mat3 ( k , eb , j ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC",
"FOAM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bB = h . z - WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bB = h . z ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"vec2 bN = vec2 ( ec . x , - ec . y ) + 0.5 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 bN = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","bN","=","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 em = vec3 ( 0.0 ) ; em += GLSL_TEXTURE ( u_normalmap0 , bN * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"em += GLSL_TEXTURE ( u_normalmap0 , bN * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"em += GLSL_TEXTURE ( u_normalmap0 , bN * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"em += GLSL_TEXTURE ( u_normalmap0 , bN * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( bP * em ) , 0.3 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( bP * em ) , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 C = normalize ( bG ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ee = l . xy / l . z ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 ee = vec2 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 en = ee + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float J = u_diffuse_color . a ; vec4 cE = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cG = cF ( cE ) ; float cH = max ( cG - m , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"float ep = eo ( cG , en , ee ) ; float eq = max ( ep - m , 0.0 ) ; float er = u_view_max_depth / ABSORB * eq ; float es = min ( J * er , 1.0 ) ; J = min ( 15.0 * J * u_view_max_depth * cH , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float cI = u_view_max_depth / ABSORB * cH ; if ( u_cam_water_depth > 0.0 ) J = min ( J * cI , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float J = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["float","es","=","J",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"if ( u_cam_water_depth < 0.0 ) es = 0.0 ; vec3 et = GLSL_TEXTURE ( u_refractmap , en ) . rgb ; cg ( et ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eu = pow ( min ( ed . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ch = mix ( u_shallow_water_col , u_diffuse_color . rgb , eu ) ; eu = pow ( min ( ed . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ch = mix ( u_shore_water_col , ch , eu ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ch = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float ev = max ( 1.0 - u_view_max_depth * cH , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float ev = 1.0 - J ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float ew = max ( bB / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],
l:{a:"grp",f:[{a:"txt",b:"vec3 ex = normalize ( vec3 ( ed . rg , 0.0 ) ) ; vec3 ey = normalize ( mix ( UP_VECTOR , ex , 0.8 ) ) ; float ez = 1.25 * max ( dot ( U , ey ) - 0.2 , 0.0 ) ; ez += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; ev += ez * ( 1.0 - ed . b ) ; ew *= ( 1.0 - 0.95 * pow ( ed . b , 0.1 ) ) ;".split(" ")}]}}]},{a:"txt",b:"ev += ew ; ev = min ( u_foam_factor * ev , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 eA = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + bN * u_foam_scale ) ;".split(" ")}]}}]},
{a:"txt",b:"float cu = u_specular_params [ 0 ] ; vec2 cv = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cw = cu * u_specular_color ; vec3 co = u_environment_energy * cn ( U ) ; vec3 cp = u_ambient * co ; vec3 eg = cp + u_sun_intensity ; float eh ; vec3 ef = reflect ( - C , U ) ; vec3 eB = normalize ( ef + C ) ; float eC = 1.0 - dot ( C , eB ) ; float eD = u_fresnel_params [ 0 ] ; float eE = u_fresnel_params [ 1 ] ; float eF = eE + ( 1.0 - eE ) * pow ( eC , eD ) ; vec3 ek = el ( ee , U , ef , eg , eh , eF ) ; vec3 cm = u_diffuse_intensity * ch ; vec3 aQ ; vec3 cx ; cy ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cm , cw , h , U , C , cv , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cx ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float eG = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - C , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; eG = clamp ( SSS_STRENGTH * eG , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , eG ) ; aQ = mix ( aQ , u_shore_water_col , eG ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"aQ = mix ( et , aQ , es ) ;".split(" ")}]}}]},{a:"txt",
b:"aQ = mix ( aQ , ek , eh ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"float eH = mix ( eA . g , eA . r , max ( 4.0 * ( ev - 0.75 ) , 0.0 ) ) ; eH = mix ( eA . b , eH , max ( 2.0 * ev - 1.0 , 0.0 ) ) ; eH = mix ( 0.0 , eH , ev ) ; aQ = mix ( aQ , eg , eH ) ;".split(" ")}]}}]},{a:"txt",b:["aQ","+=","cx",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float eI = m * u_view_max_depth ; float eJ = 1.0 ; if ( u_cam_water_depth > 1.0 ) eJ = 2.0 ; bE ( aQ , eI , C , eJ ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"J = max ( J , cx . r ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["J","+=","eH",";"]}]}}]}]}},{a:"elif",j:["SHORE_SMOOTHING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["J","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , J ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME",
1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float eK = min ( min ( aO . x , aO . y ) , aO . z ) ; eK = clamp ( eK , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , eK ) ; J = mix ( 1.0 , J , eK ) ;".split(" ")}]}},{a:"elif",j:["DEBUG_WIREFRAME",2,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float eK = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) eK = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , eK ) ; J = mix ( 1.0 , J , eK ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , J ) ; }".split(" ")}]};a["water.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",b:["0"]},
{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"MAX_SHORE_DIST",b:["100.0"]},{a:"var",c:"SHORE_MAP_SIZE_X",b:["1.0"]},{a:"var",c:"SHORE_MAP_SIZE_Y",b:["1.0"]},{a:"var",c:"SHORE_MAP_CENTER_X",b:["0.0"]},{a:"var",c:"SHORE_MAP_CENTER_Y",b:["0.0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"DST_NOISE_SCALE_0",b:["0.05"]},{a:"var",c:"DST_NOISE_SCALE_1",b:["0.03"]},{a:"var",c:"DST_NOISE_FREQ_0",b:["1.3"]},{a:"var",c:"DST_NOISE_FREQ_1",b:["1.0"]},{a:"var",c:"DIR_MIN_SHR_FAC",
b:["0.4"]},{a:"var",c:"DIR_FREQ",b:["0.5"]},{a:"var",c:"DIR_NOISE_SCALE",b:["0.05"]},{a:"var",c:"DIR_NOISE_FREQ",b:["0.07"]},{a:"var",c:"DIR_MIN_NOISE_FAC",b:["0.5"]},{a:"var",c:"DST_MIN_FAC",b:["0.2"]},{a:"var",c:"WAVES_HOR_FAC",b:["5.0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WAVES_LENGTH",b:["10.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",
c:"REFRACTIVE",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"include",D:"procedural.glslf"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"DYNAMIC",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","a_tbn",";"]}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_polyindex",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec3 bG ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3",
"ec",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","ed",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shore_dist_map",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 eR ( in vec2 eL ) { vec2 eM = 0.5 + vec2 ( ( eL . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( eL . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 eN = GLSL_TEXTURE ( u_shore_dist_map , eM ) ; const vec2 eO = vec2 ( 1.0 / 255.0 , 1.0 ) ; float eP = dot ( eN . ba , eO ) ; vec2 eQ = normalize ( eN . rg * 2.0 - 1.0 ) ; return vec3 ( eQ , eP ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",
f:[{a:"define",c:"SMALL_WAVES_FAC",b:["0.2"]},{a:"txt",b:"void ff ( inout vec3 eL , in float eS , in vec3 eN ) { float eU = eT ( DST_NOISE_SCALE_0 * ( eL . xy + DST_NOISE_FREQ_0 * eS ) ) * eT ( DST_NOISE_SCALE_1 * ( eL . yx - DST_NOISE_FREQ_1 * eS ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eV = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float eP = eN . b ; float eW = sqrt ( eP ) ; float eX = max ( eP , DIR_MIN_SHR_FAC ) * sin ( eW / eV + DIR_FREQ * eS ) ; float eY = max ( eT ( DIR_NOISE_SCALE * ( eL . xy + DIR_NOISE_FREQ * eS ) ) , DIR_MIN_NOISE_FAC ) ; eX *= eY ; float eZ = WAVES_HEIGHT * mix ( eX , eU , max ( eW , DST_MIN_FAC ) ) ; vec2 eQ = eN . rg ; float e_ = WAVES_HOR_FAC * eX * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - eP ) , 0.0 ) ; vec2 fa = e_ * eQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float eZ = WAVES_HEIGHT * eU ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec2 fb = 1.0 * ( eL . xy - 0.3 * eS ) ; vec2 fc = 0.7 * ( eL . yx + 0.07 * eS ) ; float fe = fd ( fb ) . x + fd ( fc ) . x - 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"eL . xy += fa ; fe *= eP ;".split(" ")}]}}]},{a:"txt",b:"eZ += SMALL_WAVES_FAC * fe ;".split(" ")}]}}]},{a:"txt",b:"eL . z += eZ ; }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec3 O = a_position ; float fg = abs ( O . z ) ; vec2 fh = u_camera_eye . xy - mod ( u_camera_eye . xy , fg ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],
l:{a:"grp",f:[{a:"txt",b:"O . z = WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O . z = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"O . xy += fh ; vec3 bK = O ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","a_texcoord",";"]}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bK = aw . O ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"ed = eR ( bK . xy ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fi = length ( u_wind ) ; if ( fi == 0.0 ) fi = 1.0 ; float fj = u_time ; fj *= fi ;".split(" ")},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"float fk = fg ; vec3 fl = bK + vec3 ( fk , 0.0 , 0.0 ) ; vec3 fm = bK + vec3 ( 0.0 , fk , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["ec","=","bK",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fl = bK + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fm = bK + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 fn = eR ( fl . xy ) ; vec3 fo = eR ( fm . xy ) ; ff ( fl , fj , fn ) ; ff ( fm , fj , fo ) ; ff ( bK , fj , ed ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ff ( fl , fj , vec3 ( 0.0 ) ) ; ff ( fm , fj , vec3 ( 0.0 ) ) ; ff ( bK , fj , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["GENERATED_MESH","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( a_position . z < 0.0 ) { bK . z = WATER_LEVEL - 1.0 ; fl . z = bK . z ; fm . z = bK . z ; }".split(" ")}]}}]},{a:"txt",b:"vec3 fp = normalize ( fl - bK ) ; vec3 V = normalize ( fm - bK ) ; j = normalize ( cross ( fp , V ) ) ; float fq = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fq , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{a:"elif",j:["GENERATED_MESH",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{a:"elif",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"k = V ; eb = cross ( j , k ) ;".split(" ")}]}}]},{a:"txt",b:"h = bK ; bG = u_camera_eye - bK ; vec4 bL = vec4 ( ap ( u_view_tsr , bK ) , 1.0 ) ; vec4 f = u_proj_matrix * bL ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float fr = f . x ; float fs = f . y ; float ft = f . w ; l . x = ( fr + ft ) / 2.0 ; l . y = ( fs + ft ) / 2.0 ; l . z = ft ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"m = - bL . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["postprocessing/antialiasing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_FXAA_LIGHT"]},{a:"var",c:"AA_QUALITY",b:["AA_QUALITY_LOW"]},{a:"include",D:"precision_statement.glslf"},
{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_REDUCE_MIN",b:["(","1.0","/","128.0",")"]},{a:"define",c:"FXAA_REDUCE_MUL",b:["(","1.0","/","8.0",")"]},{a:"define",c:"FXAA_SPAN_MAX",b:["8.0"]},{a:"txt",b:"vec4 fv ( float x , float y ) { vec2 fu = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fu ) ; } vec4 fO ( ) { vec4 fw = fv ( - 1.0 , - 1.0 ) ; vec4 fx = fv ( 1.0 , - 1.0 ) ; vec4 fy = fv ( - 1.0 , 1.0 ) ; vec4 fz = fv ( 1.0 , 1.0 ) ; vec4 fA = fv ( 0.0 , 0.0 ) ; float fC = fB ( fA ) ; float fD = fB ( fw ) ; float fE = fB ( fx ) ; float fF = fB ( fy ) ; float fG = fB ( fz ) ; float fH = min ( fC , min ( min ( fD , fE ) , min ( fF , fG ) ) ) ; float fI = max ( fC , max ( max ( fD , fE ) , max ( fF , fG ) ) ) ; vec2 bp ; bp . x = - ( ( fD + fE ) - ( fF + fG ) ) ; bp . y = ( ( fD + fF ) - ( fE + fG ) ) ; float fJ = max ( ( fD + fE + fF + fG ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float fK = 1.0 / ( min ( abs ( bp . x ) , abs ( bp . y ) ) + fJ ) ; bp = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bp * fK ) ) * u_texel_size ; vec4 fL = 0.5 * ( GLSL_TEXTURE ( u_color , A + bp * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bp * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 fM = fL * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bp * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bp * 0.5 ) ) ; float fN = fB ( fM ) ; if ( ( fN < fH ) || ( fN > fI ) ) return fL ; else return fM ; }".split(" ")}]}},
{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["1"]},{a:"include",D:"fxaa.glslf"},{a:"cond",f:[{a:"if",j:["AA_QUALITY","AA_QUALITY_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["39"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["1.00"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.063"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0312"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_MEDIUM",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["20"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.65"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0625"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.50"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",
b:["0.0833"]}]}}]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = fO ( ) ;".split(" ")}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fP = u_texel_size ; GLSL_OUT_FRAG_COLOR = fQ ( A , u_color , fP , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},{a:"txt",
b:["}"]}]};a["postprocessing/bloom_combine.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"var",c:"BLUR_PASS_NUM",b:["BLUR_PASS_5"]},{a:"txt",b:["uniform","sampler2D","u_main",";"]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_4",";"]}]}}]},
{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 fR = GLSL_TEXTURE ( u_main , A ) ; vec4 fS = vec4 ( 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fS += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fS += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fS += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fS += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fS += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = fR + fS ; }".split(" ")}]};
a["postprocessing/coc.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"COC_TYPE",b:["COC_ALL"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_coc_fg",";"]}]}}]},{a:"txt",b:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float dM = fT ( u_depth , A , u_camera_range ) ; dM *= u_view_max_depth ; float fU = 0.0 ;".split(" ")},{a:"cond",
f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 fV = GLSL_TEXTURE ( u_coc_fg , A ) ; float fW = fV . a ;".split(" ")}]}}]},{a:"txt",b:"if ( dM < u_dof_dist ) fU = ( u_dof_dist - dM - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"else fU = ( dM - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{a:"txt",b:"fU = clamp ( fU , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"fU = max ( fU , fW ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( fU ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * fU , fU ) ;".split(" ")}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
a["postprocessing/compositing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 fX = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = fX . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float dg = fB ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( dg ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , fX . a ) ; }".split(" ")}]};
a["postprocessing/depth_pack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"pack.glslf"},{a:"include",D:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = dN ( clamp ( fT ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
a["postprocessing/dof.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DOF_TYPE",b:["DOF_SIMPLE"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"include",D:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 fY = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",
j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fU ; vec4 fZ = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 f_ = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gc = min ( fZ . rgba , f_ . rgba ) ; fU = gc . a ; if ( fU > 0.0 ) { gc = vec4 ( gc . rgb / fU , fY . a ) ; GLSL_OUT_FRAG_COLOR = mix ( fY , gc , min ( fU * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = fY ;".split(" ")}]}},{a:"elif",j:["DOF_TYPE","DOF_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float dM = fT ( u_depth , A , u_camera_range ) ; dM *= u_view_max_depth ; float gd ; if ( dM < u_dof_dist ) gd = ( u_dof_dist - dM ) / u_dof_front_end ; else gd = ( dM - u_dof_dist ) / u_dof_rear_end ; gd = clamp ( gd , 0.0 , 1.0 ) ; vec4 ge = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( fY , ge , gd ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","fY",";"]}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = fY ; }".split(" ")}]};a["postprocessing/glow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gf = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gh = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gi = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gf ; if ( gi . a != 0.0 ) { float gj = u_glow_mask_large_coeff * gi . a ; gj = clamp ( gj , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gi . rgb / gi . a , gj ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gj ) ; } if ( gh . a != 0.0 ) { float gk = u_glow_mask_small_coeff * gh . a ; gk = clamp ( gk , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gh . rgb / gh . a , gk ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gk ) ; } }".split(" ")}]};
a["postprocessing/god_rays.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"STEPS_PER_PASS",b:["10.0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"depth_fetch.glslf"},{a:"include",D:"procedural.glslf"},{a:"include",D:"pack.glslf"},{a:"txt",b:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN float gl ; GLSL_IN vec2 gm ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN vec4 gn ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cH = ( gn . xy - A ) ; float aM = length ( cH ) ; vec2 go = u_radial_blur_step * cH / aM ; float gp = aM / u_radial_blur_step ; go *= min ( gp , STEPS_PER_PASS ) / STEPS_PER_PASS ; gp = max ( gp , STEPS_PER_PASS ) ; vec2 gq = A ; float gs = 0.0 ; const int gt = int ( STEPS_PER_PASS ) ; int gu = int ( gp + 0.5 ) ; for ( int bZ = 0 ; bZ < gt ; bZ += 1 ) { if ( bZ <= gu ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:"float dM = fT ( u_input , gq , u_camera_range ) ; gs += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , dM ) , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 gv = GLSL_TEXTURE ( u_input , gq ) ; gs += cF ( gv ) ;".split(" ")}]}}]},{a:"txt",b:"} gq += go ; }".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 bN = A + gm ; float gw = fd ( vec2 ( 2.5 * ( bN . x ) , 2.5 * ( bN . y ) + 1.0 * u_time ) ) . x + 0.75 * fd ( vec2 ( 5.0 * ( bN . x ) - 0.66 * u_time , 5.0 * ( bN . y ) + 0.66 * u_time ) ) . x + 0.5 * eT ( vec2 ( 7.5 * ( bN . x ) + 0.33 * u_time , 7.5 * ( bN . y ) - 0.33 * u_time ) ) ; gw *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gl ; gs = max ( gw , gs ) ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_OUT_FRAG_COLOR = dN ( gs / STEPS_PER_PASS ) ; }".split(" ")}]};a["postprocessing/god_rays.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"math.glslv"},{a:"txt",b:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{a:"txt",b:["GLSL_IN","vec2","a_bb_vertex",";"]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT float gl ; GLSL_OUT vec2 gm ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gn ; void main ( ) { A = a_bb_vertex ; vec3 bp = normalize ( u_sun_direction ) ; gn = u_view_proj_matrix * vec4 ( bp , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"if ( u_cam_water_depth < 0.0 ) { gl = 1.0 ; vec3 gx = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 gy = T ( u_camera_quat , gx ) ; gy = normalize ( gy ) ; float gz = dot ( gy , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float gA = atan ( gy . x , gy . z ) ; gm = vec2 ( - gA , acos ( gz ) ) ; } else { gl = 0.0 ; }".split(" ")}]}}]},{a:"txt",b:"gn . xy = 0.5 * ( gn . xy / gn . w + 1.0 ) ; gn += 99999.0 * step ( gn . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/god_rays_combine.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SAFARI_CANVAS_ALPHA_HACK",b:["0"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"include",D:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gB = GLSL_TEXTURE ( u_main , A ) ; vec3 gC = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; cg ( gB . rgb ) ; float gD = cF ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 gE = gB . rgb + u_god_rays_intensity * vec3 ( gD ) * gC ; aW ( gE ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SAFARI_CANVAS_ALPHA_HACK"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gE , max ( 0.01 , gB . a ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gE , gB . a ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["postprocessing/luminance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 fR = GLSL_TEXTURE ( u_input , A ) ; float gF = dot ( fR . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( gF ) , 1.0 ) ; }".split(" ")}]};
a["postprocessing/luminance_av.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float gG = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( gG ) , 1.0 ) ; }".split(" ")}]};a["postprocessing/luminance_truncated.glslf"]={a:"grp",f:[{a:"version",
b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"var",c:"ADAPTIVE_BLOOM",b:["0"]},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_average_lum_val",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM"],l:{a:"grp",f:[{a:"txt",b:"float gG = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","gG","=","u_average_lum_val",";"]}]}}]},{a:"txt",b:"float gH = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float gI = gH / gG ; float gJ = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( gJ , gJ + 1.2 , gI ) ; }".split(" ")}]};a["postprocessing/motion_blur.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float gK = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gL = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 gM = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( gL - gM ) > u_motion_blur_decay_threshold ) { vec4 gN = ( 1.0 - u_motion_blur_exp ) * gL + u_motion_blur_exp * gM ; vec4 gO = gN - gM ; vec4 gP = gL - gM ; vec4 cH = min ( max ( abs ( gO ) , vec4 ( gK ) ) , abs ( gP ) ) * sign ( gO ) ; GLSL_OUT_FRAG_COLOR = gM + cH ; } else { GLSL_OUT_FRAG_COLOR = gL ; } }".split(" ")}]};
a["postprocessing/outline.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gQ = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = gQ ; if ( u_draw_outline != 0.0 ) { vec4 gR = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 gS = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float gT = gS . a - gR . a ; if ( gT != 0.0 ) { float gU = smoothstep ( 0.0 , 1.0 , gS . a ) ; if ( gR . a == 0.0 ) { vec3 gV = u_outline_color ; aW ( gV ) ; vec4 gW = vec4 ( clamp ( gV , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( gQ , gW , gU ) ; } } } }".split(" ")}]};
a["postprocessing/performance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int bZ = 0 ; bZ < 10 ; bZ ++ ) { vec2 gX = vec2 ( fract ( A * vec2 ( bZ ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , gX ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["postprocessing/postprocessing.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"POST_EFFECT",b:["POST_EFFECT_NONE"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{a:"elif",j:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 di = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( di . r + di . g + di . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ff = vec2 ( 0.0 , 0.0 ) ; vec2 cH = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ff = vec2 ( 0.0 , 0.0 ) ; vec2 cH = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ff = vec2 ( 0.0 , 0.0 ) ; vec2 cH = u_texel_size ; vec4 aQ ; vec4 gY ; vec4 gZ ; float fU ; float g_ = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; gY = aQ ; gZ = aQ ; fU = aQ . a ; cH = fU * cH ; for ( int bZ = 0 ; bZ < 12 ; bZ += 2 ) { ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; gY += aQ ; gZ = max ( gZ , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; gY += aQ ; gZ = max ( gZ , aQ ) ; } gY /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( gY , gZ , g_ ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ff = vec2 ( 0.0 , 0.0 ) ; vec2 cH = u_texel_size ; vec4 aQ ; vec4 gY ; vec4 gZ ; aQ = GLSL_TEXTURE ( u_color , A ) ; gZ = max ( gZ , aQ ) ; gY = aQ ; gY . a = aQ . a * 0.2270270270 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.1945945946 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.1216216216 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.0540540541 ; ff += cH ; aQ = GLSL_TEXTURE ( u_color , A + ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - ff ) ; gZ . a = max ( gZ . a , aQ . a ) ; gY . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( gY , gZ , 0.5 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_EXTEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 cH = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cH ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cH ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{a:"elif",j:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float ha = u_delta [ 0 ] ; float hb = u_delta [ 1 ] ; float hc = 1.0 / 3.0 ; float hd = 0.5 ; vec2 he = vec2 ( hc , hd ) ; if ( u_tex_number == 0 ) { vec2 bN = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * he + vec2 ( 2.0 * hc , hd ) ; bN [ 0 ] = max ( bN [ 0 ] , 2.0 * hc + ha ) ; bN [ 1 ] = max ( bN [ 1 ] , hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( bN [ 0 ] , hd - bN [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 bN = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * he + vec2 ( 0.0 , hd ) ; bN [ 0 ] = max ( bN [ 0 ] , ha ) ; bN [ 1 ] = min ( bN [ 1 ] , hd - hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hc - bN [ 0 ] , bN [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 bN = A * he + vec2 ( 2.0 * hc , hd ) ; bN [ 0 ] = max ( bN [ 0 ] , 2.0 * hc + ha ) ; bN [ 1 ] = min ( bN [ 1 ] , 1.0 - hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( bN [ 0 ] , 1.5 - bN [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 bN = A * he + vec2 ( hc , 0.0 ) ; bN [ 0 ] = max ( bN [ 0 ] , hc + ha ) ; bN [ 0 ] = min ( bN [ 0 ] , 2.0 * hc - ha ) ; bN [ 1 ] = min ( bN [ 1 ] , hd - hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - bN [ 0 ] , bN [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 bN = A * he + vec2 ( hc , hd ) ; bN [ 0 ] = max ( bN [ 0 ] , hc + ha ) ; bN [ 0 ] = min ( bN [ 0 ] , 2.0 * hc - ha ) ; bN [ 1 ] = min ( bN [ 1 ] , 1.0 - hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( bN [ 0 ] , 3.0 * hd - bN [ 1 ] ) ) ; } else { vec2 bN = A * he + vec2 ( 0.0 , hd ) ; bN [ 0 ] = max ( bN [ 0 ] , ha ) ; bN [ 1 ] = min ( bN [ 1 ] , 1.0 - hb ) ; bN [ 1 ] = max ( bN [ 1 ] , hd + hb ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hc - bN [ 0 ] , bN [ 1 ] ) ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/postprocessing.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"std.glsl"},{a:"txt",b:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/smaa.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"SMAA_REPROJECTION",b:["0"]},{a:"var",c:"SMAA_PREDICATION",
b:["0"]},{a:"var",c:"SMAA_DISABLE_CORNER_DETECTION",b:["0"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_ULTRA"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"pack.glslf"},{a:"txt",b:["uniform","sampler2D","u_color",";"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_prev",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","sampler2D","u_blend",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2},"SMAA_PREDICATION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","hf",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 hg ; GLSL_IN vec4 hh ; GLSL_IN vec4 hi ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","hj",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4",
"GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.15"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",
b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.05"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",
b:["16"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_DEPTH_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_DEPTH_THRESHOLD",b:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS_DIAG",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_CORNER_ROUNDING",l:{a:"grp",
f:[{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",l:{a:"grp",f:[{a:"define",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_THRESHOLD",b:["0.01"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_SCALE",l:{a:"grp",
f:[{a:"define",c:"SMAA_PREDICATION_SCALE",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_STRENGTH",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_STRENGTH",b:["0.4"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION_WEIGHT_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION_WEIGHT_SCALE",b:["30.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",
c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE",b:["16"]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE_DIAG",b:["20"]},{a:"define",c:"SMAA_AREATEX_PIXEL_SIZE",b:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},{a:"define",c:"SMAA_AREATEX_SUBTEX_SIZE",b:["(","1.0","/","7.0",")"]},{a:"define",c:"SMAA_SEARCHTEX_SIZE",b:"vec2 ( 66.0 , 33.0 )".split(" ")},{a:"define",c:"SMAA_SEARCHTEX_PACKED_SIZE",b:"vec2 ( 64.0 , 16.0 )".split(" ")},{a:"define",c:"SMAA_CORNER_ROUNDING_NORM",
b:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 hn ( vec2 bN , sampler2D hk ) { float p = GLSL_TEXTURE ( hk , bN ) . r ; float hl = GLSL_TEXTURE ( hk , hg . xy ) . r ; float hm = GLSL_TEXTURE ( hk , hg . zw ) . r ; return vec3 ( p , hl , hm ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 hr ( vec2 bN , sampler2D ho ) { vec3 hp = hn ( bN , ho ) ; vec2 cH = abs ( hp . xx - hp . yz ) ; vec2 hq = step ( SMAA_PREDICATION_THRESHOLD , cH ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * hq ) ; }".split(" ")}]}}]},
{a:"txt",b:"void hv ( bvec2 hs , inout vec2 ht , vec2 hu ) { if ( hs . x ) ht . x = hu . x ; if ( hs . y ) ht . y = hu . y ; } void hv ( bvec4 hs , inout vec4 ht , vec4 hu ) { hv ( hs . xy , ht . xy , hu . xy ) ; hv ( hs . zw , ht . zw , hu . zw ) ; } vec2 hw ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 hw ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec2 hJ ( vec2 bN , sampler2D hx".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ho"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:"vec2 hy = hr ( bN , ho ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 hy = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 hz = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float hA = dot ( GLSL_TEXTURE ( hx , bN ) . rgb , hz ) ; float hB = dot ( GLSL_TEXTURE ( hx , hg . xy ) . rgb , hz ) ; float hC = dot ( GLSL_TEXTURE ( hx , hg . zw ) . rgb , hz ) ; vec4 cH ; cH . xy = abs ( hA - vec2 ( hB , hC ) ) ; vec2 hq = step ( hy , cH . xy ) ; if ( dot ( hq , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float hD = dot ( GLSL_TEXTURE ( hx , hh . xy ) . rgb , hz ) ; float hE = dot ( GLSL_TEXTURE ( hx , hh . zw ) . rgb , hz ) ; cH . zw = abs ( hA - vec2 ( hD , hE ) ) ; vec2 hF = max ( cH . xy , cH . zw ) ; float hG = dot ( GLSL_TEXTURE ( hx , hi . xy ) . rgb , hz ) ; float hH = dot ( GLSL_TEXTURE ( hx , hi . zw ) . rgb , hz ) ; cH . zw = abs ( vec2 ( hB , hC ) - vec2 ( hG , hH ) ) ; hF = max ( hF . xy , cH . zw ) ; float hI = max ( hF . x , hF . y ) ; hq . xy *= step ( hI , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cH . xy ) ; return hq ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 hL ( vec2 hK ) { hK . r = hK . r * abs ( 5.0 * hK . r - 5.0 * 0.75 ) ; return hw ( hK ) ; } vec4 hL ( vec4 hK ) { hK . rb = hK . rb * abs ( 5.0 * hK . rb - 5.0 * 0.75 ) ; return hw ( hK ) ; } vec2 hN ( sampler2D hM , vec2 bN , vec2 bp , out vec2 hK ) { vec4 fu = vec4 ( bN , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS_DIAG ; bZ ++ ) { if ( fu . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fu . w > 0.9 ) { fu . xyz += t * vec3 ( bp , 1.0 ) ; hK = GLSL_TEXTURE ( hM , fu . xy , 0.0 ) . rg ; fu . w = dot ( hK , vec2 ( 0.5 , 0.5 ) ) ; } } return fu . zw ; } vec2 hO ( sampler2D hM , vec2 bN , vec2 bp , out vec2 hK ) { vec4 fu = vec4 ( bN , - 1.0 , 1.0 ) ; fu . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS_DIAG ; bZ ++ ) { if ( fu . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fu . w > 0.9 ) { fu . xyz = t * vec3 ( bp , 1.0 ) + fu . xyz ; hK = GLSL_TEXTURE ( hM , fu . xy , 0.0 ) . rg ; hK = hL ( hK ) ; fu . w = dot ( hK , vec2 ( 0.5 , 0.5 ) ) ; } } return fu . zw ; } vec2 hQ ( sampler2D hP , vec2 aM , vec2 hK , float ff ) { vec2 bN = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * hK + aM ; bN = SMAA_AREATEX_PIXEL_SIZE * bN + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; bN . x += 0.5 ; bN . y += SMAA_AREATEX_SUBTEX_SIZE * ff ; return GLSL_TEXTURE ( hP , bN , 0.0 ) . rg ; } vec2 hV ( sampler2D hM , sampler2D hP , vec2 bN , vec2 hK , vec4 hR ) { vec2 hz = vec2 ( 0.0 , 0.0 ) ; vec4 dn ; vec2 hS ; if ( hK . r > 0.0 ) { dn . xz = hN ( hM , bN , vec2 ( - 1.0 , 1.0 ) , hS ) ; dn . x += float ( hS . y > 0.9 ) ; } else dn . xz = vec2 ( 0.0 , 0.0 ) ; dn . yw = hN ( hM , bN , vec2 ( 1.0 , - 1.0 ) , hS ) ; if ( dn . x + dn . y > 2.0 ) { vec4 hT = vec4 ( - dn . x + 0.25 , dn . x , dn . y , - dn . y - 0.25 ) * u_texel_size . xyxy + bN . xyxy ; vec4 di ; di . xy = GLSL_TEXTURE ( hM , hT . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; di . zw = GLSL_TEXTURE ( hM , hT . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; di . yxwz = hL ( di . xyzw ) ; vec2 hU = vec2 ( 2.0 , 2.0 ) * di . xz + di . yw ; hv ( bvec2 ( step ( 0.9 , dn . zw ) ) , hU , vec2 ( 0.0 , 0.0 ) ) ; hz += hQ ( hP , dn . xy , hU , hR . z ) ; } dn . xz = hO ( hM , bN , vec2 ( - 1 , - 1 ) , hS ) ; if ( GLSL_TEXTURE ( hM , bN + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dn . yw = hO ( hM , bN , vec2 ( 1 , 1 ) , hS ) ; dn . y += float ( hS . y > 0.9 ) ; } else dn . yw = vec2 ( 0.0 , 0.0 ) ; if ( dn . x + dn . y > 2.0 ) { vec4 hT = vec4 ( - dn . x , - dn . x , dn . y , dn . y ) * u_texel_size . xyxy + bN . xyxy ; vec4 di ; di . x = GLSL_TEXTURE ( hM , hT . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; di . y = GLSL_TEXTURE ( hM , hT . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; di . zw = GLSL_TEXTURE ( hM , hT . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 hU = vec2 ( 2.0 , 2.0 ) * di . xz + di . yw ; hv ( bvec2 ( step ( 0.9 , dn . zw ) ) , hU , vec2 ( 0 , 0 ) ) ; hz += hQ ( hP , dn . xy , hU , hR . w ) . gr ; } return hz ; }".split(" ")}]}}]},
{a:"txt",b:"float hY ( sampler2D hW , vec2 hK , float ff ) { vec2 he = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 hX = SMAA_SEARCHTEX_SIZE * vec2 ( ff , 1.0 ) ; he += vec2 ( - 1.0 , 1.0 ) ; hX += vec2 ( 0.5 , - 0.5 ) ; he *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; hX *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( hW , he * hK + hX , 0.0 ) . r ; } float hZ ( sampler2D hM , sampler2D hW , vec2 bN , float hS ) { vec2 hK = vec2 ( 0.0 , 1.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS ; bZ ++ ) { if ( bN . x > hS && hK . g > 0.8281 && hK . r == 0.0 ) { hK = GLSL_TEXTURE ( hM , bN , 0.0 ) . rg ; bN = - vec2 ( 2.0 , 0.0 ) * u_texel_size + bN ; } } float ff = - ( 255.0 / 127.0 ) * hY ( hW , hK , 0.0 ) + 3.25 ; return u_texel_size . x * ff + bN . x ; } float h_ ( sampler2D hM , sampler2D hW , vec2 bN , float hS ) { vec2 hK = vec2 ( 0.0 , 1.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS ; bZ ++ ) { if ( bN . x < hS && hK . g > 0.8281 && hK . r == 0.0 ) { hK = GLSL_TEXTURE ( hM , bN , 0.0 ) . rg ; bN = vec2 ( 2.0 , 0.0 ) * u_texel_size + bN ; } } float ff = - ( 255.0 / 127.0 ) * hY ( hW , hK , 0.5 ) + 3.25 ; return - u_texel_size . x * ff + bN . x ; } float ia ( sampler2D hM , sampler2D hW , vec2 bN , float hS ) { vec2 hK = vec2 ( 1.0 , 0.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS ; bZ ++ ) { if ( bN . y > hS && hK . r > 0.8281 && hK . g == 0.0 ) { hK = GLSL_TEXTURE ( hM , bN , 0.0 ) . rg ; bN = - vec2 ( 0.0 , 2.0 ) * u_texel_size + bN ; } } float ff = - ( 255.0 / 127.0 ) * hY ( hW , hK . gr , 0.0 ) + 3.25 ; return u_texel_size . y * ff + bN . y ; } float ib ( sampler2D hM , sampler2D hW , vec2 bN , float hS ) { vec2 hK = vec2 ( 1.0 , 0.0 ) ; for ( int bZ = 0 ; bZ < SMAA_MAX_SEARCH_STEPS ; bZ ++ ) { if ( bN . y < hS && hK . r > 0.8281 && hK . g == 0.0 ) { hK = GLSL_TEXTURE ( hM , bN , 0.0 ) . rg ; bN = vec2 ( 0.0 , 2.0 ) * u_texel_size + bN ; } } float ff = - ( 255.0 / 127.0 ) * hY ( hW , hK . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * ff + bN . y ; } vec2 ie ( sampler2D hP , vec2 aM , float ic , float id , float ff ) { vec2 bN = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * hw ( 4.0 * vec2 ( ic , id ) ) + aM ; bN = SMAA_AREATEX_PIXEL_SIZE * bN + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; bN . y = SMAA_AREATEX_SUBTEX_SIZE * ff + bN . y ; return GLSL_TEXTURE ( hP , bN , 0.0 ) . rg ; } void ii ( sampler2D hM , inout vec2 hz , vec4 bN , vec2 dn ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 ig = step ( dn . xy , dn . yx ) ; vec2 ih = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ig ; ih /= ig . x + ig . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= ih . x * GLSL_TEXTURE ( hM , bN . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= ih . y * GLSL_TEXTURE ( hM , bN . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= ih . x * GLSL_TEXTURE ( hM , bN . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= ih . y * GLSL_TEXTURE ( hM , bN . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; hz *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:"} void ij ( sampler2D hM , inout vec2 hz , vec4 bN , vec2 dn ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 ig = step ( dn . xy , dn . yx ) ; vec2 ih = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * ig ; ih /= ig . x + ig . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= ih . x * GLSL_TEXTURE ( hM , bN . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= ih . y * GLSL_TEXTURE ( hM , bN . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= ih . x * GLSL_TEXTURE ( hM , bN . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= ih . y * GLSL_TEXTURE ( hM , bN . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; hz *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 im ( vec2 bN , vec2 ik , sampler2D hM , sampler2D hP , sampler2D hW , vec4 hR ) { vec4 hz = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 hK = GLSL_TEXTURE ( hM , bN ) . rg ; if ( hK . g > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"hz . rg = hV ( hM , hP , bN , hK , hR ) ; if ( hz . r == - hz . g ) {".split(" ")}]}}]},
{a:"txt",b:"vec2 dn ; vec3 hT ; hT . x = hZ ( hM , hW , hg . xy , hi . x ) ; hT . y = hh . y ; dn . x = hT . x ; float ic = GLSL_TEXTURE ( hM , hT . xy , 0.0 ) . r ; hT . z = h_ ( hM , hW , hg . zw , hi . y ) ; dn . y = hT . z ; dn = abs ( hw ( dn / u_texel_size . xx - ik . xx ) ) ; vec2 il = sqrt ( dn ) ; float id = GLSL_TEXTURE ( hM , hT . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; hz . rg = ie ( hP , il , ic , id , hR . y ) ; hT . y = bN . y ; ii ( hM , hz . rg , hT . xyzy , dn ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"} else hK . r = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"} if ( hK . r > 0.0 ) { vec2 dn ; vec3 hT ; hT . y = ia ( hM , hW , hh . xy , hi . z ) ; hT . x = hg . x ; dn . x = hT . y ; float ic = GLSL_TEXTURE ( hM , hT . xy , 0.0 ) . g ; hT . z = ib ( hM , hW , hh . zw , hi . w ) ; dn . y = hT . z ; dn = abs ( hw ( dn / u_texel_size . yy - ik . yy ) ) ; vec2 il = sqrt ( dn ) ; float id = GLSL_TEXTURE ( hM , hT . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; hz . ba = ie ( hP , il , ic , id , hR . x ) ; hT . x = bN . x ; ij ( hM , hz . ba , hT . xyxz , dn ) ; } return hz ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 iw ( vec2 bN , sampler2D hx , sampler2D io".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ip"]}]}}]},{a:"txt",b:") { vec4 a ; a . x = GLSL_TEXTURE ( io , hf . xy ) . a ; a . y = GLSL_TEXTURE ( io , hf . zw ) . g ; a . wz = GLSL_TEXTURE ( io , bN ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( hx , bN , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 iq = GLSL_TEXTURE ( ip , A ) ; vec2 da = 2.0 * ir ( iq ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( da ) ) ;".split(" ")}]}}]},{a:"txt",b:"return aQ ; } else { bool bX = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 is = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 it = a . yw ; hv ( bvec4 ( bX , bX , bX , bX ) , is , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; hv ( bvec2 ( bX , bX ) , it , a . xz ) ; it /= dot ( it , vec2 ( 1.0 , 1.0 ) ) ; vec4 iu = is * vec4 ( u_texel_size , - u_texel_size ) + bN . xyxy ; vec4 aQ = it . x * GLSL_TEXTURE ( hx , iu . xy , 0.0 ) ; aQ += it . y * GLSL_TEXTURE ( hx , iu . zw , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 iq = GLSL_TEXTURE ( ip , iu . xy ) ; vec2 iv = 2.0 * ir ( iq ) - 1.0 ; vec2 da = it . x * iv ; iq = GLSL_TEXTURE ( ip , iu . zw ) ; iv = 2.0 * ir ( iq ) - 1.0 ; da += it . y * iv ; aQ . a = sqrt ( 2.0 * length ( da ) ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}","}"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 iB ( vec2 bN , sampler2D ix , sampler2D iy".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ip"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 iq = GLSL_TEXTURE ( ip , A ) ; vec2 da ; da = 2.0 * ir ( iq ) - 1.0 ; vec4 iz = GLSL_TEXTURE ( ix , bN ) ; vec4 iA = GLSL_TEXTURE ( iy , bN - da ) ; float cH = abs ( iz . a * iz . a - iA . a * iA . a ) / 2.0 ; float cc = 0.5 * clamp ( 1.0 - sqrt ( cH ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( iz , iA , cc ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 iz = GLSL_TEXTURE ( ix , bN ) ; vec4 iA = GLSL_TEXTURE ( iy , bN ) ; return mix ( iz , iA , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( hJ ( A , u_color".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","u_predication_tex"]}]}}]},{a:"txt",b:") , 0.0 , 0.0 ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = im ( A , hj , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = iw ( A , u_color , u_blend".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",";"]}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( iB ( A , u_color , u_color_prev".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};a["postprocessing/smaa.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",
b:["highp"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_LOW"]},{a:"include",D:"std.glsl"},{a:"txt",b:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","hf",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec4 hg ; GLSL_OUT vec4 hh ; GLSL_OUT vec4 hi ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","hj",";"]}]}}]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["4"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["8"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["32"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void iC ( vec2 bN ) { hg = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + bN . xyxy ; hh = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + bN . xyxy ; hi = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + bN . xyxy ; }".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void iD ( vec2 bN , out vec2 ik ) { ik = bN / u_texel_size ; hg = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + bN . xyxy ; hh = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + bN . xyxy ; hi = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hg . xz , hh . yw ) ; }".split(" ")}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void iE ( vec2 bN ) { hf = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + bN . xyxy ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["iC","(","A",")",";"]}]}},{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"iD ( A , hj ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["iE","(","A",")",";"]}]}}]},{a:"txt",b:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/ssao.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_WHITE",b:["0"]},{a:"var",c:"SSAO_QUALITY",b:["SSAO_QUALITY_8"]},{a:"var",c:"SSAO_HEMISPHERE",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",
";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float iF ( in vec2 fu ) { return fT ( u_depth , fu , u_camera_range ) ; } void main ( ) { vec3 fX = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_WHITE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( fX , 1.0 ) ; return ;".split(" ")}]}}]},{a:"txt",b:"vec3 iG = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float dM = iF ( A ) ; float iH = dM * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_QUALITY","SSAO_QUALITY_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float iI = 8.0 ; const int iJ = 1 ;".split(" ")}]}},
{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float iI = 16.0 ; const int iJ = 2 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_24",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float iI = 24.0 ; const int iJ = 3 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_32",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float iI = 32.0 ; const int iJ = 4 ;".split(" ")}]}}]},{a:"txt",b:"float iK = u_ssao_radius_increase * 0.001 ; const float iL = 1.0 + 2.4 / iI ; float iM = 0.0 ; for ( int bZ = 0 ; bZ < iJ ; bZ ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 iN = reflect ( normalize ( vec3 ( x , y , z ) ) , iG ) * ( iK *= iL ) ; vec3 iO = vec3 ( A , iH ) ; iO += vec3 ( iN . xy , iN . z * iH * 2.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"iO . z -= 1.4 * ( iO . z - iH ) * step ( iH , iO . z ) ;".split(" ")}]}}]},{a:"txt",b:"float iP = iF ( iO . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float iQ = clamp ( ( iH - iP ) / iP , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"iM += mix ( 1.0 , iQ , step ( iP , iO . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"iM += mix ( step ( iO . z , iP ) , 0.5 , iQ ) ;".split(" ")}]}}]},
{a:"txt",b:"} iM = iM / iI ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"iM = clamp ( iM * iM + 0.6 * iM , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"iM = clamp ( iM * iM + iM , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"float iR = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * dM ) ; iM = mix ( 1.0 , iM , iR ) ; GLSL_OUT_FRAG_COLOR = vec4 ( fX , iM ) ; }".split(" ")}]};a["postprocessing/ssao_blur.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},
{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_BLUR_DEPTH",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"include",D:"depth_fetch.glslf"}]}}]},{a:"txt",b:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",
b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float iF ( in vec2 fu ) { return fT ( u_depth , fu , u_camera_range ) ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { float iS = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float iT = iF ( A ) ; float cc = 0.0 ; float iU = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{a:"txt",b:"vec2 iV = vec2 ( - 2.0 ) ; for ( int bZ = 0 ; bZ < 4 ; ++ bZ ) { for ( int iW = 0 ; iW < 4 ; ++ iW ) { vec2 ff = ( iV + vec2 ( float ( bZ ) , float ( iW ) ) ) * u_texel_size ; float iX = GLSL_TEXTURE ( u_ssao_mask , A + ff ) . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float iY = iF ( A + ff ) ; float iZ = 1.0 - clamp ( abs ( iY - iT ) * iU , 0.0 , 1.0 ) ; iS += iX * iZ ; cc += iZ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["iS","+=","iX",";"]}]}}]},{a:"txt",b:["}","}"]},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , iS / cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , iS / 16.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/stereo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANAGLYPH",b:["0"]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"DISTOR_SCALE",b:["0.8"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",
j:["ANAGLYPH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void ji ( vec2 bN , vec2 ao , float cV , sampler2D i_ ) { vec2 ja = ( bN - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / cV ; float jb = ja . x * ja . x + ja . y * ja . y ; vec2 jc = ja * ( 1.0 + u_distortion_params [ 0 ] * jb + u_distortion_params [ 1 ] * jb * jb ) ; vec2 jd = jc * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 je = jd * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jb * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jf = jd + 0.5 ; vec2 jg = jd * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jb * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jg , 0.0 , 1.0 ) != jg ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jh = GLSL_TEXTURE ( i_ , jf ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( i_ , je ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jh . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( i_ , jg ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jh . w ; } } else { jd += 0.5 ; if ( clamp ( jd , 0.0 , 1.0 ) != jd ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( i_ , jd ) ; } } }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ANAGLYPH"],l:{a:"grp",f:[{a:"txt",b:"vec4 jj = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jk = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 jl = vec3 ( jj [ 0 ] , jj [ 1 ] , jj [ 2 ] ) ; cg ( jl ) ; vec3 jm = vec3 ( jk [ 0 ] , jk [ 1 ] , jk [ 2 ] ) ; cg ( jm ) ; mat3 jn = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 jo = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( jn * jl , 0.0 , 1.0 ) + clamp ( jo * jm , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jj [ 3 ] + jk [ 3 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 bN = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float cV = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ji ( bN , ao , cV , u_sampler_left ) ; } else { vec2 bN = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float cV = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; ji ( bN , ao , cV , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 bN = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , bN ) ; } else { vec2 bN = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , bN ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/velocity.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",D:"precision_statement.glslf"},{a:"include",D:"std.glsl"},{a:"include",D:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float dM = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 jp = vec4 ( A * 2.0 - 1.0 , 2.0 * dM - 1.0 , 1.0 ) ; vec4 cm = u_view_proj_inverse * jp ; vec4 jq = cm / cm . w ; vec4 jr = u_view_proj_prev * jq ; jr /= jr . w ; vec2 da = ( jp . xy - jr . xy ) / 4.0 + 0.5 ; da = clamp ( da , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = dN ( da ) ; }".split(" ")}]};
a["include/blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"BLENDING_GLSLF",b:[""]},{a:"txt",b:"vec3 jt ( vec3 rgb ) { vec4 js = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , js . wz ) , vec4 ( rgb . gb , js . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dn = q . x - min ( q . w , q . y ) ; float hK = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dn + hK ) ) , dn / ( q . x + hK ) , q . x ) ; } vec3 jv ( vec3 ju ) { vec4 js = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( ju . r , ju . r , ju . r ) + js . xyz ) * 6.0 - js . www ) ; return ju . b * mix ( js . xxx , clamp ( p - js . xxx , _0_0 , _1_0 ) , ju . g ) ; } vec3 jz ( vec3 jw , vec3 jx , float jy ) { return mix ( jw , jx , jy ) ; } vec3 jA ( vec3 jw , vec3 jx , float jy ) { return jy * jw + jx ; } vec3 jB ( vec3 jw , vec3 jx , float jy ) { return jx - jy * jw ; } vec3 jD ( vec3 jw , vec3 jx , float jy ) { float jC = _1_0 - jy ; return ( vec3 ( jC ) + jy * jw ) * jx ; } vec3 jE ( vec3 jw , vec3 jx , float jy ) { vec3 jC = vec3 ( _1_0 - jy ) ; return vec3 ( _1_0 ) - ( jC + jy * ( vec3 ( _1_0 ) - jw ) ) * ( vec3 ( _1_0 ) - jx ) ; } vec3 jF ( vec3 jw , vec3 jx , float jy ) { vec3 jC = vec3 ( _1_0 - jy ) ; return mix ( jx * ( jC + 2.0 * jy * jw ) , vec3 ( _1_0 ) - ( jC + 2.0 * jy * ( vec3 ( _1_0 ) - jw ) ) * ( vec3 ( _1_0 ) - jx ) , step ( 0.5 , jx ) ) ; } vec3 jG ( vec3 jw , vec3 jx , float jy ) { return mix ( jx , abs ( jw - jx ) , jy ) ; } vec3 jH ( vec3 jw , vec3 jx , float jy ) { return mix ( jx , jx / ( jw + step ( jw , vec3 ( _0_0 ) ) ) , jy ) ; } vec3 jI ( vec3 jw , vec3 jx , float jy ) { return mix ( jx , min ( jw , jx ) , jy ) ; } vec3 jJ ( vec3 jw , vec3 jx , float jy ) { return max ( jy * jw , jx ) ; } vec3 jN ( vec3 jw , vec3 jx , float jy ) { vec3 jK = jt ( jx ) ; if ( jK . y != _0_0 ) { vec3 jL = jt ( jw ) ; vec3 jM = jv ( vec3 ( jK . x , jL . yz ) ) ; return mix ( jw , jM , jy ) ; } return jw ; } vec3 jO ( vec3 jw , vec3 jx , float jy ) { vec3 jK = jt ( jw ) ; if ( jK . y != _0_0 ) { vec3 jL = jt ( jx ) ; return jv ( vec3 ( jK . x , mix ( jK . y , jL . y , jy ) , jK . z ) ) ; } return jw ; } vec3 jP ( vec3 jw , vec3 jx , float jy ) { vec3 jK = jt ( jw ) ; vec3 jL = jt ( jx ) ; return jv ( vec3 ( jK . xy , mix ( jK . z , jL . z , jy ) ) ) ; } vec3 jQ ( vec3 jw , vec3 jx , float jy ) { vec3 jK = jt ( jx ) ; if ( jK . y != _0_0 ) { vec3 jL = jt ( jw ) ; vec3 jM = jv ( vec3 ( jK . xy , jL . z ) ) ; return mix ( jw , jM , jy ) ; } return jw ; } vec3 jS ( vec3 jw , vec3 jx , float jy ) { vec3 jR = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - jx ) * ( vec3 ( _1_0 ) - jw ) ; return mix ( jw , ( ( vec3 ( _1_0 ) - jw ) * jx * jw ) + jw * jR , jy ) ; } vec3 jT ( vec3 jw , vec3 jx , float jy ) { return jw + jy * ( 2.0 * jx - _1_0 ) ; } float jX ( float jU , float jV , float jy , float jW ) { float jC = _1_0 - jW ; return ( jC + jy * jU ) * jV ; } float jY ( float jU , float jV , float jy , float jW ) { float jC = _1_0 - jW ; return _1_0 - ( jC + jy * ( _1_0 - jU ) ) * ( _1_0 - jV ) ; } float jZ ( float jU , float jV , float jy , float jW ) { float jC = _1_0 - jW ; return mix ( jV * ( jC + 2.0 * jy * jU ) , _1_0 - ( jC + 2.0 * jy * ( _1_0 - jU ) ) * ( _1_0 - jV ) , step ( 0.5 , jV ) ) ; }".split(" ")}]}}]}]};
a["include/caustics.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"CAUSTICS_GLSLF",l:{a:"grp",f:[{a:"define",c:"CAUSTICS_GLSLF",b:[""]},{a:"var",c:"SUN_NUM",b:["0"]},{a:"var",c:"CAUST_SCALE",b:["0.25"]},{a:"var",c:"CAUST_SPEED",b:["vec2","(","0.0",")"]},{a:"var",c:"CAUST_BRIGHT",b:["0.5"]},{a:"include",D:"procedural.glslf"},{a:"include",D:"math.glslv"},{a:"define",c:"CAUSTICS_VIEW_DISTANCE",b:["100.0"]},{a:"txt",b:"void bD ( inout vec3 aQ , float j_ , float eS , vec4 bC , vec3 U , vec3 ka , vec3 kb , vec4 kc , vec3 bo , float bA ) { if ( bA > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kd = bo + U ; kd . xz = 10.0 * sin ( 0.1 * kd . xz ) ; vec3 kf = T ( ke ( kc ) , kd ) ; vec2 bN = kf . xz ; vec3 kg = ka ; float kh = max ( dot ( U , kg ) , 0.0 ) ; float ki = 0.025 ; vec2 kj = CAUST_SPEED * eS ; bN . s += 0.25 * sin ( dot ( bo + eS , vec3 ( 1.0 ) ) ) ; bN . t += 0.35 * ( - sin ( dot ( bo - eS , vec3 ( - 0.7 ) ) ) ) ; bN . st += 0.15 * cos ( 4.0 * j_ - kj . x ) + 1.5 * sin ( j_ - 0.3 * kj . y ) ; float he = CAUST_SCALE * ( 1.0 + max ( 0.1 * j_ , 0.0 ) ) ; vec3 kl = kk ( ( bN / he ) , ki ) ; kl *= CAUST_BRIGHT ; kl *= kl ; float km = min ( 0.25 * j_ , - j_ ) + 1.0 ; km = max ( km , 0.0 ) ; float kn = bC [ SUN_NUM ] * kh ; float ko = max ( sign ( j_ ) , 0.0 ) ; kn = kn + max ( 0.5 * sign ( - U . y ) * ko , 0.0 ) ; kn = min ( kn , 1.0 ) ; aQ += kb * kl * km * kn ; }".split(" ")}]}}]}]};
a["include/color_util.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"COLOR_UTIL_GLSLF",l:{a:"grp",f:[{a:"define",c:"COLOR_UTIL_GLSLF",b:[""]},{a:"define",c:"PREMULTIPLY_ALPHA",b:["1"]},{a:"var",c:"SRGB",b:["SRGB_NONE"]},{a:"include",D:"std.glsl"},{a:"txt",b:"void cg ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{a:"txt",b:"} void cg ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cg ( aQ . r ) ; cg ( aQ . g ) ; cg ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},
{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aX ( inout vec3 aQ , in float J ) {".split(" ")},{a:"cond",f:[{a:"if",j:["PREMULTIPLY_ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aQ = aQ * J ;".split(" ")}]}}]},{a:"txt",b:"} float fB ( vec4 aQ ) { vec3 kp = vec3 ( 0.299 , 0.587 , 0.114 ) ; float kq = dot ( aQ . rgb , kp ) ; return kq ; }".split(" ")}]}}]}]};a["include/coverage.glslf"]={a:"grp",
f:[{a:"cond",f:[{a:"ifndef",c:"COVERAGE_GLSLF",l:{a:"grp",f:[{a:"define",c:"COVERAGE_GLSLF",b:[""]},{a:"include",D:"procedural.glslf"},{a:"txt",b:"const float kr = 1000.0 ; bool M ( float J , float ks ) { if ( ks < 0.0 ) J = 1.0 - J ; float kt = floor ( J * kr ) ; float kv = floor ( ku ( gl_FragCoord . xy ) * kr ) ; if ( ks > 0.0 ) return kv < kt ; else return kv >= kt ; }".split(" ")}]}}]}]};a["include/depth_fetch.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DEPTH_FETCH_GLSLF",l:{a:"grp",f:[{a:"define",
c:"DEPTH_FETCH_GLSLF",b:[""]},{a:"include",D:"std.glsl"},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float dL ( in float kw , in vec2 kx ) { float ds = kx . x ; float ky = kx . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ky * ( 1.0 - ds / kw ) / ( ky - ds ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return ( kw - ds ) / ( ky - ds ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float fT ( in sampler2D kz , in vec2 fu , in vec2 kx ) { float dM = GLSL_TEXTURE ( kz , fu ) . r ; float ds = kx . x ; float ky = kx . y ; float kw = 2.0 * ds / ( ds + ky - ( 2.0 * dM - 1.0 ) * ( ky - ds ) ) ; return kw ; }".split(" ")}]}}]}]}}]}]};a["include/dynamic_grass.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DYNAMIC_GRASS_GLSLV",l:{a:"grp",f:[{a:"define",
c:"DYNAMIC_GRASS_GLSLV",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"GRASS_TEXTURE_SIZE",b:["1024.0"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"include",D:"math.glslv"},{a:"include",D:"to_world.glslv"},{a:"txt",b:"vec2 kD ( vec3 O , float kA , vec2 kB ) { vec2 kC = vec2 ( ( O . x - kB . x ) / kA , ( O . y - kB . y ) / kA ) ; return fract ( kC ) ; } vec2 kE ( vec2 gq , float kA , vec2 kB ) { return vec2 ( gq . x * kA , gq . y * kA ) + kB ; } au kF ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"vec4 kP ( sampler2D kG , vec2 kH ) { float kI = 1.0 / GRASS_TEXTURE_SIZE ; vec4 kJ = GLSL_TEXTURE ( kG , kH ) ; vec4 kK = GLSL_TEXTURE ( kG , kH + vec2 ( kI , 0.0 ) ) ; vec4 kL = GLSL_TEXTURE ( kG , kH + vec2 ( 0.0 , kI ) ) ; vec4 kM = GLSL_TEXTURE ( kG , kH + vec2 ( kI , kI ) ) ; float a = fract ( kH . x * GRASS_TEXTURE_SIZE ) ; vec4 kN = mix ( kJ , kK , a ) ; vec4 kO = mix ( kL , kM , a ) ; float b = fract ( kH . y * GRASS_TEXTURE_SIZE ) ; return mix ( kN , kO , b ) ; }".split(" ")}]}}]},
{a:"txt",b:"au aZ ( vec3 O , vec3 V , vec3 kQ , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D kR , sampler2D kS , vec3 kT , float kU , vec3 kV , vec4 kW , mat3 N , mat3 Z ) { vec3 kX = T ( kW , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float kY = - kX . x ; float kZ = kX . y ; vec2 kB = vec2 ( kV . x - kU * ( 1.0 + kY ) / 2.0 , kV . y - kU * ( 1.0 - kZ ) / 2.0 ) ; vec2 k_ = kD ( ao , kU , kB ) ; float la = kU / 2.0 ; vec2 lb = abs ( kE ( k_ - vec2 ( 0.5 ) , kU , vec2 ( 0.0 ) ) ) ; float lc = la * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lb ) > lc ) return kF ( ) ; float ld = kU / kT . z ; vec2 le = ( k_ - vec2 ( 0.5 ) ) * ld + vec2 ( 0.5 ) ; vec3 lf = kX * ( kU / kT . z - 1.0 ) / 2.0 ; le . x += lf . x ; le . y += lf . y ; vec4 lg = GLSL_TEXTURE ( kS , le ) ; float he = lg . r ; if ( he < u_scale_threshold ) return kF ( ) ; float lh = kT . y - kT . x ;".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"float bW = kT . y - ( kP ( kR , le ) ) . r * lh ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bW = kT . y - ( GLSL_TEXTURE ( kR , le ) ) . r * lh ;".split(" ")}]}}]},{a:"txt",b:"vec2 li = O . xy - ao . xy ; ao . xy = kE ( k_ , kU , kB ) ; ao . z = bW ; O . xy = ao . xy + li ; O . z *= he ; O . z += bW ; vec3 aQ = lg . gba ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"O -= ao ; mat3 lj = as ( kV , ao , N , Z ) ; au aw = av ( O , ao , V , kQ , W , U , lj ) ; aw . ao = ao ; aw . aQ = aQ ; return lk ( aw ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return lk ( au ( O , ao , V , kQ , W , U , aQ ) ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/environment.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"ENVIRONMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"ENVIRONMENT_GLSLF",b:[""]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"txt",b:"vec3 cn ( vec3 U ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["SKY_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{a:"elif",j:["SKY_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float ll = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , ll ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fog.glslf"]={a:"grp",f:[{a:"cond",
f:[{a:"ifndef",c:"FOG_GLSLF",l:{a:"grp",f:[{a:"define",c:"FOG_GLSLF",b:[""]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"FOG_TYPE",b:["QUADRATIC"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"include",D:"std.glsl"},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:"void lq ( inout vec3 aQ , in float lm , in float bW , in vec4 ln ) { float lo = clamp ( ( lm - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FOG_TYPE","QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["lo","*=","lo",";"]}]}},{a:"elif",j:["FOG_TYPE","LINEAR",{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["FOG_TYPE","INVERSE_QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"lo = sqrt ( lo ) ;".split(" ")}]}}]},{a:"txt",b:"if ( u_fog_params . w > 0.0 ) { if ( bW > u_fog_params . w ) lo = 0.0 ; else { float lp = ( u_fog_params . w - max ( bW , 0.0 ) ) / u_fog_params . w ; lo *= lp * lp ; } } ln . a = 1.0 - ( 1.0 - lo ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , ln . rgb , ln . a ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 lv ( in mat4 lr , in vec3 C ) { vec3 ls = mix ( lr [ 0 ] . rgb , lr [ 1 ] . rgb , ( C . x + 1.0 ) / 2.0 ) ; vec3 lt = mix ( lr [ 2 ] . rgb , lr [ 3 ] . rgb , ( C . y + 1.0 ) / 2.0 ) ; vec3 lu = vec3 ( lr [ 0 ] . a , lr [ 1 ] . a , lr [ 2 ] . a ) ; vec3 aQ = mix ( ls , lt , abs ( C . y ) ) ; aQ = mix ( aQ , lu , abs ( C . z ) ) ; cg ( aQ ) ; return aQ ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"void lx ( inout float lw ) { lw -= 0.5 ; lw = 4.0 * ( lw * lw * lw ) + 0.5 ; } void lD ( inout vec3 aQ , in float lm , in vec3 C , in float dZ , in vec4 ly , in float eJ ) { float lz = max ( C . z , 0.0 ) ; float lA = max ( lm - max ( dZ / lz , 0.0 ) , 0.0 ) ; float lB = ly . w * lA ; vec3 d_ = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 lC = ly . rgb ; lB = min ( lB , 1.0 ) ; lx ( lB ) ; lB *= clamp ( 2.0 - eJ , 0.0 , 1.0 ) ; vec3 ea = mix ( lC , d_ , min ( lz , 1.0 ) ) ; dZ = clamp ( - dZ * 0.03 , 0.0 , 0.8 ) ; ea *= 1.0 - dZ ; aQ = mix ( aQ , ea , lB ) ; }".split(" ")}]}}]},
{a:"txt",b:"void bE ( inout vec3 aQ , float lm , vec3 C , float bB ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 lr = lv ( u_cube_fog , C ) ; vec4 ea = vec4 ( lr , u_fog_color_density . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","ea","=","u_fog_color_density",";"]}]}}]},{a:"txt",b:"lq ( aQ , lm , h . z , ea ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"lD ( aQ , lm , C , u_cam_water_depth , u_underwater_fog_color_density , bB ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fxaa.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSLF",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSLF",b:[""]},{a:"var",c:"FXAA_BLEND4WEB",b:["1"]},{a:"var",c:"FXAA_QUALITY_P12",b:["0.0"]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PS3",l:{a:"grp",f:[{a:"define",c:"FXAA_PS3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_360",l:{a:"grp",f:[{a:"define",c:"FXAA_360",b:["0"]}]}}]},
{a:"cond",f:[{a:"ifndef",c:"FXAA_360_OPT",l:{a:"grp",f:[{a:"define",c:"FXAA_360_OPT",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC",l:{a:"grp",f:[{a:"define",c:"FXAA_PC",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC_CONSOLE",l:{a:"grp",f:[{a:"define",c:"FXAA_PC_CONSOLE",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_120",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_120",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_130",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_130",b:["0"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_HLSL_3",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_4",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_4",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_5",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_5",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GREEN_AS_LUMA",l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_EARLY_EXIT",l:{a:"grp",f:[{a:"define",c:"FXAA_EARLY_EXIT",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_DISCARD",l:{a:"grp",f:[{a:"define",c:"FXAA_DISCARD",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"cond",f:[{a:"ifdef",c:"GL_EXT_gpu_shader4",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["FXAA_HLSL_5",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",
b:["1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["4.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",
b:["2.0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.125"]}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.25"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_QUALITY_PRESET",l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",10,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",
c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",11,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
12,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",13,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",
b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",14,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",15,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",
b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",20,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",21,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",
c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",22,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
23,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",24,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",25,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",26,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["9"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",27,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["10"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",28,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["11"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",29,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"cond",
f:[{a:"if",j:["FXAA_QUALITY_PRESET",39,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},
{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"include",D:"color_util.glslf"},{a:"txt",b:"float lE ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_BLEND4WEB",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 lF ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 lH ( sampler2D t , vec2 p , vec2 lG , vec2 r ) { return GLSL_TEXTURE ( t , p + ( lG * r ) ) ; }".split(" ")}]}}]},
{a:"txt",b:"vec4 fQ ( vec2 eL , sampler2D hk , vec2 lI , float lJ , float lK , float lL ) { vec2 lM ; lM . x = eL . x ; lM . y = eL . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 lN = lF ( hk , lM ) ; float fC = fB ( lN ) ; float lO = fB ( lH ( hk , lM , vec2 ( 0 , 1 ) , lI . xy ) ) ; float lP = fB ( lH ( hk , lM , vec2 ( 1 , 0 ) , lI . xy ) ) ; float lQ = fB ( lH ( hk , lM , vec2 ( 0 , - 1 ) , lI . xy ) ) ; float lR = fB ( lH ( hk , lM , vec2 ( - 1 , 0 ) , lI . xy ) ) ;".split(" ")}]}}]},
{a:"txt",b:"float lS = max ( lO , fC ) ; float lT = min ( lO , fC ) ; float lU = max ( lP , lS ) ; float lV = min ( lP , lT ) ; float lW = max ( lQ , lR ) ; float lX = min ( lQ , lR ) ; float lY = max ( lW , lU ) ; float lZ = min ( lX , lV ) ; float l_ = lY * lK ; float ma = lY - lZ ; float mb = max ( lL , l_ ) ; bool mc = ma < mb ; if ( mc ) return lN ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fD = fB ( lH ( hk , lM , vec2 ( - 1 , - 1 ) , lI . xy ) ) ; float fG = fB ( lH ( hk , lM , vec2 ( 1 , 1 ) , lI . xy ) ) ; float fE = fB ( lH ( hk , lM , vec2 ( 1 , - 1 ) , lI . xy ) ) ; float fF = fB ( lH ( hk , lM , vec2 ( - 1 , 1 ) , lI . xy ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[]}}]},{a:"txt",b:"float md = lQ + lO ; float me = lR + lP ; float mf = 1.0 / ma ; float mg = md + me ; float mh = ( - 2.0 * fC ) + md ; float mi = ( - 2.0 * fC ) + me ; float mj = fE + fG ; float mk = fD + fE ; float ml = ( - 2.0 * lP ) + mj ; float mm = ( - 2.0 * lQ ) + mk ; float mn = fD + fF ; float mo = fF + fG ; float mp = ( abs ( mh ) * 2.0 ) + abs ( ml ) ; float mq = ( abs ( mi ) * 2.0 ) + abs ( mm ) ; float mr = ( - 2.0 * lR ) + mn ; float ms = ( - 2.0 * lO ) + mo ; float mt = abs ( mr ) + mp ; float mu = abs ( ms ) + mq ; float mv = mn + mj ; float mw = lI . x ; bool mx = mt >= mu ; float my = mg * 2.0 + mv ; if ( ! mx ) lQ = lR ; if ( ! mx ) lO = lP ; if ( mx ) mw = lI . y ; float mz = ( my * ( 1.0 / 12.0 ) ) - fC ; float mA = lQ - fC ; float mB = lO - fC ; float mC = lQ + fC ; float mD = lO + fC ; bool mE = abs ( mA ) >= abs ( mB ) ; float mF = max ( abs ( mA ) , abs ( mB ) ) ; if ( mE ) mw = - mw ; float mG = lE ( abs ( mz ) * mf ) ; vec2 mH ; mH . x = lM . x ; mH . y = lM . y ; vec2 mI ; mI . x = ( ! mx ) ? 0.0 : lI . x ; mI . y = ( mx ) ? 0.0 : lI . y ; if ( ! mx ) mH . x += mw * 0.5 ; if ( mx ) mH . y += mw * 0.5 ; vec2 mJ ; mJ . x = mH . x - mI . x * FXAA_QUALITY_P0 ; mJ . y = mH . y - mI . y * FXAA_QUALITY_P0 ; vec2 mK ; mK . x = mH . x + mI . x * FXAA_QUALITY_P0 ; mK . y = mH . y + mI . y * FXAA_QUALITY_P0 ; float mL = ( ( - 2.0 ) * mG ) + 3.0 ; float mM = fB ( lF ( hk , mJ ) ) ; float mN = mG * mG ; float mO = fB ( lF ( hk , mK ) ) ; if ( ! mE ) mC = mD ; float mP = mF * 1.0 / 4.0 ; float mQ = fC - mC * 0.5 ; float mR = mL * mN ; bool mS = mQ < 0.0 ; mM -= mC * 0.5 ; mO -= mC * 0.5 ; bool mT = abs ( mM ) >= mP ; bool mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P1 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P1 ; bool mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P1 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P1 ; if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P2 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P2 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P2 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P2 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P3 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P3 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P3 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P3 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",4,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P4 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P4 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P4 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P4 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",5,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P5 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P5 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P5 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P5 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",6,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P6 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P6 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P6 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P6 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",7,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P7 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P7 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P7 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P7 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",8,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P8 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P8 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P8 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P8 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",9,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P9 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P9 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P9 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P9 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",10,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P10 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P10 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P10 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P10 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",11,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P11 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P11 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P11 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P11 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",12,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( mV ) { if ( ! mT ) mM = fB ( lF ( hk , mJ . xy ) ) ; if ( ! mU ) mO = fB ( lF ( hk , mK . xy ) ) ; if ( ! mT ) mM = mM - mC * 0.5 ; if ( ! mU ) mO = mO - mC * 0.5 ; mT = abs ( mM ) >= mP ; mU = abs ( mO ) >= mP ; if ( ! mT ) mJ . x -= mI . x * FXAA_QUALITY_P12 ; if ( ! mT ) mJ . y -= mI . y * FXAA_QUALITY_P12 ; mV = ( ! mT ) || ( ! mU ) ; if ( ! mU ) mK . x += mI . x * FXAA_QUALITY_P12 ; if ( ! mU ) mK . y += mI . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:"} float mW = lM . x - mJ . x ; float mX = mK . x - lM . x ; if ( ! mx ) mW = lM . y - mJ . y ; if ( ! mx ) mX = mK . y - lM . y ; bool mY = ( mM < 0.0 ) != mS ; float mZ = ( mX + mW ) ; bool m_ = ( mO < 0.0 ) != mS ; float na = 1.0 / mZ ; bool nb = mW < mX ; float nc = min ( mW , mX ) ; bool nd = nb ? mY : m_ ; float ne = mR * mR ; float nf = ( nc * ( - na ) ) + 0.5 ; float ng = ne * lJ ; float nh = nd ? nf : 0.0 ; float ni = max ( nh , ng ) ; if ( ! mx ) lM . x += ni * mw ; if ( mx ) lM . y += ni * mw ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_DISCARD",1,{a:"equal_expr",o:2},"FXAA_BLEND4WEB",1,{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return lF ( hk , lM ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( lF ( hk , lM ) . xyz , fC ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/halo_color.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"HALO_COLOR_GLSLF",l:{a:"grp",f:[{a:"define",c:"HALO_COLOR_GLSLF",b:[""]},{a:"var",c:"NUM_RINGS",b:["0"]},{a:"var",
c:"NUM_LINES",b:["0"]},{a:"var",c:"NUM_STARS",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const int nj = NUM_RINGS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const int nj = NUM_LINES ;".split(" ")}]}}]},{a:"txt",b:"float nk ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"void nr ( inout float nl , in float nm [ nj ] , in float nn ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float no = 40.0 * nm [ a ] ; float np = 300.0 * ( nk ( no ) - 0.005 ) ; float nq = no ; float lo = abs ( nq * ( u_halo_size * np - nn ) ) ; nl += 1.0 - min ( lo , 1.0 ) ; } }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"void nw ( inout float ns , in float nm [ nj ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float nt = nm [ a ] ; float nu = nt ; float nv = 1000.0 * ( nk ( nt ) - 0.005 ) ; float lo = 20.0 * abs ( nu * A . x + nv * A . y ) ; ns += 1.0 - min ( lo , 1.0 ) ; } ns *= aM ; }".split(" ")}]}}]},
{a:"txt",b:"void nA ( inout float aM , in vec2 bN ) { float nx , bx ; bx = atan ( bN . y , bN . x ) ; bx *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ny = cos ( bx ) ; float nz = sin ( bx ) ; bx = ( ny * bN . x + nz * bN . y ) * ( ny * bN . y - nz * bN . x ) ; nx = abs ( bx ) ; if ( nx < 1.0 ) { nx = ( 0.01 * u_halo_size ) / ( nx ) ; aM *= sqrt ( min ( nx , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float nn = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float J = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float nm [ nj ] ; for ( int bZ = 0 ; bZ < nj ; bZ ++ ) { nm [ bZ ] = fract ( bf / float ( bZ + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"float nl = 0.0 ; nr ( nl , nm , nn ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"float ns = 0.0 ; nw ( ns , nm , aM ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_STARS"],
l:{a:"grp",f:[{a:"txt",b:"nA ( aM , A ) ;".split(" ")}]}}]},{a:"txt",b:"aM *= J ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"nl *= aM ; aQ += u_halo_rings_color * nl ; aM += nl ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"ns *= J ; aQ += u_halo_lines_color * ns ; aM += ns ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float km = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( km , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 nB = vec4 ( aQ , aM ) ; return nB ; }".split(" ")}]}}]}]};a["include/lighting_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"LIGHTING_NODES_GLSLF",l:{a:"grp",
f:[{a:"define",c:"LIGHTING_NODES_GLSLF",b:[""]},{a:"include",D:"std.glsl"},{a:"node",c:"LIGHTING_BEGIN",B:[],A:[{a:"node_out",c:"nP",i:["vec3"],g:!1},{a:"node_out",c:"nQ",i:["vec3"],g:!1},{a:"node_out",c:"nR",i:["vec3"],g:!1},{a:"node_out",c:"nS",i:["vec3"],g:!0},{a:"node_out",c:"nT",i:["vec3"],g:!0},{a:"node_out",c:"nU",i:["vec2"],g:!0},{a:"node_out",c:"nV",i:["vec2"],g:!0},{a:"node_out",c:"nW",i:["vec4"],g:!0},{a:"node_out",c:"nX",i:["float"],g:!0},{a:"node_out",c:"nY",i:["vec4"],g:!0}],u:[{a:"txt",
b:"nP = nC ; nQ = nD ; nR = nE ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nS"],u:[{a:"txt",b:["nS","=","nF",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nT"],u:[{a:"txt",b:["nT","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nV"],u:[{a:"txt",b:["nV","=","nJ",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nU"],u:[{a:"txt",b:["nU","=","nK",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nW"],u:[{a:"txt",b:["nW","=","nL",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_nX"],u:[{a:"txt",b:["nX","=","nM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_nY"],u:[{a:"txt",b:["nY","=","nN",";"]}]}]}]},{a:"node",c:"LIGHTING_AMBIENT",B:[],A:[{a:"node_in",c:"nZ",i:["vec3"],g:!1},{a:"node_in",c:"n_",i:["vec3"],g:!1},{a:"node_in",c:"oa",i:["vec3"],g:!1},{a:"node_out",c:"ob",i:["vec4"],g:!1},{a:"node_out",c:"oc",i:["vec3"],g:!1}],u:[{a:"txt",b:"ob = vec4 ( nZ + oa * n_ , _0_0 ) ; oc = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LIGHTING_LAMP",B:[{a:"node_var",
c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],A:[{a:"node_in",c:"od",i:["vec4"],g:!1},{a:"node_out",c:"oe",i:["vec3"],g:!1},{a:"node_out",c:"of",i:["vec2"],g:!1},{a:"node_out",c:"og",i:["vec3"],g:!1},{a:"node_out",c:"oh",i:["float"],g:!1}],u:[{a:"txt",b:"of = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oh","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oh","=","_0_0",";"]}]}]},{a:"txt",b:"og = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"og *= od [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE",
"POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oi = u_light_positions [ LAMP_IND ] . xyz ; oe = oi - nG ; float aM = length ( oe ) ; float oj = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oe = normalize ( oe ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 ok = u_light_directions [ LAMP_IND ] ; float ol = dot ( oe , ok ) ; ol *= smoothstep ( _0_0 , _1_0 , ( ol - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oj *= ol ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oj *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{a:"txt",b:["og","*=","oj",";"]}]},{a:"node_else",u:[{a:"txt",b:"oe = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"om",i:["vec3"],g:!1},{a:"node_in",c:"on",i:["vec2"],g:!1},{a:"node_in",c:"oo",i:["vec3"],g:!1},{a:"node_in",c:"op",i:["float"],g:!1},
{a:"node_in",c:"oq",i:["vec2"],g:!1},{a:"node_out",c:"or",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( om , B . xyz ) ; oo = cross ( os , B . xyz ) ; oo = - normalize ( oo ) ;".split(" ")}]}]},{a:"txt",b:"or = _0_0 ; if ( on . r != _0_0 ) { float ot = ( _1_0 - op ) * dot ( oo , om ) + op ; if ( oq [ 0 ] == _0_0 ) { or = _1_0 ; } else { float t = _1_0 + abs ( ot ) ; t = oq [ 1 ] + ( _1_0 - oq [ 1 ] ) * pow ( t , oq [ 0 ] ) ; or = clamp ( t , _0_0 , _1_0 ) ; } or = max ( or , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ou",i:["vec3"],g:!1},{a:"node_in",c:"ov",i:["vec2"],g:!1},{a:"node_in",c:"ow",i:["vec3"],g:!1},{a:"node_in",c:"ox",i:["float"],g:!1},{a:"node_out",c:"oy",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( ou , B . xyz ) ; ow = cross ( os , B . xyz ) ; ow = - normalize ( ow ) ;".split(" ")}]}]},{a:"txt",b:"oy = _0_0 ; if ( ov . r != _0_0 ) { float ot = ( _1_0 - ox ) * dot ( ow , ou ) + ox ; oy = max ( ot , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_OREN_NAYAR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oz",i:["vec3"],g:!1},{a:"node_in",c:"oA",i:["vec2"],g:!1},{a:"node_in",c:"oB",i:["vec3"],g:!1},{a:"node_in",c:"oC",i:["float"],g:!1},{a:"node_in",c:"oD",i:["vec2"],g:!1},{a:"node_out",c:"oE",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oz , B . xyz ) ; oB = cross ( os , B . xyz ) ; oB = - normalize ( oB ) ;".split(" ")}]}]},{a:"txt",
b:"oE = _0_0 ; if ( oA . r != _0_0 ) { float ot = ( _1_0 - oC ) * dot ( oB , oz ) + oC ; if ( oD [ 0 ] > _0_0 ) { float oF = max ( dot ( oB , nI ) , _0_0 ) ; float oG = oD [ 0 ] * oD [ 0 ] ; float cp = _1_0 - _0_5 * ( oG / ( oG + 0.33 ) ) ; vec3 oH = oz - ot * oB ; vec3 oI = nI - oF * oB ; if ( length ( oH ) == _0_0 || length ( oI ) == _0_0 || abs ( ot ) > _1_0 || abs ( oF ) > _1_0 ) oE = ot * cp ; else { float oJ = acos ( ot ) ; float oK = acos ( oF ) ; vec3 oL = normalize ( oH ) ; vec3 oM = normalize ( oI ) ; float a , b ; a = max ( oJ , oK ) ; b = min ( oJ , oK ) ; b *= 0.95 ; float t = max ( dot ( oL , oM ) , _0_0 ) ; float oN = 0.45 * ( oG / ( oG + 0.09 ) ) ; oE = ot * ( cp + ( oN * t * sin ( a ) * tan ( b ) ) ) ; } } else oE = ot ; oE = max ( oE , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oO",i:["vec3"],g:!1},{a:"node_in",c:"oP",i:["vec2"],g:!1},{a:"node_in",c:"oQ",i:["vec3"],g:!1},{a:"node_in",c:"oR",i:["float"],g:!1},{a:"node_in",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oO , B . xyz ) ; oQ = cross ( os , B . xyz ) ; oQ = - normalize ( oQ ) ;".split(" ")}]}]},{a:"txt",
b:"oT = _0_0 ; if ( oP . r != _0_0 ) { float ot = ( _1_0 - oR ) * dot ( oQ , oO ) + oR ; float oF = max ( dot ( oQ , nI ) , _0_0 ) ; if ( oS [ 0 ] <= _1_0 ) oT = ot * pow ( max ( oF * ot , 0.1 ) , oS [ 0 ] - _1_0 ) ; else oT = ot * pow ( 1.0001 - oF , oS [ 0 ] - _1_0 ) ; oT = max ( oT , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oU",i:["vec3"],g:!1},{a:"node_in",c:"oV",i:["vec2"],g:!1},{a:"node_in",c:"oW",i:["vec3"],g:!1},
{a:"node_in",c:"oX",i:["float"],g:!1},{a:"node_in",c:"oY",i:["vec2"],g:!1},{a:"node_out",c:"oZ",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oU , B . xyz ) ; oW = cross ( os , B . xyz ) ; oW = - normalize ( oW ) ;".split(" ")}]}]},{a:"txt",b:"oZ = _0_0 ; if ( oV . r != _0_0 ) { float ot = ( _1_0 - oX ) * dot ( oW , oU ) + oX ; float o_ = acos ( ot ) ; if ( o_ < oY [ 0 ] ) oZ = _1_0 ; else if ( o_ > ( oY [ 0 ] + oY [ 1 ] ) || oY [ 1 ] == _0_0 ) oZ = _0_0 ; else oZ = _1_0 - ( ( o_ - oY [ 0 ] ) / oY [ 1 ] ) ; oZ = max ( oZ , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["vec2"],g:!1},{a:"node_in",c:"pc",i:["vec3"],g:!1},{a:"node_in",c:"pd",i:["float"],g:!1},{a:"node_in",c:"pe",i:["vec2"],g:!1},{a:"node_out",c:"pf",i:["float"],g:!1}],u:[{a:"txt",b:"pf = _0_0 ; if ( pb . g != _0_0 ) { vec3 pg = normalize ( pa + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pd == _0_0 ) { pf = dot ( B . xyz , pg ) ; pf = sqrt ( _1_0 - pf * pf ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pf = ( _1_0 - pd ) * max ( dot ( pc , pg ) , _0_0 ) + pd ;".split(" ")}]}]},{a:"txt",b:"pf = pow ( pf , pe [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ph",i:["vec3"],g:!1},{a:"node_in",c:"pi",i:["vec2"],g:!1},{a:"node_in",c:"pj",i:["vec3"],g:!1},{a:"node_in",c:"pk",i:["float"],g:!1},{a:"node_in",c:"pl",i:["vec2"],g:!1},{a:"node_out",c:"pm",i:["float"],g:!1}],u:[{a:"txt",b:"pm = _0_0 ; if ( pi . g != _0_0 ) { vec3 pg = normalize ( ph + nI ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pk == _0_0 ) { pm = dot ( B . xyz , pg ) ; pm = sqrt ( _1_0 - pm * pm ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"pm = max ( dot ( pj , pg ) , _0_0 ) ; pm = ( _1_0 - pk ) * pm + pk ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float oF = max ( dot ( B . xyz , nI ) , _0_0 ) ; oF = sqrt ( _1_0 - oF * oF ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float oF = max ( dot ( pj , nI ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"pm = pow ( pm , pl [ 0 ] ) ; pm = pm / ( 0.1 + oF ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["vec2"],g:!1},{a:"node_in",c:"pr",i:["vec3"],g:!1},{a:"node_in",c:"pu",i:["float"],g:!1},{a:"node_in",c:"pv",i:["vec2"],g:!1},{a:"node_out",c:"pw",i:["float"],g:!1}],u:[{a:"txt",b:"pw = _0_0 ; if ( po . g != _0_0 ) { vec3 pg = normalize ( pn + nI ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = _0_0 ; float oF = _0_0 ; float py = _0_0 ; if ( pu == _0_0 ) { px = dot ( B . xyz , pg ) ; oF = dot ( B . xyz , nI ) ; py = dot ( B . xyz , pn ) ; px = sqrt ( _1_0 - px * px ) ; oF = sqrt ( _1_0 - oF * oF ) ; py = sqrt ( _1_0 - py * py ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = max ( dot ( pr , pg ) , 0.01 ) ; float oF = max ( dot ( pr , nI ) , 0.01 ) ; float py = max ( dot ( pr , pn ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bx = tan ( acos ( px ) ) ; float J = max ( pv [ 0 ] , 0.01 ) ; pw = py * ( _1_0 / ( 4.0 * M_PI * J * J ) ) * ( exp ( - ( bx * bx ) / ( J * J ) ) / ( sqrt ( oF * py ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pz",i:["vec3"],g:!1},{a:"node_in",c:"pA",i:["vec2"],g:!1},{a:"node_in",c:"pB",i:["vec3"],g:!1},{a:"node_in",c:"pC",i:["float"],g:!1},{a:"node_in",c:"pD",i:["vec2"],g:!1},{a:"node_out",c:"pE",i:["float"],
g:!1}],u:[{a:"txt",b:"pE = _0_0 ; if ( pA . g != _0_0 ) { vec3 bX = normalize ( pz + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pF = dot ( bX , B . xyz ) ; float bx = pD [ 0 ] + pD [ 1 ] ; if ( pC == _0_0 ) bx = acos ( sqrt ( _1_0 - pF * pF ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bx = acos ( dot ( bX , pB ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bx < pD [ 0 ] ) pE = _1_0 ; else if ( bx >= pD [ 0 ] + pD [ 1 ] || pD [ 1 ] == _0_0 ) pE = _0_0 ; else pE = _1_0 - ( bx - pD [ 0 ] ) / pD [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pG",i:["vec3"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_in",c:"pI",i:["vec3"],g:!1},{a:"node_in",c:"pJ",i:["float"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_out",c:"pL",i:["float"],g:!1}],u:[{a:"txt",b:"float pM = pK [ 0 ] ; float pN = pK [ 1 ] ; pL = _0_0 ; if ( pH . g != _0_0 ) { if ( pM < 1.0 || pN == _0_0 ) pL = _0_0 ; else { if ( pN < 100.0 ) pN = sqrt ( 1.0 / pN ) ; else pN = 10.0 / pN ; vec3 pg = normalize ( nI + pG ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = 0.0 ; if ( pJ == _0_0 ) { float pO = dot ( B . xyz , pg ) ; px = sqrt ( _1_0 - pO * pO ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = ( _1_0 - pJ ) * max ( dot ( pI , pg ) , _0_0 ) + pJ ;".split(" ")}]}]},{a:"txt",b:"if ( px < _0_0 ) pL = _0_0 ; else { float oF = max ( dot ( pI , nI ) , 0.01 ) ; float py = dot ( pI , pG ) ; if ( py <= 0.01 ) pL = _0_0 ; else { float pP = max ( dot ( nI , pg ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * px * oF ) / pP ; float di = ( 2.0 * px * py ) / pP ; float g = min ( min ( a , b ) , di ) ; float p = sqrt ( pow ( pM , 2.0 ) + pow ( pP , 2.0 ) - _1_0 ) ; float lw = pow ( p - pP , 2.0 ) / pow ( p + pP , 2.0 ) * ( _1_0 + pow ( pP * ( p + pP ) - _1_0 , 2.0 ) / pow ( pP * ( p - pP ) + _1_0 , 2.0 ) ) ; float o_ = acos ( px ) ; pL = max ( lw * g * exp ( - pow ( o_ , 2.0 ) / ( 2.0 * pow ( pN , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",B:[],A:[{a:"node_in",c:"pQ",i:["vec4"],g:!1},{a:"node_in",c:"pR",i:["vec3"],g:!1},{a:"node_in",c:"pS",i:["float"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec3"],g:!1},{a:"node_in",c:"pV",i:["vec3"],g:!1},{a:"node_in",c:"pW",i:["vec4"],g:!1},{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec3"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_out",c:"qa",i:["vec4"],g:!1},{a:"node_out",c:"qb",
i:["vec3"],g:!1}],u:[{a:"txt",b:"qb = pR + pZ * pY * pT ; qa = pQ + vec4 ( pZ * pX * pS , pT ) ;".split(" ")}]},{a:"node",c:"LIGHTING_END",B:[],A:[{a:"node_in",c:"qc",i:["vec4"],g:!1},{a:"node_in",c:"qd",i:["vec3"],g:!1}],u:[{a:"txt",b:"D = qc . rgb ; nO = qd ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void cy ( vec3 nC , vec3 nD , vec3 nE , vec3 nF , vec3 nG , vec3 nH , vec3 nI , vec2 nJ , vec2 nK , vec4 nL , float nM , vec4 nN , out vec3 D , out vec3 nO ) {".split(" ")},{a:"nodes_main"},{a:"txt",
b:["}"]}]}}]}]};a["include/math.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MATH_GLSLV",l:{a:"grp",f:[{a:"define",c:"MATH_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"include",D:"std.glsl"},{a:"txt",b:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qe ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kd ) { return kd + 2.0 * cross ( q . xyz , cross ( q . xyz , kd ) + q . w * kd ) ; } vec4 ke ( in vec4 qf ) { return vec4 ( - qf . xyz , qf . w ) ; } vec4 qh ( in vec4 a , in vec4 b ) { vec4 qg ; qg . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qg . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qg . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qg . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qg ; } vec4 X ( in vec3 qi , in float qj ) { vec4 qg ; qj = qj * 0.5 ; float s = sin ( qj ) ; qg . x = s * qi [ 0 ] ; qg . y = s * qi [ 1 ] ; qg . z = s * qi [ 2 ] ; qg . w = cos ( qj ) ; return qg ; } vec4 qm ( in vec3 bp , in vec3 qk ) { vec4 qg ; float dn = dot ( qk , bp ) ; vec3 ql = cross ( qk , bp ) ; qg . xyz = ql . xyz ; qg . w = 1.0 + dn ; return normalize ( qg ) ; } vec3 qr ( vec4 qn , vec4 qf , vec3 qo ) { vec3 qg = qo * qn . w ; qg = T ( qf , qg ) ; qg += qn . xyz ; return qg ; } vec3 ap ( mat3 qu , vec3 qo ) { vec3 qg = qo * qu [ 1 ] [ 0 ] ; vec4 qf = vec4 ( qu [ 1 ] [ 1 ] , qu [ 1 ] [ 2 ] , qu [ 2 ] [ 0 ] , qu [ 2 ] [ 1 ] ) ; qg = T ( qf , qg ) ; qg += qu [ 0 ] ; return qg ; } vec3 qv ( vec4 qn , vec4 qf , vec3 bp ) { vec3 qg = bp * qn . w ; qg = T ( qf , qg ) ; return qg ; } vec3 _ ( mat3 qu , vec3 bp ) { vec3 qg = bp * qu [ 1 ] [ 0 ] ; vec4 qf = vec4 ( qu [ 1 ] [ 1 ] , qu [ 1 ] [ 2 ] , qu [ 2 ] [ 0 ] , qu [ 2 ] [ 1 ] ) ; qg = T ( qf , qg ) ; return qg ; } vec3 qw ( vec4 qn , vec4 qf , vec3 qo ) { vec3 qg = qo - qn . xyz ; qg = T ( ke ( qf ) , qg ) ; qg /= qn . w ; return qg ; } vec3 qx ( vec4 qn , vec4 qf , vec3 bp ) { return T ( ke ( qf ) , bp ) / qn . w ; } mat4 qy ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 qz ( float bx ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bx ) , sin ( bx ) , _0_0 , _0_0 , - sin ( bx ) , cos ( bx ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 qA ( float bx ) { return mat4 ( cos ( bx ) , _0_0 , - sin ( bx ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bx ) , _0_0 , cos ( bx ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 qB ( float bx ) { return mat4 ( cos ( bx ) , sin ( bx ) , _0_0 , _0_0 , - sin ( bx ) , cos ( bx ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lk ( in au kd ) { return au ( kd . O , kd . ao , normalize ( kd . V ) , normalize ( kd . aB ) , normalize ( kd . W ) , normalize ( kd . U ) , kd . aQ ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 aC ( vec4 f ) { float fr = f . x ; float fs = f . y ; float ft = f . w ; vec3 qC ; qC . x = ( fr + ft ) / 2.0 ; qC . y = ( fs + ft ) / 2.0 ; qC . z = ft ; return qC ; }".split(" ")}]}}]},{a:"txt",b:"mat3 cQ ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 qD ; qD [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; qD [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 0 ] [ 3 ] = _0_0 ; qD [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; qD [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 1 ] [ 3 ] = _0_0 ; qD [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; qD [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; qD [ 2 ] [ 3 ] = _0_0 ; qD [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; qD [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; qD [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; qD [ 3 ] [ 3 ] = 1.0 ; return qD ; } mat3 aY ( in mat3 qu , in mat3 qE ) { mat3 qg ; vec3 qo = qE [ 0 ] ; vec4 qn = vec4 ( qu [ 0 ] , qu [ 1 ] [ 0 ] ) ; vec4 qf = vec4 ( qu [ 1 ] [ 1 ] , qu [ 1 ] [ 2 ] , qu [ 2 ] [ 0 ] , qu [ 2 ] [ 1 ] ) ; qg [ 0 ] = qr ( qn , qf , qo ) ; qg [ 1 ] [ 0 ] = qu [ 1 ] [ 0 ] * qE [ 1 ] [ 0 ] ; qg [ 1 ] [ 1 ] = qu [ 1 ] [ 1 ] * qE [ 2 ] [ 1 ] + qu [ 2 ] [ 1 ] * qE [ 1 ] [ 1 ] + qu [ 1 ] [ 2 ] * qE [ 2 ] [ 0 ] - qu [ 2 ] [ 0 ] * qE [ 1 ] [ 2 ] ; qg [ 1 ] [ 2 ] = qu [ 1 ] [ 2 ] * qE [ 2 ] [ 1 ] + qu [ 2 ] [ 1 ] * qE [ 1 ] [ 2 ] + qu [ 2 ] [ 0 ] * qE [ 1 ] [ 1 ] - qu [ 1 ] [ 1 ] * qE [ 2 ] [ 0 ] ; qg [ 2 ] [ 0 ] = qu [ 2 ] [ 0 ] * qE [ 2 ] [ 1 ] + qu [ 2 ] [ 1 ] * qE [ 2 ] [ 0 ] + qu [ 1 ] [ 1 ] * qE [ 1 ] [ 2 ] - qu [ 1 ] [ 2 ] * qE [ 1 ] [ 1 ] ; qg [ 2 ] [ 1 ] = qu [ 2 ] [ 1 ] * qE [ 2 ] [ 1 ] - qu [ 1 ] [ 1 ] * qE [ 1 ] [ 1 ] - qu [ 1 ] [ 2 ] * qE [ 1 ] [ 2 ] - qu [ 2 ] [ 0 ] * qE [ 2 ] [ 0 ] ; return qg ; } mat3 cT ( in vec4 qf , in mat3 qu ) { mat3 qg ; qg [ 0 ] = qu [ 0 ] ; qg [ 1 ] [ 0 ] = qu [ 1 ] [ 0 ] ; qg [ 1 ] [ 1 ] = qf [ 0 ] ; qg [ 1 ] [ 2 ] = qf [ 1 ] ; qg [ 2 ] [ 0 ] = qf [ 2 ] ; qg [ 2 ] [ 1 ] = qf [ 3 ] ; return qg ; } vec4 R ( in vec4 qF ) { return normalize ( qF ) ; } vec4 R ( in vec4 qF , out float P , out float Q ) { vec4 qf = R ( qF ) ; P = length ( qF ) * M_PI ; Q = sign ( qF [ 3 ] ) ; return R ( qF ) ; }".split(" ")}]}}]}]};
a["include/mirror.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MIRROR_GLSLF",l:{a:"grp",f:[{a:"define",c:"MIRROR_GLSLF",b:[""]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:[""]},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.1"]},{a:"txt",b:"float qG ( in vec3 C , vec3 ef , float eD , float eE ) { vec3 eB = normalize ( ef + C ) ; float eC = 1.0 - dot ( C , eB ) ; float r = eE + ( 1.0 - eE ) * pow ( eC , eD ) ; return r ; } void cz ( inout vec3 qH , vec3 C , vec3 U , float qI , mat3 N ) { vec3 ef = reflect ( - C , U ) ; float eD = u_fresnel_params [ 0 ] ; float eE = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( eD != 0.0 ) r = qG ( C , ef , eD , eE ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ek = GLSL_TEXTURE_CUBE ( u_cube_reflection , ef ) . xyz ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 qJ = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 qK = U - qJ ; vec2 qL = _ ( N , qK ) . xy ; vec2 qM = l . xy / l . z ; qM += qL * REFL_BUMP ; vec3 ek = GLSL_TEXTURE ( u_plane_reflection , qM ) . rgb ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ek = vec3 ( 1.0 ) ; qI = 0.0 ;".split(" ")}]}}]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ek = GLSL_TEXTURE_CUBE ( u_mirrormap , ef ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"cg ( ek . rgb ) ; qH = mix ( qH , ek , qI * r ) ; } vec3 qW ( vec3 qH , vec3 qN , vec3 C , vec3 U , float qO , float qP , mat3 N ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"USE_BSDF_SKY_DIM",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float qQ = max ( dot ( U , C ) , _0_0 ) ; float qR = qO + ( max ( _1_0 - qP , qO ) - qO ) * pow ( _1_0 - qQ , 5.0 ) ; vec3 ef = reflect ( - C , U ) ; float qS = 2.0 / ( qP * qP ) - 2.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"txt",b:["float","qT","=","u_bsdf_cube_sky_dim",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float qT = float ( textureSize ( u_cube_reflection , 0 ) . x ) ;".split(" ")}]}}]},{a:"txt",b:"float qU = log2 ( qT * sqrt ( 3.0 ) ) - _0_5 * log2 ( qS + _1_0 ) ; vec3 ek = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , ef , qU ) . xyz ; cg ( ek ) ; ek *= qN ; vec3 qV = GLSL_TEXTURE_CUBE_LOD ( u_cube_reflection , U , 100.0 ) . xyz ; cg ( qV ) ; qV *= qH ; return qV + qR * ek ;".split(" ")}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 qJ = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 qK = U - qJ ; vec2 qL = _ ( N , qK ) . xy ; vec2 qM = l . xy / l . z ; qM += qL * REFL_BUMP ; vec3 ek = GLSL_TEXTURE ( u_plane_reflection , qM ) . rgb ; cg ( ek ) ; ek *= qN ; return mix ( qH , ek , qO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ek = qN ; return mix ( qH , ek , qO ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"HAS_REFRACT_TEXTURE",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_DERIVATIVES_EXT",
b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"IS_WORLD",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"mirror.glslf"},{a:"include",D:"shadow.glslf"},{a:"include",D:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"refraction.glslf"}]}}]},{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},
{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","qX",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"vec3 q_ ( in vec3 qY , in float qZ ) { vec3 et = vec3 ( _0_0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"et = cB ( l , qY . xy * qZ ) ;".split(" ")}]}},{a:"elif",j:["HAS_REFRACT_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"et = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; cg ( et ) ;".split(" ")}]}}]},
{a:"txt",b:["return","et",";","}"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 jt ( vec3 rgb ) { vec4 js = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , js . wz ) , vec4 ( rgb . gb , js . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dn = q . x - min ( q . w , q . y ) ; float hK = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dn + hK ) ) , dn / ( q . x + hK ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 jv ( vec3 ju ) { vec4 js = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( ju . r , ju . r , ju . r ) + js . xyz ) * 6.0 - js . www ) ; return ju . b * mix ( js . xxx , clamp ( p - js . xxx , _0_0 , _1_0 ) , ju . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 rc ( vec2 gq ) { return vec3 ( gq * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 rd ( vec3 qo ) { return vec2 ( qo . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float rj ( vec3 re , vec3 rf , float rh ) { float di = abs ( dot ( re , rf ) ) ; float g = rh * rh - _1_0 + di * di ; float ri ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cp = ( g - di ) / ( g + di ) ; float oN = ( di * ( g + di ) - _1_0 ) / ( di * ( g - di ) + _1_0 ) ; ri = _0_5 * cp * cp * ( _1_0 + oN * oN ) ; } else { ri = _1_0 ; } return ri ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
B:[],A:[{a:"node_out",c:"rJ",i:["vec3"],g:!0},{a:"node_out",c:"rK",i:["float"],g:!0},{a:"node_out",c:"rL",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rJ"],u:[{a:"txt",b:"rJ = normalize ( rG . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rK"],u:[{a:"txt",b:"rK = abs ( rG . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rL"],u:[{a:"txt",b:"rL = length ( rG . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",B:[],A:[{a:"node_in",c:"rM",i:["float"],
g:!1},{a:"node_in",c:"rN",i:["float"],g:!1},{a:"node_in",c:"rO",i:["float"],g:!1},{a:"node_out",c:"rP",i:["vec3"],g:!1}],u:[{a:"txt",b:"rP = vec3 ( rM , rN , rO ) ;".split(" ")}]},{a:"node",c:"COMBHSV",B:[],A:[{a:"node_in",c:"rQ",i:["float"],g:!1},{a:"node_in",c:"rR",i:["float"],g:!1},{a:"node_in",c:"rS",i:["float"],g:!1},{a:"node_out",c:"rT",i:["vec3"],g:!1}],u:[{a:"txt",b:"rT = jv ( vec3 ( rQ , rR , rS ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",B:[],A:[{a:"node_out",c:"rU",i:["vec3"],g:!1}],u:[{a:"txt",
b:"rU = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",B:[],A:[{a:"node_out",c:"rV",i:["vec3"],g:!1}],u:[{a:"txt",b:"rV = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",B:[],A:[{a:"node_out",c:"rW",i:["vec3"],g:!1},{a:"node_param",c:"rk",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"rW = rc ( rk ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",B:[],A:[{a:"node_out",c:"rX",i:["vec3"],g:!1}],u:[{a:"txt",b:"rX = 2.0 * qX - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",
B:[],A:[{a:"node_out",c:"rY",i:["vec3"],g:!1},{a:"node_param",c:"rl",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"rY = max ( vec3 ( _0_0 ) , rl ) ; cg ( rY ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",B:[],A:[{a:"node_out",c:"rZ",i:["float"],g:!1},{a:"node_param",c:"rm",i:["GLSL_IN","float"],g:!1}],u:[{a:"txt",b:"rZ = max ( _0_0 , rm ) ; cg ( rZ ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC2",B:[],A:[{a:"node_out",c:"r_",i:["float"],g:!1},{a:"node_out",c:"sa",i:["float"],g:!1},{a:"node_param",c:"rn",
i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"r_ = max ( _0_0 , rn [ 0 ] ) ; sa = max ( _0_0 , rn [ 1 ] ) ; cg ( r_ ) ; cg ( sa ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",B:[],A:[{a:"node_out",c:"sb",i:["float"],g:!1},{a:"node_out",c:"sc",i:["float"],g:!1},{a:"node_out",c:"sd",i:["float"],g:!1},{a:"node_param",c:"ro",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sb = max ( _0_0 , ro [ 0 ] ) ; sc = max ( _0_0 , ro [ 1 ] ) ; sd = max ( _0_0 , ro [ 2 ] ) ; cg ( sb ) ; cg ( sc ) ; cg ( sd ) ;".split(" ")}]},
{a:"node",c:"GEOMETRY_NO",B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"se",i:["vec3"],g:!1},{a:"node_out",c:"sf",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["sf","=","se",";"]}]},{a:"node_else",u:[{a:"txt",b:"sf = rz . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",B:[],A:[{a:"node_out",c:"sg",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sg = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"sg = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_BF",B:[],A:[{a:"node_out",c:"sh",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sh = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sh = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",B:[],A:[{a:"node_out",c:"si",i:["vec3"],g:!1}],u:[{a:"txt",
b:"si = - _ ( u_view_tsr_frag , nI ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",B:[],A:[{a:"node_out",c:"sj",i:["vec3"],g:!1}],u:[{a:"txt",b:"sj = rG . xyz ;".split(" ")}]},{a:"node",c:"GEOMETRY_GL",B:[],A:[{a:"node_out",c:"sk",i:["vec3"],g:!1}],u:[{a:"txt",b:["sk","=","nG",";"]}]},{a:"node",c:"GEOMETRY_IN",B:[],A:[{a:"node_out",c:"sl",i:["vec3"],g:!1}],u:[{a:"txt",b:["sl","=","nI",";"]}]},{a:"node",c:"NEW_GEOMETRY",B:[],A:[{a:"node_out",c:"sm",i:["vec3"],g:!1},{a:"node_out",c:"sn",i:["vec3"],g:!1},
{a:"node_out",c:"so",i:["vec3"],g:!1},{a:"node_out",c:"sr",i:["vec3"],g:!1},{a:"node_out",c:"su",i:["vec3"],g:!1},{a:"node_out",c:"sv",i:["vec3"],g:!1},{a:"node_out",c:"sw",i:["float"],g:!1},{a:"node_out",c:"sx",i:["float"],g:!1}],u:[{a:"txt",b:"sm = vec3 ( _0_0 ) ; sn = vec3 ( _0_0 ) ; so = vec3 ( _0_0 ) ; sr = vec3 ( _0_0 ) ; su = vec3 ( _0_0 ) ; sv = vec3 ( _0_0 ) ; sw = _0_0 ; sx = _0_0 ;".split(" ")}]},{a:"node",c:"HUE_SAT",B:[],A:[{a:"node_in",c:"sy",i:["float"],g:!1},{a:"node_in",c:"sz",i:["float"],
g:!1},{a:"node_in",c:"sA",i:["float"],g:!1},{a:"node_in",c:"sB",i:["float"],g:!1},{a:"node_in",c:"sC",i:["vec3"],g:!1},{a:"node_out",c:"sD",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 ju = jt ( sC ) ; ju [ 0 ] += ( sy - _0_5 ) ; if ( ju [ 0 ] > _1_0 ) ju [ 0 ] -= _1_0 ; else if ( ju [ 0 ] < _0_0 ) ju [ 0 ] += _1_0 ; ju *= vec3 ( _1_0 , sz , sA ) ; ju = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , ju , step ( vec3 ( _0_0 ) , ju ) ) , step ( ju , vec3 ( _1_0 ) ) ) ; sD = mix ( sC , jv ( ju ) , sB ) ;".split(" ")}]},
{a:"node",c:"INVERT",B:[],A:[{a:"node_in",c:"sE",i:["float"],g:!1},{a:"node_in",c:"sF",i:["vec3"],g:!1},{a:"node_out",c:"sG",i:["vec3"],g:!1}],u:[{a:"txt",b:"sG = mix ( sF , vec3 ( _1_0 ) - sF , sE ) ;".split(" ")}]},{a:"node",c:"LAMP",B:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],A:[{a:"node_out",
c:"sH",i:["vec3"],g:!0},{a:"node_out",c:"sI",i:["vec3"],g:!1},{a:"node_out",c:"sJ",i:["float"],g:!1},{a:"node_out",c:"sK",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["LAMP_INDEX",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 sL = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 sM = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"sI = h - sM ; sJ = length ( sI ) ; sI = normalize ( sI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sK"],u:[{a:"txt",b:"sK = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + sJ * sJ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float ol = dot ( - sI , sL ) ; ol *= smoothstep ( _0_0 , _1_0 , ( ol - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; sK *= ol ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"sK *= max ( LAMP_LIGHT_DIST - sJ , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:["sI","=","sL",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sJ"],u:[{a:"txt",b:"sJ = length ( sM - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sK"],u:[{a:"txt",b:["sK","=","_1_0",";"]}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:"sI = vec3 ( _0_0 ) ; sJ = 0.0 ;".split(" ")}]}]}]},{a:"node",c:"NORMAL",B:[],A:[{a:"node_in",c:"sN",i:["vec3"],g:!1},{a:"node_out",c:"sO",i:["vec3"],g:!0},{a:"node_out",c:"sP",i:["float"],g:!0},{a:"node_param",c:"rp",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sO"],u:[{a:"txt",b:["sO","=","rp",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sP"],u:[{a:"txt",b:"sP = - dot ( sN , rp ) ;".split(" ")}]}]}]},
{a:"node",c:"B4W_VECTOR_VIEW",B:[],A:[{a:"node_in",c:"sQ",i:["vec3"],g:!1},{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",b:"sR = - _ ( u_view_tsr_frag , sQ ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",B:[],A:[{a:"node_in",c:"sS",i:["vec3"],g:!1},{a:"node_in",c:"sT",i:["vec3"],g:!1},{a:"node_in",c:"sU",i:["float"],g:!1},{a:"node_in",c:"sV",i:["vec3"],g:!1},{a:"node_in",c:"sW",i:["float"],g:!1},{a:"node_in",c:"sX",i:["float"],g:!1},{a:"node_in",c:"sY",i:["vec3"],g:!1},{a:"node_in",c:"sZ",i:["vec3"],
g:!1},{a:"node_in",c:"s_",i:["float"],g:!1},{a:"node_in",c:"ta",i:["vec3"],g:!1},{a:"node_in",c:"tb",i:["float"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1},{a:"node_out",c:"td",i:["vec3"],g:!1},{a:"node_out",c:"te",i:["vec3"],g:!1},{a:"node_out",c:"tf",i:["vec3"],g:!1},{a:"node_out",c:"tg",i:["vec3"],g:!1},{a:"node_out",c:"th",i:["vec4"],g:!1},{a:"node_out",c:"ti",i:["vec4"],g:!1},{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",
c:"tm",i:["float"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["float"],g:!1}],u:[{a:"txt",b:"te = sT ; tf = sV ; tg = sY ; tj = sT ; tk = sV ; tl = sZ ; tm = s_ ; tn = ta ; to = tb ; tc = rH * te ; td = rI * u_environment_energy * cn ( tg ) ; ti = cq ( te ) ; G = ti ; th [ 0 ] = sU ; th [ 1 ] = sW ; th [ 2 ] = sX ;".split(" ")}]},{a:"node",c:"BSDF_END",B:[],A:[{a:"node_in",c:"tr",i:["vec4"],g:!1},{a:"node_in",c:"tu",i:["vec3"],g:!1},{a:"node_in",c:"tv",i:["vec3"],g:!1},{a:"node_in",
c:"tw",i:["vec4"],g:!1},{a:"node_in",c:"tx",i:["vec3"],g:!1},{a:"node_in",c:"ty",i:["vec3"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_in",c:"tA",i:["float"],g:!1},{a:"node_in",c:"tB",i:["vec3"],g:!1},{a:"node_in",c:"tC",i:["float"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"float tE = clamp ( tw [ 1 ] , _0_0 , _1_0 ) ; float qO = tw [ 2 ] ; tD = tr . rgb ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"tD += qW ( tx , ty , nI , tv , qO , tE , mat3 ( _0_0 ) ) ;".split(" ")}]},
{a:"node_elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"tD += qW ( tx , ty , nI , tv , qO , u_view_tsr_frag ) ;".split(" ")}]}]},{a:"txt",b:"tD += tu ; tD = mix ( tD , tz , tA ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 tF = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; cg ( tF ) ; tB = tB * tF ; tD += tB ;".split(" ")}]}]},{a:"txt",b:["tv",";"]}]},{a:"node",c:"BSDF_COMPUTE",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",
b:["0"]}],A:[{a:"node_in",c:"tG",i:["vec3"],g:!1},{a:"node_in",c:"tH",i:["vec2"],g:!1},{a:"node_in",c:"tI",i:["vec3"],g:!1},{a:"node_in",c:"tJ",i:["float"],g:!1},{a:"node_in",c:"tK",i:["vec4"],g:!1},{a:"node_out",c:"tL",i:["float"],g:!1},{a:"node_out",c:"tM",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 rf = tI ; float tN = clamp ( tK [ 0 ] , _0_0 , _1_0 ) ; float tE = clamp ( tK [ 1 ] , _0_0 , _1_0 ) ; float qO = tK [ 2 ] ; vec3 pg = normalize ( nI + tG ) ; float ot = ( _1_0 - tJ ) * dot ( rf , tG ) + tJ ; float tO = ( _1_0 - tJ ) * max ( dot ( tG , pg ) , _0_0 ) + tJ ; float tP = ( _1_0 - tJ ) * max ( dot ( tI , pg ) , _0_0 ) + tJ ; tL = _0_0 ; if ( tH . r != _0_0 ) { if ( tN > _0_0 ) { float oF = max ( dot ( rf , nI ) , _0_0 ) ; float oG = tN * tN ; float cp = _1_0 - _0_5 * ( oG / ( oG + 0.33 ) ) ; vec3 oH = tG - ot * rf ; vec3 oI = nI - oF * rf ; if ( length ( oH ) == _0_0 || length ( oI ) == _0_0 || abs ( ot ) > _1_0 || abs ( oF ) > _1_0 ) tL = ot * cp ; else { float oJ = acos ( ot ) ; float oK = acos ( oF ) ; vec3 oL = normalize ( oH ) ; vec3 oM = normalize ( oI ) ; float a , b ; a = max ( oJ , oK ) ; b = min ( oJ , oK ) ; b *= 0.95 ; float t = max ( dot ( oL , oM ) , _0_0 ) ; float oN = 0.45 * ( oG / ( oG + 0.09 ) ) ; tL = ot * ( cp + ( oN * t * sin ( a ) * tan ( b ) ) ) ; } } else tL = ot ; tL = max ( tL , _0_0 ) / M_PI ; } float J = tE ; float tQ = J * J ; float tR = ( tP * tQ - tP ) * tP + _1_0 ; float cm = tQ / ( M_PI * tR * tR ) ; float tS ; float tT ; float tU = pow ( _1_0 - tO , 5.0 ) ; tS = _1_0 ; tT = tU ; float js = J / 2.0 ; float tV = js * js ; float tW = _1_0 - tV ; float tX = _1_0 / ( tO * tO * tW + tV ) ; tS *= tX ; tT *= tX ; float tY = mix ( 0.04 , _1_0 , qO ) ; float tZ = mix ( tT , tS , tY ) ; tM = max ( ot * cm * tZ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",B:[],A:[{a:"node_in",c:"t_",i:["vec3"],g:!1},{a:"node_in",c:"ua",i:["float"],g:!1},{a:"node_in",c:"ub",i:["float"],g:!1},{a:"node_in",c:"uc",i:["float"],g:!1},{a:"node_in",c:"ud",i:["vec3"],g:!1},{a:"node_in",c:"ue",i:["vec3"],g:!1},{a:"node_out",c:"uf",i:["vec3"],g:!1}],u:[{a:"txt",b:"uf = t_ ; ua ; ub ; uc ; ud ; ue ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"ug",i:["vec3"],g:!1},{a:"node_in",c:"uh",i:["float"],
g:!1},{a:"node_in",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["vec3"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1},{a:"node_out",c:"um",i:["vec3"],g:!1},{a:"node_out",c:"un",i:["float"],g:!1},{a:"node_out",c:"uo",i:["float"],g:!1},{a:"node_out",c:"up",i:["vec3"],g:!1},{a:"node_out",c:"uq",i:["vec3"],g:!1},{a:"node_out",c:"ur",i:["float"],g:!1},{a:"node_out",c:"us",i:["vec3"],g:!1},{a:"node_out",c:"ut",i:["float"],g:!1}],u:[{a:"txt",b:"uk = ug ; ul = uh ; uo = _0_0 ; ur = _0_0 ; ut = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["up","=","ui",";"]}]},{a:"node_else",u:[{a:"txt",b:["up","=","nH",";"]}]}]},{a:"txt",b:"uj ; um = vec3 ( _0_0 ) ; un = _0_0 ; uq = vec3 ( _0_0 ) ; us = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",B:[],A:[{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_in",c:"uw",i:["float"],g:!1},{a:"node_in",c:"ux",i:["vec3"],g:!1},{a:"node_out",c:"uy",i:["vec3"],g:!1}],u:[{a:"txt",b:"uy = uu ; uv ; uw ; ux ;".split(" ")}]},
{a:"node",c:"BSDF_GLOSSY",B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["float"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_out",c:"uC",i:["vec3"],g:!1},{a:"node_out",c:"uD",i:["vec3"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["vec3"],g:!1},{a:"node_out",c:"uG",i:["float"],g:!1},{a:"node_out",c:"uH",i:["float"],g:!1},{a:"node_out",c:"uI",i:["vec3"],g:!1},{a:"node_out",c:"uJ",i:["vec3"],g:!1},{a:"node_out",
c:"uK",i:["float"],g:!1},{a:"node_out",c:"uL",i:["vec3"],g:!1},{a:"node_out",c:"uM",i:["float"],g:!1}],u:[{a:"txt",b:"uF = uz ; uG = uA ; uH = _1_0 ; uK = _0_0 ; uM = _1_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["uI","=","uB",";"]}]},{a:"node_else",u:[{a:"txt",b:["uI","=","nH",";"]}]}]},{a:"txt",b:"uC ; uD = vec3 ( _0_0 ) ; uE = _0_0 ; uJ = vec3 ( _0_0 ) ; uL = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",B:[],A:[{a:"node_in",c:"uN",i:["vec3"],g:!1},
{a:"node_in",c:"uO",i:["float"],g:!1},{a:"node_in",c:"uP",i:["float"],g:!1},{a:"node_in",c:"uQ",i:["float"],g:!1},{a:"node_out",c:"uR",i:["vec3"],g:!1}],u:[{a:"txt",b:"uR = uN ; uO ; uP ; uQ ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",B:[],A:[{a:"node_in",c:"uS",i:["vec3"],g:!1},{a:"node_out",c:"uT",i:["vec3"],g:!1},{a:"node_out",c:"uU",i:["vec3"],g:!1},{a:"node_out",c:"uV",i:["float"],g:!1},{a:"node_out",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["float"],g:!1},{a:"node_out",c:"uY",i:["float"],
g:!1},{a:"node_out",c:"uZ",i:["vec3"],g:!1},{a:"node_out",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["float"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uS ; uY = _0_0 ; va = _0_0 ; vc = _0_0 ; uZ = nH ; uT ; uU = vec3 ( _0_0 ) ; uV = _0_0 ; uW = vec3 ( _0_0 ) ; uX = _0_0 ; u_ = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",B:[],A:[{a:"node_in",c:"vd",i:["vec3"],g:!1},{a:"node_in",c:"ve",i:["vec3"],g:!1},{a:"node_out",
c:"vf",i:["vec3"],g:!1}],u:[{a:"txt",b:"vf = vd ; ve ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",B:[],A:[{a:"node_in",c:"vg",i:["vec3"],g:!1},{a:"node_in",c:"vh",i:["float"],g:!1},{a:"node_in",c:"vi",i:["float"],g:!1},{a:"node_in",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["vec3"],g:!1}],u:[{a:"txt",b:"vk [ 0 ] = vk [ 1 ] = vk [ 2 ] = _0_0 ; vg ; vh ; vi ; vj ;".split(" ")}]},{a:"node",c:"BSDF_TOON",B:[],A:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",
c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},{a:"node",c:"BSDF_VELVET",B:[],A:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1}],u:[{a:"txt",b:"vt = vq ; vr ; vs ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",B:[],A:[{a:"node_in",c:"vu",i:["vec3"],g:!1},{a:"node_in",c:"vv",i:["float"],
g:!1},{a:"node_in",c:"vw",i:["vec3"],g:!1},{a:"node_in",c:"vx",i:["float"],g:!1},{a:"node_in",c:"vy",i:["float"],g:!1},{a:"node_in",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vA [ 0 ] = vA [ 1 ] = vA [ 2 ] = _0_0 ; vu ; vw ; vx ; vy ; vz ; vv ;".split(" ")}]},{a:"node",c:"EMISSION",B:[],A:[{a:"node_in",c:"vB",i:["vec3"],g:!1},{a:"node_in",c:"vC",i:["float"],g:!1},{a:"node_out",c:"vD",i:["vec3"],g:!1},{a:"node_out",c:"vE",i:["vec3"],g:!1},{a:"node_out",c:"vF",i:["float"],
g:!1},{a:"node_out",c:"vG",i:["vec3"],g:!1},{a:"node_out",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["float"],g:!1},{a:"node_out",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["float"],g:!1},{a:"node_out",c:"vM",i:["vec3"],g:!1},{a:"node_out",c:"vN",i:["float"],g:!1}],u:[{a:"txt",b:"vK = vC * vB ; vI = _0_0 ; vL = _1_0 ; vN = _1_0 ; vJ = nH ; vD ; vE = vec3 ( _0_0 ) ; vF = _0_0 ; vG = vec3 ( _0_0 ) ; vH = _0_0 ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",
B:[],A:[{a:"node_in",c:"vO",i:["vec3"],g:!1},{a:"node_out",c:"vP",i:["vec3"],g:!1}],u:[{a:"txt",b:"vP [ 0 ] = vP [ 1 ] = vP [ 2 ] = _0_0 ; vO ;".split(" ")}]},{a:"node",c:"HOLDOUT",B:[],A:[{a:"node_out",c:"vQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"vQ [ 0 ] = vQ [ 1 ] = vQ [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",B:[],A:[{a:"node_in",c:"vR",i:["vec3"],g:!1},{a:"node_in",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1}],u:[{a:"txt",b:"vT [ 0 ] = vT [ 1 ] = vT [ 2 ] = _0_0 ; vR ; vS ;".split(" ")}]},
{a:"node",c:"VOLUME_SCATTER",B:[],A:[{a:"node_in",c:"vU",i:["vec3"],g:!1},{a:"node_in",c:"vV",i:["float"],g:!1},{a:"node_in",c:"vW",i:["float"],g:!1},{a:"node_out",c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX [ 0 ] = vX [ 1 ] = vX [ 2 ] = _0_0 ; vU ; vV ; vW ;".split(" ")}]},{a:"node",c:"BUMP",B:[{a:"node_var",c:"INVERT",b:["0"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"vY",i:["float"],g:!1},{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",
c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = vZ ; float gd = vY ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["INVERT"],u:[{a:"txt",b:["aM","=","-","_1_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","U","=","wa",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","U","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wc = dFdx ( nG ) ; vec3 wd = dFdy ( nG ) ; vec3 we = cross ( wd , U ) ; vec3 wf = cross ( U , wc ) ; float dj = dot ( wc , we ) ; float wg = abs ( dj ) ; vec3 wh = dFdx ( v_ ) * we + dFdy ( v_ ) * wf ; gd = max ( gd , _0_0 ) ; wb = normalize ( wg * U - aM * sign ( dj ) * wh ) ; wb = normalize ( gd * wb + ( _1_0 - gd ) * U ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wb","=","U",";"]}]}]}]},{a:"node",c:"DISPLACEMENT_BUMP",B:[],A:[{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_out",c:"wj",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = 0.1 ; vec3 U = nH ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wc = dFdx ( nG ) ; vec3 wd = dFdy ( nG ) ; vec3 we = cross ( wd , U ) ; vec3 wf = cross ( U , wc ) ; float dj = dot ( wc , we ) ; float wg = abs ( dj ) ; vec3 wh = dFdx ( wi ) * we + dFdy ( wi ) * wf ; wj = normalize ( wg * U - aM * sign ( dj ) * wh ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wj","=","U",";"]}]}]}]},{a:"node",c:"NORMAL_MAP",B:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"wk",i:["float"],g:!1},{a:"node_in",c:"wl",i:["vec4"],g:!1},{a:"node_in",c:"wm",i:["vec3"],g:!1},{a:"node_out",c:"wn",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","wo","=","wm",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","wo","=","rB",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wn = 2.0 * wl . xyz - _1_0 ; wn = rF * wn ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"wn = 2.0 * wl . xyz - _1_0 ; wn . yz *= - _1_0 ; wn = _ ( u_model_tsr , wn ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",
b:"wn = 2.0 * wl . xyz - _1_0 ; wn . yz *= - _1_0 ;".split(" ")}]}]},{a:"txt",b:"float lo = max ( wk , _0_0 ) ; wn = normalize ( mix ( wo , wn , lo ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",B:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],A:[{a:"node_in",c:"wp",i:["vec3"],g:!1},{a:"node_out",c:"wq",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",
{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["wq","=","wp",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_frag , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr_inverse , wp ) ;".split(" ")}]},
{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr , wp ) ; wq = ap ( u_view_tsr_frag , wq ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_inverse , wp ) ; wq = ap ( u_model_tsr_inverse , wq ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_frag , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr , wp ) ; wq = _ ( u_view_tsr_frag , wq ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_inverse , wp ) ; wq = _ ( u_model_tsr_inverse , wq ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = normalize ( wq ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",B:[],A:[{a:"node_in",c:"wr",i:["float"],g:!1},{a:"node_out",c:"ws",i:["vec3"],g:!1}],u:[{a:"txt",b:"ws [ 0 ] = ws [ 1 ] = ws [ 2 ] = _0_0 ; wr ;".split(" ")}]},{a:"node",c:"WAVELENGTH",B:[],A:[{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1}],u:[{a:"txt",b:"wu [ 0 ] = wu [ 1 ] = wu [ 2 ] = _0_0 ; wt ;".split(" ")}]},
{a:"node",c:"SEPXYZ",B:[],A:[{a:"node_in",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["float"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1}],u:[{a:"txt",b:"wA = wv [ 0 ] ; wB = wv [ 1 ] ; wC = wv [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",B:[],A:[{a:"node_in",c:"wD",i:["float"],g:!1},{a:"node_in",c:"wE",i:["float"],g:!1},{a:"node_in",c:"wF",i:["float"],g:!1},{a:"node_out",c:"wG",i:["vec3"],g:!1}],u:[{a:"txt",b:"wG [ 0 ] = wD ; wG [ 1 ] = wE ; wG [ 2 ] = wF ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",B:[],A:[{a:"node_in",c:"wH",i:["vec3"],g:!1},{a:"node_in",c:"wI",i:["float"],g:!1},{a:"node_in",c:"wJ",i:["float"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = wI - wJ * _0_5 ; wK = max ( ( _1_0 + wJ ) * wH + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",B:[],A:[{a:"node_in",c:"wL",i:["float"],g:!1},{a:"node_in",c:"wM",i:["float"],g:!1},{a:"node_out",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["float"],g:!1},{a:"node_out",
c:"wP",i:["float"],g:!1}],u:[{a:"txt",b:"wN = wO = wP = _0_0 ; wL ; wM ;".split(" ")}]},{a:"node",c:"TEX_SKY",B:[],A:[{a:"node_in",c:"wQ",i:["vec3"],g:!1},{a:"node_out",c:"wR",i:["vec3"],g:!1}],u:[{a:"txt",b:"wR [ 0 ] = wR [ 1 ] = wR [ 2 ] = _0_0 ; wQ ;".split(" ")}]},{a:"node",c:"TEX_NOISE",B:[],A:[{a:"node_in",c:"wS",i:["vec3"],g:!1},{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_out",c:"wW",i:["vec3"],g:!1},{a:"node_out",
c:"wX",i:["float"],g:!1}],u:[{a:"txt",b:"wW [ 0 ] = wW [ 1 ] = wW [ 2 ] = _0_0 ; wX = _1_0 ; wS ; wT ; wU ; wV ;".split(" ")}]},{a:"node",c:"TEX_WAVE",B:[],A:[{a:"node_in",c:"wY",i:["vec3"],g:!1},{a:"node_in",c:"wZ",i:["float"],g:!1},{a:"node_in",c:"w_",i:["float"],g:!1},{a:"node_in",c:"xa",i:["float"],g:!1},{a:"node_in",c:"xb",i:["float"],g:!1},{a:"node_out",c:"xc",i:["vec3"],g:!1},{a:"node_out",c:"xd",i:["float"],g:!1}],u:[{a:"txt",b:"xc [ 0 ] = xc [ 1 ] = xc [ 2 ] = _0_0 ; xd = _1_0 ; wY ; wZ ; w_ ; xa ; xb ;".split(" ")}]},
{a:"node",c:"TEX_VORONOI",B:[],A:[{a:"node_in",c:"xe",i:["vec3"],g:!1},{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_out",c:"xg",i:["vec3"],g:!1},{a:"node_out",c:"xh",i:["float"],g:!1}],u:[{a:"txt",b:"xg [ 0 ] = xg [ 1 ] = xg [ 2 ] = _0_0 ; xh = _1_0 ; xe ; xf ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",B:[],A:[{a:"node_in",c:"xi",i:["vec3"],g:!1},{a:"node_in",c:"xj",i:["float"],g:!1},{a:"node_in",c:"xk",i:["float"],g:!1},{a:"node_in",c:"xl",i:["float"],g:!1},{a:"node_in",c:"xm",i:["float"],g:!1},
{a:"node_in",c:"xn",i:["float"],g:!1},{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1},{a:"node_out",c:"xq",i:["float"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xq = _1_0 ; xi ; xj ; xk ; xl ; xm ; xn ; xo ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",B:[],A:[{a:"node_in",c:"xr",i:["vec3"],g:!1},{a:"node_out",c:"xs",i:["vec3"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xs [ 0 ] = xs [ 1 ] = xs [ 2 ] = _0_0 ; xt = _1_0 ; xr ;".split(" ")}]},
{a:"node",c:"TEX_MAGIC",B:[],A:[{a:"node_in",c:"xu",i:["vec3"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1},{a:"node_out",c:"xC",i:["float"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xB [ 1 ] = xB [ 2 ] = _0_0 ; xC = _1_0 ; xu ; xv ; xA ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",B:[],A:[{a:"node_in",c:"xD",i:["vec3"],g:!1},{a:"node_in",c:"xE",i:["vec3"],g:!1},{a:"node_in",c:"xF",i:["vec3"],g:!1},{a:"node_in",c:"xG",i:["float"],g:!1},
{a:"node_out",c:"xH",i:["vec3"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1}],u:[{a:"txt",b:"xH [ 0 ] = xH [ 1 ] = xH [ 2 ] = _0_0 ; xI = _1_0 ; xD ; xE ; xF ; xG ;".split(" ")}]},{a:"node",c:"TEX_BRICK",B:[],A:[{a:"node_in",c:"xJ",i:["vec3"],g:!1},{a:"node_in",c:"xK",i:["vec3"],g:!1},{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_in",c:"xM",i:["vec3"],g:!1},{a:"node_in",c:"xN",i:["float"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],
g:!1},{a:"node_in",c:"xR",i:["float"],g:!1},{a:"node_out",c:"xS",i:["vec3"],g:!1},{a:"node_out",c:"xT",i:["float"],g:!1}],u:[{a:"txt",b:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xT = _1_0 ; xJ ; xK ; xL ; xM ; xN ; xO ; xP ; xQ ; xR ;".split(" ")}]},{a:"node",c:"ADD_SHADER",B:[],A:[{a:"node_in",c:"xU",i:["vec3"],g:!1},{a:"node_in",c:"xV",i:["vec3"],g:!1},{a:"node_out",c:"xW",i:["vec3"],g:!1}],u:[{a:"txt",b:"xW = clamp ( xU + xV , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",
B:[],A:[{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_in",c:"xY",i:["vec3"],g:!1},{a:"node_in",c:"xZ",i:["vec3"],g:!1},{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_in",c:"yb",i:["vec3"],g:!1},{a:"node_in",c:"yc",i:["float"],g:!1},{a:"node_in",c:"yd",i:["float"],g:!1},{a:"node_in",c:"ye",i:["vec3"],g:!1},{a:"node_in",c:"yf",i:["vec3"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["vec3"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",
c:"yj",i:["vec3"],g:!1},{a:"node_in",c:"yk",i:["float"],g:!1},{a:"node_in",c:"yl",i:["vec3"],g:!1},{a:"node_in",c:"ym",i:["float"],g:!1},{a:"node_in",c:"yn",i:["float"],g:!1},{a:"node_in",c:"yo",i:["vec3"],g:!1},{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["vec3"],g:!1},{a:"node_in",c:"ys",i:["float"],g:!1},{a:"node_out",c:"yt",i:["vec3"],g:!1},{a:"node_out",c:"yu",i:["vec3"],g:!1},{a:"node_out",c:"yv",i:["float"],g:!1},{a:"node_out",c:"yA",i:["vec3"],
g:!1},{a:"node_out",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["float"],g:!1},{a:"node_out",c:"yD",i:["vec3"],g:!1},{a:"node_out",c:"yE",i:["vec3"],g:!1},{a:"node_out",c:"yF",i:["float"],g:!1},{a:"node_out",c:"yG",i:["vec3"],g:!1},{a:"node_out",c:"yH",i:["float"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( xX , _0_0 , _1_0 ) ; yu = mix ( x_ , yj , yI ) ; yv = mix ( ya , yk , yI ) ; if ( yd > _0_0 ) { if ( yn > _0_0 ) { yA = mix ( yb , yl , yI ) ; yB = mix ( yc , ym , yI ) ; } else { yA = yb ; yB = yc ; } } else { yA = yl ; yB = ym ; } if ( yg > _0_0 ) { if ( yq > _0_0 ) { yE = mix ( yf , yp , yI ) ; } else { yE = yf ; } } else { yE = yp ; } yC = mix ( yd , yn , yI ) ; yD = mix ( ye , yo , yI ) ; yF = mix ( yg , yq , yI ) ; yG = mix ( yh , yr , yI ) ; yH = mix ( yi , ys , yI ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",B:[],A:[{a:"node_out",c:"yJ",i:["vec3"],g:!1},{a:"node_out",c:"yK",i:["vec3"],g:!1},{a:"node_param",c:"rq",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yJ"],u:[{a:"txt",b:"yJ = rc ( rq ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yK"],u:[{a:"txt",b:"yK = vec3 ( rq , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",B:[],A:[{a:"node_out",c:"yL",i:["vec3"],g:!1},{a:"node_param",c:"rs",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",
b:"yL = vec3 ( rs , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",B:[],A:[{a:"node_out",c:"yM",i:["vec3"],g:!1}],u:[{a:"txt",b:["yM","=","nH",";"]}]},{a:"node",c:"TEX_COORD_GE",B:[],A:[{a:"node_out",c:"yN",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["yN","=","qX",";"]}]},{a:"node_else",u:[{a:"txt",b:["yN","=","ry",";"]}]}]}]},{a:"node",c:"TEX_COORD_OB",B:[],A:[{a:"node_out",c:"yO",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",
j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:"yO = ap ( u_model_tsr_inverse , nG ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["yO","=","ry",";"]}]}]}]},{a:"node",c:"TEX_COORD_CA",B:[],A:[{a:"node_out",c:"yP",i:["vec3"],g:!1}],u:[{a:"txt",b:"yP . xy = rG . xy ; yP . z = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",B:[],A:[{a:"node_out",c:"yQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"yQ . xy = l . xy / l . z ; yQ . z = _0_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",B:[],A:[{a:"node_out",
c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = reflect ( - nI , nH ) ;".split(" ")}]},{a:"node",c:"UVMAP",B:[],A:[{a:"node_out",c:"yS",i:["vec3"],g:!1},{a:"node_param",c:"rt",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"yS = vec3 ( rt , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",B:[],A:[{a:"node_out",c:"yT",i:["float"],g:!1},{a:"node_out",c:"yU",i:["float"],g:!1},{a:"node_out",c:"yV",i:["float"],g:!1},{a:"node_out",c:"yW",i:["vec3"],g:!1},{a:"node_out",c:"yX",i:["float"],g:!1},{a:"node_out",
c:"yY",i:["vec3"],g:!1},{a:"node_out",c:"yZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"yT = _0_0 ; yU = _0_0 ; yV = _0_0 ; yW = vec3 ( _0_0 ) ; yX = _0_0 ; yY = yW ; yZ = yW ;".split(" ")}]},{a:"node",c:"HAIR_INFO",B:[],A:[{a:"node_out",c:"y_",i:["float"],g:!1},{a:"node_out",c:"za",i:["float"],g:!1},{a:"node_out",c:"zb",i:["float"],g:!1},{a:"node_out",c:"zc",i:["vec3"],g:!1}],u:[{a:"txt",b:"y_ = _0_0 ; za = _0_0 ; zb = _0_0 ; zc = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",B:[{a:"node_var",c:"USE_LOCATION_OUT",
b:["0"]},{a:"node_var",c:"USE_OBJ_IND_OUT",b:["0"]},{a:"node_var",c:"USE_MAT_IND_OUT",b:["0"]},{a:"node_var",c:"USE_RANDOM_OUT",b:["0"]}],A:[{a:"node_out",c:"zd",i:["vec3"],g:!1},{a:"node_out",c:"ze",i:["float"],g:!1},{a:"node_out",c:"zf",i:["float"],g:!1},{a:"node_out",c:"zg",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_LOCATION_OUT"],u:[{a:"txt",b:"zd = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OBJ_IND_OUT"],u:[{a:"txt",b:"ze = u_obj_info . r ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MAT_IND_OUT"],u:[{a:"txt",b:"zf = u_obj_info . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_RANDOM_OUT"],u:[{a:"txt",b:"zg = u_obj_info . b ;".split(" ")}]}]}]},{a:"node",c:"WIREFRAME",B:[],A:[{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_out",c:"zi",i:["float"],g:!1}],u:[{a:"txt",b:["zi","=","zh",";"]}]},{a:"node",c:"TANGENT",B:[],A:[{a:"node_out",c:"zj",i:["vec3"],g:!1}],u:[{a:"txt",b:"zj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LAYER_WEIGHT",
B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"zk",i:["float"],g:!1},{a:"node_in",c:"zl",i:["vec3"],g:!1},{a:"node_out",c:"zm",i:["float"],g:!1},{a:"node_out",c:"zn",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:"vec3 ce = normalize ( zl ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","ce","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 zo = normalize ( nI ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","zo","=","u_camera_direction",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zm"],u:[{a:"txt",b:"float rh = max ( _1_0 - zk , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"rh = gl_FrontFacing == false ? rh : _1_0 / rh ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"rh = gl_FrontFacing ? rh : _1_0 / rh ;".split(" ")}]}]},{a:"txt",b:"zm = rj ( zo , ce , rh ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["zm","=","_0_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zn"],u:[{a:"txt",b:"zn = abs ( dot ( zo , ce ) ) ; float dT = zk ; if ( dT != _0_5 ) { dT = clamp ( dT , _0_0 , 0.99999 ) ; dT = ( dT < _0_5 ) ? 2.0 * dT : _0_5 / ( _1_0 - dT ) ; zn = pow ( zn , dT ) ; } zn = _1_0 - zn ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["zn","=","_0_0",";"]}]}]}]},{a:"node",c:"LIGHT_PATH",B:[],A:[{a:"node_out",c:"zp",i:["float"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},
{a:"node_out",c:"zr",i:["float"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["float"],g:!1},{a:"node_out",c:"zv",i:["float"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["float"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1},{a:"node_out",c:"zD",i:["float"],g:!1}],u:[{a:"txt",b:"zp = zq = zr = _0_0 ; zs = zt = zu = _0_0 ; zv = zD = zB = zC = _0_0 ; zA = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",B:[],A:[{a:"node_out",
c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_out",c:"zG",i:["float"],g:!1}],u:[{a:"txt",b:"zE = zF = vec3 ( _0_0 ) ; zG = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",B:[],A:[],u:[]},{a:"node",c:"CURVE_VEC",B:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],A:[{a:"node_in",c:"zH",i:["float"],g:!1},{a:"node_in",c:"zI",i:["vec3"],g:!1},{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",
b:["zJ","=","zI",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"zJ . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"zJ . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"zJ . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"txt",b:"zJ = mix ( zI , zJ , zH ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",B:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],A:[{a:"node_in",c:"zK",i:["float"],g:!1},{a:"node_in",c:"zL",i:["vec3"],g:!1},{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = zL . r ; float g = zL . g ; float b = zL . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"zM . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"zM . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"zM . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . b = b ;".split(" ")}]}]},{a:"txt",b:"zM = mix ( zL , zM , zK ) ;".split(" ")}]},{a:"node",c:"VALTORGB",B:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],A:[{a:"node_in",c:"zN",i:["float"],g:!1},{a:"node_out",c:"zO",i:["vec3"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zN , NODE_TEX_ROW ) ) ; zO = zQ . rgb ; zP = zQ . a ;".split(" ")}]},
{a:"node",c:"MAPPING",B:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],A:[{a:"node_in",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["vec3"],g:!1}],u:[{a:"txt",b:["zS","=","zR",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"zS = zS * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"zS = zS + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"zS = ( MAPPING_TRS_MATRIX * vec4 ( zS , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"zS = max ( zS , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"zS = min ( zS , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"zS = normalize ( zS ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",B:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],A:[{a:"node_in",c:"zT",i:["float"],g:!1},{a:"node_in",c:"zU",i:["float"],g:!1},{a:"node_out",c:"zV",i:["float"],g:!1}],u:[{a:"txt",b:"zV = zT + zU ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"zV = clamp ( zV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"zW",i:["float"],g:!1},{a:"node_in",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["float"],g:!1}],u:[{a:"txt",b:"zY = zW - zX ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"zY = clamp ( zY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"zZ",i:["float"],g:!1},{a:"node_in",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1}],u:[{a:"txt",b:"Aa = zZ * z_ ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Aa = clamp ( Aa , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ab",i:["float"],g:!1},{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:"Ad = ( Ac != _0_0 ) ? Ab / Ac : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ad = clamp ( Ad , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ae",i:["float"],g:!1},{a:"node_in",c:"Af",i:["float"],g:!1},
{a:"node_out",c:"Ag",i:["float"],g:!1}],u:[{a:"txt",b:"Ag = sin ( Ae ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ag = clamp ( Ag , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Af",";"]}]},{a:"node",c:"MATH_COSINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ah",i:["float"],g:!1},{a:"node_in",c:"Ai",i:["float"],g:!1},{a:"node_out",c:"Aj",i:["float"],g:!1}],u:[{a:"txt",b:"Aj = cos ( Ah ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Aj = clamp ( Aj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ai",";"]}]},{a:"node",c:"MATH_TANGENT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ak",i:["float"],g:!1},{a:"node_in",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1}],u:[{a:"txt",b:"Am = tan ( Ak ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Am = clamp ( Am , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Al",";"]}]},{a:"node",c:"MATH_ARCSINE",B:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"An",i:["float"],g:!1},{a:"node_in",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1}],u:[{a:"txt",b:"Ap = ( An <= _1_0 && An >= - _1_0 ) ? asin ( An ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ap = clamp ( Ap , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ao",";"]}]},{a:"node",c:"MATH_ARCCOSINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Aq",i:["float"],g:!1},{a:"node_in",
c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1}],u:[{a:"txt",b:"As = ( Aq <= _1_0 && Aq >= - _1_0 ) ? acos ( Aq ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"As = clamp ( As , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ar",";"]}]},{a:"node",c:"MATH_ARCTANGENT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"At",i:["float"],g:!1},{a:"node_in",c:"Au",i:["float"],g:!1},{a:"node_out",c:"Av",i:["float"],g:!1}],u:[{a:"txt",
b:"Av = atan ( At ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Av = clamp ( Av , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Au",";"]}]},{a:"node",c:"MATH_POWER",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Aw",i:["float"],g:!1},{a:"node_in",c:"Ax",i:["float"],g:!1},{a:"node_out",c:"Ay",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Aw < _0_0 && Ax != floor ( Ax ) ) Ay = _0_0 ; else if ( Ax == _0_0 ) Ay = _1_0 ; else if ( Aw < _0_0 ) Ay = mix ( _1_0 , - _1_0 , sign ( mod ( - Ax , 2.0 ) ) ) * pow ( - Aw , Ax ) ; else if ( Aw == _0_0 ) Ay = _0_0 ; else Ay = pow ( Aw , Ax ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ay = clamp ( Ay , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Az",i:["float"],g:!1},{a:"node_in",c:"AA",i:["float"],g:!1},{a:"node_out",c:"AB",i:["float"],g:!1}],u:[{a:"txt",b:"AB = ( Az > _0_0 && AA > _0_0 ) ? log2 ( Az ) / log2 ( AA ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AB = clamp ( AB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AC",i:["float"],g:!1},{a:"node_in",c:"AD",i:["float"],g:!1},{a:"node_out",c:"AE",i:["float"],g:!1}],u:[{a:"txt",b:"AE = min ( AC , AD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AE = clamp ( AE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AF",i:["float"],g:!1},{a:"node_in",c:"AG",i:["float"],
g:!1},{a:"node_out",c:"AH",i:["float"],g:!1}],u:[{a:"txt",b:"AH = max ( AF , AG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AH = clamp ( AH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AI",i:["float"],g:!1},{a:"node_in",c:"AJ",i:["float"],g:!1},{a:"node_out",c:"AK",i:["float"],g:!1}],u:[{a:"txt",b:"AK = floor ( AI + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"AK = clamp ( AK , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AJ",";"]}]},{a:"node",c:"MATH_LESS_THAN",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_in",c:"AM",i:["float"],g:!1},{a:"node_out",c:"AN",i:["float"],g:!1}],u:[{a:"txt",b:"AN = ( AL < AM ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AN = clamp ( AN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",B:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_in",c:"AP",i:["float"],g:!1},{a:"node_out",c:"AQ",i:["float"],g:!1}],u:[{a:"txt",b:"AQ = ( AO > AP ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AQ = clamp ( AQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_in",c:"AS",i:["float"],g:!1},{a:"node_out",c:"AT",
i:["float"],g:!1}],u:[{a:"txt",b:"AT = abs ( AS ) > 0.000001 ? mod ( AR , AS ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AT = clamp ( AT , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_in",c:"AV",i:["float"],g:!1},{a:"node_out",c:"AW",i:["float"],g:!1}],u:[{a:"txt",b:"AW = abs ( AU ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"AW = clamp ( AW , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AV",";"]}]},{a:"node",c:"MIX_RGB_MIX",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AX",i:["float"],g:!1},{a:"node_in",c:"AY",i:["vec3"],g:!1},{a:"node_in",c:"AZ",i:["vec3"],g:!1},{a:"node_out",c:"A_",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( AX , _0_0 , _1_0 ) ; A_ = mix ( AY , AZ , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"A_ = clamp ( A_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ba",i:["float"],g:!1},{a:"node_in",c:"Bb",i:["vec3"],g:!1},{a:"node_in",c:"Bc",i:["vec3"],g:!1},{a:"node_out",c:"Bd",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ba , _0_0 , _1_0 ) ; Bd = mix ( Bb , Bb + Bc , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",B:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["vec3"],g:!1},{a:"node_in",c:"Bg",i:["vec3"],g:!1},{a:"node_out",c:"Bh",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Be , _0_0 , _1_0 ) ; Bh = mix ( Bf , Bf * Bg , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bh = clamp ( Bh , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_in",c:"Bj",i:["vec3"],g:!1},{a:"node_in",c:"Bk",i:["vec3"],g:!1},{a:"node_out",c:"Bl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bi , _0_0 , _1_0 ) ; Bl = mix ( Bj , Bj - Bk , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bl = clamp ( Bl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Bm",i:["float"],g:!1},{a:"node_in",c:"Bn",
i:["vec3"],g:!1},{a:"node_in",c:"Bo",i:["vec3"],g:!1},{a:"node_out",c:"Bp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bm , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Bp = vec3 ( _1_0 ) - ( vec3 ( Bq ) + yI * ( vec3 ( _1_0 ) - Bo ) ) * ( vec3 ( _1_0 ) - Bn ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Br",
i:["float"],g:!1},{a:"node_in",c:"Bs",i:["vec3"],g:!1},{a:"node_in",c:"Bt",i:["vec3"],g:!1},{a:"node_out",c:"Bu",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Br , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Bt += step ( Bt , vec3 ( _0_0 ) ) ; Bu = Bq * Bs + yI * Bs / Bt ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bu = clamp ( Bu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",
c:"Bv",i:["float"],g:!1},{a:"node_in",c:"Bw",i:["vec3"],g:!1},{a:"node_in",c:"Bx",i:["vec3"],g:!1},{a:"node_out",c:"By",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bv , _0_0 , _1_0 ) ; By = mix ( Bw , abs ( Bw - Bx ) , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",
c:"BA",i:["vec3"],g:!1},{a:"node_in",c:"BB",i:["vec3"],g:!1},{a:"node_out",c:"BC",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bz , _0_0 , _1_0 ) ; BC = min ( BA . rgb , BB . rgb * yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BC = clamp ( BC , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_in",c:"BE",i:["vec3"],g:!1},{a:"node_in",
c:"BF",i:["vec3"],g:!1},{a:"node_out",c:"BG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BD , _0_0 , _1_0 ) ; BG = max ( BE . rgb , BF . rgb * yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BG = clamp ( BG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BH",i:["float"],g:!1},{a:"node_in",c:"BI",i:["vec3"],g:!1},{a:"node_in",c:"BJ",i:["vec3"],g:!1},{a:"node_out",
c:"BK",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BH , _0_0 , _1_0 ) ; vec3 BL = vec3 ( _1_0 - yI ) ; BK = mix ( BI * ( BL + 2.0 * yI * BJ ) , vec3 ( _1_0 ) - ( BL + 2.0 * yI * ( vec3 ( _1_0 ) - BJ ) ) * ( vec3 ( _1_0 ) - BI ) , step ( _0_5 , BI ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BM",i:["float"],
g:!1},{a:"node_in",c:"BN",i:["vec3"],g:!1},{a:"node_in",c:"BO",i:["vec3"],g:!1},{a:"node_out",c:"BP",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BM , _0_0 , _1_0 ) ; vec3 BQ = vec3 ( _1_0 ) - yI * BO ; vec3 BR = clamp ( BN / BQ , _0_0 , _1_0 ) ; BP = mix ( mix ( BR , vec3 ( _1_0 ) , step ( BQ , vec3 ( _0_0 ) ) ) , BN , step ( BN , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BP = clamp ( BP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BS , _0_0 , _1_0 ) ; vec3 jC = vec3 ( _1_0 - yI ) ; vec3 BQ = jC + yI * BU ; vec3 BR = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - BT ) / BQ , _0_0 , _1_0 ) ; BV = mix ( BR , vec3 ( _0_0 ) , step ( BQ , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BW , _0_0 , _1_0 ) ; vec3 ju , B_ , BQ ; BZ = BX ; B_ = jt ( BY ) ; if ( B_ . y != _0_0 ) { ju = jt ( BZ ) ; ju . x = B_ . x ; BQ = jv ( ju ) ; BZ = mix ( BZ , BQ , yI ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ca",i:["float"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_in",c:"Cc",i:["vec3"],g:!1},{a:"node_out",c:"Cd",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ca , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Cd = Cb ; vec3 ju , B_ ; ju = jt ( Cd ) ; if ( ju . y != _0_0 ) { B_ = jt ( Cc ) ; ju . y = Bq * ju . y + yI * B_ . y ; Cd = jv ( ju ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ce",i:["float"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_in",c:"Cg",i:["vec3"],g:!1},{a:"node_out",c:"Ch",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ce , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; vec3 ju , B_ ; ju = jt ( Cf ) ; B_ = jt ( Cg ) ; ju . z = Bq * ju . z + yI * B_ . z ; Ch = jv ( ju ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ch = clamp ( Ch , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ci",i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ci , _0_0 , _1_0 ) ; vec3 ju , B_ , BQ ; Cl = Cj ; B_ = jt ( Ck ) ; if ( B_ . y != _0_0 ) { ju = jt ( Cl ) ; ju . x = B_ . x ; ju . y = B_ . y ; BQ = jv ( ju ) ; Cl = mix ( Cl , BQ , yI ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cm , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; vec3 Cq = Co + Cn - Co * Cn ; Cp = Cn * ( vec3 ( Bq ) + vec3 ( yI ) * ( ( vec3 ( _1_0 ) - Cn ) * Co + Cq ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Cr",i:["float"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_in",c:"Ct",i:["vec3"],g:!1},{a:"node_out",c:"Cu",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cr , _0_0 , _1_0 ) ; Cu = Cs + yI * ( 2.0 * Ct - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cu = clamp ( Cu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_WORLD_RGB",B:[],A:[{a:"node_in",c:"Cv",i:["float"],g:!1},{a:"node_in",c:"Cw",i:["vec3"],g:!1},{a:"node_in",c:"Cx",i:["vec3"],g:!1},{a:"node_out",c:"Cy",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cv , _0_0 , _1_0 ) ; Cy = mix ( Cw , Cx , yI ) ;".split(" ")}]},{a:"node",c:"ADD_WORLD_RGB",B:[],A:[{a:"node_in",c:"Cz",i:["float"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_in",
c:"CB",i:["vec3"],g:!1},{a:"node_out",c:"CC",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cz , _0_0 , _1_0 ) ; CC = mix ( CA , CA + CB , yI ) ;".split(" ")}]},{a:"node",c:"OUTPUT",B:[],A:[{a:"node_in",c:"CD",i:["vec3"],g:!1},{a:"node_in",c:"CE",i:["float"],g:!1}],u:[{a:"txt",b:"D = CD ; H = CE ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",B:[],A:[{a:"node_in",c:"CF",i:["vec3"],g:!1}],u:[{a:"txt",b:"D = CF ; H = _1_0 ;".split(" ")}]},{a:"node",c:"OUTPUT_WORLD_SURFACE",B:[],A:[{a:"node_in",c:"CG",
i:["vec3"],g:!1}],u:[{a:"txt",b:"D = CG ; H = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",B:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],A:[{a:"node_in",c:"CH",i:["vec3"],g:!1},{a:"node_in",c:"CI",i:["vec3"],g:!1},{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!0},{a:"node_in",c:"CL",i:["float"],g:!0},{a:"node_out",c:"CM",i:["vec3"],g:!1},
{a:"node_out",c:"CN",i:["vec3"],g:!1},{a:"node_out",c:"CO",i:["vec3"],g:!1},{a:"node_out",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1},{a:"node_out",c:"CR",i:["vec2"],g:!1},{a:"node_out",c:"CS",i:["vec2"],g:!1},{a:"node_out",c:"CT",i:["vec4"],g:!1},{a:"node_param",c:"ru",i:["const","vec2"],g:!1},{a:"node_param",c:"rv",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"CO = clamp ( CH , _0_0 , _1_0 ) ; CP = rv [ 0 ] * clamp ( CI , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"CQ = normalize ( CK ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["CQ","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"CM = CL * CO ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"CM = rH * CO ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["CO","*=","CJ",";"]}]}]},{a:"txt",b:"CN = rI * u_environment_energy * cn ( CQ ) ; CT = cq ( CO ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"CR = vec2 ( ru [ 0 ] , ru [ 1 ] ) ; CS = vec2 ( rv [ 1 ] , rv [ 2 ] ) ;".split(" ")}]}]},{a:"txt",b:["G","=","CT",";"]}]},{a:"node_else",u:[{a:"txt",b:"CM = vec3 ( _0_0 ) ; CN = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",B:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],A:[{a:"node_in",c:"CU",i:["vec4"],g:!1},
{a:"node_in",c:"CV",i:["vec3"],g:!1},{a:"node_in",c:"CW",i:["vec3"],g:!1},{a:"node_in",c:"CX",i:["float"],g:!0},{a:"node_in",c:"CY",i:["float"],g:!0},{a:"node_in",c:"CZ",i:["float"],g:!0},{a:"node_out",c:"C_",i:["vec3"],g:!0},{a:"node_out",c:"Da",i:["float"],g:!0},{a:"node_out",c:"Db",i:["vec3"],g:!0},{a:"node_out",c:"Dc",i:["vec3"],g:!0},{a:"node_out",c:"Dd",i:["vec3"],g:!0},{a:"node_param",c:"rw",i:["float"],g:!1},{a:"node_param",c:"rx",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_C_"],
u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"C_ = CU . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"C_ = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"cz ( C_ , nI , CW , CX , u_view_tsr_frag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"cz ( C_ , nI , CW , CX , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["C_","+=","CV",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Db"],u:[{a:"txt",b:["Db","=","CW",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dc"],u:[{a:"txt",b:"Dc = CU . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dd"],u:[{a:"txt",b:["Dd","=","CV",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Da"],u:[{a:"txt",b:"Da = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( CV . r , CV . g ) , CV . b ) * CY ; Da = clamp ( CZ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Da"],u:[{a:"txt",b:"Da = clamp ( rw , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( CV . r , CV . g ) , CV . b ) * rx ; Da = rw * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["E","=","CV",";"]}]},{a:"node_else",u:[{a:"txt",b:"E = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["F","=","CW",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",B:[],A:[{a:"node_in",c:"nZ",i:["vec3"],g:!1},{a:"node_in",c:"n_",i:["vec3"],g:!1},{a:"node_in",c:"oa",i:["vec3"],g:!1},{a:"node_out",c:"ob",i:["vec4"],g:!1},{a:"node_out",c:"oc",i:["vec3"],g:!1}],u:[{a:"txt",b:"ob = vec4 ( nZ + oa * n_ , _0_0 ) ; oc = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",B:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],A:[{a:"node_in",c:"od",i:["vec4"],g:!1},{a:"node_out",c:"oe",i:["vec3"],g:!1},{a:"node_out",c:"of",i:["vec2"],g:!1},{a:"node_out",c:"og",i:["vec3"],g:!1},{a:"node_out",
c:"oh",i:["float"],g:!1}],u:[{a:"txt",b:"of = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oh","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oh","=","_0_0",";"]}]}]},{a:"txt",b:"og = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],
u:[{a:"txt",b:"og *= od [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oi = u_light_positions [ LAMP_IND ] . xyz ; oe = oi - nG ; float aM = length ( oe ) ; og *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oe = normalize ( oe ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 ok = u_light_directions [ LAMP_IND ] ; float ol = dot ( oe , ok ) ; ol *= smoothstep ( _0_0 , _1_0 , ( ol - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; og *= ol ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"og *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"txt",b:"oe = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"om",i:["vec3"],g:!1},{a:"node_in",c:"on",i:["vec2"],g:!1},{a:"node_in",c:"oo",i:["vec3"],g:!1},{a:"node_in",c:"op",i:["float"],g:!1},{a:"node_in",c:"oq",i:["vec2"],
g:!1},{a:"node_out",c:"or",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","rf","=","oo",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( om , B . xyz ) ; rf = cross ( os , B . xyz ) ; rf = - normalize ( rf ) ;".split(" ")}]}]},{a:"txt",b:"or = _0_0 ; if ( on . r != _0_0 ) { float ot = ( _1_0 - op ) * dot ( rf , om ) + op ; if ( oq [ 0 ] == _0_0 ) { or = _1_0 ; } else { float t = _1_0 + abs ( ot ) ; t = oq [ 1 ] + ( _1_0 - oq [ 1 ] ) * pow ( t , oq [ 0 ] ) ; or = clamp ( t , _0_0 , _1_0 ) ; } or = max ( or , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ou",i:["vec3"],g:!1},{a:"node_in",c:"ov",i:["vec2"],g:!1},{a:"node_in",c:"ow",i:["vec3"],g:!1},{a:"node_in",c:"ox",i:["float"],g:!1},{a:"node_out",c:"oy",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","rf","=","ow",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( ou , B . xyz ) ; rf = cross ( os , B . xyz ) ; rf = - normalize ( rf ) ;".split(" ")}]}]},{a:"txt",
b:"oy = _0_0 ; if ( ov . r != _0_0 ) { float ot = ( _1_0 - ox ) * dot ( rf , ou ) + ox ; oy = max ( ot , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oz",i:["vec3"],g:!1},{a:"node_in",c:"oA",i:["vec2"],g:!1},{a:"node_in",c:"oB",i:["vec3"],g:!1},{a:"node_in",c:"oC",i:["float"],g:!1},{a:"node_in",c:"oD",i:["vec2"],g:!1},{a:"node_out",c:"oE",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","rf","=","oB",";"]},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oz , B . xyz ) ; rf = cross ( os , B . xyz ) ; rf = - normalize ( rf ) ;".split(" ")}]}]},{a:"txt",b:"oE = _0_0 ; if ( oA . r != _0_0 ) { float ot = ( _1_0 - oC ) * dot ( rf , oz ) + oC ; if ( oD [ 0 ] > _0_0 ) { float oF = max ( dot ( rf , nI ) , _0_0 ) ; float oG = oD [ 0 ] * oD [ 0 ] ; float cp = _1_0 - _0_5 * ( oG / ( oG + 0.33 ) ) ; vec3 oH = oz - ot * rf ; vec3 oI = nI - oF * rf ; if ( length ( oH ) == _0_0 || length ( oI ) == _0_0 || abs ( ot ) > _1_0 || abs ( oF ) > _1_0 ) oE = ot * cp ; else { float oJ = acos ( ot ) ; float oK = acos ( oF ) ; vec3 oL = normalize ( oH ) ; vec3 oM = normalize ( oI ) ; float a , b ; a = max ( oJ , oK ) ; b = min ( oJ , oK ) ; b *= 0.95 ; float t = max ( dot ( oL , oM ) , _0_0 ) ; float oN = 0.45 * ( oG / ( oG + 0.09 ) ) ; oE = ot * ( cp + ( oN * t * sin ( a ) * tan ( b ) ) ) ; } } else oE = ot ; oE = max ( oE , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oO",i:["vec3"],g:!1},{a:"node_in",c:"oP",i:["vec2"],g:!1},{a:"node_in",c:"oQ",i:["vec3"],g:!1},{a:"node_in",c:"oR",i:["float"],g:!1},{a:"node_in",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","rf","=","oQ",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oO , B . xyz ) ; rf = cross ( os , B . xyz ) ; rf = - normalize ( rf ) ;".split(" ")}]}]},
{a:"txt",b:"oT = _0_0 ; if ( oP . r != _0_0 ) { float ot = ( _1_0 - oR ) * dot ( rf , oO ) + oR ; float oF = max ( dot ( rf , nI ) , _0_0 ) ; if ( oS [ 0 ] <= _1_0 ) oT = ot * pow ( max ( oF * ot , 0.1 ) , oS [ 0 ] - _1_0 ) ; else oT = ot * pow ( 1.0001 - oF , oS [ 0 ] - _1_0 ) ; oT = max ( oT , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oU",i:["vec3"],g:!1},{a:"node_in",c:"oV",i:["vec2"],g:!1},{a:"node_in",c:"oW",i:["vec3"],
g:!1},{a:"node_in",c:"oX",i:["float"],g:!1},{a:"node_in",c:"oY",i:["vec2"],g:!1},{a:"node_out",c:"oZ",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","rf","=","oW",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oU , B . xyz ) ; rf = cross ( os , B . xyz ) ; rf = - normalize ( rf ) ;".split(" ")}]}]},{a:"txt",b:"oZ = _0_0 ; if ( oV . r != _0_0 ) { float ot = ( _1_0 - oX ) * dot ( rf , oU ) + oX ; float o_ = acos ( ot ) ; if ( o_ < oY [ 0 ] ) oZ = _1_0 ; else if ( o_ > ( oY [ 0 ] + oY [ 1 ] ) || oY [ 1 ] == _0_0 ) oZ = _0_0 ; else oZ = _1_0 - ( ( o_ - oY [ 0 ] ) / oY [ 1 ] ) ; oZ = max ( oZ , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["vec2"],g:!1},{a:"node_in",c:"pc",i:["vec3"],g:!1},{a:"node_in",c:"pd",i:["float"],g:!1},{a:"node_in",c:"pe",i:["vec2"],g:!1},{a:"node_out",c:"pf",i:["float"],g:!1}],u:[{a:"txt",b:"pf = _0_0 ; if ( pb . g == _1_0 ) { vec3 pg = normalize ( pa + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pd == _0_0 ) { pf = dot ( B . xyz , pg ) ; pf = sqrt ( _1_0 - pf * pf ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pf = ( _1_0 - pd ) * max ( dot ( pc , pg ) , _0_0 ) + pd ;".split(" ")}]}]},{a:"txt",b:"pf = pow ( pf , pe [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ph",i:["vec3"],g:!1},{a:"node_in",c:"pi",i:["vec2"],g:!1},{a:"node_in",c:"pj",i:["vec3"],g:!1},{a:"node_in",c:"pk",i:["float"],g:!1},{a:"node_in",c:"pl",i:["vec2"],g:!1},{a:"node_out",c:"pm",i:["float"],g:!1}],u:[{a:"txt",b:"pm = _0_0 ; if ( pi . g != _0_0 ) { vec3 pg = normalize ( ph + nI ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pk == _0_0 ) { pm = dot ( B . xyz , pg ) ; pm = sqrt ( _1_0 - pm * pm ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"pm = max ( dot ( pj , pg ) , _0_0 ) ; pm = ( _1_0 - pk ) * pm + pk ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float oF = max ( dot ( B . xyz , nI ) , _0_0 ) ; oF = sqrt ( _1_0 - oF * oF ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float oF = max ( dot ( pj , nI ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"pm = pow ( pm , pl [ 0 ] ) ; pm = pm / ( 0.1 + oF ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["vec2"],g:!1},{a:"node_in",c:"pr",i:["vec3"],g:!1},{a:"node_in",c:"pu",i:["float"],g:!1},{a:"node_in",c:"pv",i:["vec2"],g:!1},{a:"node_out",c:"pw",i:["float"],g:!1}],u:[{a:"txt",b:"pw = _0_0 ; if ( po . g == _1_0 ) { vec3 pg = normalize ( pn + nI ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = _0_0 ; float oF = _0_0 ; float py = _0_0 ; if ( pu == _0_0 ) { px = dot ( B . xyz , pg ) ; oF = dot ( B . xyz , nI ) ; py = dot ( B . xyz , pn ) ; px = sqrt ( _1_0 - px * px ) ; oF = sqrt ( _1_0 - oF * oF ) ; py = sqrt ( _1_0 - py * py ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = max ( dot ( pr , pg ) , 0.01 ) ; float oF = max ( dot ( pr , nI ) , 0.01 ) ; float py = max ( dot ( pr , pn ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bx = tan ( acos ( px ) ) ; float J = max ( pv [ 0 ] , 0.01 ) ; pw = py * ( _1_0 / ( 4.0 * M_PI * J * J ) ) * ( exp ( - ( bx * bx ) / ( J * J ) ) / ( sqrt ( oF * py ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pz",i:["vec3"],g:!1},{a:"node_in",c:"pA",i:["vec2"],g:!1},{a:"node_in",c:"pB",i:["vec3"],g:!1},{a:"node_in",c:"pC",i:["float"],g:!1},{a:"node_in",c:"pD",i:["vec2"],g:!1},{a:"node_out",c:"pE",i:["float"],
g:!1}],u:[{a:"txt",b:"pE = _0_0 ; if ( pA . g == _1_0 ) { vec3 bX = normalize ( pz + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pF = dot ( bX , B . xyz ) ; float bx = pD [ 0 ] + pD [ 1 ] ; if ( pC == _0_0 ) bx = acos ( sqrt ( _1_0 - pF * pF ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bx = acos ( dot ( bX , pB ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bx < pD [ 0 ] ) pE = _1_0 ; else if ( bx >= pD [ 0 ] + pD [ 1 ] || pD [ 1 ] == _0_0 ) pE = _0_0 ; else pE = _1_0 - ( bx - pD [ 0 ] ) / pD [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pG",i:["vec3"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_in",c:"pI",i:["vec3"],g:!1},{a:"node_in",c:"pJ",i:["float"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_out",c:"pL",i:["float"],g:!1}],u:[{a:"txt",b:"float pM = pK [ 0 ] ; float pN = pK [ 1 ] ; pL = _0_0 ; if ( pH . g == _1_0 ) { if ( pM < _1_0 || pN == _0_0 ) pL = _0_0 ; else { if ( pN < 100.0 ) pN = sqrt ( _1_0 / pN ) ; else pN = 10.0 / pN ; vec3 pg = normalize ( nI + pG ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = _0_0 ; if ( pJ == _0_0 ) { float pO = dot ( B . xyz , pg ) ; px = sqrt ( _1_0 - pO * pO ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = ( _1_0 - pJ ) * max ( dot ( pI , pg ) , _0_0 ) + pJ ;".split(" ")}]}]},{a:"txt",b:"if ( px < _0_0 ) pL = _0_0 ; else { float oF = max ( dot ( pI , nI ) , 0.01 ) ; float py = dot ( pI , pG ) ; if ( py <= 0.01 ) pL = _0_0 ; else { float pP = max ( dot ( nI , pg ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * px * oF ) / pP ; float di = ( 2.0 * px * py ) / pP ; float g = min ( min ( a , b ) , di ) ; float p = sqrt ( pow ( pM , 2.0 ) + pow ( pP , 2.0 ) - _1_0 ) ; float lw = pow ( p - pP , 2.0 ) / pow ( p + pP , 2.0 ) * ( _1_0 + pow ( pP * ( p + pP ) - _1_0 , 2.0 ) / pow ( pP * ( p - pP ) + _1_0 , 2.0 ) ) ; float o_ = acos ( px ) ; pL = max ( lw * g * exp ( - pow ( o_ , 2.0 ) / ( 2.0 * pow ( pN , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",B:[],A:[{a:"node_in",c:"pQ",i:["vec4"],g:!1},{a:"node_in",c:"pR",i:["vec3"],g:!1},{a:"node_in",c:"pS",i:["float"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec3"],g:!1},{a:"node_in",c:"pV",i:["vec3"],g:!1},{a:"node_in",c:"pW",i:["vec4"],g:!1},{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec3"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_out",c:"qa",i:["vec4"],g:!1},{a:"node_out",c:"qb",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( pU , pV ) * dot ( nI , pV ) < _0_0 ) { float De = pW . x ; float Df = pW . y ; float Dg = pW . z ; float Dh = pW . w ; float Di = clamp ( abs ( dot ( pU , pV ) ) , _0_0 , _1_0 ) ; float Dj = clamp ( dot ( nI , - pU ) , _0_0 , _1_0 ) ; float Dk = pow ( Dj , Df ) ; qa = pQ + p_ * vec4 ( pZ * Di * pow ( pX , vec3 ( De ) ) , _1_0 ) ; qa += Dg * mix ( vec4 ( pX , _1_0 ) , vec4 ( _1_0 ) , Dh ) * p_ * vec4 ( pZ * Di * vec3 ( Dk ) , _1_0 ) ; } else { qa = pQ + vec4 ( pZ * pX * pS , pT ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qa = pQ + vec4 ( pZ * pX * pS , pT ) ;".split(" ")}]}]},{a:"txt",b:"qb = pR + pZ * pY * pT ;".split(" ")}]},{a:"node",c:"RGB",B:[{a:"node_var",c:"RGB_IND",b:["0"]}],A:[{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"Dl = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",B:[],A:[{a:"node_in",c:"Dm",i:["vec3"],g:!1},{a:"node_out",c:"Dn",i:["float"],g:!1}],u:[{a:"txt",b:"Dn = dot ( Dm , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
B:[],A:[{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["float"],g:!0},{a:"node_out",c:"Dq",i:["float"],g:!0},{a:"node_out",c:"Dr",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dp"],u:[{a:"txt",b:"Dp = Do . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dq"],u:[{a:"txt",b:"Dq = Do . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dr"],u:[{a:"txt",b:"Dr = Do . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",B:[],A:[{a:"node_in",c:"Ds",i:["vec3"],
g:!1},{a:"node_out",c:"Dt",i:["float"],g:!0},{a:"node_out",c:"Du",i:["float"],g:!0},{a:"node_out",c:"Dv",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 Dw = jt ( Ds ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dt"],u:[{a:"txt",b:"Dt = Dw . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Du"],u:[{a:"txt",b:"Du = Dw . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dv"],u:[{a:"txt",b:"Dv = Dw . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",B:[],A:[{a:"node_in",
c:"Dx",i:["float"],g:!1},{a:"node_in",c:"Dy",i:["float"],g:!1},{a:"node_in",c:"Dz",i:["float"],g:!1},{a:"node_out",c:"DA",i:["float"],g:!1}],u:[{a:"txt",b:"DA = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Dx - Dz ) * Dy ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",B:[],A:[{a:"node_in",c:"DB",i:["vec3"],g:!1},{a:"node_in",c:"DC",i:["float"],g:!1},{a:"node_out",c:"DD",i:["vec3"],g:!1}],u:[{a:"txt",b:"DD = DB ; if ( DD . x > _0_0 ) DD . x = pow ( DB . x , DC ) ; if ( DD . y > _0_0 ) DD . y = pow ( DB . y , DC ) ; if ( DD . z > _0_0 ) DD . z = pow ( DB . z , DC ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",B:[],A:[{a:"node_in",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1}],u:[{a:"txt",b:"DF = max ( vec3 ( _0_0 ) , DE ) ; DF = pow ( DF , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",B:[],A:[{a:"node_in",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1}],u:[{a:"txt",b:"DH = max ( vec3 ( _0_0 ) , DG ) ; DH = pow ( DH , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",B:[],A:[{a:"node_out",c:"DI",i:["vec3"],
g:!1},{a:"node_out",c:"DJ",i:["vec3"],g:!1},{a:"node_out",c:"DK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DI"],u:[{a:"txt",b:"DI [ 2 ] = DI [ 1 ] = DI [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DJ"],u:[{a:"txt",b:"DJ [ 2 ] = DJ [ 1 ] = DJ [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DK"],u:[{a:"txt",b:["DK","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT_CUBE",B:[],A:[{a:"node_in",c:"DL",i:["vec3"],g:!1},
{a:"node_out",c:"DM",i:["vec3"],g:!0},{a:"node_out",c:"DN",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec3 DO = vec3 ( DL . x , DL . y , DL . z ) ; vec4 zQ = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , DO ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DM"],u:[{a:"txt",b:"DM = zQ . xyz ; cg ( DM ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DN"],u:[{a:"txt",b:"DN = zQ . w ;".split(" ")}]}]}]},
{a:"node",c:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",B:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],A:[{a:"node_in",c:"DP",i:["vec3"],g:!1},{a:"node_out",c:"DQ",i:["vec3"],g:!1},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 DR = normalize ( DP ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","DR","=","ry",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3",
"DR","=","nH",";"]}]}]},{a:"txt",b:"float dr = - atan ( DR . y , DR . x ) / ( 2.0 * M_PI ) + _0_5 ; float kd = atan ( DR . z , sqrt ( DR . x * DR . x + DR . y * DR . y ) ) / M_PI + _0_5 ; vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dr , kd ) ) ; DQ = zQ . xyz ; cg ( DQ ) ;".split(" ")}]},{a:"node",c:"TEXTURE_ENVIRONMENT_MIRROR_BALL",B:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],A:[{a:"node_in",c:"DS",i:["vec3"],g:!1},{a:"node_out",c:"DT",i:["vec3"],g:!1},
{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 DR = normalize ( DS ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","DR","=","ry",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","DR","=","nH",";"]}]}]},{a:"txt",b:"DR . y -= _1_0 ; float DU = 2.0 * sqrt ( max ( - _0_5 * DR . y , _0_0 ) ) ; if ( DU > _0_0 ) DR /= DU ; float dr = _0_5 * ( DR . x + _1_0 ) ; float kd = _0_5 * ( DR . z + _1_0 ) ; vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dr , kd ) ) ; DT = zQ . xyz ; cg ( DT ) ;".split(" ")}]},
{a:"node",c:"TEXTURE_COLOR",B:[{a:"node_var",c:"NON_COLOR",b:["0"]},{a:"node_var",c:"CONVERT_UV",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],A:[{a:"node_in",c:"DV",i:["vec3"],g:!0},{a:"node_in",c:"DW",i:["vec3"],g:!0},{a:"node_in",c:"DX",i:["vec3"],g:!0},{a:"node_in",c:"DY",i:["vec3"],g:!0},{a:"node_out",c:"DZ",i:["vec3"],g:!0},{a:"node_out",c:"D_",i:["float"],g:!0},{a:"node_out",c:"Ea",i:["vec3"],g:!0},{a:"node_out",c:"Eb",i:["float"],
g:!0},{a:"node_out",c:"Ec",i:["vec3"],g:!0},{a:"node_out",c:"Ed",i:["float"],g:!0},{a:"node_out",c:"Ee",i:["vec3"],g:!0},{a:"node_out",c:"Ef",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DV ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , DV . xy ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DZ"],u:[{a:"txt",b:"DZ = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","DZ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_D_"],u:[{a:"txt",b:"D_ = zQ . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DW ) ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , DW . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ea"],u:[{a:"txt",b:"Ea = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","Ea",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eb"],u:[{a:"txt",b:"Eb = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"node_cond",f:[{a:"node_if",
j:["CONVERT_UV"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DX ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , DX . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ec"],u:[{a:"txt",b:"Ec = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","Ec",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ed"],u:[{a:"txt",
b:"Ed = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DY ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , DY . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ee"],u:[{a:"txt",b:"Ee = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",
o:1}],u:[{a:"txt",b:["cg","(","Ee",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ef"],u:[{a:"txt",b:"Ef = zQ . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",B:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],A:[{a:"node_in",c:"Eg",i:["vec3"],g:!0},{a:"node_in",c:"Eh",i:["vec3"],g:!0},{a:"node_in",c:"Ei",i:["vec3"],g:!0},{a:"node_in",c:"Ej",i:["vec3"],g:!0},{a:"node_out",c:"Ek",i:["vec3"],g:!0},{a:"node_out",c:"El",
i:["float"],g:!0},{a:"node_out",c:"Em",i:["vec3"],g:!0},{a:"node_out",c:"En",i:["float"],g:!0},{a:"node_out",c:"Eo",i:["vec3"],g:!0},{a:"node_out",c:"Ep",i:["float"],g:!0},{a:"node_out",c:"Eq",i:["vec3"],g:!0},{a:"node_out",c:"Er",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Eg ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = zQ . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Eh ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_En"],u:[{a:"txt",b:"En = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],
u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Ei ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eo"],u:[{a:"txt",b:"Eo = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ep"],u:[{a:"txt",b:"Ep = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Ej ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eq"],
u:[{a:"txt",b:"Eq = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Er"],u:[{a:"txt",b:"Er = zQ . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",B:[{a:"node_var",c:"VALUE_ROW_IND",b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],A:[{a:"node_out",c:"Es",i:["float"],g:!1}],u:[{a:"txt",b:"Es = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",B:[],A:[{a:"node_in",c:"Et",i:["vec3"],g:!1},{a:"node_in",c:"Eu",
i:["vec3"],g:!1},{a:"node_out",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["float"],g:!0}],u:[{a:"txt",b:"Ev = Et + Eu ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ew"],u:[{a:"txt",b:"Ew = ( abs ( Ev [ 0 ] ) + abs ( Ev [ 1 ] ) + abs ( Ev [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_SUBTRACT",B:[],A:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_in",c:"Ey",i:["vec3"],g:!1},{a:"node_out",c:"Ez",i:["vec3"],g:!1},{a:"node_out",c:"EA",i:["float"],g:!0}],u:[{a:"txt",b:"Ez = Ex - Ey ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA = ( abs ( Ez [ 0 ] ) + abs ( Ez [ 1 ] ) + abs ( Ez [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",B:[],A:[{a:"node_in",c:"EB",i:["vec3"],g:!1},{a:"node_in",c:"EC",i:["vec3"],g:!1},{a:"node_out",c:"ED",i:["vec3"],g:!1},{a:"node_out",c:"EE",i:["float"],g:!0}],u:[{a:"txt",b:"ED = EB + EC ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = length ( ED ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = normalize ( ED ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",B:[],A:[{a:"node_in",c:"EF",i:["vec3"],g:!1},{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_out",c:"EI",i:["float"],g:!0}],u:[{a:"txt",b:"EH = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EI"],u:[{a:"txt",b:"EI = dot ( EF , EG ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",B:[],A:[{a:"node_in",c:"EJ",
i:["vec3"],g:!1},{a:"node_in",c:"EK",i:["vec3"],g:!1},{a:"node_out",c:"EL",i:["vec3"],g:!1},{a:"node_out",c:"EM",i:["float"],g:!0}],u:[{a:"txt",b:"EL = cross ( EJ , EK ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EM"],u:[{a:"txt",b:"EM = length ( EL ) ; EL /= EM ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"EL = normalize ( EL ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_NORMALIZE",B:[],A:[{a:"node_in",c:"EN",i:["vec3"],g:!1},{a:"node_in",c:"EO",i:["vec3"],g:!1},{a:"node_out",c:"EP",
i:["vec3"],g:!1},{a:"node_out",c:"EQ",i:["float"],g:!0}],u:[{a:"txt",b:"EP = normalize ( EN ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = length ( EN ) ;".split(" ")}]}]},{a:"txt",b:["EO",";"]}]},{a:"node",c:"FRESNEL",B:[{a:"node_var",c:"USE_FRESNEL_NORMAL",b:["0"]}],A:[{a:"node_in",c:"ER",i:["float"],g:!1},{a:"node_in",c:"ES",i:["vec3"],g:!1},{a:"node_out",c:"ET",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_FRESNEL_NORMAL"],u:[{a:"txt",b:"vec3 ce = normalize ( ES ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","ce","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 zo = normalize ( nI ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","zo","=","u_camera_direction",";"]}]}]},{a:"txt",b:"float rh = max ( ER , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"rh = gl_FrontFacing == false ? rh : _1_0 / rh ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"rh = gl_FrontFacing ? rh : _1_0 / rh ;".split(" ")}]}]},{a:"txt",b:"ET = rj ( zo , ce , rh ) ;".split(" ")}]},{a:"node",c:"BACKGROUND",B:[],A:[{a:"node_in",c:"EU",i:["vec3"],g:!1},{a:"node_in",c:"EV",i:["float"],g:!1},{a:"node_out",c:"EW",i:["vec3"],g:!1}],u:[{a:"txt",b:"EW = EU * EV ;".split(" ")}]},{a:"node",c:"B4W_REFLECT",B:[],A:[{a:"node_in",c:"EX",i:["vec3"],g:!1},{a:"node_in",c:"EY",i:["vec3"],g:!1},{a:"node_out",c:"EZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"EZ = reflect ( _ ( u_view_tsr_inverse , EX ) , EY ) ;".split(" ")}]},
{a:"node",c:"B4W_REFLECT_WORLD",B:[],A:[{a:"node_in",c:"E_",i:["vec3"],g:!1},{a:"node_out",c:"Fa",i:["vec3"],g:!1}],u:[{a:"txt",b:"Fa = reflect ( - nI . xyz , E_ ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",B:[],A:[{a:"node_in",c:"Fb",i:["vec3"],g:!1},{a:"node_in",c:"Fc",i:["float"],g:!1},{a:"node_in",c:"Fd",i:["const","float"],g:!1},{a:"node_in",c:"Fe",i:["const","float"],g:!1},{a:"node_out",c:"Ff",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],
u:[{a:"txt",b:"float bA = length ( rG ) ; if ( bA < Fe ) { vec2 bN = rd ( Fb ) ; float bR = clamp ( _0_5 * ( Fe - bA ) , _0_0 , _1_0 ) ; float he = Fc * bR ; vec3 bT = normalize ( nI * rD ) ; float bU = _1_0 / Fd ; vec2 bV = bT . xy * he / ( Fd * bT . z ) ; float bW = _1_0 ; float bX = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , bN ) . a ; for ( float bZ = 1.0 ; bZ <= Fd ; bZ ++ ) { if ( bX < bW ) { bW -= bU ; bN -= bV ; bX = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , bN ) . a ; } } vec2 b_ = bN + bV ; float ca = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a - ( bW + bU ) ; float cb = bX - bW ; float cc = cb / ( cb - ca ) ; bN = cc * b_ + ( _1_0 - cc ) * bN ; Ff = rc ( bN ) ; } else Ff = Fb ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",B:[],A:[{a:"node_in",c:"Fg",i:["vec3"],g:!1},{a:"node_out",c:"Fh",i:["vec3"],g:!1}],u:[{a:"txt",b:"Fh = clamp ( Fg , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",B:[],A:[{a:"node_in",c:"Fi",i:["vec3"],g:!1},{a:"node_in",c:"Fj",i:["float"],g:!1},{a:"node_out",c:"Fk",i:["vec3"],g:!1}],u:[{a:"txt",b:"Fk = q_ ( Fi , Fj ) ;".split(" ")}]},{a:"node",c:"B4W_TRANSLUCENCY",B:[],A:[{a:"node_in",c:"Fl",i:["float"],g:!1},{a:"node_in",c:"Fm",i:["float"],g:!1},{a:"node_in",
c:"Fn",i:["float"],g:!1},{a:"node_in",c:"Fo",i:["float"],g:!1},{a:"node_in",c:"Fp",i:["float"],g:!1},{a:"node_out",c:"Fq",i:["float"],g:!0},{a:"node_out",c:"Fr",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fq"],u:[{a:"txt",b:["Fq","=","Fl",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = vec4 ( Fm , Fn , Fo , Fp ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",B:[],A:[{a:"node_out",c:"Fs",i:["float"],g:!1}],u:[{a:"txt",b:["Fs","=","u_time",";"]}]},{a:"node",
c:"B4W_SMOOTHSTEP",B:[],A:[{a:"node_in",c:"Ft",i:["float"],g:!1},{a:"node_in",c:"Fu",i:["float"],g:!1},{a:"node_in",c:"Fv",i:["float"],g:!1},{a:"node_out",c:"Fw",i:["float"],g:!1}],u:[{a:"txt",b:"Fw = smoothstep ( Fu , Fv , Ft ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",B:[],A:[{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_in",c:"Fy",i:["float"],g:!1}],u:[{a:"txt",b:"D = Fx ; H = Fy ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",B:[],A:[{a:"node_in",c:"Fz",i:["vec3"],g:!1},{a:"node_out",c:"FA",
i:["float"],g:!1}],u:[{a:"txt",b:"FA = ( Fz . r + Fz . g + Fz . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",B:[],A:[{a:"node_in",c:"FB",i:["float"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1}],u:[{a:"txt",b:"FC [ 0 ] = FB ; FC [ 1 ] = FB ; FC [ 2 ] = FB ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void I ( in vec3 nI , out vec3 D , out vec3 E , out vec3 F , out vec4 G , out float H ) { D = vec3 ( _0_0 ) ; E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec4 ( _0_0 ) ; H = _0_0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["IS_WORLD"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = - nI ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_GL"],l:{a:"grp",f:[{a:"txt",b:"vec3 nG = - nI ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEX_COORD_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","nH","=","nI",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","rz","=","nI",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","rA","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"rA = rA ; else rA = - rA ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","rB","=","rA",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 rC = normalize ( rA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","nH","=","rC",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 nH = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","rz","=","rC",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],
l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( rC , k . xyz ) * k . w ; mat3 rD = mat3 ( k . xyz , W , rC ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 rE = cross ( rA , k . xyz ) * k . w ; mat3 rF = mat3 ( k . xyz , rE , rA ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 nG = h ; vec4 rG = i ; float rH = u_emit ; float rI = u_ambient ;".split(" ")}]}}]},
{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLV",b:[""]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2},"PARTICLE_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 qX ;".split(" ")}]}}]},{a:"node",c:"TEX_COORD_UV",
B:[],A:[{a:"node_param",c:"node_TEX_COORD_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"rs",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["rs","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{a:"node",c:"UV_MERGED",B:[],A:[{a:"node_param",c:"node_UV_MERGED_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"rq",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["rq","=","node_UV_MERGED_var_a_uv",";"]}]},{a:"node",c:"UVMAP",B:[],A:[{a:"node_param",c:"node_UVMAP_var_a_uv",i:["GLSL_IN","vec2"],g:!1},
{a:"node_param",c:"rt",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["rt","=","node_UVMAP_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_UV",B:[],A:[{a:"node_param",c:"node_GEOMETRY_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"rk",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["rk","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_VC",B:[],A:[{a:"node_param",c:"node_GEOMETRY_VC_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"FD",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",
b:["FD","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC1",B:[],A:[{a:"node_param",c:"node_GEOMETRY_VC1_var_a_vertex_color",i:["GLSL_IN","float"],g:!1},{a:"node_param",c:"FE",i:["GLSL_OUT","float"],g:!1}],u:[{a:"txt",b:["FE","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC2",B:[],A:[{a:"node_param",c:"node_GEOMETRY_VC2_var_a_vertex_color",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"FF",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["FF","=","node_GEOMETRY_VC2_var_a_vertex_color",
";"]}]},{a:"node",c:"GEOMETRY_VC3",B:[],A:[{a:"node_param",c:"node_GEOMETRY_VC3_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"FG",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",b:["FG","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{a:"nodes_global"},{a:"txt",b:["void","I","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["qX","=","a_orco_tex_coord",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};
a["include/pack.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PACK_GLSLF",l:{a:"grp",f:[{a:"define",c:"PACK_GLSLF",b:[""]},{a:"txt",b:"vec4 dN ( const in float hu ) { vec4 eO = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 FH = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 iM = fract ( hu * eO ) ; iM -= iM . xxyz * FH ; return iM ; } float cF ( const in vec4 FI ) { float dM ; vec4 eO = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; dM = dot ( FI , eO ) ; return dM ; } vec4 dN ( const in vec2 qo ) { vec2 eO = vec2 ( _255_0 , _1_0 ) ; vec2 FH = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 iM = fract ( qo . xxyy * eO . xyxy ) ; iM -= iM . xxzz * FH . xyxy ; if ( qo . r == _1_0 ) iM . rg = vec2 ( _0_0 , _1_0 ) ; if ( qo . g == _1_0 ) iM . ba = vec2 ( _0_0 , _1_0 ) ; return iM ; } vec2 ir ( const in vec4 FJ ) { vec2 qo ; vec2 eO = vec2 ( _1_0 / _255_0 , _1_0 ) ; qo . r = dot ( FJ . rg , eO ) ; qo . g = dot ( FJ . ba , eO ) ; return qo ; }".split(" ")}]}}]}]};
a["include/particles.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"include",D:"math.glslv"},{a:"txt",b:"struct cN { float cV ; vec3 O ; float J ; vec3 aQ ; float bx ; vec3 da ; vec3 db ; float dc ; } ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"void FN ( inout vec3 aQ , float FK , vec4 jn , vec4 jo ) { float FL = jo . x - jn . x ; float FM = ( FK - jn . x ) / FL ; aQ = mix ( aQ , jo . yzw , clamp ( FM , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 FQ ( float t , float FO , vec4 FP [ COLOR_RAMP_LENGTH ] ) { float FK = t / FO ; vec3 aQ = FP [ 0 ] . yzw ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",1,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"FN ( aQ , FK , FP [ 0 ] , FP [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"FN ( aQ , FK , FP [ 1 ] , FP [ 2 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"FN ( aQ , FK , FP [ 2 ] , FP [ 3 ] ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}"]}]}}]},{a:"txt",b:"float FW ( float t , float FO , float FR , float FS ) { float FT = max ( 0.01 , min ( FO , FR ) ) ; float FU = max ( 0.01 , min ( FO , FS ) ) ; float FV = FO - FU ; float J = clamp ( t / FT , 0.0 , 1.0 ) - step ( FV , t ) * ( t - FV ) / FU ; return J ; } cN cO ( ) { cN sp ; float t ; float FO = a_p_data [ 0 ] ; float FX = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - FX ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - FX ; } if ( t < 0.0 || t >= FO ) { sp . cV = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= FO ) ) { vec4 S = R ( a_tbn ) ; vec3 bJ = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WORLD_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 eL = a_position ; vec3 rf = bJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eL = ap ( u_model_tsr , a_position ) ; vec3 rf = _ ( u_model_tsr , bJ ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 FY = u_p_nfactor * rf ; FY += a_p_vels . xyz ; FY . z -= u_p_gravity * t / 2.0 ; float FZ = max ( u_p_mass , EPSILON ) ; FY += ( u_p_wind_fac * u_wind / FZ ) * t / 2.0 ; sp . dc = t ; sp . da = FY ; sp . db = bJ * a_p_vels . w ; sp . O = eL + FY * t ; sp . bx = a_p_vels . w * t ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:"sp . cV = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . cV = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"sp . aQ = FQ ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"sp . J = FW ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};
a["include/particles_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"include",D:"environment.glslf"}]}}]},{a:"include",D:"color_util.glslf"},{a:"include",D:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 jt ( vec3 rgb ) { vec4 js = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , js . wz ) , vec4 ( rgb . gb , js . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dn = q . x - min ( q . w , q . y ) ; float hK = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dn + hK ) ) , dn / ( q . x + hK ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 jv ( vec3 ju ) { vec4 js = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( ju . r , ju . r , ju . r ) + js . xyz ) * 6.0 - js . www ) ; return ju . b * mix ( js . xxx , clamp ( p - js . xxx , _0_0 , _1_0 ) , ju . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 rc ( vec2 gq ) { return vec3 ( gq * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 rd ( vec3 qo ) { return vec2 ( qo . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
B:[],A:[{a:"node_out",c:"rJ",i:["vec3"],g:!0},{a:"node_out",c:"rK",i:["float"],g:!0},{a:"node_out",c:"rL",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rJ"],u:[{a:"txt",b:"rJ = normalize ( rG . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rK"],u:[{a:"txt",b:"rK = abs ( rG . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_rL"],u:[{a:"txt",b:"rL = length ( rG . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",B:[],A:[{a:"node_in",c:"rM",i:["float"],
g:!1},{a:"node_in",c:"rN",i:["float"],g:!1},{a:"node_in",c:"rO",i:["float"],g:!1},{a:"node_out",c:"rP",i:["vec3"],g:!1}],u:[{a:"txt",b:"rP = vec3 ( rM , rN , rO ) ;".split(" ")}]},{a:"node",c:"COMBHSV",B:[],A:[{a:"node_in",c:"rQ",i:["float"],g:!1},{a:"node_in",c:"rR",i:["float"],g:!1},{a:"node_in",c:"rS",i:["float"],g:!1},{a:"node_out",c:"rT",i:["vec3"],g:!1}],u:[{a:"txt",b:"rT = jv ( vec3 ( rQ , rR , rS ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",B:[],A:[{a:"node_out",c:"rU",i:["vec3"],g:!1}],u:[{a:"txt",
b:"rU = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",B:[],A:[{a:"node_out",c:"rV",i:["vec3"],g:!1}],u:[{a:"txt",b:"rV = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",B:[],A:[{a:"node_out",c:"rW",i:["vec3"],g:!1}],u:[{a:"txt",b:"rW = rc ( A ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",B:[],A:[{a:"node_out",c:"rX",i:["vec3"],g:!1}],u:[{a:"txt",b:"rX = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",B:[],A:[{a:"node_out",c:"rY",
i:["vec3"],g:!1}],u:[{a:"txt",b:"rY = vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",B:[],A:[{a:"node_out",c:"rZ",i:["float"],g:!1}],u:[{a:"txt",b:["rZ","=","_1_0",";"]}]},{a:"node",c:"GEOMETRY_VC2",B:[],A:[{a:"node_out",c:"r_",i:["float"],g:!1},{a:"node_out",c:"sa",i:["float"],g:!1}],u:[{a:"txt",b:"r_ = _1_0 ; sa = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",B:[],A:[{a:"node_out",c:"sb",i:["float"],g:!1},{a:"node_out",c:"sc",i:["float"],g:!1},{a:"node_out",c:"sd",i:["float"],g:!1}],
u:[{a:"txt",b:"sb = _1_0 ; sc = _1_0 ; sd = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_NO",B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"se",i:["vec3"],g:!1},{a:"node_out",c:"sf",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["sf","=","se",";"]}]},{a:"node_else",u:[{a:"txt",b:"sf = rz . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",B:[],A:[{a:"node_out",c:"sg",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sg = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sg = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",B:[],A:[{a:"node_out",c:"si",i:["vec3"],g:!1}],u:[{a:"txt",b:"si = - _ ( u_view_tsr_frag , nI ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",B:[],A:[{a:"node_out",c:"sj",i:["vec3"],g:!1}],u:[{a:"txt",b:"sj [ 0 ] = rG [ 0 ] ; sj [ 1 ] = rG [ 1 ] ; sj [ 2 ] = rG [ 2 ] ;".split(" ")}]},
{a:"node",c:"GEOMETRY_GL",B:[],A:[{a:"node_out",c:"sk",i:["vec3"],g:!1}],u:[{a:"txt",b:"sk = vec3 ( nG . r , nG . g , nG . b ) ;".split(" ")}]},{a:"node",c:"NEW_GEOMETRY",B:[],A:[{a:"node_out",c:"sm",i:["vec3"],g:!1},{a:"node_out",c:"sn",i:["vec3"],g:!1},{a:"node_out",c:"so",i:["vec3"],g:!1},{a:"node_out",c:"sr",i:["vec3"],g:!1},{a:"node_out",c:"su",i:["vec3"],g:!1},{a:"node_out",c:"sv",i:["vec3"],g:!1},{a:"node_out",c:"sw",i:["float"],g:!1},{a:"node_out",c:"sx",i:["float"],g:!1}],u:[{a:"txt",b:"sm = vec3 ( _0_0 ) ; sn = vec3 ( _0_0 ) ; so = vec3 ( _0_0 ) ; sr = vec3 ( _0_0 ) ; su = vec3 ( _0_0 ) ; sv = vec3 ( _0_0 ) ; sw = _0_0 ; sx = _0_0 ;".split(" ")}]},
{a:"node",c:"HUE_SAT",B:[],A:[{a:"node_in",c:"sy",i:["float"],g:!1},{a:"node_in",c:"sz",i:["float"],g:!1},{a:"node_in",c:"sA",i:["float"],g:!1},{a:"node_in",c:"sB",i:["float"],g:!1},{a:"node_in",c:"sC",i:["vec3"],g:!1},{a:"node_out",c:"sD",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 ju = jt ( sC ) ; ju [ 0 ] += ( sy - _0_5 ) ; if ( ju [ 0 ] > _1_0 ) ju [ 0 ] -= _1_0 ; else if ( ju [ 0 ] < _0_0 ) ju [ 0 ] += _1_0 ; ju *= vec3 ( _1_0 , sz , sA ) ; ju = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , ju , step ( vec3 ( _0_0 ) , ju ) ) , step ( ju , vec3 ( _1_0 ) ) ) ; sD = mix ( sC , jv ( ju ) , sB ) ;".split(" ")}]},
{a:"node",c:"INVERT",B:[],A:[{a:"node_in",c:"sE",i:["float"],g:!1},{a:"node_in",c:"sF",i:["vec3"],g:!1},{a:"node_out",c:"sG",i:["vec3"],g:!1}],u:[{a:"txt",b:"sG = mix ( sF , vec3 ( _1_0 ) - sF , sE ) ;".split(" ")}]},{a:"node",c:"LAMP",B:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],A:[{a:"node_out",
c:"sH",i:["vec3"],g:!0},{a:"node_out",c:"sI",i:["vec3"],g:!1},{a:"node_out",c:"sJ",i:["float"],g:!1},{a:"node_out",c:"sK",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 sL = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 sM = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"sI = - h + sM ; sJ = length ( sI ) ; sI = normalize ( sI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sK"],u:[{a:"txt",b:"sK = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + sJ * sJ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float ol = dot ( sI , sL ) ; ol *= smoothstep ( _0_0 , _1_0 , ( ol - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; sK *= ol ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",
j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"sK *= max ( LAMP_LIGHT_DIST - sJ , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:["sI","=","sL",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sJ"],u:[{a:"txt",b:"sJ = length ( sM - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sK"],u:[{a:"txt",b:["sK","=","_1_0",";"]}]}]}]}]}]},{a:"node",c:"NORMAL",B:[],A:[{a:"node_in",c:"sN",i:["vec3"],g:!1},{a:"node_out",
c:"sO",i:["vec3"],g:!0},{a:"node_out",c:"sP",i:["float"],g:!0},{a:"node_param",c:"rp",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sO"],u:[{a:"txt",b:["sO","=","rp",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sP"],u:[{a:"txt",b:"sP = - dot ( sN , rp ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_VECTOR_VIEW",B:[],A:[{a:"node_in",c:"sQ",i:["vec3"],g:!1},{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",b:"sR = - _ ( u_view_tsr_frag , sQ ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",
B:[],A:[{a:"node_in",c:"sS",i:["vec3"],g:!1},{a:"node_in",c:"sT",i:["vec3"],g:!1},{a:"node_in",c:"sU",i:["float"],g:!1},{a:"node_in",c:"sV",i:["vec3"],g:!1},{a:"node_in",c:"sW",i:["float"],g:!1},{a:"node_in",c:"sX",i:["float"],g:!1},{a:"node_in",c:"sY",i:["vec3"],g:!1},{a:"node_in",c:"sZ",i:["vec3"],g:!1},{a:"node_in",c:"s_",i:["float"],g:!1},{a:"node_in",c:"ta",i:["vec3"],g:!1},{a:"node_in",c:"tb",i:["float"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1},{a:"node_out",c:"td",i:["vec3"],g:!1},{a:"node_out",
c:"te",i:["vec3"],g:!1},{a:"node_out",c:"tf",i:["vec3"],g:!1},{a:"node_out",c:"tg",i:["vec3"],g:!1},{a:"node_out",c:"th",i:["vec4"],g:!1},{a:"node_out",c:"ti",i:["vec4"],g:!1},{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["float"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["float"],g:!1}],u:[{a:"txt",b:"te = sT ; tf = sV ; tg = sY ; tj = sT ; tk = sV ; metalness_out = sX ; tl = sZ ; tm = s_ ; tn = ta ; to = tb ; tc = rH * te ; td = rI * u_environment_energy * cn ( tg ) ; ti = cq ( te ) ; G = ti ; th [ 0 ] = sU ; th [ 1 ] = sW ; th [ 2 ] = sX ;".split(" ")}]},
{a:"node",c:"BSDF_END",B:[],A:[{a:"node_in",c:"tr",i:["vec4"],g:!1},{a:"node_in",c:"tu",i:["vec3"],g:!1},{a:"node_in",c:"tv",i:["vec3"],g:!1},{a:"node_in",c:"tw",i:["vec4"],g:!1},{a:"node_in",c:"tx",i:["vec3"],g:!1},{a:"node_in",c:"ty",i:["vec3"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_in",c:"tA",i:["float"],g:!1},{a:"node_in",c:"tB",i:["vec3"],g:!1},{a:"node_in",c:"tA",i:["float"],g:!1},{a:"node_in",c:"tC",i:["float"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = tr . rgb + tu ; tD = mix ( tD , tz , tA ) ; H = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 tF = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; cg ( tF ) ; tB = tB * tF ; tD += tB ;".split(" ")}]}]},{a:"txt",b:["tv",";"]}]},{a:"node",c:"BSDF_COMPUTE",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"tG",i:["vec3"],g:!1},{a:"node_in",c:"tH",i:["vec2"],g:!1},{a:"node_in",c:"tI",i:["vec3"],g:!1},{a:"node_in",c:"tJ",i:["float"],g:!1},{a:"node_in",c:"tK",i:["vec4"],g:!1},{a:"node_out",
c:"tL",i:["float"],g:!1},{a:"node_out",c:"tM",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 rf = tI ; float tN = clamp ( tK [ 0 ] , _0_0 , _1_0 ) ; float tE = clamp ( tK [ 1 ] , _0_0 , _1_0 ) ; float qO = tK [ 2 ] ; vec3 pg = normalize ( nI + tG ) ; float ot = ( _1_0 - tJ ) * dot ( rf , tG ) + tJ ; float tO = ( _1_0 - tJ ) * max ( dot ( tG , pg ) , _0_0 ) + tJ ; float tP = ( _1_0 - tJ ) * max ( dot ( tI , pg ) , _0_0 ) + tJ ; tL = _0_0 ; if ( tH . r != _0_0 ) { if ( tN > _0_0 ) { float oF = max ( dot ( rf , nI ) , _0_0 ) ; float oG = tN * tN ; float cp = _1_0 - _0_5 * ( oG / ( oG + 0.33 ) ) ; vec3 oH = tG - ot * rf ; vec3 oI = nI - oF * rf ; if ( length ( oH ) == _0_0 || length ( oI ) == _0_0 || abs ( ot ) > _1_0 || abs ( oF ) > _1_0 ) tL = ot * cp ; else { float oJ = acos ( ot ) ; float oK = acos ( oF ) ; vec3 oL = normalize ( oH ) ; vec3 oM = normalize ( oI ) ; float a , b ; a = max ( oJ , oK ) ; b = min ( oJ , oK ) ; b *= 0.95 ; float t = max ( dot ( oL , oM ) , _0_0 ) ; float oN = 0.45 * ( oG / ( oG + 0.09 ) ) ; tL = ot * ( cp + ( oN * t * sin ( a ) * tan ( b ) ) ) ; } } else tL = ot ; tL = max ( tL , _0_0 ) ; } float J = tE ; float tQ = J * J ; float tR = ( tP * tQ - tP ) * tP + _1_0 ; float cm = tQ / ( M_PI * tR * tR ) ; float tS ; float tT ; float tU = pow ( _1_0 - tO , 5.0 ) ; tS = _1_0 ; tT = tU ; float js = J / 2.0 ; float tV = js * js ; float tW = _1_0 - tV ; float tX = _1_0 / ( tO * tO * tW + tV ) ; tS *= tX ; tT *= tX ; float tY = mix ( 0.04 , _1_0 , qO ) ; float tZ = mix ( tT , tS , tY ) ; tM = max ( ot * cm * tZ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",B:[],A:[{a:"node_in",c:"t_",i:["vec3"],g:!1},{a:"node_in",c:"ua",i:["float"],g:!1},{a:"node_in",c:"ub",i:["float"],g:!1},{a:"node_in",c:"uc",i:["float"],g:!1},{a:"node_in",c:"ud",i:["vec3"],g:!1},{a:"node_in",c:"ue",i:["vec3"],g:!1},{a:"node_out",c:"uf",i:["vec3"],g:!1}],u:[{a:"txt",b:"uf = t_ ; ua ; ub ; uc ; ud ; ue ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"ug",i:["vec3"],g:!1},{a:"node_in",c:"uh",i:["float"],
g:!1},{a:"node_in",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["vec3"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1},{a:"node_out",c:"um",i:["vec3"],g:!1},{a:"node_out",c:"un",i:["float"],g:!1},{a:"node_out",c:"uo",i:["float"],g:!1},{a:"node_out",c:"up",i:["vec3"],g:!1},{a:"node_out",c:"uq",i:["vec3"],g:!1},{a:"node_out",c:"ur",i:["float"],g:!1},{a:"node_out",c:"us",i:["vec3"],g:!1},{a:"node_out",c:"ut",i:["float"],g:!1}],u:[{a:"txt",b:"uk = ug ; ul = uh ; uo = _0_0 ; ur = _0_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["up","=","ui",";"]}]},{a:"node_else",u:[{a:"txt",b:["up","=","nH",";"]}]}]},{a:"txt",b:"uj ; um ; un ; uq ; us ; ut ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",B:[],A:[{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_in",c:"uw",i:["float"],g:!1},{a:"node_in",c:"ux",i:["vec3"],g:!1},{a:"node_out",c:"uy",i:["vec3"],g:!1}],u:[{a:"txt",b:"uy = uu ; uv ; uw ; ux ;".split(" ")}]},{a:"node",c:"BSDF_GLOSSY",
B:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["float"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_out",c:"uC",i:["vec3"],g:!1},{a:"node_out",c:"uD",i:["vec3"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["vec3"],g:!1},{a:"node_out",c:"uG",i:["float"],g:!1},{a:"node_out",c:"uH",i:["float"],g:!1},{a:"node_out",c:"uI",i:["vec3"],g:!1},{a:"node_out",c:"uJ",i:["vec3"],g:!1},{a:"node_out",c:"uK",i:["float"],g:!1},
{a:"node_out",c:"uL",i:["vec3"],g:!1},{a:"node_out",c:"uM",i:["float"],g:!1}],u:[{a:"txt",b:"uF = uz ; uG = uA ; uH = _1_0 ; uK = _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["uI","=","uB",";"]}]},{a:"node_else",u:[{a:"txt",b:["uI","=","nH",";"]}]}]},{a:"txt",b:"uC ; uD ; uE ; uJ ; uL ; uM ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",B:[],A:[{a:"node_in",c:"uN",i:["vec3"],g:!1},{a:"node_in",c:"uO",i:["float"],g:!1},{a:"node_in",c:"uP",i:["float"],g:!1},{a:"node_in",
c:"uQ",i:["float"],g:!1},{a:"node_out",c:"uR",i:["vec3"],g:!1}],u:[{a:"txt",b:"uR = uN ; uO ; uP ; uQ ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",B:[],A:[{a:"node_in",c:"uS",i:["vec3"],g:!1},{a:"node_out",c:"uT",i:["vec3"],g:!1},{a:"node_out",c:"uU",i:["vec3"],g:!1},{a:"node_out",c:"uV",i:["float"],g:!1},{a:"node_out",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["float"],g:!1},{a:"node_out",c:"uY",i:["float"],g:!1},{a:"node_out",c:"uZ",i:["vec3"],g:!1},{a:"node_out",c:"u_",i:["vec3"],g:!1},
{a:"node_out",c:"va",i:["float"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uS ; uY = _0_0 ; va = _0_0 ; vc = _0_0 ; uZ = nH ; uT ; uU ; uV ; uW ; uX ; u_ ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",B:[],A:[{a:"node_in",c:"vd",i:["vec3"],g:!1},{a:"node_in",c:"ve",i:["vec3"],g:!1},{a:"node_out",c:"vf",i:["vec3"],g:!1}],u:[{a:"txt",b:"vf = vd ; ve ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",B:[],A:[{a:"node_in",c:"vg",i:["vec3"],g:!1},
{a:"node_in",c:"vh",i:["float"],g:!1},{a:"node_in",c:"vi",i:["float"],g:!1},{a:"node_in",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["vec3"],g:!1}],u:[{a:"txt",b:"vk [ 0 ] = vk [ 1 ] = vk [ 2 ] = _0_0 ; vg ; vh ; vi ; vj ;".split(" ")}]},{a:"node",c:"BSDF_TOON",B:[],A:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},
{a:"node",c:"BSDF_VELVET",B:[],A:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1}],u:[{a:"txt",b:"vt = vq ; vr ; vs ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",B:[],A:[{a:"node_in",c:"vu",i:["vec3"],g:!1},{a:"node_in",c:"vv",i:["float"],g:!1},{a:"node_in",c:"vw",i:["vec3"],g:!1},{a:"node_in",c:"vx",i:["float"],g:!1},{a:"node_in",c:"vy",i:["float"],g:!1},{a:"node_in",c:"vz",i:["vec3"],g:!1},
{a:"node_out",c:"vA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vA [ 0 ] = vA [ 1 ] = vA [ 2 ] = _0_0 ; vu ; vw ; vx ; vy ; vz ; vv ;".split(" ")}]},{a:"node",c:"EMISSION",B:[],A:[{a:"node_in",c:"vB",i:["vec3"],g:!1},{a:"node_in",c:"vC",i:["float"],g:!1},{a:"node_out",c:"vD",i:["vec3"],g:!1},{a:"node_out",c:"vE",i:["vec3"],g:!1},{a:"node_out",c:"vF",i:["float"],g:!1},{a:"node_out",c:"vG",i:["vec3"],g:!1},{a:"node_out",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["float"],g:!1},{a:"node_out",c:"vJ",i:["vec3"],
g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["float"],g:!1},{a:"node_out",c:"vM",i:["vec3"],g:!1},{a:"node_out",c:"vN",i:["float"],g:!1}],u:[{a:"txt",b:"vK = vC * vB ; vI = _0_0 ; vL = _1_0 ; vJ = nH ; vD ; vE ; vF ; vG ; vH ; vM ; vN ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",B:[],A:[{a:"node_in",c:"vO",i:["vec3"],g:!1},{a:"node_out",c:"vP",i:["vec3"],g:!1}],u:[{a:"txt",b:"vP [ 0 ] = vP [ 1 ] = vP [ 2 ] = _0_0 ; vO ;".split(" ")}]},{a:"node",c:"HOLDOUT",B:[],A:[{a:"node_out",
c:"vQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"vQ [ 0 ] = vQ [ 1 ] = vQ [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",B:[],A:[{a:"node_in",c:"vR",i:["vec3"],g:!1},{a:"node_in",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1}],u:[{a:"txt",b:"vT [ 0 ] = vT [ 1 ] = vT [ 2 ] = _0_0 ; vR ; vS ;".split(" ")}]},{a:"node",c:"VOLUME_SCATTER",B:[],A:[{a:"node_in",c:"vU",i:["vec3"],g:!1},{a:"node_in",c:"vV",i:["float"],g:!1},{a:"node_in",c:"vW",i:["float"],g:!1},{a:"node_out",c:"vX",i:["vec3"],
g:!1}],u:[{a:"txt",b:"vX [ 0 ] = vX [ 1 ] = vX [ 2 ] = _0_0 ; vU ; vV ; vW ;".split(" ")}]},{a:"node",c:"BUMP",B:[],A:[{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",c:"Ge",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"Gf",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb = Gf ; Gd ; Ge ; v_ ;".split(" ")}]},{a:"node",c:"DISPLACEMENT_BUMP",B:[],A:[{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_out",c:"wj",i:["vec3"],g:!1}],u:[{a:"txt",b:"wj = nH ; wi ;".split(" ")}]},
{a:"node",c:"NORMAL_MAP",B:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],A:[{a:"node_in",c:"wk",i:["float"],g:!1},{a:"node_in",c:"wl",i:["vec4"],g:!1},{a:"node_in",c:"wm",i:["vec3"],g:!1},{a:"node_out",c:"wn",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","wo","=","wm",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","wo","=","rB",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],
u:[{a:"txt",b:"wn = 2.0 * wl . xyz - _1_0 ; wn = rF * wn ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"wn = 2.0 * wl . xyz - _1_0 ; wn . yz *= - _1_0 ; wn = _ ( u_model_tsr , wn ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"wn = 2.0 * wl . xyz - _1_0 ; wn . yz *= - _1_0 ;".split(" ")}]}]},
{a:"txt",b:"float lo = max ( wk , _0_0 ) ; wn = normalize ( mix ( wo , wn , lo ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",B:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],A:[{a:"node_in",c:"wp",i:["vec3"],g:!1},{a:"node_out",c:"wq",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["wq","=","wp",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_frag , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",
j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_model_tsr , wp ) ; wq = ap ( u_view_tsr_frag , wq ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"wq = ap ( u_view_tsr_inverse , wp ) ; wq = ap ( u_model_tsr_inverse , wq ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_frag , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_model_tsr , wp ) ; wq = _ ( u_view_tsr_frag , wq ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_inverse , wp ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = _ ( u_view_tsr_inverse , wp ) ; wq = _ ( u_model_tsr_inverse , wq ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"wq = normalize ( wq ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",B:[],A:[{a:"node_in",c:"wr",i:["float"],g:!1},{a:"node_out",c:"ws",i:["vec3"],g:!1}],u:[{a:"txt",b:"ws [ 0 ] = ws [ 1 ] = ws [ 2 ] = _0_0 ; wr ;".split(" ")}]},{a:"node",c:"WAVELENGTH",B:[],A:[{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1}],u:[{a:"txt",b:"wu [ 0 ] = wu [ 1 ] = wu [ 2 ] = _0_0 ; wt ;".split(" ")}]},
{a:"node",c:"SEPXYZ",B:[],A:[{a:"node_in",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["float"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1}],u:[{a:"txt",b:"wA = wv [ 0 ] ; wB = wv [ 1 ] ; wC = wv [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",B:[],A:[{a:"node_in",c:"wD",i:["float"],g:!1},{a:"node_in",c:"wE",i:["float"],g:!1},{a:"node_in",c:"wF",i:["float"],g:!1},{a:"node_out",c:"wG",i:["vec3"],g:!1}],u:[{a:"txt",b:"wG [ 0 ] = wD ; wG [ 1 ] = wE ; wG [ 2 ] = wF ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",B:[],A:[{a:"node_in",c:"wH",i:["vec3"],g:!1},{a:"node_in",c:"wI",i:["float"],g:!1},{a:"node_in",c:"wJ",i:["float"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = wI - wJ * _0_5 ; wK = max ( ( _1_0 + wJ ) * wH + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",B:[],A:[{a:"node_in",c:"wL",i:["float"],g:!1},{a:"node_in",c:"wM",i:["float"],g:!1},{a:"node_out",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["float"],g:!1},{a:"node_out",
c:"wP",i:["float"],g:!1}],u:[{a:"txt",b:"wN = wO = wP = _0_0 ; wL ; wM ;".split(" ")}]},{a:"node",c:"TEX_IMAGE",B:[],A:[{a:"node_in",c:"Gg",i:["vec3"],g:!1},{a:"node_out",c:"Gh",i:["vec3"],g:!1},{a:"node_out",c:"Gi",i:["float"],g:!1}],u:[{a:"txt",b:"Gh [ 0 ] = Gh [ 1 ] = Gh [ 2 ] = _0_0 ; Gi = _1_0 ; Gg ;".split(" ")}]},{a:"node",c:"TEX_ENVIRONMENT",B:[],A:[{a:"node_in",c:"Gj",i:["vec3"],g:!1},{a:"node_out",c:"Gk",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gk [ 0 ] = Gk [ 1 ] = Gk [ 2 ] = _0_0 ; Gj ;".split(" ")}]},
{a:"node",c:"TEX_SKY",B:[],A:[{a:"node_in",c:"wQ",i:["vec3"],g:!1},{a:"node_out",c:"wR",i:["vec3"],g:!1}],u:[{a:"txt",b:"wR [ 0 ] = wR [ 1 ] = wR [ 2 ] = _0_0 ; wQ ;".split(" ")}]},{a:"node",c:"TEX_NOISE",B:[],A:[{a:"node_in",c:"wS",i:["vec3"],g:!1},{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_out",c:"wW",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["float"],g:!1}],u:[{a:"txt",b:"wW [ 0 ] = wW [ 1 ] = wW [ 2 ] = _0_0 ; wX = _1_0 ; wS ; wT ; wU ; wV ;".split(" ")}]},
{a:"node",c:"TEX_WAVE",B:[],A:[{a:"node_in",c:"wY",i:["vec3"],g:!1},{a:"node_in",c:"wZ",i:["float"],g:!1},{a:"node_in",c:"w_",i:["float"],g:!1},{a:"node_in",c:"xa",i:["float"],g:!1},{a:"node_in",c:"xb",i:["float"],g:!1},{a:"node_out",c:"xc",i:["vec3"],g:!1},{a:"node_out",c:"xd",i:["float"],g:!1}],u:[{a:"txt",b:"xc [ 0 ] = xc [ 1 ] = xc [ 2 ] = _0_0 ; xd = _1_0 ; wY ; wZ ; w_ ; xa ; xb ;".split(" ")}]},{a:"node",c:"TEX_VORONOI",B:[],A:[{a:"node_in",c:"xe",i:["vec3"],g:!1},{a:"node_in",c:"xf",i:["float"],
g:!1},{a:"node_out",c:"xg",i:["vec3"],g:!1},{a:"node_out",c:"xh",i:["float"],g:!1}],u:[{a:"txt",b:"xg [ 0 ] = xg [ 1 ] = xg [ 2 ] = _0_0 ; xh = _1_0 ; xe ; xf ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",B:[],A:[{a:"node_in",c:"xi",i:["vec3"],g:!1},{a:"node_in",c:"xj",i:["float"],g:!1},{a:"node_in",c:"xk",i:["float"],g:!1},{a:"node_in",c:"xl",i:["float"],g:!1},{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_in",c:"xn",i:["float"],g:!1},{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],
g:!1},{a:"node_out",c:"xq",i:["float"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xq = _1_0 ; xi ; xj ; xk ; xl ; xm ; xn ; xo ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",B:[],A:[{a:"node_in",c:"xr",i:["vec3"],g:!1},{a:"node_out",c:"xs",i:["vec3"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xs [ 0 ] = xs [ 1 ] = xs [ 2 ] = _0_0 ; xt = _1_0 ; xr ;".split(" ")}]},{a:"node",c:"TEX_MAGIC",B:[],A:[{a:"node_in",c:"xu",i:["vec3"],g:!1},{a:"node_in",c:"xv",i:["float"],
g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1},{a:"node_out",c:"xC",i:["float"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xB [ 1 ] = xB [ 2 ] = _0_0 ; xC = _1_0 ; xu ; xv ; xA ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",B:[],A:[{a:"node_in",c:"xD",i:["vec3"],g:!1},{a:"node_in",c:"xE",i:["vec3"],g:!1},{a:"node_in",c:"xF",i:["vec3"],g:!1},{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_out",c:"xH",i:["vec3"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1}],u:[{a:"txt",b:"xH [ 0 ] = xH [ 1 ] = xH [ 2 ] = _0_0 ; xI = _1_0 ; xD ; xE ; xF ; xG ;".split(" ")}]},
{a:"node",c:"TEX_BRICK",B:[],A:[{a:"node_in",c:"xJ",i:["vec3"],g:!1},{a:"node_in",c:"xK",i:["vec3"],g:!1},{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_in",c:"xM",i:["vec3"],g:!1},{a:"node_in",c:"xN",i:["float"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_in",c:"xR",i:["float"],g:!1},{a:"node_out",c:"xS",i:["vec3"],g:!1},{a:"node_out",c:"xT",i:["float"],g:!1}],u:[{a:"txt",b:"xS [ 0 ] = xS [ 1 ] = xS [ 2 ] = _0_0 ; xT = _1_0 ; xJ ; xK ; xL ; xM ; xN ; xO ; xP ; xQ ; xR ;".split(" ")}]},
{a:"node",c:"ADD_SHADER",B:[],A:[{a:"node_in",c:"xU",i:["vec3"],g:!1},{a:"node_in",c:"xV",i:["vec3"],g:!1},{a:"node_out",c:"xW",i:["vec3"],g:!1}],u:[{a:"txt",b:"xW = clamp ( xU + xV , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",B:[],A:[{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_in",c:"xY",i:["vec3"],g:!1},{a:"node_in",c:"xZ",i:["vec3"],g:!1},{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_in",c:"yb",i:["vec3"],g:!1},{a:"node_in",
c:"yc",i:["float"],g:!1},{a:"node_in",c:"yd",i:["float"],g:!1},{a:"node_in",c:"ye",i:["vec3"],g:!1},{a:"node_in",c:"yf",i:["vec3"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["vec3"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["vec3"],g:!1},{a:"node_in",c:"yk",i:["float"],g:!1},{a:"node_in",c:"yl",i:["vec3"],g:!1},{a:"node_in",c:"ym",i:["float"],g:!1},{a:"node_in",c:"yn",i:["float"],g:!1},{a:"node_in",c:"yo",i:["vec3"],g:!1},{a:"node_in",c:"yp",i:["vec3"],
g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["vec3"],g:!1},{a:"node_in",c:"ys",i:["float"],g:!1},{a:"node_out",c:"yt",i:["vec3"],g:!1},{a:"node_out",c:"yu",i:["vec3"],g:!1},{a:"node_out",c:"yv",i:["float"],g:!1},{a:"node_out",c:"yA",i:["vec3"],g:!1},{a:"node_out",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["float"],g:!1},{a:"node_out",c:"yD",i:["vec3"],g:!1},{a:"node_out",c:"yE",i:["vec3"],g:!1},{a:"node_out",c:"yF",i:["float"],g:!1},{a:"node_out",c:"yG",i:["vec3"],g:!1},
{a:"node_out",c:"yH",i:["float"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( xX , _0_0 , _1_0 ) ; yu = mix ( x_ , yj , yI ) ; yv = mix ( ya , yk , yI ) ; if ( yd > _0_0 ) { if ( yn > _0_0 ) { yA = mix ( yb , yl , yI ) ; yB = mix ( yc , ym , yI ) ; } else { yA = yb ; yB = yc ; } } else { yA = yl ; yB = ym ; } if ( yg > _0_0 ) { if ( yq > _0_0 ) { yE = mix ( yf , yp , yI ) ; } else { yE = yf ; } } else { yE = yp ; } yC = mix ( yd , yn , yI ) ; yD = mix ( ye , yo , yI ) ; yF = mix ( yg , yq , yI ) ; yG = mix ( yh , yr , yI ) ; yH = mix ( yi , ys , yI ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",B:[],A:[{a:"node_out",c:"yJ",i:["vec3"],g:!1},{a:"node_out",c:"yK",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yJ"],u:[{a:"txt",b:"yJ = rc ( A ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yK"],u:[{a:"txt",b:"yK = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",B:[],A:[{a:"node_out",c:"yL",i:["vec3"],g:!1}],u:[{a:"txt",b:"yL = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",B:[],A:[{a:"node_out",c:"yM",i:["vec3"],
g:!1}],u:[{a:"txt",b:["yM","=","nH",";"]}]},{a:"node",c:"TEX_COORD_GE",B:[],A:[{a:"node_out",c:"yN",i:["vec3"],g:!1}],u:[{a:"txt",b:"yN = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_OB",B:[],A:[{a:"node_out",c:"yO",i:["vec3"],g:!1}],u:[{a:"txt",b:"yO [ 0 ] = yO [ 1 ] = yO [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_CA",B:[],A:[{a:"node_out",c:"yP",i:["vec3"],g:!1}],u:[{a:"txt",b:"yP [ 0 ] = rG [ 0 ] ; yP [ 1 ] = rG [ 1 ] ; yP [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",
B:[],A:[{a:"node_out",c:"yQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",B:[],A:[{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR [ 0 ] = yR [ 1 ] = yR [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"UVMAP",B:[],A:[{a:"node_out",c:"yS",i:["vec3"],g:!1}],u:[{a:"txt",b:"yS = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",B:[],A:[{a:"node_out",c:"yT",i:["float"],g:!1},{a:"node_out",c:"yU",i:["float"],g:!1},{a:"node_out",
c:"yV",i:["float"],g:!1},{a:"node_out",c:"yW",i:["vec3"],g:!1},{a:"node_out",c:"yX",i:["float"],g:!1},{a:"node_out",c:"yY",i:["vec3"],g:!1},{a:"node_out",c:"yZ",i:["vec3"],g:!1},{a:"node_param",c:"F_",i:["GLSL_IN","vec4"],g:!0},{a:"node_param",c:"Ga",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"Gb",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"Gc",i:["GLSL_IN","vec3"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PARTICLE_BATCH"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yT"],u:[{a:"txt",b:"yT = F_ [ 0 ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yU"],u:[{a:"txt",b:"yU = F_ [ 1 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yV"],u:[{a:"txt",b:"yV = F_ [ 2 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yW"],u:[{a:"txt",b:["yW","=","Ga",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yX"],u:[{a:"txt",b:"yX = F_ [ 3 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yY"],u:[{a:"txt",b:["yY","=","Gb",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_yZ"],
u:[{a:"txt",b:["yZ","=","Gc",";"]}]}]}]},{a:"node_else",u:[{a:"txt",b:"yT = _0_0 ; yU = _0_0 ; yV = _0_0 ; yW = vec3 ( _0_0 ) ; yX = _0_0 ; yY = yW ; yZ = yW ;".split(" ")}]}]}]},{a:"node",c:"HAIR_INFO",B:[],A:[{a:"node_out",c:"y_",i:["float"],g:!1},{a:"node_out",c:"za",i:["float"],g:!1},{a:"node_out",c:"zb",i:["float"],g:!1},{a:"node_out",c:"zc",i:["vec3"],g:!1}],u:[{a:"txt",b:"y_ = _0_0 ; za = _0_0 ; zb = _0_0 ; zc = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",B:[],A:[{a:"node_out",
c:"zd",i:["vec3"],g:!1},{a:"node_out",c:"ze",i:["float"],g:!1},{a:"node_out",c:"zf",i:["float"],g:!1},{a:"node_out",c:"zg",i:["float"],g:!1}],u:[{a:"txt",b:"ze = _0_0 ; zf = _0_0 ; zg = _0_0 ; zd = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"WIREFRAME",B:[],A:[{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_out",c:"zi",i:["float"],g:!1}],u:[{a:"txt",b:["zi","=","zh",";"]}]},{a:"node",c:"TANGENT",B:[],A:[{a:"node_out",c:"zj",i:["vec3"],g:!1}],u:[{a:"txt",b:"zj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",
c:"LAYER_WEIGHT",B:[],A:[{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["vec3"],g:!1},{a:"node_out",c:"zm",i:["float"],g:!1},{a:"node_out",c:"zn",i:["float"],g:!1}],u:[{a:"txt",b:"zm = zn = _0_0 ; Gm ; Gl ;".split(" ")}]},{a:"node",c:"LIGHT_PATH",B:[],A:[{a:"node_out",c:"zp",i:["float"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["float"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["float"],g:!1},
{a:"node_out",c:"zv",i:["float"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["float"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"zp = zq = zr = _0_0 ; zs = zt = zu = _0_0 ; zv = zv = zB = zC = _0_0 ; zA = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",B:[],A:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_out",c:"zG",i:["float"],g:!1}],u:[{a:"txt",b:"zE = zF = vec3 ( _0_0 ) ; zG = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",
B:[],A:[],u:[]},{a:"node",c:"CURVE_VEC",B:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["0.0"]}],A:[{a:"node_in",c:"zH",i:["float"],g:!1},{a:"node_in",c:"zI",i:["vec3"],g:!1},{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["zJ","=","zI",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"zJ . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"zJ . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"zJ . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * zI . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"txt",b:"zJ = mix ( zI , zJ , zH ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",B:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",
c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],A:[{a:"node_in",c:"zK",i:["float"],g:!1},{a:"node_in",c:"zL",i:["vec3"],g:!1},{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zL . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = zL . r ; float g = zL . g ; float b = zL . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"zM . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"zM . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"zM . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"zM . b = b ;".split(" ")}]}]},{a:"txt",b:"zM = mix ( zL , zM , zK ) ;".split(" ")}]},{a:"node",c:"VALTORGB",B:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],A:[{a:"node_in",c:"zN",i:["float"],g:!1},{a:"node_out",c:"zO",i:["vec3"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( u_nodes_texture , vec2 ( zN , NODE_TEX_ROW ) ) ; zO = zQ . rgb ; zP = zQ . a ;".split(" ")}]},
{a:"node",c:"MAPPING",B:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],A:[{a:"node_in",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["vec3"],g:!1}],u:[{a:"txt",b:["zS","=","zR",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"zS = zS * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"zS = zS + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"zS = ( MAPPING_TRS_MATRIX * vec4 ( zS , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"zS = max ( zS , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"zS = min ( zS , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"zS = normalize ( zS ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",B:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],A:[{a:"node_in",c:"zT",i:["float"],g:!1},{a:"node_in",c:"zU",i:["float"],g:!1},{a:"node_out",c:"zV",i:["float"],g:!1}],u:[{a:"txt",b:"zV = zT + zU ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"zV = clamp ( zV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"zW",i:["float"],g:!1},{a:"node_in",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["float"],g:!1}],u:[{a:"txt",b:"zY = zW - zX ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"zY = clamp ( zY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"zZ",i:["float"],g:!1},{a:"node_in",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1}],u:[{a:"txt",b:"Aa = zZ * z_ ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Aa = clamp ( Aa , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ab",i:["float"],g:!1},{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:"Ad = ( Ac != _0_0 ) ? Ab / Ac : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ad = clamp ( Ad , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ae",i:["float"],g:!1},{a:"node_in",c:"Af",i:["float"],g:!1},
{a:"node_out",c:"Ag",i:["float"],g:!1}],u:[{a:"txt",b:"Ag = sin ( Ae ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ag = clamp ( Ag , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Af",";"]}]},{a:"node",c:"MATH_COSINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ah",i:["float"],g:!1},{a:"node_in",c:"Ai",i:["float"],g:!1},{a:"node_out",c:"Aj",i:["float"],g:!1}],u:[{a:"txt",b:"Aj = cos ( Ah ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Aj = clamp ( Aj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ai",";"]}]},{a:"node",c:"MATH_TANGENT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ak",i:["float"],g:!1},{a:"node_in",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1}],u:[{a:"txt",b:"Am = tan ( Ak ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Am = clamp ( Am , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Al",";"]}]},{a:"node",c:"MATH_ARCSINE",B:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"An",i:["float"],g:!1},{a:"node_in",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1}],u:[{a:"txt",b:"Ap = ( An <= _1_0 && An >= - _1_0 ) ? asin ( An ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ap = clamp ( Ap , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ao",";"]}]},{a:"node",c:"MATH_ARCCOSINE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Aq",i:["float"],g:!1},{a:"node_in",
c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1}],u:[{a:"txt",b:"As = ( Aq <= _1_0 && Aq >= - _1_0 ) ? acos ( Aq ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"As = clamp ( As , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Ar",";"]}]},{a:"node",c:"MATH_ARCTANGENT",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"At",i:["float"],g:!1},{a:"node_in",c:"Au",i:["float"],g:!1},{a:"node_out",c:"Av",i:["float"],g:!1}],u:[{a:"txt",
b:"Av = atan ( At ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Av = clamp ( Av , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Au",";"]}]},{a:"node",c:"MATH_POWER",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Aw",i:["float"],g:!1},{a:"node_in",c:"Ax",i:["float"],g:!1},{a:"node_out",c:"Ay",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Aw < _0_0 && Ax != floor ( Ax ) ) Ay = _0_0 ; else if ( Ax == _0_0 ) Ay = _1_0 ; else if ( Aw < _0_0 ) Ay = mix ( _1_0 , - _1_0 , sign ( mod ( - Ax , 2.0 ) ) ) * pow ( - Aw , Ax ) ; else if ( Aw == _0_0 ) Ay = _0_0 ; else Ay = pow ( Aw , Ax ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Ay = clamp ( Ay , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Az",i:["float"],g:!1},{a:"node_in",c:"AA",i:["float"],g:!1},{a:"node_out",c:"AB",i:["float"],g:!1}],u:[{a:"txt",b:"AB = ( Az > _0_0 && AA > _0_0 ) ? log2 ( Az ) / log2 ( AA ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AB = clamp ( AB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AC",i:["float"],g:!1},{a:"node_in",c:"AD",i:["float"],g:!1},{a:"node_out",c:"AE",i:["float"],g:!1}],u:[{a:"txt",b:"AE = min ( AC , AD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AE = clamp ( AE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AF",i:["float"],g:!1},{a:"node_in",c:"AG",i:["float"],
g:!1},{a:"node_out",c:"AH",i:["float"],g:!1}],u:[{a:"txt",b:"AH = max ( AF , AG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AH = clamp ( AH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AI",i:["float"],g:!1},{a:"node_in",c:"AJ",i:["float"],g:!1},{a:"node_out",c:"AK",i:["float"],g:!1}],u:[{a:"txt",b:"AK = floor ( AI + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"AK = clamp ( AK , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AJ",";"]}]},{a:"node",c:"MATH_LESS_THAN",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_in",c:"AM",i:["float"],g:!1},{a:"node_out",c:"AN",i:["float"],g:!1}],u:[{a:"txt",b:"AN = ( AL < AM ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AN = clamp ( AN , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",B:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_in",c:"AP",i:["float"],g:!1},{a:"node_out",c:"AQ",i:["float"],g:!1}],u:[{a:"txt",b:"AQ = ( AO > AP ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AQ = clamp ( AQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_in",c:"AS",i:["float"],g:!1},{a:"node_out",c:"AT",
i:["float"],g:!1}],u:[{a:"txt",b:"AT = abs ( AS ) > 0.000001 ? mod ( AR , AS ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AT = clamp ( AT , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",B:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_in",c:"AV",i:["float"],g:!1},{a:"node_out",c:"AW",i:["float"],g:!1}],u:[{a:"txt",b:"AW = abs ( AU ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"AW = clamp ( AW , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AV",";"]}]},{a:"node",c:"MIX_RGB_MIX",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"AX",i:["float"],g:!1},{a:"node_in",c:"AY",i:["vec3"],g:!1},{a:"node_in",c:"AZ",i:["vec3"],g:!1},{a:"node_out",c:"A_",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( AX , _0_0 , _1_0 ) ; A_ = mix ( AY , AZ , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"A_ = clamp ( A_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ba",i:["float"],g:!1},{a:"node_in",c:"Bb",i:["vec3"],g:!1},{a:"node_in",c:"Bc",i:["vec3"],g:!1},{a:"node_out",c:"Bd",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ba , _0_0 , _1_0 ) ; Bd = mix ( Bb , Bb + Bc , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",B:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["vec3"],g:!1},{a:"node_in",c:"Bg",i:["vec3"],g:!1},{a:"node_out",c:"Bh",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Be , _0_0 , _1_0 ) ; Bh = mix ( Bf , Bf * Bg , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bh = clamp ( Bh , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_in",c:"Bj",i:["vec3"],g:!1},{a:"node_in",c:"Bk",i:["vec3"],g:!1},{a:"node_out",c:"Bl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bi , _0_0 , _1_0 ) ; Bl = mix ( Bj , Bj - Bk , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bl = clamp ( Bl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Bm",i:["float"],g:!1},{a:"node_in",c:"Bn",
i:["vec3"],g:!1},{a:"node_in",c:"Bo",i:["vec3"],g:!1},{a:"node_out",c:"Bp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bm , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Bp = vec3 ( _1_0 ) - ( vec3 ( Bq ) + yI * ( vec3 ( _1_0 ) - Bo ) ) * ( vec3 ( _1_0 ) - Bn ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Br",
i:["float"],g:!1},{a:"node_in",c:"Bs",i:["vec3"],g:!1},{a:"node_in",c:"Bt",i:["vec3"],g:!1},{a:"node_out",c:"Bu",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Br , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Bt += step ( Bt , vec3 ( _0_0 ) ) ; Bu = Bq * Bs + yI * Bs / Bt ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Bu = clamp ( Bu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",
c:"Bv",i:["float"],g:!1},{a:"node_in",c:"Bw",i:["vec3"],g:!1},{a:"node_in",c:"Bx",i:["vec3"],g:!1},{a:"node_out",c:"By",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bv , _0_0 , _1_0 ) ; By = mix ( Bw , abs ( Bw - Bx ) , yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",
c:"BA",i:["vec3"],g:!1},{a:"node_in",c:"BB",i:["vec3"],g:!1},{a:"node_out",c:"BC",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Bz , _0_0 , _1_0 ) ; BC = min ( BA . rgb , BB . rgb * yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BC = clamp ( BC , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_in",c:"BE",i:["vec3"],g:!1},{a:"node_in",
c:"BF",i:["vec3"],g:!1},{a:"node_out",c:"BG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BD , _0_0 , _1_0 ) ; BG = max ( BE . rgb , BF . rgb * yI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BG = clamp ( BG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BH",i:["float"],g:!1},{a:"node_in",c:"BI",i:["vec3"],g:!1},{a:"node_in",c:"BJ",i:["vec3"],g:!1},{a:"node_out",
c:"BK",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BH , _0_0 , _1_0 ) ; vec3 BL = vec3 ( _1_0 - yI ) ; BK = mix ( BI * ( BL + 2.0 * yI * BJ ) , vec3 ( _1_0 ) - ( BL + 2.0 * yI * ( vec3 ( _1_0 ) - BJ ) ) * ( vec3 ( _1_0 ) - BI ) , step ( _0_5 , BI ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BM",i:["float"],
g:!1},{a:"node_in",c:"BN",i:["vec3"],g:!1},{a:"node_in",c:"BO",i:["vec3"],g:!1},{a:"node_out",c:"BP",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BM , _0_0 , _1_0 ) ; vec3 BQ = vec3 ( _1_0 ) - yI * BO ; vec3 BR = clamp ( BN / BQ , _0_0 , _1_0 ) ; BP = mix ( mix ( BR , vec3 ( _1_0 ) , step ( BQ , vec3 ( _0_0 ) ) ) , BN , step ( BN , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BP = clamp ( BP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BS , _0_0 , _1_0 ) ; vec3 jC = vec3 ( _1_0 - yI ) ; vec3 BQ = jC + yI * BU ; vec3 BR = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - BT ) / BQ , _0_0 , _1_0 ) ; BV = mix ( BR , vec3 ( _0_0 ) , step ( BQ , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( BW , _0_0 , _1_0 ) ; vec3 ju , B_ , BQ ; BZ = BX ; B_ = jt ( BY ) ; if ( B_ . y != _0_0 ) { ju = jt ( BZ ) ; ju . x = B_ . x ; BQ = jv ( ju ) ; BZ = mix ( BZ , BQ , yI ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ca",i:["float"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_in",c:"Cc",i:["vec3"],g:!1},{a:"node_out",c:"Cd",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ca , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; Cd = Cb ; vec3 ju , B_ ; ju = jt ( Cd ) ; if ( ju . y != _0_0 ) { B_ = jt ( Cc ) ; ju . y = Bq * ju . y + yI * B_ . y ; Cd = jv ( ju ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cd = clamp ( Cd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ce",i:["float"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_in",c:"Cg",i:["vec3"],g:!1},{a:"node_out",c:"Ch",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ce , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; vec3 ju , B_ ; ju = jt ( Cf ) ; B_ = jt ( Cg ) ; ju . z = Bq * ju . z + yI * B_ . z ; Ch = jv ( ju ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ch = clamp ( Ch , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Ci",i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Ci , _0_0 , _1_0 ) ; vec3 ju , B_ , BQ ; Cl = Cj ; B_ = jt ( Ck ) ; if ( B_ . y != _0_0 ) { ju = jt ( Cl ) ; ju . x = B_ . x ; ju . y = B_ . y ; BQ = jv ( ju ) ; Cl = mix ( Cl , BQ , yI ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cm , _0_0 , _1_0 ) ; float Bq = _1_0 - yI ; vec3 Cq = Co + Cn - Co * Cn ; Cp = Cn * ( vec3 ( Bq ) + vec3 ( yI ) * ( ( vec3 ( _1_0 ) - Cn ) * Co + Cq ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",B:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],A:[{a:"node_in",c:"Cr",i:["float"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_in",c:"Ct",i:["vec3"],g:!1},{a:"node_out",c:"Cu",i:["vec3"],g:!1}],u:[{a:"txt",b:"float yI = clamp ( Cr , _0_0 , _1_0 ) ; Cu = Cs + yI * ( 2.0 * Ct - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cu = clamp ( Cu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"OUTPUT",B:[],A:[{a:"node_in",c:"CD",i:["vec3"],g:!1},{a:"node_in",c:"CE",i:["float"],g:!1}],u:[{a:"txt",b:"D = CD ; H = CE ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",B:[],A:[{a:"node_in",c:"CF",i:["vec3"],g:!1}],u:[{a:"txt",b:"D = CF ; H = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",B:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",
c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],A:[{a:"node_in",c:"CH",i:["vec3"],g:!1},{a:"node_in",c:"CI",i:["vec3"],g:!1},{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!0},{a:"node_in",c:"CL",i:["float"],g:!0},{a:"node_out",c:"CM",i:["vec3"],g:!1},{a:"node_out",c:"CN",i:["vec3"],g:!1},{a:"node_out",c:"CO",i:["vec3"],g:!1},{a:"node_out",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1},{a:"node_out",c:"CR",i:["vec2"],g:!1},{a:"node_out",
c:"CS",i:["vec2"],g:!1},{a:"node_out",c:"CT",i:["vec4"],g:!1},{a:"node_param",c:"ru",i:["const","vec2"],g:!0},{a:"node_param",c:"rv",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"CO = clamp ( CH , _0_0 , _1_0 ) ; CP = rv [ 0 ] * clamp ( CI , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"CQ = normalize ( CK ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["CQ","=","nH",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",
o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"CM = CL * CO ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"CM = rH * CO ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["CO","*=","CJ",";"]}]}]},{a:"txt",b:"CN = rI * u_environment_energy * cn ( CQ ) ; CT = vec4 ( _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"CR = vec2 ( ru [ 0 ] , ru [ 1 ] ) ; CS = vec2 ( rv [ 1 ] , rv [ 2 ] ) ;".split(" ")}]}]},
{a:"txt",b:["G","=","CT",";"]}]},{a:"node_else",u:[{a:"txt",b:"CM = vec3 ( _0_0 ) ; CN = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",B:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],A:[{a:"node_in",c:"CU",i:["vec4"],g:!1},{a:"node_in",c:"CV",i:["vec3"],g:!1},{a:"node_in",c:"CW",i:["vec3"],g:!1},{a:"node_in",c:"CX",i:["float"],g:!0},{a:"node_in",c:"CY",i:["float"],g:!0},{a:"node_in",c:"CZ",
i:["float"],g:!0},{a:"node_out",c:"C_",i:["vec3"],g:!0},{a:"node_out",c:"Da",i:["float"],g:!0},{a:"node_out",c:"Db",i:["vec3"],g:!0},{a:"node_out",c:"Dc",i:["vec3"],g:!0},{a:"node_out",c:"Dd",i:["vec3"],g:!0},{a:"node_param",c:"rw",i:["float"],g:!1},{a:"node_param",c:"rx",i:["float"],g:!1}],u:[{a:"txt",b:["CX",";"]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_C_"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"C_ = CU . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"C_ = vec3 ( _0_0 ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["C_","+=","CV",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Db"],u:[{a:"txt",b:["Db","=","CW",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dc"],u:[{a:"txt",b:"Dc = CU . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dd"],u:[{a:"txt",b:["Dd","=","CV",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Da"],u:[{a:"txt",b:"Da = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( CV . r , CV . g ) , CV . b ) * CY ; Da = clamp ( CZ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Da"],u:[{a:"txt",b:"Da = clamp ( rw , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( CV . r , CV . g ) , CV . b ) * rx ; Da = rw * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["E","=","CV",";"]}]},{a:"node_else",u:[{a:"txt",b:"E = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["F","=","CW",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",B:[],A:[{a:"node_in",c:"nZ",i:["vec3"],g:!1},{a:"node_in",c:"n_",i:["vec3"],g:!1},{a:"node_in",c:"oa",i:["vec3"],g:!1},{a:"node_out",c:"ob",i:["vec4"],g:!1},{a:"node_out",c:"oc",i:["vec3"],g:!1}],u:[{a:"txt",b:"ob = vec4 ( nZ + oa * n_ , _0_0 ) ; oc = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",B:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]}],A:[{a:"node_in",c:"od",i:["vec4"],g:!1},{a:"node_out",c:"oe",i:["vec3"],g:!1},{a:"node_out",c:"of",i:["vec2"],g:!1},{a:"node_out",c:"og",i:["vec3"],g:!1},{a:"node_out",c:"oh",i:["float"],g:!1}],u:[{a:"txt",
b:"of = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oh","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oh","=","_0_0",";"]}]}]},{a:"txt",b:"og = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"og *= od [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oi = u_light_positions [ LAMP_IND ] . xyz ; oe = oi - nG ; float aM = length ( oe ) ; og *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oe = normalize ( oe ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 ok = u_light_directions [ LAMP_IND ] ; float ol = dot ( oe , ok ) ; ol *= smoothstep ( _0_0 , _1_0 , ( ol - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; og *= ol ;".split(" ")}]}]}]},
{a:"node_else",u:[{a:"txt",b:"oe = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"om",i:["vec3"],g:!1},{a:"node_in",c:"on",i:["vec2"],g:!1},{a:"node_in",c:"oo",i:["vec3"],g:!1},{a:"node_in",c:"op",i:["float"],g:!1},{a:"node_in",c:"oq",i:["vec2"],g:!1},{a:"node_out",c:"or",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( om , k . xyz ) ; oo = cross ( os , k . xyz ) ; oo = - normalize ( oo ) ;".split(" ")}]}]},
{a:"txt",b:"or = _0_0 ; if ( on . r != _0_0 ) { float ot = ( _1_0 - op ) * dot ( oo , om ) + op ; if ( oq [ 0 ] == _0_0 ) { or = _1_0 ; } else { float t = _1_0 + abs ( ot ) ; t = oq [ 1 ] + ( _1_0 - oq [ 1 ] ) * pow ( t , oq [ 0 ] ) ; or = clamp ( t , _0_0 , _1_0 ) ; } or = max ( or , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_LAMBERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ou",i:["vec3"],g:!1},{a:"node_in",c:"ov",i:["vec2"],g:!1},{a:"node_in",c:"ow",i:["vec3"],
g:!1},{a:"node_in",c:"ox",i:["float"],g:!1},{a:"node_out",c:"oy",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( ou , k . xyz ) ; ow = cross ( os , k . xyz ) ; ow = - normalize ( ow ) ;".split(" ")}]}]},{a:"txt",b:"oy = _0_0 ; if ( ov . r != _0_0 ) { float ot = ( _1_0 - ox ) * dot ( ow , ou ) + ox ; oy = max ( ot , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",
c:"oz",i:["vec3"],g:!1},{a:"node_in",c:"oA",i:["vec2"],g:!1},{a:"node_in",c:"oB",i:["vec3"],g:!1},{a:"node_in",c:"oC",i:["float"],g:!1},{a:"node_in",c:"oD",i:["vec2"],g:!1},{a:"node_out",c:"oE",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oz , k . xyz ) ; oB = cross ( os , k . xyz ) ; oB = - normalize ( oB ) ;".split(" ")}]}]},{a:"txt",b:"oE = _0_0 ; if ( oA . r != _0_0 ) { float ot = ( _1_0 - oC ) * dot ( oB , oz ) + oC ; if ( oD [ 0 ] > _0_0 ) { float oF = max ( dot ( oB , nI ) , _0_0 ) ; float oG = oD [ 0 ] * oD [ 0 ] ; float cp = _1_0 - _0_5 * ( oG / ( oG + 0.33 ) ) ; vec3 oH = oz - ot * oB ; vec3 oI = nI - oF * oB ; if ( length ( oH ) == _0_0 || length ( oI ) == _0_0 || abs ( ot ) > _1_0 || abs ( oF ) > _1_0 ) oE = ot * cp ; else { float oJ = acos ( ot ) ; float oK = acos ( oF ) ; vec3 oL = normalize ( oH ) ; vec3 oM = normalize ( oI ) ; float a , b ; a = max ( oJ , oK ) ; b = min ( oJ , oK ) ; b *= 0.95 ; float t = max ( dot ( oL , oM ) , _0_0 ) ; float oN = 0.45 * ( oG / ( oG + 0.09 ) ) ; oE = ot * ( cp + ( oN * t * sin ( a ) * tan ( b ) ) ) ; } } else oE = ot ; oE = max ( oE , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oO",i:["vec3"],g:!1},{a:"node_in",c:"oP",i:["vec2"],g:!1},{a:"node_in",c:"oQ",i:["vec3"],g:!1},{a:"node_in",c:"oR",i:["float"],g:!1},{a:"node_in",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oO , k . xyz ) ; oQ = cross ( os , k . xyz ) ; oQ = - normalize ( oQ ) ;".split(" ")}]}]},{a:"txt",
b:"oT = _0_0 ; if ( oP . r != _0_0 ) { float ot = ( _1_0 - oR ) * dot ( oQ , oO ) + oR ; float oF = max ( dot ( oQ , nI ) , _0_0 ) ; if ( oS [ 0 ] <= _1_0 ) oT = ot * pow ( max ( oF * ot , 0.1 ) , oS [ 0 ] - _1_0 ) ; else oT = ot * pow ( 1.0001 - oF , oS [ 0 ] - _1_0 ) ; oT = max ( oT , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"oU",i:["vec3"],g:!1},{a:"node_in",c:"oV",i:["vec2"],g:!1},{a:"node_in",c:"oW",i:["vec3"],g:!1},
{a:"node_in",c:"oX",i:["float"],g:!1},{a:"node_in",c:"oY",i:["vec2"],g:!1},{a:"node_out",c:"oZ",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 os = cross ( oU , k . xyz ) ; oW = cross ( os , k . xyz ) ; oW = - normalize ( oW ) ;".split(" ")}]}]},{a:"txt",b:"oZ = _0_0 ; if ( oV . r != _0_0 ) { float ot = ( _1_0 - oX ) * dot ( oW , oU ) + oX ; float o_ = acos ( ot ) ; if ( o_ < oY [ 0 ] ) oZ = _1_0 ; else if ( o_ > ( oY [ 0 ] + oY [ 1 ] ) || oY [ 1 ] == _0_0 ) oZ = _0_0 ; else oZ = _1_0 - ( ( o_ - oY [ 0 ] ) / oY [ 1 ] ) ; oZ = max ( oZ , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["vec2"],g:!1},{a:"node_in",c:"pc",i:["vec3"],g:!1},{a:"node_in",c:"pd",i:["float"],g:!1},{a:"node_in",c:"pe",i:["vec2"],g:!1},{a:"node_out",c:"pf",i:["float"],g:!1}],u:[{a:"txt",b:"pf = _0_0 ; if ( pb . g == _1_0 ) { vec3 pg = normalize ( pa + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pd == _0_0 ) { pf = dot ( k . xyz , pg ) ; pf = sqrt ( _1_0 - pf * pf ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pf = ( _1_0 - pd ) * max ( dot ( pc , pg ) , _0_0 ) + pd ;".split(" ")}]}]},{a:"txt",b:"pf = pow ( pf , pe [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"ph",i:["vec3"],g:!1},{a:"node_in",c:"pi",i:["vec2"],g:!1},{a:"node_in",c:"pj",i:["vec3"],g:!1},{a:"node_in",c:"pk",i:["float"],g:!1},{a:"node_in",c:"pl",i:["vec2"],g:!1},{a:"node_out",c:"pm",i:["float"],g:!1}],u:[{a:"txt",b:"pm = _0_0 ; if ( pi . g != _0_0 ) { vec3 pg = normalize ( ph + nI ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pk == _0_0 ) { pm = dot ( B . xyz , pg ) ; pm = sqrt ( _1_0 - pm * pm ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"pm = max ( dot ( pj , pg ) , _0_0 ) ; pm = ( _1_0 - pk ) * pm + pk ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float oF = max ( dot ( B . xyz , nI ) , _0_0 ) ; oF = sqrt ( _1_0 - oF * oF ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float oF = max ( dot ( pj , nI ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"pm = pow ( pm , pl [ 0 ] ) ; pm = pm / ( 0.1 + oF ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["vec2"],g:!1},{a:"node_in",c:"pr",i:["vec3"],g:!1},{a:"node_in",c:"pu",i:["float"],g:!1},{a:"node_in",c:"pv",i:["vec2"],g:!1},{a:"node_out",c:"pw",i:["float"],g:!1}],u:[{a:"txt",b:"pw = _0_0 ; if ( po . g == _1_0 ) { vec3 pg = normalize ( pn + nI ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = _0_0 ; float oF = _0_0 ; float py = _0_0 ; if ( pu == _0_0 ) { px = dot ( k . xyz , pg ) ; oF = dot ( k . xyz , nI ) ; py = dot ( k . xyz , pn ) ; px = sqrt ( _1_0 - px * px ) ; oF = sqrt ( _1_0 - oF * oF ) ; py = sqrt ( _1_0 - py * py ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = max ( dot ( pr , pg ) , 0.01 ) ; float oF = max ( dot ( pr , nI ) , 0.01 ) ; float py = max ( dot ( pr , pn ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bx = tan ( acos ( px ) ) ; float J = max ( pv [ 0 ] , 0.01 ) ; pw = py * ( _1_0 / ( 4.0 * M_PI * J * J ) ) * ( exp ( - ( bx * bx ) / ( J * J ) ) / ( sqrt ( oF * py ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pz",i:["vec3"],g:!1},{a:"node_in",c:"pA",i:["vec2"],g:!1},{a:"node_in",c:"pB",i:["vec3"],g:!1},{a:"node_in",c:"pC",i:["float"],g:!1},{a:"node_in",c:"pD",i:["vec2"],g:!1},{a:"node_out",c:"pE",i:["float"],
g:!1}],u:[{a:"txt",b:"pE = _0_0 ; if ( pA . g == _1_0 ) { vec3 bX = normalize ( pz + nI ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pF = dot ( bX , k . xyz ) ; float bx = pD [ 0 ] + pD [ 1 ] ; if ( pC == _0_0 ) bx = acos ( sqrt ( _1_0 - pF * pF ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bx = acos ( dot ( bX , pB ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bx < pD [ 0 ] ) pE = _1_0 ; else if ( bx >= pD [ 0 ] + pD [ 1 ] || pD [ 1 ] == _0_0 ) pE = _0_0 ; else pE = _1_0 - ( bx - pD [ 0 ] ) / pD [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",B:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],A:[{a:"node_in",c:"pG",i:["vec3"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_in",c:"pI",i:["vec3"],g:!1},{a:"node_in",c:"pJ",i:["float"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_out",c:"pL",i:["float"],g:!1}],u:[{a:"txt",b:"pL = _0_0 ; if ( pH . g == _1_0 ) { if ( pK [ 0 ] < _1_0 || pK [ 1 ] == _0_0 ) pL = _0_0 ; else { if ( pK [ 1 ] < 100.0 ) pK [ 1 ] = sqrt ( _1_0 / pK [ 1 ] ) ; else pK [ 1 ] = 10.0 / pK [ 1 ] ; vec3 pg = normalize ( nI + pG ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float px = _0_0 ; if ( pJ == _0_0 ) { float pO = dot ( k . xyz , pg ) ; px = sqrt ( _1_0 - pO * pO ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float px = ( _1_0 - pJ ) * max ( dot ( pI , pg ) , _0_0 ) + pJ ;".split(" ")}]}]},{a:"txt",b:"if ( px < _0_0 ) pL = _0_0 ; else { float oF = max ( dot ( pI , nI ) , 0.01 ) ; float py = dot ( pI , pG ) ; if ( py <= 0.01 ) pL = _0_0 ; else { float pP = max ( dot ( nI , pg ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * px * oF ) / pP ; float di = ( 2.0 * px * py ) / pP ; float g = min ( min ( a , b ) , di ) ; float p = sqrt ( pow ( pK [ 0 ] , 2.0 ) + pow ( pP , 2.0 ) - _1_0 ) ; float lw = pow ( p - pP , 2.0 ) / pow ( p + pP , 2.0 ) * ( _1_0 + pow ( pP * ( p + pP ) - _1_0 , 2.0 ) / pow ( pP * ( p - pP ) + _1_0 , 2.0 ) ) ; float o_ = acos ( px ) ; pL = max ( lw * g * exp ( - pow ( o_ , 2.0 ) / ( 2.0 * pow ( pK [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",B:[],A:[{a:"node_in",c:"pQ",i:["vec4"],g:!1},{a:"node_in",c:"pR",i:["vec3"],g:!1},{a:"node_in",c:"pS",i:["float"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec3"],g:!1},{a:"node_in",c:"pV",i:["vec3"],g:!1},{a:"node_in",c:"pW",i:["vec4"],g:!1},{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec3"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_out",c:"qa",i:["vec4"],g:!1},{a:"node_out",c:"qb",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( pU , pV ) * dot ( nI , pV ) < _0_0 ) { float De = pW . x ; float Df = pW . y ; float Dg = pW . z ; float Dh = pW . w ; float Di = clamp ( abs ( dot ( pU , pV ) ) , _0_0 , _1_0 ) ; float Dj = clamp ( dot ( nI , - pU ) , _0_0 , _1_0 ) ; float Dk = pow ( Dj , Df ) ; qa = pQ + p_ * vec4 ( pZ * Di * pow ( pX , vec3 ( De ) ) , _1_0 ) ; qa += Dg * mix ( vec4 ( pX , _1_0 ) , vec4 ( _1_0 ) , Dh ) * p_ * vec4 ( pZ * Di * vec3 ( Dk ) , _1_0 ) ; } else { qa = pQ + vec4 ( pZ * pX * pS , pT ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qa = pQ + vec4 ( pZ * pX * pS , pT ) ;".split(" ")}]}]},{a:"txt",b:"qb = pR + pZ * pY * pT ;".split(" ")}]},{a:"node",c:"RGB",B:[{a:"node_var",c:"RGB_IND",b:["0"]}],A:[{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"Dl = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",B:[],A:[{a:"node_in",c:"Dm",i:["vec3"],g:!1},{a:"node_out",c:"Dn",i:["float"],g:!1}],u:[{a:"txt",b:"Dn = dot ( Dm , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
B:[],A:[{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["float"],g:!0},{a:"node_out",c:"Dq",i:["float"],g:!0},{a:"node_out",c:"Dr",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dp"],u:[{a:"txt",b:"Dp = Do . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dq"],u:[{a:"txt",b:"Dq = Do . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dr"],u:[{a:"txt",b:"Dr = Do . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",B:[],A:[{a:"node_in",c:"Ds",i:["vec3"],
g:!1},{a:"node_out",c:"Dt",i:["float"],g:!0},{a:"node_out",c:"Du",i:["float"],g:!0},{a:"node_out",c:"Dv",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 Dw = jt ( Ds ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dt"],u:[{a:"txt",b:"Dt = Dw . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Du"],u:[{a:"txt",b:"Du = Dw . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Dv"],u:[{a:"txt",b:"Dv = Dw . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",B:[],A:[{a:"node_in",
c:"Dx",i:["float"],g:!1},{a:"node_in",c:"Dy",i:["float"],g:!1},{a:"node_in",c:"Dz",i:["float"],g:!1},{a:"node_out",c:"DA",i:["float"],g:!1}],u:[{a:"txt",b:"DA = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Dx - Dz ) * Dy ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",B:[],A:[{a:"node_in",c:"DB",i:["vec3"],g:!1},{a:"node_in",c:"DC",i:["float"],g:!1},{a:"node_out",c:"DD",i:["vec3"],g:!1}],u:[{a:"txt",b:"DD = DB ; if ( DD . x > _0_0 ) DD . x = pow ( DB . x , DC ) ; if ( DD . y > _0_0 ) DD . y = pow ( DB . y , DC ) ; if ( DD . z > _0_0 ) DD . z = pow ( DB . z , DC ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",B:[],A:[{a:"node_in",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1}],u:[{a:"txt",b:"DF = max ( vec3 ( _0_0 ) , DE ) ; DF = pow ( DF , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",B:[],A:[{a:"node_in",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1}],u:[{a:"txt",b:"DH = max ( vec3 ( _0_0 ) , DG ) ; DH = pow ( DH , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",B:[],A:[{a:"node_out",c:"DI",i:["vec3"],
g:!1},{a:"node_out",c:"DJ",i:["vec3"],g:!1},{a:"node_out",c:"DK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DI"],u:[{a:"txt",b:"DI [ 2 ] = DI [ 1 ] = DI [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DJ"],u:[{a:"txt",b:"DJ [ 2 ] = DJ [ 1 ] = DJ [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DK"],u:[{a:"txt",b:["DK","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT",B:[],A:[{a:"node_in",c:"Gn",i:["vec3"],g:!1},{a:"node_out",
c:"Go",i:["vec3"],g:!0},{a:"node_out",c:"Gp",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , Gn ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Go"],u:[{a:"txt",b:"Go = zQ . xyz ; cg ( Go ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gp"],u:[{a:"txt",b:"Gp = zQ . w ;".split(" ")}]}]}]},{a:"node",c:"TEXTURE_COLOR",B:[{a:"node_var",
c:"NON_COLOR",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],A:[{a:"node_in",c:"DV",i:["vec3"],g:!0},{a:"node_in",c:"DW",i:["vec3"],g:!0},{a:"node_in",c:"DX",i:["vec3"],g:!0},{a:"node_in",c:"DY",i:["vec3"],g:!0},{a:"node_out",c:"DZ",i:["vec3"],g:!0},{a:"node_out",c:"D_",i:["float"],g:!0},{a:"node_out",c:"Ea",i:["vec3"],g:!0},{a:"node_out",c:"Eb",i:["float"],g:!0},{a:"node_out",c:"Ec",i:["vec3"],g:!0},{a:"node_out",c:"Ed",i:["float"],
g:!0},{a:"node_out",c:"Ee",i:["vec3"],g:!0},{a:"node_out",c:"Ef",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DV ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DZ"],u:[{a:"txt",b:"DZ = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","DZ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_D_"],u:[{a:"txt",b:"D_ = zQ . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DW ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ea"],u:[{a:"txt",b:"Ea = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","Ea",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eb"],u:[{a:"txt",b:"Eb = zQ . w ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DX ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ec"],u:[{a:"txt",b:"Ec = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","Ec",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ed"],u:[{a:"txt",b:"Ed = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",
b:"zQ = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rd ( DY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ee"],u:[{a:"txt",b:"Ee = zQ . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["cg","(","Ee",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ef"],u:[{a:"txt",b:"Ef = zQ . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",B:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},
{a:"node_var",c:"USE_uv4",b:["0"]}],A:[{a:"node_in",c:"Eg",i:["vec3"],g:!0},{a:"node_in",c:"Eh",i:["vec3"],g:!0},{a:"node_in",c:"Ei",i:["vec3"],g:!0},{a:"node_in",c:"Ej",i:["vec3"],g:!0},{a:"node_out",c:"Ek",i:["vec3"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["vec3"],g:!0},{a:"node_out",c:"En",i:["float"],g:!0},{a:"node_out",c:"Eo",i:["vec3"],g:!0},{a:"node_out",c:"Ep",i:["float"],g:!0},{a:"node_out",c:"Eq",i:["vec3"],g:!0},{a:"node_out",c:"Er",i:["float"],g:!0},{a:"node_param",
c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Eg ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = zQ . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Eh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_En"],u:[{a:"txt",b:"En = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Ei ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eo"],u:[{a:"txt",b:"Eo = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Ep"],u:[{a:"txt",b:"Ep = zQ . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"zQ = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rd ( Ej ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eq"],u:[{a:"txt",b:"Eq = normalize ( rD * ( zQ . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Er"],u:[{a:"txt",b:"Er = zQ . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",B:[{a:"node_var",c:"VALUE_IND",
b:["0"]}],A:[{a:"node_out",c:"Es",i:["float"],g:!1}],u:[{a:"txt",b:"Es = u_node_values [ VALUE_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",B:[],A:[{a:"node_in",c:"Et",i:["vec3"],g:!1},{a:"node_in",c:"Eu",i:["vec3"],g:!1},{a:"node_out",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["float"],g:!0}],u:[{a:"txt",b:"Ev = Et + Eu ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ew"],u:[{a:"txt",b:"Ew = ( abs ( Ev [ 0 ] ) + abs ( Ev [ 1 ] ) + abs ( Ev [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_SUBTRACT",B:[],A:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_in",c:"Ey",i:["vec3"],g:!1},{a:"node_out",c:"Ez",i:["vec3"],g:!1},{a:"node_out",c:"EA",i:["float"],g:!0}],u:[{a:"txt",b:"Ez = Ex - Ey ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA = ( abs ( Ez [ 0 ] ) + abs ( Ez [ 1 ] ) + abs ( Ez [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",B:[],A:[{a:"node_in",c:"EB",i:["vec3"],g:!1},{a:"node_in",c:"EC",i:["vec3"],g:!1},
{a:"node_out",c:"ED",i:["vec3"],g:!1},{a:"node_out",c:"EE",i:["float"],g:!0}],u:[{a:"txt",b:"ED = EB + EC ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = length ( ED ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = normalize ( ED ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",B:[],A:[{a:"node_in",c:"EF",i:["vec3"],g:!1},{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_out",c:"EI",
i:["float"],g:!0}],u:[{a:"txt",b:"EH = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EI"],u:[{a:"txt",b:"EI = dot ( EF , EG ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",B:[],A:[{a:"node_in",c:"EJ",i:["vec3"],g:!1},{a:"node_in",c:"EK",i:["vec3"],g:!1},{a:"node_out",c:"EL",i:["vec3"],g:!1},{a:"node_out",c:"EM",i:["float"],g:!0}],u:[{a:"txt",b:"EL = cross ( EJ , EK ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EM"],u:[{a:"txt",b:"EM = length ( EL ) ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_NORMALIZE",B:[],A:[{a:"node_in",c:"EN",i:["vec3"],g:!1},{a:"node_in",c:"EO",i:["vec3"],g:!1},{a:"node_out",c:"EP",i:["vec3"],g:!1},{a:"node_out",c:"EQ",i:["float"],g:!0}],u:[{a:"txt",b:"EP = normalize ( EN ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = length ( EN ) ;".split(" ")}]}]},{a:"txt",b:["EO",";"]}]},{a:"node",c:"B4W_REFLECT",B:[],A:[{a:"node_in",c:"EX",i:["vec3"],g:!1},{a:"node_in",c:"EY",i:["vec3"],g:!1},{a:"node_out",c:"EZ",
i:["vec3"],g:!1}],u:[{a:"txt",b:"EZ = reflect ( _ ( u_view_tsr_inverse , EX ) , EY ) ;".split(" ")}]},{a:"node",c:"B4W_REFLECT_WORLD",B:[],A:[{a:"node_in",c:"E_",i:["vec3"],g:!1},{a:"node_out",c:"Fa",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 Gq = - nI . xyz ; Fa = reflect ( Gq , E_ ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",B:[],A:[{a:"node_in",c:"Fb",i:["vec3"],g:!1},{a:"node_in",c:"Fc",i:["float"],g:!1},{a:"node_in",c:"Fd",i:["const","float"],g:!1},{a:"node_in",c:"Fe",i:["const","float"],g:!1},{a:"node_out",
c:"Ff",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"float bA = length ( rG ) ; if ( bA < Fe ) { vec2 bN = rd ( Fb ) ; float bR = clamp ( _0_5 * ( Fe - bA ) , _0_0 , _1_0 ) ; float he = Fc * bR ; vec3 bT = normalize ( nI * rD ) ; float bU = _1_0 / Fd ; vec2 bV = bT . xy * he / ( Fd * bT . z ) ; float bW = _1_0 ; float bX = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , bN ) . a ; for ( float bZ = 1.0 ; bZ <= Fd ; bZ ++ ) { if ( bX < bW ) { bW -= bU ; bN -= bV ; bX = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , bN ) . a ; } } vec2 b_ = bN + bV ; float ca = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a - ( bW + bU ) ; float cb = bX - bW ; float cc = cb / ( cb - ca ) ; bN = cc * b_ + ( _1_0 - cc ) * bN ; Ff = rc ( bN ) ; } else Ff = Fb ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",B:[],A:[{a:"node_in",c:"Fg",i:["vec3"],g:!1},{a:"node_out",c:"Fh",i:["vec3"],g:!1}],u:[{a:"txt",b:"Fh = clamp ( Fg , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",B:[],A:[{a:"node_in",c:"Fi",i:["vec3"],g:!1},{a:"node_in",c:"Fj",i:["float"],g:!1},{a:"node_out",c:"Fk",i:["vec3"],g:!1}],u:[{a:"txt",b:["Fk","=","Fi",";"]}]},{a:"node",c:"B4W_TRANSLUCENCY",B:[],A:[{a:"node_in",c:"Fl",i:["float"],g:!1},{a:"node_in",c:"Fm",i:["float"],g:!1},{a:"node_in",c:"Fn",i:["float"],
g:!1},{a:"node_in",c:"Fo",i:["float"],g:!1},{a:"node_in",c:"Fp",i:["float"],g:!1},{a:"node_out",c:"Fq",i:["float"],g:!0},{a:"node_out",c:"Fr",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fq"],u:[{a:"txt",b:["Fq","=","Fl",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = vec4 ( Fm , Fn , Fo , Fp ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",B:[],A:[{a:"node_out",c:"Fs",i:["float"],g:!1}],u:[{a:"txt",b:["Fs","=","u_time",";"]}]},{a:"node",c:"B4W_SMOOTHSTEP",
B:[],A:[{a:"node_in",c:"Ft",i:["float"],g:!1},{a:"node_in",c:"Fu",i:["float"],g:!1},{a:"node_in",c:"Fv",i:["float"],g:!1},{a:"node_out",c:"Fw",i:["float"],g:!1}],u:[{a:"txt",b:"Fw = smoothstep ( Fu , Fv , Ft ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",B:[],A:[{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_in",c:"Fy",i:["float"],g:!1}],u:[{a:"txt",b:"D = Fx ; H = Fy ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",B:[],A:[{a:"node_in",c:"Fz",i:["vec3"],g:!1},{a:"node_out",c:"FA",i:["float"],g:!1}],
u:[{a:"txt",b:"FA = ( Fz . r + Fz . g + Fz . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",B:[],A:[{a:"node_in",c:"FB",i:["float"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1}],u:[{a:"txt",b:"FC [ 0 ] = FB ; FC [ 1 ] = FB ; FC [ 2 ] = FB ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void I ( in vec3 nI , out vec3 D , out vec3 E , out vec3 F , out vec4 G , out float H ) { D = vec3 ( _0_0 ) ; E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec4 ( _0_0 ) ; H = _0_0 ;".split(" ")},{a:"cond",f:[{a:"if",
j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","rA","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"rA = rA ; else rA = - rA ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","rB","=","rA",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 rC = normalize ( rA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","nH","=","rC",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 nH = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","rz","=","rC",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( rC , k . xyz ) * k . w ; mat3 rD = mat3 ( k . xyz , W , rC ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( rA , k . xyz ) * k . w ; mat3 rF = mat3 ( k . xyz , W , rA ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 nG = h ; vec4 rG = i ; float rH = u_emit ; float rI = u_ambient ;".split(" ")},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/particles_nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLV",b:[""]},{a:"node",c:"TEX_COORD_UV",B:[],
A:[],u:[{a:"txt",b:["A","=","Gw",";"]}]},{a:"node",c:"UV_MERGED",B:[],A:[],u:[{a:"txt",b:["A","=","Gw",";"]}]},{a:"node",c:"UVMAP",B:[],A:[],u:[{a:"txt",b:["A","=","Gw",";"]}]},{a:"node",c:"GEOMETRY_UV",B:[],A:[],u:[{a:"txt",b:["A","=","Gw",";"]}]},{a:"node",c:"PARTICLE_INFO",B:[{a:"node_var",c:"PART_INFO_SIZE",b:["0"]},{a:"node_var",c:"PART_INFO_AGE",b:["0"]},{a:"node_var",c:"PART_INFO_LT",b:["0"]},{a:"node_var",c:"PART_INFO_LOC",b:["0"]},{a:"node_var",c:"PART_INFO_IND",b:["0"]},{a:"node_var",c:"PART_INFO_VEL",
b:["0"]},{a:"node_var",c:"PART_INFO_A_VEL",b:["0"]}],A:[{a:"node_param",c:"F_",i:["GLSL_OUT","vec4"],g:!0},{a:"node_param",c:"Ga",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"Gb",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"Gc",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"node_PARTICLE_INFO_var_a_p_indices",i:["GLSL_IN","float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_SIZE"],u:[{a:"txt",b:"F_ [ 3 ] = Gv ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_AGE"],u:[{a:"txt",
b:"F_ [ 1 ] = Gu ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LT"],u:[{a:"txt",b:"F_ [ 2 ] = Gx ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LOC"],u:[{a:"txt",b:["Ga","=","Gr",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_IND"],u:[{a:"txt",b:"F_ [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_VEL"],u:[{a:"txt",b:["Gb","=","Gs",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_A_VEL"],u:[{a:"txt",
b:["Gc","=","Gt",";"]}]}]}]},{a:"nodes_global"},{a:"txt",b:"void I ( in vec3 Gr , in vec3 Gs , in vec3 Gt , in float Gu , in float Gv , in vec2 Gw , in float Gx ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","Gw",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/precision_statement.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PRECISION_STATEMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"PRECISION_STATEMENT_GLSLF",
b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","float",";"]}]}}]}]};a["include/procedural.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PROCEDURAL_GLSLF",l:{a:"grp",f:[{a:"define",c:"PROCEDURAL_GLSLF",b:[""]},{a:"txt",b:"vec4 Gy ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Gy ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Gy ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Gz ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 GA ( vec4 x ) { return Gy ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},
{a:"define",c:"K",b:["0.142857142857"]},{a:"define",c:"K2",b:["0.0714285714285"]},{a:"define",c:"JITTER",b:["0.7"]},{a:"txt",b:"vec2 fd ( vec2 GB ) { vec2 GC = Gy ( floor ( GB ) ) ; vec2 GD = fract ( GB ) ; vec4 GE = GD . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 GF = GD . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = GA ( GC . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = GA ( p + GC . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 GG = Gz ( p ) * K + K2 ; vec4 GH = Gz ( floor ( p * K ) ) * K + K2 ; vec4 GI = GE + JITTER * GG ; vec4 GJ = GF + JITTER * GH ; vec4 dn = GI * GI + GJ * GJ ;".split(" ")},
{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"txt",b:"dn . xy = min ( dn . xy , dn . zw ) ; dn . x = min ( dn . x , dn . y ) ; return dn . xx ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dn . xy = ( dn . x < dn . y ) ? dn . xy : dn . yx ; dn . xz = ( dn . x < dn . z ) ? dn . xz : dn . zx ; dn . xw = ( dn . x < dn . w ) ? dn . xw : dn . wx ; dn . y = min ( dn . y , dn . z ) ; dn . y = min ( dn . y , dn . w ) ; return sqrt ( dn . xy ) ;".split(" ")}]}}]},{a:"txt",b:"} vec3 kk ( vec2 GB , float GK ) { vec2 GC = Gy ( floor ( GB ) ) ; vec2 GD = fract ( GB ) ; vec4 GE = GD . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 GF = GD . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = GA ( GC . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = GA ( p + GC . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 GG = Gz ( p ) * K + K2 ; vec4 GH = Gz ( floor ( p * K ) ) * K + K2 ; vec4 GI = GE + JITTER * GG ; vec4 GJ = GF + JITTER * GH ; vec4 GL = GI * GI + GJ * GJ ; GI += GK ; GJ += GK ; vec4 GM = GI * GI + GJ * GJ ; GI += GK ; GJ += GK ; vec4 GN = GI * GI + GJ * GJ ; GL . xy = min ( GL . xy , GL . zw ) ; GL . x = min ( GL . x , GL . y ) ; GM . xy = min ( GM . xy , GM . zw ) ; GM . x = min ( GM . x , GM . y ) ; GN . xy = min ( GN . xy , GN . zw ) ; GN . x = min ( GN . x , GN . y ) ; return vec3 ( GL . x , GM . x , GN . x ) ; } vec3 GO ( vec3 x ) { return Gy ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float eT ( vec2 kd ) { const vec4 GP = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 bZ = floor ( kd + dot ( kd , GP . yy ) ) ; vec2 GQ = kd - bZ + dot ( bZ , GP . xx ) ; vec2 GR ; GR = ( GQ . x > GQ . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 GS = GQ . xyxy + GP . xxzz ; GS . xy -= GR ; bZ = Gy ( bZ ) ; vec3 p = GO ( GO ( bZ . y + vec3 ( _0_0 , GR . y , _1_0 ) ) + bZ . x + vec3 ( _0_0 , GR . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( GQ , GQ ) , dot ( GS . xy , GS . xy ) , dot ( GS . zw , GS . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * GP . www ) - _1_0 ; vec3 bX = abs ( x ) - 0.5 ; vec3 GG = floor ( x + 0.5 ) ; vec3 GT = x - GG ; aA *= 1.79284291400159 - 0.85373472095314 * ( GT * GT + bX * bX ) ; vec3 g ; g . x = GT . x * GQ . x + bX . x * GQ . y ; g . yz = GT . yz * GS . xz + bX . yz * GS . yw ; return 130.0 * dot ( aA , g ) ; } vec2 GW ( vec2 fu ) { float GL = dot ( fu , vec2 ( 12.9898 , 78.233 ) ) ; float GM = dot ( fu , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float GU = fract ( sin ( GL ) * 43758.5453 ) * 2.0 - _1_0 ; float GV = fract ( sin ( GM ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( GU , GV ) ; } float ku ( vec2 GX ) { return fract ( sin ( dot ( GX , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
a["include/refraction.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"REFRACTION_GLSLF",l:{a:"grp",f:[{a:"define",c:"REFRACTION_GLSLF",b:[""]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"include",D:"pack.glslf"}]}}]},{a:"include",D:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"float eo ( in float cG , inout vec2 en , in vec2 ee ) { vec4 GY = GLSL_TEXTURE ( u_scene_depth , en ) ; float ep = cF ( GY ) ; if ( ep < m ) { en = ee ; return cG ; } else { return ep ; } return cG ; }".split(" ")}]}}]},
{a:"txt",b:"vec3 cB ( in vec3 qC , in vec2 GZ ) { vec2 ee = qC . xy / qC . z ; vec2 en = ee + GZ ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 cE = GLSL_TEXTURE_PROJ ( u_scene_depth , qC ) ; float cG = cF ( cE ) ; eo ( cG , en , ee ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 et = GLSL_TEXTURE ( u_refractmap , en ) . rgb ; cg ( et ) ; return et ; }".split(" ")}]}}]}]}}]}]};a["include/scale_texcoord.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SCALE_TEXCOORD_GLSLV",
l:{a:"grp",f:[{a:"define",c:"SCALE_TEXCOORD_GLSLV",b:[""]},{a:"txt",b:"vec2 az ( vec2 bN , vec3 G_ ) { return ( bN + 0.5 ) * G_ . xy - 0.5 ; }".split(" ")}]}}]}]};a["include/shadow.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLF",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLF",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"CSM_FADE_LAST_CASCADE",b:["0"]},{a:"var",c:"CSM_BLEND_BETWEEN_CASCADES",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"COMPARED_MODE",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"procedural.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float Ha = 0.1 ; const float Hb = 0.1 ; const float Hc = - 0.01 ; const float Hd = 0.05 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","POISSON_X_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 He = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 Hf = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 Hg = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 Hh = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 Hi = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Hj = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Hk = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Hl = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{a:"elif",j:["POISSON_DISK_NUM","POISSON_X_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 He = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 Hf = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 Hg = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 Hh = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 Hi = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Hj = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Hk = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Hl = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{a:"elif",j:["POISSON_DISK_NUM",
"POISSON_X_4",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 He = vec2 ( - 0.51808083 , 0.0 ) ; vec2 Hf = vec2 ( 0.5741194 , 0.0 ) ; vec2 Hg = vec2 ( - 0.68048857 , 0.0 ) ; vec2 Hh = vec2 ( 0.82934988 , 0.0 ) ; vec2 Hi = vec2 ( 0.70009436 , 0.0 ) ; vec2 Hj = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Hk = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Hl = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"bool Hn ( vec2 hT , float Hm ) { return all ( lessThanEqual ( hT , vec2 ( 1.0 + Hm ) ) ) && all ( greaterThanEqual ( hT , vec2 ( 0.0 - Hm ) ) ) ; } float Hu ( float Ho , float Hp , mat2 Hq , vec3 Hr , float Hs , PRECISION GLSL_SMPLR2D_SHDW Ht ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 hT , ff ; ff . x = Ho ; ff . y = Hp ; ff = Hq * ff ; hT = Hr . xy + ff * Hs / SHADOW_TEX_RES ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 hT = Hr . xy ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"if ( ! Hn ( hT , Hc ) ) return 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",
f:[{a:"txt",b:"float dM = cF ( GLSL_TEXTURE ( Ht , hT ) ) ; return step ( Hr . z , dM ) ;".split(" ")}]}},{a:"elif",j:["COMPARED_MODE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE ( Ht , vec3 ( hT , Hr . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return step ( Hr . z , GLSL_TEXTURE ( Ht , hT ) . r ) ;".split(" ")}]}}]},{a:"txt",b:"} float Hz ( vec3 Hr , PRECISION GLSL_SMPLR2D_SHDW Ht , float Hs ) { float Hv = 0.0 ; Hr . z = clamp ( Hr . z , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float Hw = GW ( Hr . xy ) . x * M_PI ; float Hx = cos ( Hw ) ; float Hy = sin ( Hw ) ; mat2 Hq = mat2 ( Hx , Hy , - Hy , Hx ) ; for ( int bZ = 0 ; bZ < POISSON_DISK_NUM ; bZ ++ ) { Hv += Hu ( He [ bZ ] , Hi [ bZ ] , Hq , Hr , Hs , Ht ) ; Hv += Hu ( Hf [ bZ ] , Hj [ bZ ] , Hq , Hr , Hs , Ht ) ; Hv += Hu ( Hg [ bZ ] , Hk [ bZ ] , Hq , Hr , Hs , Ht ) ; Hv += Hu ( Hh [ bZ ] , Hl [ bZ ] , Hq , Hr , Hs , Ht ) ; } return clamp ( Hv / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return Hu ( 0.0 , 0.0 , mat2 ( 0.0 ) , Hr , Hs , Ht ) ;".split(" ")}]}}]},{a:"txt",b:"} float HI ( vec3 HA , PRECISION GLSL_SMPLR2D_SHDW HB , vec3 HC , PRECISION GLSL_SMPLR2D_SHDW HD , float HE , float HF , float aL ) { float HG , HH ; HA . z = clamp ( HA . z , 0.0 , 1.0 ) ; HC . z = clamp ( HC . z , 0.0 , 1.0 ) ; HG = 0.0 ; HH = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float Hw = GW ( HA . xy ) . x * M_PI ; float Hx = cos ( Hw ) ; float Hy = sin ( Hw ) ; mat2 Hq = mat2 ( Hx , Hy , - Hy , Hx ) ; for ( int bZ = 0 ; bZ < POISSON_DISK_NUM ; bZ ++ ) { HG += Hu ( He [ bZ ] , Hi [ bZ ] , Hq , HA , HE , HB ) ; HG += Hu ( Hf [ bZ ] , Hj [ bZ ] , Hq , HA , HE , HB ) ; HG += Hu ( Hg [ bZ ] , Hk [ bZ ] , Hq , HA , HE , HB ) ; HG += Hu ( Hh [ bZ ] , Hl [ bZ ] , Hq , HA , HE , HB ) ; } for ( int bZ = 0 ; bZ < POISSON_DISK_NUM ; bZ ++ ) { HH += Hu ( He [ bZ ] , Hi [ bZ ] , Hq , HC , HF , HD ) ; HH += Hu ( Hf [ bZ ] , Hj [ bZ ] , Hq , HC , HF , HD ) ; HH += Hu ( Hg [ bZ ] , Hk [ bZ ] , Hq , HC , HF , HD ) ; HH += Hu ( Hh [ bZ ] , Hl [ bZ ] , Hq , HC , HF , HD ) ; } HG = mix ( HG , HH , aL ) ; HG /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"HG += Hu ( 0.0 , 0.0 , mat2 ( 0.0 ) , HA , HE , HB ) ; HH += Hu ( 0.0 , 0.0 , mat2 ( 0.0 ) , HC , HF , HD ) ; HG = mix ( HG , HH , aL ) ;".split(" ")}]}}]},{a:"txt",b:"return clamp ( HG , 0.0 , 1.0 ) ; } float HJ ( vec2 hT ) { float a = min ( hT . x , hT . y ) ; float b = min ( 1.0 - hT . x , 1.0 - hT . y ) ; return min ( a , b ) ; } float HL ( float tX , float HK ) { if ( HK >= 0.0 && HK <= Hb ) tX = ( tX - 1.0 ) / Hb * HK + 1.0 ; return tX ; } float HQ ( vec3 HM , vec3 HN , PRECISION GLSL_SMPLR2D_SHDW HB , PRECISION GLSL_SMPLR2D_SHDW HD , float HE , float HF , float HO , float dM ) { float tX ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_BLEND_BETWEEN_CASCADES"],l:{a:"grp",f:[{a:"txt",b:"float HK = HJ ( HM . xy ) ; if ( - dM > HO && HK >= 0.0 && HK <= Ha && Hn ( HN . xy , 0.0 ) ) { float HP = 1.0 - HK / Ha ; tX = HI ( HM , HB , HN , HD , HE , HF , HP ) ; } else".split(" ")}]}}]},{a:"txt",b:"tX = Hz ( HM , HB , HE ) ; return tX ; } float HS ( vec3 HR , PRECISION GLSL_SMPLR2D_SHDW Ht , float Hs , float HO , float dM ) { float tX = Hz ( HR , Ht , Hs ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_FADE_LAST_CASCADE"],
l:{a:"grp",f:[{a:"txt",b:"if ( - dM > HO ) { float HK = HJ ( HR . xy ) ; tX = HL ( tX , HK ) ; }".split(" ")}]}}]},{a:"txt",b:"return tX ; } vec4 dO ( float dM ) { float tX = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","HT","=","u_pcf_blur_radii",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 HT = vec4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 HA = n . xyz / n . w ; if ( n . w < 0.0 ) HA . z = 0.0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 HC = o . xyz / o . w ; if ( o . w < 0.0 ) HC . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 HU = u . xyz / u . w ; if ( u . w < 0.0 ) HU . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 HV = v . xyz / v . w ; if ( v . w < 0.0 ) HV . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"if ( Hn ( HA . xy , 0.0 ) ) { tX = HQ ( HA , HC , u_shadow_map0 , u_shadow_map1 , HT [ 0 ] , HT [ 1 ] , u_csm_center_dists [ 0 ] , dM ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( Hn ( HA . xy , Hd ) ) { tX = HS ( HA , u_shadow_map0 , HT [ 0 ] , u_csm_center_dists [ 0 ] , dM ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Hn ( HC . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"tX = HQ ( HC , HU , u_shadow_map1 , u_shadow_map2 , HT [ 1 ] , HT [ 2 ] , u_csm_center_dists [ 1 ] , dM ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"tX = HS ( HC , u_shadow_map1 , HT [ 1 ] , u_csm_center_dists [ 1 ] , dM ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",
b:"else { if ( Hn ( HU . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"tX = HQ ( HU , HV , u_shadow_map2 , u_shadow_map3 , HT [ 2 ] , HT [ 3 ] , u_csm_center_dists [ 2 ] , dM ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"tX = HS ( HU , u_shadow_map2 , HT [ 2 ] , u_csm_center_dists [ 2 ] , dM ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Hn ( HV . xy , 0.0 ) ) tX = HS ( HV , u_shadow_map3 , HT [ 3 ] , u_csm_center_dists [ 3 ] , dM ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float HW = Hz ( HC , u_shadow_map1 , HT [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","HW","=","0.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float HX = Hz ( HU , u_shadow_map2 , HT [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","HX","=","0.0",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float HY = Hz ( HV , u_shadow_map3 , HT [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","HY","=","1.0",";"]}]}}]},{a:"txt",b:"return vec4 ( tX , HW , HX , HY ) ; }".split(" ")}]}}]},{a:"txt",b:"vec4 cq ( inout vec3 cm ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Hv = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"l_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cm *= Hv . a ;".split(" ")}]}}]},{a:"txt",b:["return","Hv",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Hv = dO ( i . z ) ; return Hv ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/shadow.glslv"]=
{a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLV",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLV",b:[""]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE",
"SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",D:"math.glslv"},{a:"txt",b:"vec4 Ib ( mat4 HZ , vec4 H_ , mat4 Ia ) { vec2 dQ = ( HZ * Ia [ 3 ] ) . xy ; float dR = SHADOW_TEX_RES / 2.0 ; dQ = floor ( dQ * dR + 0.5 ) / dR - dQ ; vec4 Hr = HZ * H_ ; Hr . xy += dQ ; Hr . xyz = 0.5 * ( Hr . xyz + Hr . w ) ; return Hr ; } void bM ( vec3 eL , vec3 Ic ) {".split(" ")},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"mat4 Ia = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 Ia = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 Id = Ia * vec4 ( eL + u_normal_offset * Ic , 1.0 ) ; n = Ib ( u_p_light_matrix0 , Id , Ia ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},
{a:"txt",b:"Id = Ia * vec4 ( eL + u_normal_offset * Ic , 1.0 ) ; o = Ib ( u_p_light_matrix1 , Id , Ia ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"Id = Ia * vec4 ( eL + u_normal_offset * Ic , 1.0 ) ; u = Ib ( u_p_light_matrix2 , Id , Ia ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ia = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"Id = Ia * vec4 ( eL + u_normal_offset * Ic , 1.0 ) ; v = Ib ( u_p_light_matrix3 , Id , Ia ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",
b:"o = Ib ( u_p_light_matrix1 , Id , Ia ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"u = Ib ( u_p_light_matrix2 , Id , Ia ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"v = Ib ( u_p_light_matrix3 , Id , Ia ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/skin.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKIN_GLSLV",l:{a:"grp",f:[{a:"define",c:"SKIN_GLSLV",b:[""]},{a:"var",c:"DISABLE_TANGENT_SKINNING",
b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"include",D:"math.glslv"},{a:"define",c:"SKIN_SLERP",b:["0"]},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 Il ( in vec4 qf , in vec4 Ie , in float If ) { float Ig = qf [ 0 ] * Ie [ 0 ] + qf [ 1 ] * Ie [ 1 ] + qf [ 2 ] * Ie [ 2 ] + qf [ 3 ] * Ie [ 3 ] ; if ( Ig < 0.0 ) { Ie *= - 1.0 ; Ig = - Ig ; } if ( abs ( Ig ) >= 1.0 ) return qf ; float Ih = acos ( Ig ) ; float Ii = sqrt ( 1.0 - Ig * Ig ) ; if ( abs ( Ii ) < 0.001 ) return vec4 ( qf * 0.5 + Ie * 0.5 ) ; float Ij = sin ( ( 1.0 - If ) * Ih ) / Ii ; float Ik = sin ( If * Ih ) / Ii ; return qf * Ij + Ie * Ik ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"vec3 Iz ( in vec3 O , in vec4 Im , in vec4 In , in vec4 Io , in vec4 Ip , in float Iq ) { vec3 Ir = qr ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qf = Il ( Im , In , Iq ) ; vec4 Is = mix ( Io , Ip , Iq ) ; vec3 It = T ( qf , Ir ) ; vec3 Iu = It * Is . w + Is . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Iv = T ( Im , Ir ) ; vec3 Iw = T ( In , Ir ) ; vec3 Ix = Iv * Io . w + Io . xyz ; vec3 Iy = Iw * Ip . w + Ip . xyz ; vec3 Iu = mix ( Ix , Iy , Iq ) ;".split(" ")}]}}]},
{a:"txt",b:"return qw ( u_arm_rel_trans , u_arm_rel_quat , Iu ) ; } vec3 IF ( in vec3 IA , in vec4 Im , in vec4 In , in float Iq ) { vec3 IB = qv ( u_arm_rel_trans , u_arm_rel_quat , IA ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qf = Il ( Im , In , Iq ) ; vec3 IC = T ( qf , IB ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ID = T ( Im , IB ) ; vec3 IE = T ( In , IB ) ; vec3 IC = mix ( ID , IE , Iq ) ;".split(" ")}]}}]},{a:"txt",b:"return qx ( u_arm_rel_trans , u_arm_rel_quat , IC ) ; }".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Iz ( in vec3 O , in vec4 Im , in vec4 Io ) { vec3 Ir = qr ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 It = T ( Im , Ir ) ; vec3 Iu = It * Io . w + Io . xyz ; return qw ( u_arm_rel_trans , u_arm_rel_quat , Iu ) ; } vec3 IF ( in vec3 IA , in vec4 Im ) { vec3 IB = qv ( u_arm_rel_trans , u_arm_rel_quat , IA ) ; vec3 IC = T ( Im , IB ) ; return qx ( u_arm_rel_trans , u_arm_rel_quat , IC ) ; }".split(" ")}]}}]},{a:"txt",b:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:["float","IG","=","u_frame_factor",";"]}]}}]},{a:"txt",b:"if ( a_influence . y > 0.0 ) { vec3 iO = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 IH = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 II = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 IJ = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 IK = a_influence ; for ( int bZ = 0 ; bZ < 4 ; bZ ++ ) { int IL = int ( IK [ bZ ] ) ; float IM = fract ( IK [ bZ ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"IH += IM * IF ( V , u_quatsb [ IL ] , u_quatsa [ IL ] , IG ) ; II += IM * IF ( W , u_quatsb [ IL ] , u_quatsa [ IL ] , IG ) ; IJ += IM * IF ( U , u_quatsb [ IL ] , u_quatsa [ IL ] , IG ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"iO += IM * Iz ( O , u_quatsb [ IL ] , u_transb [ IL ] ) ; IJ += IM * IF ( U , u_quatsb [ IL ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"IH += IM * IF ( V , u_quatsb [ IL ] ) ; II += IM * IF ( W , u_quatsb [ IL ] ) ;".split(" ")}]}}]}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"int IL = int ( IK [ 0 ] ) ; float IM = fract ( IK [ 0 ] ) ; iO += IM * Iz ( O , u_quatsb [ IL ] , u_quatsa [ IL ] , u_transb [ IL ] , u_transa [ IL ] , IG ) ; IL = int ( IK [ 1 ] ) ; IM = fract ( IK [ 1 ] ) ; iO += IM * Iz ( O , u_quatsb [ IL ] , u_quatsa [ IL ] , u_transb [ IL ] , u_transa [ IL ] , IG ) ; IL = int ( IK [ 2 ] ) ; IM = fract ( IK [ 2 ] ) ; iO += IM * Iz ( O , u_quatsb [ IL ] , u_quatsa [ IL ] , u_transb [ IL ] , u_transa [ IL ] , IG ) ; IL = int ( IK [ 3 ] ) ; IM = fract ( IK [ 3 ] ) ; iO += IM * Iz ( O , u_quatsb [ IL ] , u_quatsa [ IL ] , u_transb [ IL ] , u_transa [ IL ] , IG ) ;".split(" ")}]}}]},
{a:"txt",b:"O = iO ; U = IJ ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = IH ; W = II ;".split(" ")}]}}]},{a:"txt",b:"} if ( ! ( a_influence . y > 0.0 ) ) { int IN = int ( a_influence [ 0 ] - 1.0 ) ; if ( IN > - 1 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"O = Iz ( O , u_quatsb [ IN ] , u_quatsa [ IN ] , u_transb [ IN ] , u_transa [ IN ] , IG ) ; V = IF ( V , u_quatsb [ IN ] , u_quatsa [ IN ] , IG ) ; W = IF ( W , u_quatsb [ IN ] , u_quatsa [ IN ] , IG ) ; U = IF ( U , u_quatsb [ IN ] , u_quatsa [ IN ] , IG ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = Iz ( O , u_quatsb [ IN ] , u_transb [ IN ] ) ; U = IF ( U , u_quatsb [ IN ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = IF ( V , u_quatsb [ IN ] ) ; W = IF ( W , u_quatsb [ IN ] ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}","}","}"]}]}}]}]}}]}]};a["include/sky_blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKY_BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"SKY_BLENDING_GLSLF",
b:[""]},{a:"include",D:"std.glsl"},{a:"include",D:"blending.glslf"},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"BLENDTYPE",b:["MIX"]},{a:"var",c:"MTEX_RGBTOINT",b:["0"]},{a:"var",c:"WOMAP_HORIZ",b:["0"]},{a:"var",c:"WOMAP_ZENUP",b:["0"]},{a:"var",c:"WOMAP_ZENDOWN",b:["0"]},{a:"var",c:"WOMAP_BLEND",b:["0"]},{a:"var",c:"MTEX_NEGATIVE",b:["0"]},{a:"txt",b:"vec3 IO ( vec3 jw , vec3 jx , float aL , float jW ) { float jy = aL * jW ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE",
"MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jz ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jA ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jB ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jD ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jE ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jF ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jG ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jH ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jI ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jJ ( jw , jx , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","HUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jN ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SATURATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jO ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"VALUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jP ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","COLOR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jQ ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jS ( jx , jw , jy ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jT ( jx , jw , jy ) ;".split(" ")}]}}]},{a:"txt",
b:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float IP ( float jU , float jV , float aL , float jW ) { vec3 jw = vec3 ( jU ) , jx = vec3 ( jV ) ; float jy = aL * jW ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE","MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jz ( jx , jw , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jA ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"return jB ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jX ( jU , jV , jy , jW ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jY ( jU , jV , jy , jW ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jZ ( jU , jV , jy , jW ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jG ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jH ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jI ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jJ ( jw , jx , jy ) . x ;".split(" ")}]}},{a:"elif",
j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jS ( jx , jw , jy ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return jT ( jx , jw , jy ) . x ;".split(" ")}]}}]},{a:"txt",b:"return 0.0 ; } vec3 dY ( vec3 dU , vec3 dV , vec4 dX , float dT , vec3 dW ) { float IQ = 1.0 ; IQ = dX . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"IQ = fB ( dX ) ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["MTEX_NEGATIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"dX = vec4 ( vec3 ( 1.0 ) - dX . rgb , dX . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IQ = 1.0 - IQ ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"dX = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"IQ = dX . a ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ"],l:{a:"grp",f:[{a:"txt",b:"dU = IO ( dX . rgb , dU , IQ , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","IR","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"if ( dot ( dW , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],
l:{a:"grp",f:[{a:"txt",b:"IR = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:[";"]}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"else IR = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],l:{a:"grp",f:[{a:"txt",b:"IR = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"elif",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"IR = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( IR != 0.0 ) dV = IO ( dX . rgb , dV , IQ , IR ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_BLEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"IQ = dot ( dX . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{a:"txt",b:"dT = IP ( u_sky_tex_dvar , dT , IQ , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"vec3 dS = mix ( dU , dV , dT ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","dS","=","dU",";"]}]}}]},{a:"txt",b:["return","dS",";","}"]}]}}]}]};a["include/std.glsl"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"STD_ENUMS_GLSL",l:{a:"grp",f:[{a:"define",c:"STD_ENUMS_GLSL",b:[""]},{a:"var",c:"CONSTANTS_HACK",b:["0"]},{a:"define",c:"TEXTURE_COORDS_NONE",b:["0"]},{a:"define",c:"TEXTURE_COORDS_UV_ORCO",b:["1"]},{a:"define",c:"TEXTURE_COORDS_NORMAL",b:["2"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MIX",b:["1"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MULTIPLY",
b:["2"]},{a:"define",c:"SHADOW_SRC_NONE",b:["1"]},{a:"define",c:"SHADOW_SRC_DEPTH",b:["2"]},{a:"define",c:"SHADOW_SRC_MASK",b:["3"]},{a:"define",c:"SHADOW_DST_NONE",b:["1"]},{a:"define",c:"SHADOW_DST_DEPTH",b:["2"]},{a:"define",c:"SHADOW_DST_MASK",b:["3"]},{a:"define",c:"NO_SHADOWS",b:["1"]},{a:"define",c:"SHADOW_CASTING",b:["2"]},{a:"define",c:"SHADOW_MASK_GENERATION",b:["3"]},{a:"define",c:"SHADOW_MAPPING_OPAQUE",b:["4"]},{a:"define",c:"SHADOW_MAPPING_BLEND",b:["5"]},{a:"define",c:"POISSON_X_16",
b:["4"]},{a:"define",c:"POISSON_X_8",b:["2"]},{a:"define",c:"POISSON_X_4",b:["1"]},{a:"define",c:"NO_SOFT_SHADOWS",b:["0"]},{a:"define",c:"SPECULAR_PHONG",b:["1"]},{a:"define",c:"SPECULAR_COOKTORR",b:["2"]},{a:"define",c:"SPECULAR_WARDISO",b:["3"]},{a:"define",c:"SPECULAR_BLINN",b:["4"]},{a:"define",c:"SPECULAR_TOON",b:["5"]},{a:"define",c:"DIFFUSE_LAMBERT",b:["1"]},{a:"define",c:"DIFFUSE_OREN_NAYAR",b:["2"]},{a:"define",c:"DIFFUSE_FRESNEL",b:["3"]},{a:"define",c:"DIFFUSE_MINNAERT",b:["4"]},{a:"define",
c:"DIFFUSE_TOON",b:["5"]},{a:"define",c:"MIX",b:["0"]},{a:"define",c:"ADD",b:["1"]},{a:"define",c:"SUBTRACT",b:["2"]},{a:"define",c:"MULTIPLY",b:["3"]},{a:"define",c:"SCREEN",b:["4"]},{a:"define",c:"OVERLAY",b:["5"]},{a:"define",c:"DIFFERENCE",b:["6"]},{a:"define",c:"DIVIDE",b:["7"]},{a:"define",c:"DARKEN",b:["8"]},{a:"define",c:"LIGHTEN",b:["9"]},{a:"define",c:"HUE",b:["10"]},{a:"define",c:"SATURATION",b:["11"]},{a:"define",c:"VALUE",b:["12"]},{a:"define",c:"COLOR",b:["13"]},{a:"define",c:"SOFT_LIGHT",
b:["14"]},{a:"define",c:"LINEAR_LIGHT",b:["15"]},{a:"define",c:"REFL_NONE",b:["0"]},{a:"define",c:"REFL_MIRRORMAP",b:["1"]},{a:"define",c:"REFL_PLANE",b:["2"]},{a:"define",c:"REFL_CUBE",b:["3"]},{a:"define",c:"INVERSE_QUADRATIC",b:["0"]},{a:"define",c:"LINEAR",b:["1"]},{a:"define",c:"QUADRATIC",b:["2"]},{a:"define",c:"HEMI",b:["1"]},{a:"define",c:"SPOT",b:["2"]},{a:"define",c:"POINT",b:["3"]},{a:"define",c:"SUN",b:["4"]},{a:"define",c:"DOF_SIMPLE",b:["0"]},{a:"define",c:"DOF_BOKEH",b:["1"]},{a:"define",
c:"COC_ALL",b:["0"]},{a:"define",c:"COC_FOREGROUND",b:["1"]},{a:"define",c:"COC_COMBINE",b:["2"]},{a:"define",c:"VT_WORLD_TO_WORLD",b:["0"]},{a:"define",c:"VT_WORLD_TO_OBJECT",b:["1"]},{a:"define",c:"VT_WORLD_TO_CAMERA",b:["2"]},{a:"define",c:"VT_OBJECT_TO_WORLD",b:["3"]},{a:"define",c:"VT_OBJECT_TO_OBJECT",b:["4"]},{a:"define",c:"VT_OBJECT_TO_CAMERA",b:["5"]},{a:"define",c:"VT_CAMERA_TO_WORLD",b:["6"]},{a:"define",c:"VT_CAMERA_TO_OBJECT",b:["7"]},{a:"define",c:"VT_CAMERA_TO_CAMERA",b:["8"]},{a:"define",
c:"VT_POINT",b:["0"]},{a:"define",c:"VT_VECTOR",b:["1"]},{a:"define",c:"VT_NORMAL",b:["2"]},{a:"define",c:"NM_TANGENT",b:["0"]},{a:"define",c:"NM_OBJECT",b:["1"]},{a:"define",c:"NM_WORLD",b:["2"]},{a:"define",c:"NM_BLENDER_OBJECT",b:["3"]},{a:"define",c:"NM_BLENDER_WORLD",b:["4"]},{a:"define",c:"BILLBOARD_ALIGN_VIEW",b:["1"]},{a:"define",c:"BILLBOARD_ALIGN_XY",b:["2"]},{a:"define",c:"BILLBOARD_ALIGN_YZ",b:["3"]},{a:"define",c:"BILLBOARD_ALIGN_ZX",b:["4"]},{a:"define",c:"POST_EFFECT_NONE",b:["1"]},
{a:"define",c:"POST_EFFECT_GRAYSCALE",b:["2"]},{a:"define",c:"POST_EFFECT_BLUR",b:["3"]},{a:"define",c:"POST_EFFECT_GLOW_BLUR",b:["4"]},{a:"define",c:"POST_EFFECT_DOF_BLUR",b:["5"]},{a:"define",c:"POST_EFFECT_ALPHA_BLUR",b:["6"]},{a:"define",c:"POST_EFFECT_EXTEND",b:["7"]},{a:"define",c:"FLIP_CUBEMAP_COORDS",b:["8"]},{a:"define",c:"BLUR_PASS_1",b:["1"]},{a:"define",c:"BLUR_PASS_2",b:["2"]},{a:"define",c:"BLUR_PASS_3",b:["3"]},{a:"define",c:"BLUR_PASS_4",b:["4"]},{a:"define",c:"BLUR_PASS_5",b:["5"]},
{a:"define",c:"DV_NONE",b:["0"]},{a:"define",c:"DV_OPAQUE_WIREFRAME",b:["1"]},{a:"define",c:"DV_TRANSPARENT_WIREFRAME",b:["2"]},{a:"define",c:"DV_FRONT_BACK_VIEW",b:["3"]},{a:"define",c:"DV_BOUNDINGS",b:["4"]},{a:"define",c:"DV_CLUSTERS_VIEW",b:["5"]},{a:"define",c:"DV_BATCHES_VIEW",b:["6"]},{a:"define",c:"DV_RENDER_TIME",b:["7"]},{a:"define",c:"SSAO_QUALITY_8",b:["1"]},{a:"define",c:"SSAO_QUALITY_16",b:["2"]},{a:"define",c:"SSAO_QUALITY_24",b:["3"]},{a:"define",c:"SSAO_QUALITY_32",b:["4"]},{a:"define",
c:"AA_METHOD_FXAA_LIGHT",b:["1"]},{a:"define",c:"AA_METHOD_FXAA_QUALITY",b:["2"]},{a:"define",c:"AA_QUALITY_LOW",b:["0"]},{a:"define",c:"AA_QUALITY_MEDIUM",b:["1"]},{a:"define",c:"AA_QUALITY_HIGH",b:["2"]},{a:"define",c:"SMAA_RESOLVE",b:["25"]},{a:"define",c:"SMAA_EDGE_DETECTION",b:["24"]},{a:"define",c:"SMAA_BLENDING_WEIGHT_CALCULATION",b:["23"]},{a:"define",c:"SMAA_NEIGHBORHOOD_BLENDING",b:["26"]},{a:"define",c:"AA_METHOD_SMAA_LOW",b:["1"]},{a:"define",c:"AA_METHOD_SMAA_MEDIUM",b:["2"]},{a:"define",
c:"AA_METHOD_SMAA_HIGH",b:["3"]},{a:"define",c:"AA_METHOD_SMAA_ULTRA",b:["4"]},{a:"define",c:"REFL_PASS_NONE",b:["0"]},{a:"define",c:"REFL_PASS_PLANE",b:["1"]},{a:"define",c:"REFL_PASS_CUBE",b:["2"]},{a:"define",c:"SRGB_NONE",b:["0"]},{a:"define",c:"SRGB_SIMPLE",b:["1"]},{a:"define",c:"SRGB_PROPER",b:["2"]},{a:"define",c:"CAM_TYPE_ORTHO",b:["0"]},{a:"define",c:"CAM_TYPE_PERSP",b:["1"]},{a:"define",c:"M_PI",b:["3.14159265359"]},{a:"define",c:"M_PI_4",b:["0.785398163"]},{a:"define",c:"INV_PI",b:["0.318309886"]},
{a:"define",c:"UP_VECTOR",b:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{a:"define",c:"RIGHT_VECTOR",b:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{a:"define",c:"TOWARD_VECTOR",b:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["CONSTANTS_HACK"],l:{a:"grp",f:[{a:"txt",b:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"_0_0",b:["0.0"]},{a:"define",c:"_0_5",b:["0.5"]},{a:"define",c:"_1_0",b:["1.0"]},{a:"define",
c:"_255_0",b:["255.0"]}]}}]}]}}]}]};a["include/to_world.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"TO_WORLD_GLSLV",l:{a:"grp",f:[{a:"define",c:"TO_WORLD_GLSLV",b:[""]},{a:"include",D:"math.glslv"},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"BILLBOARD_SPHERICAL",b:["0"]},{a:"var",c:"BILLBOARD_RANDOM",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"BILLBOARD_PRES_GLOB_ORIENTATION",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},
{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"define",c:"MAX_BILLBOARD_ANGLE",b:["M_PI_4"]},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bj ( vec3 IS , mat3 N ) { vec4 IT = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 IU = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 IU = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{a:"txt",b:"IT = qh ( IU , IT ) ; IT = ke ( IT ) ; mat3 bk = cQ ( ) ; bk [ 0 ] = IS ; bk = cT ( IT , bk ) ; return bk ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 IW ( vec3 kV , vec3 IS ) { vec3 IV = kV - IS ; IV . z = 0.0 ; IV = normalize ( IV ) ; vec4 IT = qm ( IV , TOWARD_VECTOR ) ; mat3 bk = cQ ( ) ; bk [ 0 ] = IS ; bk = cT ( IT , bk ) ; return bk ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"mat3 at ( in vec3 IX , float IY , float IZ , float I_ , vec3 a_ , mat3 Z ) { float GX = fract ( length ( a_ ) / 0.17 ) ; float Ja = I_ + GX / 10.0 ; float Jb = GX ; if ( I_ != 0.0 ) Jb /= I_ ; IX *= 1.0 + 0.5 * sin ( IY ) ; float Jc = length ( IX ) * IZ * sin ( 2.0 * 3.14 * IY * Ja + Jb ) ; vec4 Jd = X ( TOWARD_VECTOR , Jc ) ; vec4 Je = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; Je = qh ( Je , Jd ) ; Z = cT ( Je , Z ) ; return Z ; }".split(" ")}]}}]},
{a:"txt",b:"mat3 as ( in vec3 kV , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 lj = bj ( aq , N ) ;".split(" ")}]}},{a:"elif",j:["BILLBOARD_RANDOM"],l:{a:"grp",f:[{a:"txt",b:"float GX = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float Jf = 2.0 * M_PI * GX ; vec4 Jg = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float Jh = asin ( 2.0 * ( Jg . x * Jg . y - Jg . z * Jg . w ) ) ; float gT = Jh - Jf ; if ( gT < 0.0 ) gT = 2.0 * M_PI + gT ; float Ji = Jf ; if ( gT <= MAX_BILLBOARD_ANGLE ) Ji += gT ; else if ( gT <= M_PI - MAX_BILLBOARD_ANGLE ) Ji += MAX_BILLBOARD_ANGLE * ( 2.0 * gT - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( gT <= M_PI + MAX_BILLBOARD_ANGLE ) Ji += gT - M_PI ; else if ( gT <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) Ji += MAX_BILLBOARD_ANGLE * ( 2.0 * gT - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else Ji += gT - 2.0 * M_PI ; vec4 Jj = X ( UP_VECTOR , Ji ) ; mat3 lj = cQ ( ) ; lj [ 0 ] = aq ; lj = cT ( Jj , lj ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 lj = IW ( kV , aq ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lj = aY ( lj , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"lj [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{a:"txt",b:"return lj ; } au av ( in vec3 eL , in vec3 Jk , in vec3 Jl , in vec3 Jm , in vec3 Jn , in vec3 Jo , in mat3 Z ) { eL = ap ( Z , eL ) ; Jk = ap ( Z , Jk ) ; Jl = _ ( Z , Jl ) ; Jm = _ ( Z , Jm ) ; Jn = _ ( Z , Jn ) ; Jo = _ ( Z , Jo ) ; return lk ( au ( eL , Jk , Jl , Jm , Jn , Jo , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
a["include/wind_bending.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"WIND_BENDING_GLSLV",l:{a:"grp",f:[{a:"define",c:"WIND_BENDING_GLSLV",b:[""]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"include",D:"std.glsl"},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"void JB ( inout vec3 bo , in vec3 Jp , in float Jq , in float Jr , in float eS , in vec3 IX , in float Js , in mat4 bI ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Jt = ( bI * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Ju = ( bI * vec4 ( Jp , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jt = bo ; vec3 Ju = Jp ;".split(" ")}]}}]},{a:"txt",b:"float dp = length ( Ju ) ; float Jv = Jr * ( 1.0 + 0.1 * fract ( dp ) ) ; float Jw = Jq * Js * ( 1.0 + sin ( 2.0 * 3.14 * eS * Jv + dp ) ) ; float Jx = ( Jt . z - Ju . z ) * abs ( Jw ) ; Jx += 1.0 ; Jx *= Jx ; Jx = Jx * Jx - Jx ; vec3 Jy = Jt ; Jy . xy += IX . xy * Jx * sign ( Jw ) ; vec3 Jz = Jy - Ju ; if ( all ( equal ( Jz , vec3 ( 0.0 ) ) ) ) bo = Jp ; else {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Jz = ( bI * vec4 ( Jz , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"float JA = length ( Jt - Ju ) ; bo = Jp + normalize ( Jz ) * JA ; } }".split(" ")},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"vec4 JC ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 JD ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 JE ( vec4 x ) { return JC ( JD ( x ) ) ; } void JQ ( inout vec3 bo , in float eS , in vec3 U , in vec3 IX , in vec3 Jp , in float JF , in float JG , in float JH , in vec3 JI , in mat4 bI ) { float JJ ; float JK ; float JL ; vec2 JM ; vec4 JN ; vec2 JO ; vec3 JP ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Jt = ( bI * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Ju = ( bI * vec4 ( Jp , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jt = bo ; vec3 Ju = Jp ;".split(" ")}]}}]},{a:"txt",b:"JJ = dot ( Ju , vec3 ( 1.0 ) ) ; JK = JJ + JI . g ; JL = dot ( Jt , vec3 ( JI . g ) ) ; JM = ( eS + vec2 ( JL , JK ) ) ; JN = ( ( fract ( ( JM . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( IX ) * JF ; JN = JE ( JN ) ; JO = JN . xz + JN . yw ; JO . y = 0.5 - JO . y ; JP = JO . xxy * JI . rrb * vec3 ( JG * U . x , JG * U . y , JH ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"JP = ( bI * vec4 ( JP , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:["bo","+=","JP",";","}"]}]}}]},{a:"txt",b:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bI ) { vec3 JR = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"vec3 JS = ao ; vec3 JT = a_emitter_center ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"JT = ( bI * vec4 ( JT , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 JS = O ; vec3 JT = ao ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"JQ ( JS , u_time , U , JR , JT , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bI ) ;".split(" ")}]}}]},
{a:"txt",b:"JB ( JS , JT , au_wind_bending_amp , au_wind_bending_freq , u_time , JR , a_bending_col_main , bI ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"JB ( JS , JT , au_wind_bending_amp , au_wind_bending_freq , u_time , JR , 1.0 , bI ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"O += JS - ao ; ao = JS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = JS ; ao = JT ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]}};b4w.module.__transform=function(a,u){function m(a,b){e.ai(a)?l.Bd(b,e.Yh(a)):l.Bd(b,a.v.C)}function c(a,b){var c=a.v;if(e.ai(a)){l.Ec(b,c.C);var f=e.rz(a),f=l.invert(f,M);l.multiply(f,c.C,e.Yh(a))}else l.Ec(b,c.C)}function b(a,b){e.ai(a)?l.Ec(b,e.Yh(a)):l.Ec(b,a.v.C)}function p(a,b){l.Db(a.v.C,b);return b}function h(a,b){e.ai(a)?l.Db(e.Yh(a),b):l.Db(a.v.C,b);return b}function G(a,b){e.ai(a)?l.copy(b,e.Yh(a)):l.copy(b,a.v.C)}function q(a,b){e.ai(a)?l.copy(e.Yh(a),b):l.copy(a.v.C,b);return b}function w(a){var b=
a.v,c=a.P,f=a.type;"CAMERA"==f&&g.kS(a);e.W4(a,S);"CAMERA"==f&&g.U4(a);A.Dq(b.Aa,b.C,b.Hi);A.Vx(b.yc,b.C,b.af);for(var h=0;h<c.length;h++)for(var d=c[h].aa,n=0;n<d.length;n++)P.wS(d[n],b.C,c[h].$g[n]);switch(f){case "MESH":a.tP&&l.invert(a.v.C,a.v.tD);if(d=a.Kx)l.invert(d.v.C,M),l.multiply(M,b.C,M),l.cr(M,b.Ft),l.Db(M,b.Et);b.Iu=!0;break;case "CAMERA":for(h=0;h<c.length;h++)g.V4(a,c[h]);break;case "SPEAKER":L.c4(a,S,F);break;case "LAMP":y.b5(a)}for(var d=l.Yb(b.C,K),k=l.Db(b.C,D),h=0;h<c.length;h++)if(n=
c[h],n.hA){var m=n.vb,t=m.I;switch(f){case "MESH":b.Tf&&J.JH(m);t=n.Wk;null!=b.Ke&&t&&J.mS(t,d);break;case "EMPTY":x.Y4(a);break;case "CAMERA":if(J.N()==m&&J.Fm(m)==a){J.T2(m);if(t.Cd){(t.Cd.enable_csm||t.Cd.bZ)&&J.JH(m);var q=P.La(a,m).na[0];J.q5(q,t.Ia)}L.Z0(m,d,k,S,F)}break;case "LAMP":J.Z4(a,m)}t=n.gk;q=a.Nv;if(q.length)for(n=0;n<t.length;n++){var p=t[n].F;J.pS(t[n],d,k);P.qS(q,p.Kc);g.J3(p,J.Fm(m));I.zo(p.Wd,p.Qi)}}b=a.bf;for(h=0;h<b.length;h++)w(b[h]);a=a.JE;for(h=0;h<a.length;h++)b=a[h],d=
b[0],e.O4(d,b[1])}var A=u("__boundings"),g=u("__camera"),e=u("__constraints"),y=u("__lights"),x=u("__objects"),P=u("__obj_util"),J=u("__scenes"),L=u("__sfx"),l=u("__tsr"),I=u("__util"),v=u("__vec3"),K=new Float32Array(3),k=new Float32Array(3),D=new Float32Array(4),M=l.create(),E=l.create(),S=0,F=0;a.update=function(a){S=a;F++};a.je=function(a,b){var c=a.v;if(e.ai(a)){l.Bd(b,c.C);var f=e.rz(a),f=l.invert(f,M);l.multiply(f,c.C,e.Yh(a))}else l.Bd(b,c.C)};a.QB=m;a.Me=function(a,b){l.Yb(a.v.C,b);return b};
a.QN=function(a,b){e.ai(a)?l.Yb(e.Yh(a),b):l.Yb(a.v.C,b);return b};a.Ll=c;a.NB=b;a.Rj=p;a.NF=h;a.UH=function(a,b){var e=I.bl(b,D);c(a,e)};a.VH=function(a,c){var e=I.bl(c,D);b(a,e)};a.GN=function(a,b){var c=p(a,D);return b=I.Hv(c,b)};a.HN=function(a,b){var c=h(a,D);return b=I.Hv(c,b)};a.Ue=function(a,b){var c=a.v;if(e.ai(a)){var c=e.Yh(a),f=l.ge(e.rz(a));l.Ue(b/f,c)}else l.Ue(b,c.C)};a.WH=function(a,b){var c=a.v;e.ai(a)?l.Ue(b,e.Yh(a)):l.Ue(b,c.C)};a.ge=function(a){return l.ge(a.v.C)};a.JN=function(a){return e.ai(a)?
l.ge(e.Yh(a)):l.ge(a.v.C)};a.mk=function(a,b){l.copy(b,a.v.C);if(e.ai(a)){var c=e.rz(a),c=l.invert(c,M);l.multiply(c,a.v.C,e.Yh(a))}};a.SB=G;a.Gm=function(a,b){return l.copy(a.v.C,b)};a.Su=q;a.LF=function(a){var b=a.v;a=b.Lk;var c=l.ge(b.C),b=c*(a.max_x-a.min_x),e=c*(a.max_y-a.min_y);a=c*(a.max_z-a.min_z);return.5*Math.sqrt(b*b+e*e+a*a)};a.Dz=function(a,b,c){b?(a=a.v,v.copy(a.af.T,c)):(a=a.v,b=a.Lk,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,l.Lc(c,a.C,c));return c};
a.yg=function(a,b,c,e){var f=q(a,M),d=K;d[0]=b;d[1]=c;d[2]=e;l.Lc(d,f,d);m(a,d)};a.FH=function(a,b){var c=q(a,M),e=l.Ec(b,l.identity(E));l.multiply(c,e,e);G(a,e)};a.V=w;a.distance=function(a,b){var c=l.Yb(a.v.C,K),e=l.Yb(b.v.C,k);return v.dist(c,e)};a.tv=function(a,b){var c=l.Yb(a.v.C,K);return v.dist(c,b)}};b4w.module.__constraints=function(a,u){function m(a){return{type:a,Va:null,target:null,Hs:!1,Ud:null,Ma:null,Nj:null,axes:null,YR:null,Ve:null,GS:!1,influence:0,mm:"",yR:0,wL:0,yL:0,zL:0,vL:0,kF:0,dist_max:0,vA:!1,iv:0,OC:!1,nw:0,distance:0,hor_units:"",vert_units:""}}function c(a,c){a.zc&&a.zc.Va&&b(a.zc.Va,a);if(c.Va){var e=c.Va;-1==e.bf.indexOf(a)?e.bf.push(a):I.J("Descendant object override is forbidden")}a.zc=c}function b(a,b){var c=a.bf.indexOf(b);-1!=c?a.bf.splice(c,1):I.J("No descendant object")}
function p(a,b,g,d,h,k){var f=m(3);f.Va=b;f.YR=new Float32Array(g);f.Ve=new Float32Array(d);f.GS=h;f.Ud=new Float32Array(a.v.C);f.influence=k;c(a,f);e(a,f,0)}function h(a,b,g,d,h,k){var f=m(8);f.Va=b;f.Ma=l.create();l.Bd(g,f.Ma);f.axes=new Float32Array(d);f.influence=k;f.Hs=h;f.Ud=new Float32Array(a.v.C);c(a,f);e(a,f,0)}function G(a,b,g,d,h){var f=m(9);f.Va=b;b=l.Db(a.v.C,F);f.Nj=I.Hv(b,new Float32Array(3));f.axes=new Float32Array(g);f.influence=h;f.Hs=d;f.Ud=new Float32Array(a.v.C);c(a,f);e(a,f,
0)}function q(a,b,g){var d=m(11);d.Va=b;d.Ma=l.create();l.copy(a.v.C,d.Ma);d.Ud=new Float32Array(a.v.C);d.influence=g;c(a,d);e(a,d,0)}function w(a,b,g){var d=m(13);d.Va=b;d.Ma=new Float32Array(g);c(a,d);e(a,d,0)}function A(a,b,g,d){var f=m(14);f.Va=b;f.mm=g;f.Ma=new Float32Array(d);c(a,f);e(a,f,0)}function g(a,b,g){var d=m(17);d.Va=b;d.Ud=new Float32Array(a.v.C);d.Ma=l.create();I.Of(g.right)?(d.vA=!1,d.iv=g.right):I.Of(g.left)?(d.vA=!0,d.iv=g.left):(d.vA=!0,d.iv=0);I.Of(g.bottom)?(d.OC=!1,d.nw=g.bottom):
I.Of(g.top)?(d.OC=!0,d.nw=g.top):(d.OC=!0,d.nw=0);I.Of(g.distance)?d.distance=g.distance:d.distance=0;b=I.Of(g.rotation)?new Float32Array(g.rotation):v.create();l.Ec(b,d.Ma);I.Of(g.hor_units)?d.hor_units=g.hor_units:d.hor_units="widths";I.Of(g.vert_units)?d.vert_units=g.vert_units:d.vert_units="heights";c(a,d);e(a,d,0)}function e(a,b,c){switch(b.type){case 1:l.multiply(b.Va.v.C,b.Ma,a.v.C);break;case 12:var d=l.W(a.v.C),e=l.ha(a.v.C),f=l.Yb(b.Ma,M),g=b.Va.v.C;c=l.ha(b.Va.v.C);v.multiply(v.invert(b.cH,
b.cH),e,e);v.multiply(c,e,e);l.Lc(f,g,d);v.copy(c,b.cH);d=l.ha(a.v.C);e=l.ha(b.Va.v.C);g=l.Db(b.Ma,F);e=v.multiply(e,g,S);e=L.CF(e,k);g=L.CF(d,D);I.O2(d,a.v.Ve,I.ho(g[0],e[0]+b.yL,e[0]+b.wL),I.ho(g[1],e[1]+b.vL,e[1]+b.zL),d);break;case 15:var d=l.W(a.v.C),e=l.ha(a.v.C),g=b.Va.v.C,h=l.W(g),m=b.yR,r=M,q=v.copy(e,S),f=l.Yb(b.Ma,E);l.Lc(f,g,r);I.mC(r,d,c,m,d);I.uB(d,q,h,I.mc);I.xR(q,e,c,.16*m,e);break;case 2:e=l.ha(a.v.C);g=z;f=l.Yb(b.Ma,E);h=l.ge(b.Ma);d=l.Db(b.Ma,S);J.BF(b.Va,b.mm,g);l.multiply(b.Va.v.C,
g,g);e[0]=g[4];e[1]=g[5];e[2]=g[6];e[3]=g[7];v.multiply(e,d,e);l.Ue(h*g[3],a.v.C);d=l.W(a.v.C);l.Lc(f,g,d);break;case 3:d=l.W(a.v.C);e=l.ha(a.v.C);f=l.W(b.Va.v.C);g=b.influence;b.GS?(h=l.Db(b.Va.v.C,S),h=K.transformQuat(I.fc,h,M)):h=I.fc;I.uB(d,e,f,b.YR);f=K.subtract(f,d,E);K.normalize(f,f);I.n2(e,b.Ve,h,f);f=l.Db(b.Ud,S);v.slerp(f,e,g,e);l.Bd(d,b.Ud);break;case 5:d=l.W(a.v.C);e=l.ha(a.v.C);f=l.W(b.Va.v.C);I.uB(d,e,f,I.mc);e=K.dist(d,f);if(e=e>b.dist_max?e-b.dist_max:e<b.kF?e-b.kF:0)K.sub(f,d,M),
K.normalize(M,M),K.scale(M,e,M),K.add(d,M,d);break;case 7:g=b.Va.v.C;d=l.W(a.v.C);f=l.Yb(b.Ma,M);l.Lc(f,g,d);l.Ec(l.ha(a.v.C),b.Ud);break;case 8:h=l.W(b.Va.v.C);d=l.W(a.v.C);e=b.axes;c=l.Yb(b.Ma,M);f=K.set(0,0,0,E);b.Hs&&K.add(f,c,f);g=b.influence;e[0]&&(d[0]=(1-g)*c[0]+g*(I.sign(e[0])*h[0]+f[0]));e[1]&&(d[1]=(1-g)*c[1]+g*(I.sign(e[1])*h[1]+f[1]));e[2]&&(d[2]=(1-g)*c[2]+g*(I.sign(e[2])*h[2]+f[2]));l.Ec(l.ha(a.v.C),b.Ud);break;case 9:e=b.axes;c=l.Db(b.Va.v.C,S);d=I.o2(c,b.Nj,E);I.JL(d,b.Nj);e[0]?(b.Hs&&
(g=K.set(b.Nj[0],0,0,M),I.EH(d,g,d)),d[0]*=I.sign(e[0])):d[0]=b.Nj[0];e[1]?(b.Hs&&(g=K.set(0,b.Nj[1],0,M),I.EH(d,g,d)),d[1]*=I.sign(e[1])):d[1]=b.Nj[1];e[2]?(b.Hs&&(g=K.set(0,0,b.Nj[2],M),I.EH(d,g,d)),d[2]*=I.sign(e[2])):d[2]=b.Nj[2];I.JL(d,b.Nj);g=b.influence;d=I.bl(d,S);f=l.Db(b.Ud,F);v.slerp(f,d,g,l.ha(a.v.C));l.Bd(l.W(a.v.C),b.Ud);break;case 11:g=b.influence;h=l.Yb(b.Va.v.C,M);c=l.Db(b.Va.v.C,S);d=l.Yb(b.Ma,E);f=l.Db(b.Ma,F);I.Sx(d,h,g,l.W(a.v.C));v.slerp(f,c,g,l.ha(a.v.C));l.Bd(l.W(a.v.C),b.Ud);
break;case 16:e=l.ha(a.v.C);g=b.Va.v.C;c=l.ha(b.Va.v.C);f=l.Yb(b.Ma,E);d=l.Db(b.Ma,S);v.multiply(c,d,e);d=l.W(a.v.C);l.Lc(f,g,d);break;case 13:l.multiply(b.Va.v.C,b.Ma,a.v.C);break;case 14:d=b.Ma;g=z;J.BF(b.Va,b.mm,g);l.multiply(b.Va.v.C,g,g);l.multiply(g,d,a.v.C);break;case 17:e=b.Va,g=L.t_(e),d=l.W(a.v.C),c=L.sz(g,"LEFT"),m=L.sz(g,"RIGHT"),f=L.sz(g,"TOP"),h=L.sz(g,"BOTTOM"),r="heights"==b.hor_units?f-h:m-c,d[0]=b.vA?c+r*b.iv:m-r*b.iv,c="heights"==b.vert_units?f-h:m-c,d[1]=b.OC?f-c*b.nw:h+c*b.nw,
L.D0(g)?d[2]=-b.distance:(d[2]=-1,K.normalize(d,d),K.scale(d,b.distance/Math.abs(d[2]),d)),l.Td(d,e.v.C,d),g=l.W(e.v.C),K.add(g,d,d),f=l.ha(a.v.C),e=l.ha(e.v.C),d=l.Db(b.Ma,F),v.multiply(e,d,f)}"CAMERA"==a.v.type&&a.v.yb!=L.Ie&&(d=a.v.Ve,12==b.type&&(c=l.ha(b.Va.v.C),d=K.transformQuat(d,c,C)),L.kS(a),L.ny(a,d))}function y(a,b){switch(b.type){case 18:var c=b.target.v.C,d=z;l.invert(a.v.C,d);l.multiply(d,c,d);J.a3(a,b.mm,d)}a.RG=!0}function x(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(!x(d.bf,b)||
d.name==b.name)return!1}return!0}var P=u("__physics"),J=u("__armature"),L=u("__camera"),l=u("__tsr"),I=u("__util"),v=u("__quat"),K=u("__vec3");a.j6=1;a.i6=2;a.n6=3;a.f6=5;a.k6=7;a.e6=8;a.h6=12;a.c6=13;a.d6=14;a.g6=15;a.l6=16;a.m6=17;a.Z5=18;var k=new Float32Array(2),D=new Float32Array(2),M=new Float32Array(3),E=new Float32Array(3),S=new Float32Array(4),F=new Float32Array(4),z=l.create(),C=new Float32Array(3);a.tK=function(a,b,g,d,h){var f=m(1);f.Va=b;f.Ma=l.create();d=d?d:v.create();l.Bd(g,f.Ma);
l.Ue(h,f.Ma);l.Ec(d,f.Ma);f.Ud=new Float32Array(a.v.C);c(a,f);e(a,f,0)};a.SV=function(a,b,g,d,h,k){var f=m(2);f.Va=b;f.mm=g;f.Ud=new Float32Array(a.v.C);f.Ma=l.create();l.Bd(new Float32Array(d),f.Ma);l.Ec(new Float32Array(h),f.Ma);l.Ue(k,f.Ma);c(a,f);e(a,f,0)};a.QV=function(a,b,g,d,h,k,q,t){var f=m(12),n=l.ha(a.v.C),r=l.ha(b.v.C);d?(v.copy(d,n),v.multiply(r,n,n)):d=v.create();f.Va=b;f.Ma=l.create();l.Bd(g,f.Ma);l.Ec(d,f.Ma);f.cH=new Float32Array(r);f.wL=I.Ih(h);f.yL=I.Ih(k);f.zL=I.Ei(q,-Math.PI,Math.PI);
f.vL=I.Ei(t,-Math.PI,Math.PI);f.Ud=new Float32Array(a.v.C);c(a,f);e(a,f,0)};a.OV=function(a,b,g,d){var f=m(15);f.Va=b;f.yR=d;f.Ud=new Float32Array(a.v.C);f.Ma=l.create();l.Bd(new Float32Array(g),f.Ma);c(a,f);e(a,f,0)};a.VV=function(a,b,g,d){var f=m(16);f.Va=b;f.Ud=new Float32Array(a.v.C);f.Ma=l.create();l.Bd(new Float32Array(g),f.Ma);l.Ec(new Float32Array(d),f.Ma);l.Ue(1,f.Ma);c(a,f);e(a,f,0)};a.Oca=b;a.WV=p;a.KV=function(a,b,g,d){var f=m(5);f.Va=b;f.kF=g;f.dist_max=d;f.Ud=new Float32Array(a.v.C);
c(a,f);e(a,f,0)};a.UV=function(a,b,g){var d=m(7);d.Va=b;d.Ma=l.create();d.Ud=new Float32Array(a.v.C);l.Bd(new Float32Array(g),d.Ma);c(a,d);e(a,d,0)};a.GV=h;a.HV=G;a.IV=q;a.w8=w;a.x8=A;a.uK=g;a.W4=function(a,b){a.zc&&e(a,a.zc,b)};a.O4=function(a,b){var c=a.v.Lh[b];c.zc&&y(a,c.zc)};a.XW=function(a){return a.zc?!0:!1};a.remove=function(a,c){a.zc.Va&&b(a.zc.Va,a);c&&l.copy(a.zc.Ud,a.v.C);a.zc=null};a.dba=function(a){return a.zc?a.zc.type:null};a.ai=function(a){a=a.zc;return!a||13!=a.type&&14!=a.type?
!1:!0};a.rz=function(a){if((a=a.zc)&&13==a.type)return a.Va.v.C;if(a&&14==a.type){var b=z;J.BF(a.Va,a.mm,b);l.multiply(a.Va.v.C,b,b);return b}return null};a.Yh=function(a){a=a.zc;return!a||13!=a.type&&14!=a.type?null:a.Ma};a.j2=function(a,b){for(var c=b.v,d=0;d<a.constraints.length;d++){var e=a.constraints[d],f=e.type;if(e.target){var k=e.target.Oa;if("COPY_LOCATION"==f){var f=new Float32Array(l.W(b.v.C)),t=new Float32Array(e.axes);h(b,k,f,t,e.use_offset,e.influence)}else if("COPY_ROTATION"==f)t=
new Float32Array(e.axes),G(b,k,t,e.use_offset,e.influence);else if("COPY_TRANSFORMS"==f)q(b,k,e.influence);else if("TRACK_TO"==f){f=e.track_axis;if("TRACK_Y"==f)var r=I.Fe;else"TRACK_NEGATIVE_Y"==f?r=I.Bh:"TRACK_X"==f?r=I.Bf:"TRACK_NEGATIVE_X"==f?r=I.Xs:"TRACK_Z"==f?r=I.fc:"TRACK_NEGATIVE_Z"==f&&(r=I.mc);f=e.up_axis;if("UP_X"==f)var v=I.Bf;else"UP_Y"==f?v=I.Fe:"UP_Z"==f&&(v=I.fc);p(b,k,r,v,e.use_target_z,e.influence)}}}if(b.parent){!b.cn&&b.Rd.vw&&b.parent.Rd.vw&&(b.Gs=!1);e=!1;for(d=0;d<b.P.length;d++)if(b.P[d].vb.Oc){e=
!0;break}if(e&&P.$_(b))d=b.cn?l.copy(c.C,l.create()):c.C,l.multiply(b.parent.v.C,d,c.C);else if(b.cn||!b.wv)if(d=l.copy(c.C,l.create()),b.lD&&"CAMERA"==b.parent.type){d={distance:b.lD.distance,rotation:l.ha(d)};switch(b.lD.BV){case "TOP_LEFT":d.top=0;d.left=0;break;case "TOP":d.top=0;d.left=.5;break;case "TOP_RIGHT":d.top=0;d.right=0;break;case "LEFT":d.top=.5;d.left=0;break;case "CENTER":d.top=.5;d.left=.5;break;case "RIGHT":d.top=.5;d.right=0;break;case "BOTTOM_LEFT":d.bottom=0;d.left=0;break;case "BOTTOM":d.bottom=
0;d.left=.5;break;case "BOTTOM_RIGHT":d.bottom=0,d.right=0}g(b,b.parent,d)}else w(b,b.parent,d);else d=l.copy(c.C,l.create()),A(b,b.parent,b.wv,d)}if("ARMATURE"==b.type)for(c=a.pose.bones,d=0;d<c.length;d++)if(e=c[d],r=e.constraints)for(v=0;v<r.length;v++)if(f=r[v],"COPY_TRANSFORMS"==f.type&&!f.subtarget&&!f.mute){var k=f.target.Oa,f=b,t=k,x=I.TD,C=I.ox,k=m(18);k.mm=e.name;k.target=t;k.Ma=l.create();l.Bd(new Float32Array(x),k.Ma);l.Ec(new Float32Array(C),k.Ma);l.Ue(1,k.Ma);for(var t=f,x=k,C=x.target,
z=x.mm,u=t.v.Lh[z],J=C.JE,B=0;B<J;B++){var F=J[B];if(F[0]==t&&F[1]==z){J.splice(B,1);break}}C.JE.push([t,z]);u.zc=x;y(f,k)}};a.Ii=function(a,b){return x(a.bf,b)};a.Ji=function(a,b){return a.name!=b.name}};b4w.module.__navmesh=function(a,u){function m(a,c){function d(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.Fn,f=c.Fn,g=[],h=0;h<e.length;h++)0<=b(f,e[h])&&g.push(e[h]);if(2>g.length)return[];0<=b(g,e[0])&&0<=b(g,e[e.length-1])&&d(e);0<=b(g,f[0])&&0<=b(g,f[f.length-1])&&d(f);g=[];for(h=0;h<e.length;h++)0<=b(f,e[h])&&g.push(e[h]);return g}function c(a){function b(a){for(var c=a.ji,d=0;d<c.length;d++){var e=c[d];void 0==e.island&&(e.island=a.island,b(e))}}a=a.f2;for(var c=[],d=0,e=0;e<a.length;e++){var f=
a[e];void 0==f.island&&(f.island=d++,b(f));c[f.island]||(c[f.island]=[]);c[f.island].push(a[e])}return c}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function p(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var d={},e=a.Rs,f=0;f<e.length;f++)e[f][0]=parseFloat(e[f][0].toFixed(2)),e[f][1]=parseFloat(e[f][1].toFixed(2)),e[f][2]=parseFloat(e[f][2].toFixed(2));d.Rs=a.Rs;a=c(a);d.oG=[];for(f=0;f<a.length;f++){for(var e=
[],g=a[f],h=0;h<g.length;h++){for(var k=[],n=g[h],l=0;l<n.ji.length;l++)k.push(b(g,n.ji[l]));for(var q=[],l=0;l<n.ji.length;l++)q.push(m(n,n.ji[l]));n.Kd[0]=parseFloat(n.Kd[0].toFixed(2));n.Kd[1]=parseFloat(n.Kd[1].toFixed(2));n.Kd[2]=parseFloat(n.Kd[2].toFixed(2));e.push({id:b(g,n),ji:k,Fn:n.Fn,Kd:n.Kd,zd:n.zd,g2:q,tF:0,Mu:0,Zb:0,zX:1,UI:!1,closed:!1,parent:null})}d.oG.push(e)}return d}function h(a,b,c,d,e){function f(a,b){I.subtract(a,b,K);return I.dot(K,K)}function g(a,b){for(var c=[],d=0;d<b.ji.length;d++)c.push(a[b.ji[d]]);
return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.tF=0;c.Mu=0;c.Zb=0;c.zX=1;c.UI=!1;c.closed=!1;c.parent=null}})(a);var h=J.pW(function(a){return a.tF});for(J.TK(h,b);0<h.content.length;){var k=J.qW(h);if(k===c){a=k;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}k.closed=!0;for(var n=g(a,k),l=0,m=n.length;l<m;l++){var t=n[l];if(!t.closed){var q=k.Mu+I.dist(t.Kd,k.Kd),p=t.UI;if(!p||q<t.Mu)t.UI=!0,t.parent=k,t.Zb=t.Zb||f(t.Kd,e)+f(t.Kd,d),t.Mu=q,t.tF=t.Mu+t.Zb,p?J.rW(h,
t):J.TK(h,t)}}}return[]}function G(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function q(a,b,c,d){b=I.subtract(b,a,K);a=I.subtract(c,a,k);a=I.cross(b,a,K);return l.sign(I.dot(d,a))}function w(a,b){I.subtract(a,b,K);return 1E-5>I.dot(K,K)}function A(a,b,c){var d=I.subtract(b.right,b.left,K),e=c.zd,f=b.zd;c=Math.acos(I.dot(e,f));e=l.sign(I.dot(d,I.cross(e,f,k)));c*=-e;e=L.identity(z);L.translate(e,b.left,e);L.rotate(e,c,d,e);L.translate(e,I.scale(b.left,-1,k),e);L.multiply(a,e,a)}function g(a,b,c,
d,e,f,g,h,k){for(var n=L.identity(S),l=e;l<c;l++)if(a[l].EO&&(l>e||!l)){var m,t=b,q=d;m=a[l].left;var p=a[l].right,r=f,w=n,x=I.create(),C=I.transformMat4(m,w,D);C[3]=1;w=I.transformMat4(p,w,K);w=I.subtract(w,C,M);t=I.subtract(q,t,K);r=I.cross(r,t,E);.01>Math.abs(I.dot(r,w))?q=.5:(I.normalize(r,r),r[3]=-I.dot(r,q),q=-v.dot(r,C)/v.dot(r,w));p=I.subtract(p,m,K);m=I.scaleAndAdd(m,p,q,x);G(g,m);h&&G(k,a[l].zd);l&&A(n,a[l],a[l-1])}}function e(a,b){function c(b,c){z=x=B=c;l=n=k=b;I.copy(b,m);I.copy(b,p);
I.copy(a[B].zd,v)}var e=[],h=[],k,n,l,m,p,v,B=0,x=0,z=0;k=a[0].right;n=a[0].left;l=a[0].right;m=I.copy(n,C);p=I.copy(l,r);v=I.copy(a[0].zd,d);G(e,k);b&&G(h,a[0].zd);for(var y=L.identity(F),u=1;u<a.length;u++){var J=a[u].left,D=a[u].right,E=I.transformMat4(J,y,f),K=I.transformMat4(D,y,W);a[u].EO&&A(y,a[u],a[u-1]);if(0>=q(k,p,K,v)){var M=w(k,l);if(M||0<q(k,m,K,v))l=D,I.copy(K,p),z=u;else{(J=w(m,k))||g(a,m,x,k,B,v,e,b,h);y=L.identity(y);c(n,x);u=B;J||(G(e,k),b&&G(h,a[u].zd));continue}}0<=q(k,m,E,v)&&
((M=w(k,n))||0>q(k,p,E,v)?(n=J,I.copy(E,m),x=u):((J=w(p,k))||g(a,p,z,k,B,v,e,b,h),y=L.identity(y),c(l,z),u=B,J||(G(e,k),b&&G(h,a[u].zd))))}y=a.length-1;u=a[y].left;(J=w(k,u))||g(a,m,y,k,B,v,e,b,h);J&&B||G(e,u);return b?(G(h,a[y].zd),{positions:new Float32Array(e),normals:new Float32Array(h)}):{positions:new Float32Array(e),normals:null}}function y(a,b,c,d,e){for(var f=null,g=Number.MAX_VALUE,h=0;h<a.length;h++){var k=a[h],n=e(c,k.Kd,k.Fn,b,g);n<g&&(f=k,g=n)}return 0<d&&g>d?null:f}function x(a,b,c,
d,e){a.push({left:b,right:c,EO:d,zd:e})}var P=u("__geometry"),J=u("__math"),L=u("__mat4"),l=u("__util"),I=u("__vec3"),v=u("__vec4"),K=I.create(),k=I.create(),D=v.create(),M=v.create(),E=v.create(),S=L.create(),F=L.create(),z=L.create(),C=I.create(),r=I.create(),f=I.create(),W=I.create(),d=I.create();a.C1=function(a){var b=P.RF(a.Sc,P.qq),c=a.kf;a=[];for(var d=0;d<c.length;d+=3)a.push({Ea:new Uint32Array([c[d],c[d+1],c[d+2]]),Kd:new Float32Array(3),zd:new Float32Array(3)});c=[];for(d=0;d<b.length;d+=
3){var e=new Float32Array(3);e[0]=b[d];e[1]=b[d+1];e[2]=b[d+2];c.push(e)}for(b=0;b<a.length;b++)d=a[b],I.add(c[d.Ea[0]],c[d.Ea[1]],K),I.add(K,c[d.Ea[2]],K),I.scale(K,1/3,d.Kd);for(b=0;b<a.length;b++){var d=a[b],e=I.subtract(c[d.Ea[1]],c[d.Ea[0]],K),f=I.subtract(c[d.Ea[2]],c[d.Ea[0]],k),e=I.cross(e,f,K);I.normalize(e,e);I.copy(e,d.zd)}for(var g={},b=[],d=[],h,l,n=Math.pow(10,4),e=0,f=c.length;e<f;e++)h=c[e],l=Math.round(h[0]*n)+"_"+Math.round(h[1]*n)+"_"+Math.round(h[2]*n),void 0===g[l]?(g[l]=e,b.push(h),
d[e]=b.length-1):d[e]=d[g[l]];g=[];e=0;for(f=a.length;e<f;e++)for(h=a[e],h.Ea[0]=d[h.Ea[0]],h.Ea[1]=d[h.Ea[1]],h.Ea[2]=d[h.Ea[2]],h=[h.Ea[0],h.Ea[1],h.Ea[2]],l=0;3>l;l++)if(h[l]==h[(l+1)%3]){g.push(e);break}for(e=g.length-1;0<=e;e--)a.splice(g[e],1);for(e=c.length=0;e<b.length;e++)c.push(b[e]);d=[];for(b=e=0;b<a.length;b++)f=a[b],d.push({id:e++,Fn:f.Ea,Kd:f.Kd,zd:f.zd,ji:[]});a={f2:d,Rs:c};c={};for(b=0;b<d.length;b++)for(e=0;3>e;e++)f=d[b].Fn[e],g=d[b].Fn[(e+1)%3],f=f>g?g+"-"+f:f+"-"+g,f in c||(c[f]=
[]),c[f].push(d[b]);d=Object.keys(c);b=0;for(g=d.length;b<g;b++)for(f=d[b],e=0;e<c[f].length;e++)for(h=e+1;h<c[f].length;h++)c[f][e].ji.push(c[f][h]),c[f][h].ji.push(c[f][e]);return p(a)};a.rP=function(a,b,c){for(var d=null,e=Number.MAX_VALUE,f=a.oG,g=0;g<f.length;g++)for(var h=0;h<f[g].length;h++){var k=f[g][h];I.subtract(k.Kd,b,K);k=c(b,k.Kd,k.Fn,a.Rs,e);k<e&&(d=g,e=k)}return d};a.E0=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(c[b[e]]);b=!1;c=-1;for(var e=d.length,f=e-1;++c<e;f=c)(d[c][1]<=
a[1]&&a[1]<d[f][1]||d[f][1]<=a[1]&&a[1]<d[c][1])&&a[0]<(d[f][0]-d[c][0])*(a[1]-d[c][1])/(d[f][1]-d[c][1])+d[c][0]&&(b=!b);return b?!0:!1};a.qP=function(a,b,c,d){var f;f=a.oG[d.island];var g=a.Rs,k=y(f,g,b,d.allowed_distance,d.distance_to_closest);f=k?(g=y(f,g,c,d.allowed_distance,d.distance_to_farthest))?h(f,k,g,b,c):null:null;if(f&&f.length)if(d.do_not_pull_string)if(c=f,d.return_normals){b=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Kd,3*f);c={positions:b,normals:null}}else{b=
new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Kd,3*f),a.set(c[f].zd,3*f);c={positions:b,normals:a}}else{a=a.Rs;d=d.return_normals;k=[];x(k,b,b,!1,f[0]&&f[0].zd||l.fc);for(b=0;b<f.length;b++){var n=f[b];if(g=f[b+1]){var m=.999>Math.abs(I.dot(n.zd,g.zd));a:{for(var q=0;q<n.ji.length;q++)if(n.ji[q]===g.id){n=n.g2[q];break a}n=void 0}x(k,a[n[0]],a[n[1]],m,g.zd)}}x(k,c,c,!1,k[k.length-1].zd);c=e(k,d)}else c=null;return c}};b4w.module.__reformer=function(a,u){function m(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},b("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node RGB Curves",a,
"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",b("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,b("node material",a,"alpha"));"darkness"in
a||(a.darkness=1,b("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,b("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,b("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,b("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,b("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",b("node material",a,"specular_shader"));
"specular_ior"in a||(a.specular_ior=4,b("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,b("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,b("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,b("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,b("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,b("node material",
a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",b("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,b("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,b("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,b("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,b("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=
a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",b("node "+a.type,a,"convert_from")),"convert_to"in a||(a.convert_to="WORLD",b("node "+
a.type,a,"convert_to")),"vector_type"in a||(a.vector_type="POINT",b("node "+a.type,a,"vector_type"))}}function c(a){if(a=a.nla_tracks)for(var c=0;c<a.length;c++)for(var e=a[c],g=0;g<e.strips.length;g++){var f=e.strips[g];"action"in f||(f.action=null,b("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,b("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,b("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,b("strip",f,"repeat"));
"use_reverse"in f||(f.use_reverse=!1,b("strip",f,"use_reverse"));"scale"in f||(f.scale=1,b("strip",f,"scale"))}}function b(a,b,c){c=c+">>"+a;c in D||(D[c]={nI:[],jQ:"undefined",type:a});D[c].nI.push(b.name)}function p(a,b,c){c=c+">>"+a;c in D||(D[c]={nI:[],jQ:"deprecated",type:a});D[c].nI.push(b.name)}function h(a){y.warn(a)}function G(a,b){b||(b=a.name+"_COPY");var c=a.materials,e=a.submeshes;a.materials=null;a.submeshes=null;var f=J.X(a);a.materials=c;a.submeshes=e;f.name=b;f.materials=a.materials.slice(0);
f.submeshes=[];for(c=0;c<e.length;c++){var g=J.cu(e[c]);f.submeshes.push(g)}return f}function q(a,b,c){if(1<c){for(var e=a.length/c,f=b.length/c,g=new Float32Array(a.length+b.length),d=0,h=0;h<c;h++)g.set(a.subarray(e*h,e*(h+1)),d),d+=e,g.set(b.subarray(f*h,f*(h+1)),d),d+=f;return g}return J.MM(a,b)}var w=u("__boundings"),A=u("__config"),g=u("__curve"),e=u("__mat4"),y=u("__print"),x=u("__quat"),P=u("__tbn"),J=u("__util"),L=u("__vec3"),l=u("__mat3"),I=u("__logic_nodes"),v=u("__animation"),K=A.K,k=
[5,4],D={},M=l.create(),E=P.create(),S=x.create();a.rL=function(a){return-1!=J.LS(a,k)};a.VW=function(a){D={};var e=a.worlds;if(0==e.length){y.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var g={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",
use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};e.push(g)}for(var k=0;k<e.length;k++){g=e[k];"use_sky_blend"in g||(b("world",g,"use_sky_blend"),g.use_sky_blend=!1);"use_sky_paper"in g||(b("world",g,"use_sky_paper"),g.use_sky_paper=!1);"use_sky_real"in g||(b("world",g,"use_sky_real"),g.use_sky_real=!1);"b4w_sky_settings"in g&&"rayleigh_brightness"in g.b4w_sky_settings||(b("world",g,"rayleigh_brightness"),g.b4w_sky_settings=
{render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in g||(b("world",g,"fog_settings"),g.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in g&&(g.fog_settings.use_custom_color=
!0,g.fog_settings.color=g.b4w_fog_color),"b4w_fog_density"in g&&0<g.b4w_fog_density&&(g.fog_settings.depth=1/g.b4w_fog_density));"render_sky"in g.b4w_sky_settings||(b("world",g,"render_sky"),g.b4w_sky_settings.render_sky=!1);for(var f=g.texture_slots,l=0;l<f.length;l++){var d=f[l];"blend_type"in d||(d.blend_type="MIX",b("world_texture_slot",d,"blend_type"));"use_map_blend"in d||(d.use_map_blend=!1,b("world_texture_slot",d,"use_map_blend"));"use_map_horizon"in d||(d.use_map_horizon=!0,b("world_texture_slot",
d,"use_map_horizon"));"use_map_zenith_up"in d||(d.use_map_zenith_up=!1,b("world_texture_slot",d,"use_map_zenith_up"));"use_rgb_to_intensity"in d||(d.use_rgb_to_intensity=!1,b("world_texture_slot",d,"use_rgb_to_intensity"));"invert"in d||(d.invert=!1,b("world_texture_slot",d,"invert"));"color"in d||(d.color=[1,0,1],b("world_texture_slot",d,"color"));"blend_factor"in d||(d.blend_factor=0,b("world_texture_slot",d,"blend_factor"));"horizon_factor"in d||(d.horizon_factor=1,b("world_texture_slot",d,"horizon_factor"));
"zenith_up_factor"in d||(d.zenith_up_factor=0,b("world_texture_slot",d,"zenith_up_factor"));"zenith_down_factor"in d||(d.zenith_down_factor=0,b("world_texture_slot",d,"zenith_down_factor"));"default_value"in d||(d.default_value=1,b("world_texture_slot",d,"default_value"))}"b4w_use_default_animation"in g||(b("world",g,"b4w_use_default_animation"),g.b4w_use_default_animation=!1);"b4w_anim_behavior"in g||(b("world",g,"b4w_anim_behavior"),g.b4w_anim_behavior="CYCLIC")}l=a.scenes;for(k=0;k<l.length;k++)f=
l[k],d=f.world,"timeline_markers"in f||(f.timeline_markers=null,b("scene",f,"timeline_markers")),"boolean"==typeof f.b4w_enable_physics&&(f.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in f||(f.b4w_reflection_quality="MEDIUM",b("scene",f,"b4w_reflection_quality")),"b4w_use_nla"in f||(f.b4w_use_nla=!1,b("scene",f,"b4w_use_nla")),"fps"in f||(f.fps=24,b("scene",f,"fps")),"b4w_nla_cyclic"in f||(f.b4w_nla_cyclic=!1,b("scene",f,"b4w_nla_cyclic")),"b4w_logic_nodes"in f||(f.b4w_logic_nodes=[],b("scene",
f,"b4w_logic_nodes")),"b4w_detect_collisions"in f&&(p("scene",f,"b4w_detect_collisions"),delete f.b4w_detect_collisions),"audio_doppler_speed"in f||(f.audio_doppler_speed=343.3),"audio_doppler_factor"in f||(f.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in f||(f.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},b("scene",f,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in f||(f.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in
f||(f.b4w_enable_bloom=!1,b("scene",f,"b4w_enable_bloom")),"b4w_enable_motion_blur"in f||(f.b4w_enable_motion_blur=!1,b("scene",f,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in f||(f.b4w_enable_color_correction=!1,b("scene",f,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in f||(f.b4w_antialiasing_quality="MEDIUM",b("scene",f,"b4w_antialiasing_quality")),"b4w_tags"in f||(f.b4w_tags={title:"",description:""},b("scene",f,"b4w_tags")),"b4w_lod_smooth_type"in f||(f.b4w_lod_smooth_type=
"OFF",b("scene",f,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in f||(f.b4w_lod_hyst_interval=0,b("scene",f,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in f||(f.b4w_enable_object_selection="AUTO",b("scene",f,"b4w_enable_object_selection")),"b4w_enable_outlining"in f||(f.b4w_enable_outlining="AUTO",b("scene",f,"b4w_enable_outlining")),"b4w_enable_glow_materials"in f||(f.b4w_enable_glow_materials="AUTO",b("scene",f,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in f||(f.b4w_enable_anchors_visibility=
"AUTO",b("scene",f,"b4w_enable_anchors_visibility")),"b4w_outline_color"in f||(f.b4w_outline_color=[1,1,1],b("scene",f,"b4w_outline_color")),"b4w_outline_factor"in f||(f.b4w_outline_factor="b4w_glow_factor"in f?f.b4w_glow_factor:1,b("scene",f,"b4w_outline_factor")),"b4w_shadow_settings"in f||(b("scene",f,"b4w_shadow_settings"),e=d.b4w_shadow_settings,f.b4w_shadow_settings=e?e:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,
first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),e=f.b4w_shadow_settings,"csm_resolution"in e||(b("scene",f,"b4w_shadow_settings.csm_resolution"),e.csm_resolution=2048),"blur_samples"in e||(b("scene",f,"b4w_shadow_settings.blur_samples"),e.blur_samples="16x"),"soft_shadows"in e||(b("scene",f,"b4w_shadow_settings.soft_shadows"),e.soft_shadows=!0),"self_shadow_polygon_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_polygon_offset"),
e.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_normal_offset"),e.self_shadow_normal_offset=.01),"b4w_enable_csm"in e||(b("scene",f,"b4w_shadow_settings.b4w_enable_csm"),e.b4w_enable_csm=!1),"csm_num"in e||(b("scene",f,"b4w_shadow_settings.csm_num"),e.csm_num=1),"csm_first_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_first_cascade_border"),e.csm_first_cascade_border=10),"first_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.first_cascade_blur_radius"),
e.first_cascade_blur_radius=3),"csm_last_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_last_cascade_border"),e.csm_last_cascade_border=100),"last_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.last_cascade_blur_radius"),e.last_cascade_blur_radius=1.5),"fade_last_cascade"in e||(b("scene",f,"b4w_shadow_settings.fade_last_cascade"),e.fade_last_cascade=!0),"blend_between_cascades"in e||(b("scene",f,"b4w_shadow_settings.blend_between_cascades"),e.blend_between_cascades=!0),"b4w_ssao_settings"in
f||(b("scene",f,"b4w_ssao_settings"),e=d.b4w_ssao_settings,f.b4w_ssao_settings=e?e:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),e=f.b4w_ssao_settings,"dist_factor"in e||(b("scene",f,"b4w_ssao_settings.dist_factor"),e.dist_factor=0),"samples"in e||(b("scene",f,"b4w_ssao_settings.samples"),e.samples=16),"hemisphere"in e||(b("scene",f,"b4w_ssao_settings.hemisphere"),e.hemisphere=!1),"blur_depth"in e||(b("scene",f,"b4w_ssao_settings.blur_depth"),e.blur_depth=!1),"blur_discard_value"in
e||(b("scene",f,"b4w_ssao_settings.blur_discard_value"),e.blur_discard_value=1),"b4w_bloom_settings"in f||(b("scene",f,"b4w_bloom_settings"),e=d.b4w_bloom_settings,f.b4w_bloom_settings=e?e:{key:.2,blur:4,edge_lum:1}),"key"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.key"),f.b4w_bloom_settings.key=.2),"blur"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.blur"),f.b4w_bloom_settings.blur=4),"edge_lum"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.edge_lum"),f.b4w_bloom_settings.edge_lum=
1),"adaptive"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.adaptive"),f.b4w_bloom_settings.adaptive=!0),"average_luminance"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.average_luminance"),f.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in f||(b("scene",f,"b4w_motion_blur_settings"),e=d.b4w_motion_blur_settings,f.b4w_motion_blur_settings=e?e:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in f.b4w_motion_blur_settings||(b("scene",
f,"b4w_motion_blur_settings.motion_blur_factor"),f.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in f.b4w_motion_blur_settings||(b("scene",f,"b4w_motion_blur_settings.motion_blur_decay_threshold"),f.b4w_motion_blur_settings.motion_blur_decay_threshold=.01),"b4w_color_correction_settings"in f||(b("scene",f,"b4w_color_correction_settings"),e=d.b4w_color_correction_settings,f.b4w_color_correction_settings=e?e:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in
f||(b("scene",f,"b4w_god_rays_settings"),e=d.b4w_god_rays_settings,f.b4w_god_rays_settings=e?e:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in f.b4w_god_rays_settings||(b("scene",f,"b4w_god_rays_settings.steps_per_pass"),f.b4w_god_rays_settings.steps_per_pass=10),"b4w_glow_settings"in f||(b("scene",f,"b4w_glow_settings"),f.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},e=f.b4w_glow_settings,
"b4w_render_glow_over_blend"in d&&(e.render_glow_over_blend=d.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in d&&(e.small_glow_mask_coeff=d.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in d&&(e.large_glow_mask_coeff=d.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in d&&(e.small_glow_mask_width=d.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in d&&(e.large_glow_mask_width=d.b4w_large_glow_mask_width)),d=f.b4w_render_shadows,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_shadows=
d?"ON":"OFF"),d=f.b4w_render_reflections,"OFF"!=d&&"ON"!=d&&(f.b4w_render_reflections=d?"ON":"OFF"),d=f.b4w_render_refractions,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_refractions=d?"ON":"OFF"),"b4w_render_dynamic_grass"in f||(b("scene",f,"b4w_render_dynamic_grass"),f.b4w_render_dynamic_grass="AUTO"),f.b4w_nla_script&&p("scene",f,"b4w_nla_script"),"audio_distance_model"in f||(b("scene",f,"audio_distance_model"),f.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in f||(b("scene",f,"b4w_custom_prop"),
f.b4w_custom_prop=null);f=a.meshes;for(k=0;k<f.length;k++){d=f[k];d.b4w_boundings||(b("mesh",d,"b4w_boundings"),d.b4w_boundings={},e=d.b4w_boundings,e.bb=d.b4w_bounding_box?d.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},e.bb_src=d.b4w_bounding_box_source?d.b4w_bounding_box_source:d.b4w_bounding_box,e.bs_cen=d.b4w_bounding_sphere_center?d.b4w_bounding_sphere_center:[0,0,0],e.bc_cen=d.b4w_bounding_cylinder_center?d.b4w_bounding_cylinder_center:[0,0,0],e.be_cen=d.b4w_bounding_ellipsoid_center?
d.b4w_bounding_ellipsoid_center:[0,0,0],d.b4w_bounding_ellipsoid_axes?e.be_ax=d.b4w_bounding_ellipsoid_axes:(l=e.bb,e.be_ax=[(l.max_x-l.min_x)/2,(l.max_y-l.min_y)/2,(l.max_z-l.min_z)/2]),d.b4w_rotated_bounding_box?e.rbb=d.b4w_rotated_bounding_box:(l=e.bb,e.rbb={rbb_c:[(l.max_x+l.min_x)/2,(l.max_y+l.min_y)/2,(l.max_z+l.min_z)/2],rbb_s:[1,1,1]}),e.caxis_x=d.b4w_cov_axis_x?d.b4w_cov_axis_x:[1,0,0],e.caxis_y=d.b4w_cov_axis_y?d.b4w_cov_axis_y:[0,1,0],e.caxis_z=d.b4w_cov_axis_z?d.b4w_cov_axis_z:[0,0,1]);
"is_boundings_overridden"in d||(b("mesh",d,"is_boundings_overridden"),d.is_boundings_overridden=!1);"b4w_shape_keys"in d||(d.b4w_shape_keys=[],b("mesh",d,"b4w_shape_keys"));e=!0;for(g=0;g<d.submeshes.length;g++){var n=d.submeshes[g];"boundings"in n||(e=!1,n.boundings={be_ax:d.b4w_bounding_ellipsoid_axes,be_cen:d.b4w_bounding_ellipsoid_center,bb:{max_x:d.b4w_bounding_box.max_x,max_y:d.b4w_bounding_box.max_y,max_z:d.b4w_bounding_box.max_z,min_x:d.b4w_bounding_box.min_x,min_y:d.b4w_bounding_box.min_y,
min_z:d.b4w_bounding_box.min_z}});"uv_layers"in n||(b("submesh",d,"uv_layers"),n.uv_layers=d.uv_textures);"be_ax"in n.boundings||(n.boundings.be_ax=d.b4w_bounding_ellipsoid_axes);"be_cen"in n.boundings||(n.boundings.be_cen=d.b4w_bounding_ellipsoid_center);"bb"in n.boundings||(n.boundings.bb=d.b4w_bounding_box);"rbb"in n.boundings||(l=d.b4w_bounding_box,n.boundings.rbb={rbb_c:[(l.max_x+l.min_x)/2,(l.max_y+l.min_y)/2,(l.max_z+l.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in n.boundings||(n.boundings.caxis_x=
[1,0,0]);"caxis_y"in n.boundings||(n.boundings.caxis_y=[0,1,0]);"caxis_z"in n.boundings||(n.boundings.caxis_z=[0,0,1])}e||b("mesh",d,"submesh_bd");l=d;e=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];g=null;for(n=0;n<e.length;n++)l[e[n]]&&(g?(l[e[n]]=!1,y.warn('WARNING property "'+e[n]+'" of object "'+l.name+'" has been set to "false". Foreground property "'+g+'" already exists.')):g=e[n]);for(l=0;l<d.b4w_vertex_anim.length;l++)e=
d.b4w_vertex_anim[l],"allow_nla"in e||(b('mesh["b4w_vertex_anim"]',d,"allow_nla"),e.allow_nla=!0)}l=a.cameras;for(k=0;k<l.length;k++)f=l[k],f.type||(f.type="PERSP",b("camera",f,"type")),"b4w_eye_target_dist"in f&&(delete f.b4w_eye_target_dist,p("camera",f,"b4w_eye_target_dist")),"b4w_hover_zero_level"in f||(f.b4w_hover_zero_level=0,b("camera",f,"b4w_hover_zero_level")),"b4w_trans_velocity"in f||(f.b4w_trans_velocity=1,b("camera",f,"b4w_trans_velocity")),"b4w_rot_velocity"in f||(f.b4w_rot_velocity=
1,b("camera",f,"b4w_rot_velocity")),"b4w_zoom_velocity"in f||(f.b4w_zoom_velocity=.1,b("camera",f,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in f||(f.b4w_use_target_distance_limits=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_target_distance_limits")),"b4w_use_zooming"in f||(f.b4w_use_zooming=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_zooming")),"b4w_distance_min"in f||(f.b4w_distance_min=1,b("camera",f,"b4w_distance_min")),"b4w_distance_max"in f||(f.b4w_distance_max=100,
b("camera",f,"b4w_distance_max")),"b4w_horizontal_translation_min"in f||(f.b4w_horizontal_translation_min=-100,b("camera",f,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in f||(f.b4w_horizontal_translation_max=100,b("camera",f,"b4w_horizontal_translation_max")),"b4w_vertical_translation_min"in f||(f.b4w_vertical_translation_min=-100,b("camera",f,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in f||(f.b4w_vertical_translation_max=100,b("camera",f,"b4w_vertical_translation_max")),
"b4w_use_horizontal_clamping"in f||(f.b4w_use_horizontal_clamping=!1,b("camera",f,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in f||(f.b4w_rotation_left_limit=-Math.PI,b("camera",f,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in f||(f.b4w_rotation_right_limit=Math.PI,b("camera",f,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in f||(f.b4w_horizontal_clamping_type="LOCAL",b("camera",f,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in f||(f.b4w_use_vertical_clamping=
!1,b("camera",f,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in f||(f.b4w_rotation_down_limit=-Math.PI/2,b("camera",f,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in f||(f.b4w_rotation_up_limit=Math.PI/2,b("camera",f,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in f||(f.b4w_vertical_clamping_type="LOCAL",b("camera",f,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in f||(f.b4w_hover_angle_min=Math.PI/6,b("camera",f,"b4w_hover_angle_min")),"b4w_hover_angle_max"in f||(f.b4w_hover_angle_max=
Math.PI/6,b("camera",f,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in f||(f.b4w_enable_hover_hor_rotation=!0,b("camera",f,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in f||(f.b4w_use_panning=!0,b("camera",f,"b4w_use_panning")),"b4w_use_pivot_limits"in f||(f.b4w_use_pivot_limits=!1,f.b4w_pivot_z_min=0,f.b4w_pivot_z_max=10,b("camera",f,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in f||(f.b4w_dof_bokeh=!1,b("camera",f,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in f||(f.b4w_dof_bokeh_intensity=
.3,b("camera",f,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in f||(f.b4w_dof_foreground_blur=!1,b("camera",f,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in f||(f.b4w_dof_front_start=0,b("camera",f,"b4w_dof_front_start")),"b4w_dof_front_end"in f||(f.b4w_dof_front_end=f.b4w_dof_front,b("camera",f,"b4w_dof_front_end")),"b4w_dof_rear_start"in f||(f.b4w_dof_rear_start=0,b("camera",f,"b4w_dof_rear_start")),"b4w_dof_rear_end"in f||(f.b4w_dof_rear_end=f.b4w_dof_rear,b("camera",f,"b4w_dof_rear_end")),
"sensor_fit"in f||(f.sensor_fit="VERTICAL",b("camera",f,"sensor_fit"));l=a.lamps;for(k=0;k<l.length;k++)if(f=l[k],"b4w_generate_shadows"in f||(f.b4w_generate_shadows=!1,b("lamp",f,"b4w_generate_shadows")),"b4w_dynamic_intensity"in f||(f.b4w_dynamic_intensity=!1,b("lamp",f,"b4w_dynamic_intensity")),"use_diffuse"in f||(f.use_diffuse=!0,b("lamp",f,"use_diffuse")),"use_specular"in f||(f.use_specular=!0,b("lamp",f,"use_specular")),"clip_start"in f||(f.clip_start=.1,b("lamp",f,"clip_start")),"clip_end"in
f||(f.clip_end=30,b("lamp",f,"clip_end")),"POINT"==f.type||"SPOT"==f.type)"use_sphere"in f||(f.use_sphere=!1,b("lamp",f,"use_sphere")),K.gP&&(f.type="SUN");l=a.speakers;for(k=0;k<l.length;k++)f=l[k],"b4w_behavior"in f||(f.b4w_behavior=f.b4w_background_music?"BACKGROUND_SOUND":"POSITIONAL"),"b4w_auto_play"in f||(f.b4w_auto_play=!1,b("speaker",f,"b4w_auto_play")),"b4w_enable_doppler"in f||(f.b4w_enable_doppler=!1,b("speaker",f,"b4w_enable_doppler")),"b4w_delay"in f||(f.b4w_delay=0),"b4w_delay_random"in
f||(f.b4w_delay_random=0),"b4w_volume_random"in f||(f.b4w_volume_random=0),"b4w_pitch_random"in f||(f.b4w_pitch_random=0),"b4w_fade_in"in f||(f.b4w_fade_in=0),"b4w_fade_out"in f||(f.b4w_fade_out=0),"b4w_loop"in f||(f.b4w_loop=!1),"b4w_loop_start"in f||(f.b4w_loop_start=0,b("speaker",f,"b4w_loop_start")),"b4w_loop_end"in f||(f.b4w_loop_end=0,b("speaker",f,"b4w_loop_end")),f.animation_data&&c(f.animation_data);l=a.textures;for(k=0;k<l.length;k++)f=l[k],"b4w_anisotropic_filtering"in f||(f.b4w_anisotropic_filtering=
"OFF",b("texture",f,"b4w_anisotropic_filtering")),"b4w_water_foam"in f||(f.b4w_water_foam=!1,b("texture",f,"b4w_water_foam")),"b4w_foam_uv_freq"in f||(f.b4w_foam_uv_freq=[1,1],b("texture",f,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in f||(f.b4w_foam_uv_magnitude=[1,1],b("texture",f,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in f||(f.b4w_parallax_steps=5,b("material",f,"b4w_parallax_steps")),"b4w_parallax_lod_dist"in f||(f.b4w_parallax_lod_dist=10,b("material",f,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in
f||(f.b4w_shore_dist_map=!1,b("texture",f,"b4w_shore_dist_map")),"b4w_shore_boundings"in f||(f.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],b("texture",f,"b4w_shore_boundings")),"b4w_max_shore_dist"in f||(f.b4w_max_shore_dist=100,b("texture",f,"b4w_max_shore_dist")),"b4w_disable_compression"in f||(f.b4w_disable_compression=!1,b("texture",f,"b4w_disable_compression")),"b4w_source_type"in f||(f.b4w_source_type="",b("texture",f,"b4w_source_type")),"b4w_source_id"in f||(f.b4w_source_id="",b("texture",f,"b4w_source_id")),
"b4w_source_size"in f||(f.b4w_source_size=1024,b("texture",f,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in f||(f.b4w_enable_canvas_mipmapping=!0,b("texture",f,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in f||(f.b4w_nla_video=!1,b("texture",f,"b4w_nla_video"));l=a.images;for(k=0;k<l.length;k++)f=l[k],"colorspace_settings_name"in f||(f.colorspace_settings_name="sRGB",b("image",f,"colorspace_settings_name"));e=a.materials;for(k=0;k<e.length;k++){g=e[k];"ALPHA_ANTIALIASING"==g.game_settings.alpha_blend&&
(K.hP?g.game_settings.alpha_blend="CLIP":2>K.kc&&(y.warn('Material "'+g.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),g.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in g||(g.use_tangent_shading=!1,b("material",g,"use_tangent_shading"));"b4w_node_mat_type"in g&&p("material",g,"b4w_node_mat_type");"b4w_skydome"in g&&p("material",g,"b4w_skydome");"b4w_procedural_skydome"in g&&p("material",g,"b4w_procedural_skydome");"b4w_lens_flares"in
g||(g.b4w_lens_flares=!1,b("material",g,"b4w_lens_flares"));"LENS_FLARES"===g.name&&(g.b4w_lens_flares||y.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),g.b4w_lens_flares=!0);g.b4w_water&&("b4w_water_shore_smoothing"in g||(g.b4w_water_shore_smoothing=!1,b("material",g,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in g||(g.b4w_water_dynamic=!1,b("material",g,"b4w_water_dynamic")),"b4w_waves_height"in g||(g.b4w_waves_height=1,b("material",
g,"b4w_waves_height")),"b4w_waves_length"in g||(g.b4w_waves_length=1,b("material",g,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in g||(g.b4w_water_dst_noise_scale0=.05,b("material",g,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in g||(g.b4w_water_dst_noise_scale1=.03,b("material",g,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in g||(g.b4w_water_dst_noise_freq0=1.3,b("material",g,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in g||(g.b4w_water_dst_noise_freq1=
1,b("material",g,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in g||(g.b4w_water_dir_min_shore_fac=.4,b("material",g,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in g||(g.b4w_water_dir_freq=.5,b("material",g,"b4w_water_dir_freq")),"b4w_water_dir_noise_scale"in g||(g.b4w_water_dir_noise_scale=.05,b("material",g,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in g||(g.b4w_water_dir_noise_freq=.07,b("material",g,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in
g||(g.b4w_water_dir_min_noise_fac=.5,b("material",g,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in g||(g.b4w_water_dst_min_fac=.2,b("material",g,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in g||(g.b4w_water_waves_hor_fac=5,b("material",g,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in g||(g.b4w_water_absorb_factor=6,b("material",g,"b4w_water_absorb_factor")),"b4w_water_fog_color"in g||(g.b4w_water_fog_color=[.5,.7,.7],b("material",g,"b4w_water_fog_color")),"b4w_foam_factor"in
g||(g.b4w_foam_factor=5,b("material",g,"b4w_foam_factor")),"b4w_generated_mesh"in g||(g.b4w_generated_mesh=!1,b("material",g,"b4w_generated_mesh")),"b4w_water_num_cascads"in g||(g.b4w_water_num_cascads=5,b("material",g,"b4w_water_num_cascads")),"b4w_water_subdivs"in g||(g.b4w_water_subdivs=64,b("material",g,"b4w_water_subdivs")),"b4w_water_detailed_dist"in g||(g.b4w_water_detailed_dist=1E3,b("material",g,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in g||(g.b4w_water_enable_caust=!1,b("material",
g,"b4w_water_enable_caust")),"b4w_water_caust_scale"in g||(g.b4w_water_caust_scale=.25,b("material",g,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in g||(g.b4w_water_caust_brightness=.5,b("material",g,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in g||(g.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in g||(g.b4w_dynamic_grass_color="");"diffuse_intensity"in g||(g.diffuse_intensity=1,b("material",g,"diffuse_intensity"));"b4w_use_ghost"in g||(g.b4w_use_ghost=!1);"b4w_collision_margin"in
g||(g.b4w_collision_margin=.04,b("material",g,"b4w_collision_margin"));"b4w_collision_group"in g||(g.b4w_collision_group=128,b("material",g,"b4w_collision_group"));"b4w_collision_mask"in g||(g.b4w_collision_mask=127,b("material",g,"b4w_collision_mask"));"b4w_do_not_render"in g||(g.b4w_do_not_render=!1,b("material",g,"b4w_do_not_render"));"HALO"!=g.type||"b4w_halo_sky_stars"in g||(g.b4w_halo_sky_stars=!1,b("material",g,"b4w_halo_sky_stars"));"HALO"!=g.type||"b4w_halo_stars_blend_height"in g||(g.b4w_halo_stars_blend_height=
10,b("material",g,"b4w_halo_stars_blend_height"));"HALO"!=g.type||"b4w_halo_stars_min_height"in g||(g.b4w_halo_stars_min_height=0,b("material",g,"b4w_halo_stars_min_height"));"specular_shader"in g||(g.specular_shader="COOKTORR",b("material",g,"specular_shader"));"diffuse_shader"in g||(g.diffuse_shader="LAMBERT",b("material",g,"diffuse_shader"));"roughness"in g||(g.roughness=.5,b("material",g,"roughness"));"diffuse_fresnel"in g||(g.diffuse_fresnel=.1,b("material",g,"diffuse_fresnel"));"diffuse_fresnel_factor"in
g||(g.diffuse_fresnel_factor=.5,b("material",g,"diffuse_fresnel_factor"));"specular_slope"in g||(g.specular_slope=.2,b("material",g,"specular_slope"));"specular_toon_size"in g||(g.specular_toon_size=.5,b("material",g,"specular_toon_size"));"specular_toon_smooth"in g||(g.specular_toon_smooth=.1,b("material",g,"specular_toon_smooth"));"specular_alpha"in g||(g.specular_alpha=1,b("material",g,"specular_alpha"));"b4w_wettable"in g||(g.b4w_wettable=!1,b("material",g,"b4w_wettable"));"b4w_refractive"in g||
(g.b4w_refractive=!1,b("material",g,"b4w_refractive"));"b4w_refr_bump"in g||(g.b4w_refr_bump=0,b("material",g,"b4w_refr_bump"));"b4w_shallow_water_col"in g||(g.b4w_shallow_water_col=[0,.8,.3],b("material",g,"b4w_shallow_water_col"));"b4w_shore_water_col"in g||(g.b4w_shore_water_col=[0,.9,.2],b("material",g,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in g||(g.b4w_shallow_water_col_fac=1,b("material",g,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in g||(g.b4w_shore_water_col_fac=.5,
b("material",g,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in g||(g.b4w_water_sss_strength=5.9,b("material",g,"b4w_water_sss_strength"));"b4w_water_sss_width"in g||(g.b4w_water_sss_width=.45,b("material",g,"b4w_water_sss_width"));"b4w_render_above_all"in g||(g.b4w_render_above_all=!1,b("material",g,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in g||(g.b4w_water_norm_uv_velocity=.05,b("material",g,"b4w_water_norm_uv_velocity"));"specular_ior"in g||(g.specular_ior=1,b("material",g,"specular_ior"));
"darkness"in g||(g.darkness=0,b("material",g,"darkness"));"diffuse_toon_size"in g||(g.diffuse_toon_size=0,b("material",g,"diffuse_toon_size"));"diffuse_toon_smooth"in g||(g.diffuse_toon_smooth=0,b("material",g,"diffuse_toon_smooth"));"pass_index"in g||(g.pass_index=0,b("material",g,"pass_index"));f=g.texture_slots;for(l=0;l<f.length;l++)d=f[l],"blend_type"in d||(d.blend_type="MIX",b("texture_slot",d,"blend_type"));if(g.node_tree){f=g.node_tree.nodes;for(l=0;l<f.length;l++)m(f[l]);g.node_tree.animation_data&&
c(g.node_tree.animation_data)}}d=a.node_groups;for(k=0;k<d.length;k++)for(f=d[k].node_tree.nodes,l=0;l<f.length;l++)m(f[l]);f=a.objects;for(k=0;k<f.length;k++){d=f[k];switch(d.type){case "MESH":"b4w_dynamic_geometry"in d||(d.b4w_dynamic_geometry=!1);"b4w_reflexible"in d||(d.b4w_reflexible=!1);"b4w_reflexible_only"in d||(d.b4w_reflexible_only=!1);"b4w_reflective"in d||(d.b4w_reflective=!1);"b4w_reflection_type"in d||(d.b4w_reflection_type="PLANE",b("object",d,"b4w_reflection_type"));"b4w_wind_bending"in
d||(d.b4w_wind_bending=!1,b("object",d,"b4w_wind_bending"));"b4w_wind_bending_angle"in d||(d.b4w_wind_bending_angle=10,d.b4w_wind_bending_freq=.25,b("object",d,"wind bending params"));"b4w_detail_bending_amp"in d||(d.b4w_detail_bending_amp=.1,d.b4w_branch_bending_amp=.3,b("object",d,"detail bending params"));"b4w_detail_bending_freq"in d||(d.b4w_detail_bending_freq=1,b("object",d,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in d||(d.b4w_main_bend_stiffness_col="",b("object",d,"b4w_main_bend_stiffness_col"));
"b4w_detail_bend_colors"in d||(d.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},b("object",d,"b4w_detail_bend_colors"));"b4w_caustics"in d||(d.b4w_caustics=!1);"vertex_groups"in d&&d.vertex_groups.length&&d.data&&0==d.data.vertex_groups.length&&(d.data.vertex_groups=d.vertex_groups,delete d.vertex_groups,b("object",d,"vertex_groups"));"b4w_vertex_anim"in d&&d.b4w_vertex_anim.length&&d.data&&0==d.data.b4w_vertex_anim.length&&(d.data.b4w_vertex_anim=d.b4w_vertex_anim,
delete d.b4w_vertex_anim,b("object",d,"b4w_vertex_anim"));"b4w_do_not_render"in d||(d.b4w_do_not_render=!1);"b4w_hidden_on_load"in d||(d.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in d||(d.b4w_hide_chldr_on_load=!1);"use_ghost"in d.game||(d.game.use_ghost=!1);"use_sleep"in d.game||(d.game.use_sleep=!1);"velocity_min"in d.game||(d.game.velocity_min=0);"velocity_max"in d.game||(d.game.velocity_max=0);"collision_group"in d.game||(d.game.collision_group=1);"collision_mask"in d.game||(d.game.collision_mask=
255);l=d;e=l.game;g=e.collision_bounds_type;e.use_collision_bounds&&"BOX"!=g&&"CYLINDER"!=g&&"CONE"!=g&&"SPHERE"!=g&&"CAPSULE"!=g&&"EMPTY"!=g&&(y.error("Wrong collision bounds type "+g+". Disable physics for object "+l.name),l.b4w_collision=!1,l.b4w_floating=!1,l.b4w_vehicle=!1,l.b4w_character=!1);"b4w_vehicle_settings"in d?d.b4w_vehicle_settings&&("steering_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_ratio=10),"steering_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_max=
1),"inverse_control"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.inverse_control=!1),"force_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.force_max=1500),"brake_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.brake_max=100),"speed_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.delta_tach_angle=
4.43),"suspension_compression"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_stiffness=20),"suspension_damping"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in
d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_rot_damp=.9)):(d.b4w_vehicle_settings=null,b("object",d,"b4w_vehicle_settings"));"b4w_floating_settings"in
d?d.b4w_floating_settings&&("floating_factor"in d.b4w_floating_settings||(d.b4w_floating_settings.floating_factor=3),"water_lin_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_lin_damp=.8),"water_rot_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_rot_damp=.8)):(d.b4w_floating_settings=null,b("object",d,"b4w_floating_settings"));"b4w_character_settings"in d?d.b4w_character_settings&&("walk_speed"in d.b4w_character_settings||(d.b4w_character_settings.walk_speed=4),"run_speed"in
d.b4w_character_settings||(d.b4w_character_settings.run_speed=8),"step_height"in d.b4w_character_settings||(d.b4w_character_settings.step_height=.25),"jump_strength"in d.b4w_character_settings||(d.b4w_character_settings.jump_strength=5),"waterline"in d.b4w_character_settings||(d.b4w_character_settings.waterline=0)):(d.b4w_character_settings=null,b("object",d,"b4w_character_settings"));"b4w_selectable"in d||(d.b4w_selectable=!1,b("object",d,"b4w_selectable"));"b4w_outlining"in d||(d.b4w_outlining=
!1,b("object",d,"b4w_outlining"));"b4w_outline_on_select"in d||(d.b4w_outline_on_select=!1,b("object",d,"b4w_outline_on_select"));"b4w_billboard"in d||(d.b4w_billboard=!1,b("object",d,"b4w_billboard"));"b4w_billboard_geometry"in d||(d.b4w_billboard_geometry="SPHERICAL",b("object",d,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in d||(d.b4w_pres_glob_orientation=!1,b("object",d,"b4w_pres_glob_orientation"));"b4w_outline_settings"in d||("b4w_glow_settings"in d?d.b4w_outline_settings=d.b4w_glow_settings:
(d.b4w_outline_settings={},d.b4w_outline_settings.outline_duration=1,d.b4w_outline_settings.outline_period=1,d.b4w_outline_settings.outline_relapses=0),b("object",d,"b4w_outline_settings"));"lod_levels"in d||(d.lod_levels=[],b("object",d,"lod_levels"));"b4w_animation_mixing"in d||(d.b4w_animation_mixing=!1,b("object",d,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in d||(d.b4w_anchor=null,b("object",d,"b4w_anchor")),!d.b4w_anchor||"max_width"in d.b4w_anchor||(d.b4w_anchor.max_width=250)}"collision_margin"in
d.game||(d.game.collision_margin=.04,b("object",d,"collision_margin"));"b4w_anim_behavior"in d||(d.b4w_anim_behavior=d.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",b("object",d,"b4w_anim_behavior"));if(!("rotation_quaternion"in d)){l=[0,0,0,1];J.bl(d.rotation_euler,l);var e=l,g=l[0],n=l[1],q=l[2];e[0]=l[3];e[1]=g;e[2]=n;e[3]=q;d.rotation_quaternion=l;b("object",d,"rotation_quaternion")}"webgl_do_not_batch"in d&&(d.b4w_do_not_batch=d.webgl_do_not_batch)&&p("object",d,"webgl_do_not_batch");"b4w_shadow_cast_only"in
d||(d.b4w_shadow_cast_only=!1,b("object",d,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in d||(d.b4w_correct_bounding_offset="AUTO",b("object",d,"b4w_correct_bounding_offset"));e=d.particle_systems;for(l=0;l<e.length;l++)g=e[l],n=g.settings,"use_rotation_dupli"in n||(n.use_rotation_dupli=!1,b("particle_settings",n,"use_rotation_dupli")),"use_whole_group"in n||(n.use_whole_group=!1,b("particle_settings",n,"use_whole_group")),g.transforms||(g.transforms=new Float32Array,b("particle_system",
g,"transforms")),"b4w_billboard_align"in n||(n.b4w_billboard_align="VIEW",b("particle_settings",n,"b4w_billboard_align")),"b4w_dynamic_grass"in n||(n.b4w_dynamic_grass=!1,b("object",n,"b4w_dynamic_grass")),"b4w_dynamic_grass_scale_threshold"in n||(n.b4w_dynamic_grass_scale_threshold=.01,b("object",n,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in n||(n.b4w_initial_rand_rotation=!1,b("particle_settings",n,"b4w_initial_rand_rotation")),"b4w_rotation_type"in n||(n.b4w_rotation_type=
"Z",b("particle_settings",n,"b4w_rotation_type")),"b4w_rand_rotation_strength"in n||(n.b4w_rand_rotation_strength=1,b("particle_settings",n,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in n||(n.b4w_hair_billboard=!1,b("particle_settings",n,"b4w_hair_billboard")),"b4w_hair_billboard_type"in n||(n.b4w_hair_billboard_type="BASIC",b("particle_settings",n,"b4w_hair_billboard_type")),"b4w_hair_billboard_jitter_amp"in n||(n.b4w_hair_billboard_jitter_amp=0,b("particle_settings",n,"b4w_hair_billboard_jitter_amp")),
"b4w_hair_billboard_jitter_freq"in n||(n.b4w_hair_billboard_jitter_freq=0,b("particle_settings",n,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in n||(n.b4w_hair_billboard_geometry="SPHERICAL",b("particle_settings",n,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in n||(n.b4w_wind_bend_inheritance="PARENT",b("particle_settings",n,"b4w_wind_bend_inheritance")),"b4w_shadow_inheritance"in n||(n.b4w_shadow_inheritance="PARENT",b("particle_settings",n,"b4w_shadow_inheritance")),
"b4w_reflection_inheritance"in n||(n.b4w_reflection_inheritance="PARENT",b("particle_settings",n,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in n||(n.b4w_vcol_from_name="",b("particle_settings",n,"b4w_vcol_from_name")),"b4w_vcol_to_name"in n||(n.b4w_vcol_to_name="",b("particle_settings",n,"b4w_vcol_to_name")),"b4w_coordinate_system"in n||(n.b4w_coordinate_system="LOCAL",b("particle_settings",n,"b4w_coordinate_system")),"b4w_allow_nla"in n||(n.b4w_allow_nla=!0,b("particle_settings",n,"b4w_allow_nla")),
"b4w_enable_soft_particles"in n||(n.b4w_enable_soft_particles=!1,b("particle_settings",n,"b4w_enable_soft_particles")),"b4w_particles_softness"in n||(n.b4w_particles_softness=1,b("particle_settings",n,"b4w_particles_softness")),"billboard_tilt"in n||(n.billboard_tilt=0,b("particle_settings",n,"billboard_tilt")),"billboard_tilt_random"in n||(n.billboard_tilt_random=0,b("particle_settings",n,"billboard_tilt_random")),"use_rotations"in n||(n.use_rotations=!1,b("particle_settings",n,"use_rotations"));
"constraints"in d||(d.constraints=[],b("object",d,"constraints"));e=d.constraints;for(l=0;l<e.length;l++)g=e[l],"influence"in g||(g.influence=1),"axes"in g||(g.axes=[1,1,1]);e=d.modifiers;for(l=0;l<e.length;l++){a:{g=e[l];switch(g.type){case "ARRAY":if(!("fit_type"in g)){y.error("WARNING Incomplete modifier "+String(g.type)+' for "'+d.name+'", reexport "'+a.b4w_filepath_blend+'" scene');g=!1;break a}}g=!0}g||(e.splice(l,1),l--)}"animation_data"in d||(d.animation_data={action:null,nla_tracks:[]},b("object",
d,"animation_data"));d.animation_data&&("action"in d.animation_data||(d.animation_data.action=null,h("no action in animation data "+d.name)),"nla_tracks"in d.animation_data||(d.animation_data.nla_tracks=[],h("no NLA in animation data "+d.name)),c(d.animation_data));"b4w_collision_id"in d||(d.b4w_collision_id="",b("object",d,"b4w_collision_id"));"b4w_viewport_alignment"in d||(d.b4w_viewport_alignment=null,b("object",d,"b4w_viewport_alignment"));"pinverse_tsr"in d||(d.pinverse_tsr=null,b("object",d,
"pinverse_tsr"));"b4w_cluster_data"in d||(d.b4w_cluster_data={cluster_id:-1,cluster_center:null},b("object",d,"b4w_cluster_data"));"pass_index"in d||(d.pass_index=0,b("object",d,"pass_index"));"b4w_custom_prop"in d||(b("object",d,"b4w_custom_prop"),d.b4w_custom_prop=null);(0>d.scale[0]||0>d.scale[1]||0>d.scale[2])&&h('negative scale for object "'+d.name+'", can lead to some errors');l=d.scale;0==l[0]&&0==l[1]&&0==l[2]?l=!0:(e=Math.abs((l[1]-l[2])/l[1]),l=.005>Math.abs((l[0]-l[1])/l[0])&&.005>e);l||
h("non-uniform scale for object "+d.name)}for(var w in D)k=D[w],l=w.match(/.*?(?=>>|$)/i)[0],y.warn('Property "'+String(l)+'" is '+k.jQ+' for "'+k.type+'". To fix this, reexport '+a.b4w_filepath_blend)};a.RW=function(a,b){"num_channels"in a||(a.num_channels=1,h('B4W Warning: no channels number in animation fcurve for "'+b.name+'" action, reexport scene'))};a.$V=function(a){var b;a:{b=a.modifiers;for(var c=0;c<b.length;c++){var h=b[c].type;if("ARRAY"==h||"CURVE"==h){b=!0;break a}}b=!1}if(!b)return null;
b=G(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":for(var h=b,k=f,d=0,n=0,m=0,p=new Float32Array(16),f=[],t=1;t<k.count;t++){k.use_constant_offset&&(d+=k.constant_offset_displace[0],n+=k.constant_offset_displace[1],m+=k.constant_offset_displace[2]);if(k.use_relative_offset)var v=h.b4w_boundings.bb,d=d+(v.max_x-v.min_x)*k.relative_offset_displace[0],n=n+(v.max_y-v.min_y)*k.relative_offset_displace[1],m=m+(v.max_z-v.min_z)*k.relative_offset_displace[2];
J.B4(d,n,m,p);for(var A=v=G(h),u=p,D=l.fromMat4(u,M),D=x.fromMat3(D,S),K=0;K<A.submeshes.length;K++){var F=A.submeshes[K];J.Ur(F.position,u,F.position,0);P.OG(F.tbn,D,F.tbn)}f.push(v)}for(t=0;t<f.length;t++)for(k=h,d=f[t],n=0;n<k.submeshes.length;n++)if(m=k.submeshes[n],p=d.submeshes[n],v=m.base_length,A=m.indices.length,v)for(var I in m)switch(I){case "base_length":m[I]+=p[I];break;case "boundings":break;case "indices":m[I]=J.G4(m[I],p[I]);for(u=A;u<m[I].length;u++)m[I][u]+=v;break;case "position":m[I]=
q(m[I],p[I],m[I].length/v/3);break;case "tbn":m[I]=q(m[I],p[I],m[I].length/v/4);break;case "shade_tangs":m[I]=q(m[I],p[I],m[I].length/v/3);break;case "group":m[I]=q(m[I],p[I],m[I].length/v);break;case "texcoord":m[I]=q(m[I],p[I],m.uv_layers.length);break;case "color":m[I]=q(m[I],p[I],m.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:y.warn('array_mesh_join(): unknown submesh property "'+I+'"'),m[I]=J.MM(m[I],p[I])}break;case "CURVE":for(h=b,t=g.cY(f.object),k=new Float32Array(16),
n=t.Lm?4:3,d=new Float32Array(n),n=new Float32Array(n),m=new Float32Array(3),p=new Float32Array(4),v=new Float32Array(4),A=new Float32Array(3),u=new Float32Array(3),D=new Float32Array(3),K=0;K<h.submeshes.length;K++){var B=h.submeshes[K],F=B.position,B=B.tbn,Z;a:{Z=f.deform_axis;switch(Z){case "POS_X":case "NEG_X":Z=0;break a;case "POS_Y":case "NEG_Y":Z=1;break a;case "POS_Z":case "NEG_Z":Z=2;break a;default:J.J("Wrong deform axis value "+Z)}Z=void 0}A[0]=0;A[1]=0;A[2]=0;A[Z]=1;for(var ea=g.h4(t),
Aa=0;Aa<F.length/3;Aa++){D[0]=F[3*Aa];D[1]=F[3*Aa+1];D[2]=F[3*Aa+2];var da=D[Z],ba=g.g4(t,da);g.i4(t,ba,d);m[0]=d[0];m[1]=d[1];m[2]=d[2];g.f4(t,ba,n);u[0]=n[0];u[1]=0;u[2]=n[2];L.normalize(u,u);x.rotationTo(A,u,p);0>da?(d[0]=u[0],d[1]=u[1],d[2]=u[2],L.scale(d,da,d),L.add(m,d,m)):da>ea&&(d[0]=u[0],d[1]=u[1],d[2]=u[2],L.scale(d,da-ea,d),L.add(m,d,m));e.fromRotationTranslation(p,m,k);t.Lm&&(x.setAxisAngle(A,d[3],v),L.transformQuat(D,v,D));D[Z]=0;L.transformMat4(D,k,D);F[3*Aa]=D[0];F[3*Aa+1]=D[1];F[3*
Aa+2]=D[2];da=P.Io(B,Aa,E);P.OG(da,p,da);P.lk(B,da,Aa)}}}w.r2(b)}return b};a.eW=function(a,b){function c(b,c){for(var d in b){var e=b[d],f=e[0];if(1<e.length)for(var g=1;g<e.length;g++)f+="*"+e[g];for(g=0;g<a.length;g++)if(e=a[g],e.name==f)for(var h in c)e[h]=c[h]}}for(var e=b.b4w_logic_nodes,f=0;f<e.length;f++)for(var g=e[f],d=0;d<g.length;d++){var k=g[d],l={register1:"variable1",register2:"variable2",registerd:"variabled"},m;for(m in l)m in k&&(k[l[m]]=k[m]);for(var p in k.variables)"boolean"!=
typeof k.variables[p][0]&&(k.variables[p]=[!1,k.variables[p]]);0<=["MATH","CONDJUMP","PAGEPARAM","REGSTORE"].indexOf(k.type)&&("variable1"in k&&(k.variables.v1=[!1,k.variable1]),"variable2"in k&&(k.variables.v2=[!1,k.variable2]),"variabled"in k&&(k.variables.vd=[!1,k.variabled]));switch(k.type){case "SELECT":for(var q=0;q<a.length;q++)l=a[q],l.name==k.object&&(l.b4w_selectable=!0);k.bools||(k.bools={});k.bools.not_wait||(k.bools.not_wait=!1);h('Logic nodes type "SELECT" is deprecated');break;case "SWITCH_SELECT":c(k.objects_paths,
{b4w_selectable:!0});if(k.links instanceof Array){h('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');var l={},w=0;for(q in k.objects_paths)l[q]=k.links[w],w++;k.links=l}break;case "SELECT_PLAY":h('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+b.name+'"');k.mute=!0;break;case "SELECT_PLAY_ANIM":h('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":k.bools||(k.bools={}),void 0===
k.bools.ch&&(k.bools.ch=!1);case "HIDE":c(k.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":c(k.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":c(k.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":c(k.objects_paths,{b4w_do_not_batch:!0});switch(k.common_usage_names.space_type){case "WORLD":k.common_usage_names.space_type=I.nU;break;case "PARENT":k.common_usage_names.space_type=I.mU;break;case "LOCAL":k.common_usage_names.space_type=
I.lU}break;case "OUTLINE":c(k.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":k.condition&&(k.common_usage_names.condition=k.condition);if("cnd"in k.floats)k.common_usage_names.condition=k.floats.cnd;else switch(k.common_usage_names.condition){case "GEQUAL":k.common_usage_names.condition=I.CJ;break;case "LEQUAL":k.common_usage_names.condition=I.EJ;break;case "GREATER":k.common_usage_names.condition=I.DJ;break;case "LESS":k.common_usage_names.condition=I.FJ;break;case "NOTEQUAL":k.common_usage_names.condition=
I.GJ;break;case "EQUAL":k.common_usage_names.condition=I.BJ}void 0!=k.number1&&(k.input1=k.number1);void 0!=k.number2&&(k.input2=k.number2);k.bools||(k.bools={});void 0===k.bools.str&&(k.bools.str=!1,k.floats.inp1=k.input1,k.floats.inp2=k.input2);break;case "SEND_REQ":k.bools||(k.bools={});k.strings||(k.strings={});void 0===k.bools.ct&&(k.bools.ct=!1);void 0!=k.url&&(k.bools.url=!1,k.strings.url=k.url);break;case "MATH":void 0!=k.number1&&(k.input1=k.number1);void 0!=k.number2&&(k.input2=k.number2);
void 0!=k.input1&&(k.floats.inp1=k.input1);void 0!=k.input2&&(k.floats.inp2=k.input2);switch(k.operation){case "DIV":k.operation=I.TT;break;case "SUB":k.operation=I.bU;break;case "MUL":k.operation=I.YT;break;case "ADD":k.operation=I.OT;break;case "RAND":k.operation=I.ZT;break;case "SIN":k.operation=I.aU;break;case "COS":k.operation=I.ST;break;case "TAN":k.operation=I.cU;break;case "ARCSIN":k.operation=I.QT;break;case "ARCCOS":k.operation=I.PT;break;case "ARCTAN":k.operation=I.RT;break;case "LOG":k.operation=
I.UT;break;case "MIN":k.operation=I.WT;break;case "MAX":k.operation=I.VT;break;case "ROUND":k.operation=I.$T;break;case "MOD":k.operation=I.XT;break;case "ABS":k.operation=I.NT}break;case "REGSTORE":k.floats||(k.floats={});k.strings||(k.strings={});void 0!=k.number1&&(k.input1=k.number1);if(void 0!=k.input1)switch(typeof k.input1){case "number":k.floats.inp1=k.input1;k.common_usage_names.variable_type="NUMBER";break;default:k.strings.inp1=k.input1,k.common_usage_names.variable_type="STRING"}switch(k.common_usage_names.variable_type){case "NUMBER":k.common_usage_names.variable_type=
I.oU;break;case "STRING":k.common_usage_names.variable_type=I.pU}break;case "PAGEPARAM":k.bools||(k.bools={});void 0===k.bools.hsh&&(k.bools.hsh=!1);k.floats||(k.floats={});void 0===k.floats.ptp&&(k.floats.ptp=0);break;case "PLAY_ANIM":c(k.objects_paths,{b4w_do_not_batch:!0});k.bools||(k.bools={});void 0===k.bools.env&&(k.bools.env=!1);(l=k.common_usage_names.param_anim_behavior)||(l="FINISH_STOP");k.common_usage_names.param_anim_behavior=v.$D(l);break;case "STOP_ANIM":k.bools||(k.bools={});void 0===
k.bools.env&&(k.bools.env=!1);break;case "STRING":switch(k.common_usage_names.string_operation){case "JOIN":k.common_usage_names.string_operation=I.iU;break;case "FIND":k.common_usage_names.string_operation=I.hU;break;case "REPLACE":k.common_usage_names.string_operation=I.jU;break;case "SPLIT":k.common_usage_names.string_operation=I.kU;break;case "COMPARE":k.common_usage_names.string_operation=I.gU}if("cnd"in k.floats)k.common_usage_names.condition=k.floats.cnd;else switch(k.common_usage_names.condition){case "GEQUAL":k.common_usage_names.condition=
I.CJ;break;case "LEQUAL":k.common_usage_names.condition=I.EJ;break;case "GREATER":k.common_usage_names.condition=I.DJ;break;case "LESS":k.common_usage_names.condition=I.FJ;break;case "NOTEQUAL":k.common_usage_names.condition=I.GJ;break;case "EQUAL":k.common_usage_names.condition=I.BJ}break;case "REDIRECT":void 0!=k.url&&(k.bools.url=!1,k.strings.url=k.url);break;case "SET_CAMERA_MOVE_STYLE":switch(k.common_usage_names.camera_move_style){case "STATIC":k.common_usage_names.camera_move_style=I.JT;break;
case "TARGET":k.common_usage_names.camera_move_style=I.KT;break;case "EYE":k.common_usage_names.camera_move_style=I.HT;break;case "HOVER":k.common_usage_names.camera_move_style=I.IT}break;case "ENTRYPOINT":k.bools||(k.bools={});void 0===k.bools.js&&(k.bools.js=!1);k.bools.js&&(k.mute=!0);break;case "JS_CALLBACK":for(m in k=k.common_usage_names.js_cb_params,k)switch(k[m]){case "OBJECT":k[m]=I.LT;break;case "VARIABLE":k[m]=I.MT}}}}};b4w.module.__curve=function(a,u){function m(a,b,c,e,h){var g=e.length;h||(h=new Float32Array(g));for(var m=g+a,q=new Float32Array(m),p=1;p<=m-1;p++)q[p-1]=b>=c[p-1]&&b<c[p+1-1]?1:0;for(var l=2;l<=a;l++)for(p=1;p<=m-l;p++)q[p-1]=(q[p-1]?(b-c[p-1])*q[p-1]/(c[p+l-1-1]-c[p-1]):0)+(q[p+1-1]?(c[p+l-1]-b)*q[p+1-1]/(c[p+l-1]-c[p+1-1]):0);b==c[m-1]&&(q[g-1]=1);a=0;for(p=1;p<=g;p++)a+=q[p-1]*e[p-1];for(p=1;p<=g;p++)h[p-1]=a?q[p-1]*e[p-1]/a:0;return h}function c(a){a=a.sA;return a[a.length-1]}function b(a){a=
a.lM;return a[a.length-1]}function p(a,b,c,e,m,q,u,J){var g=a+(b-a)/2,l=h(g,e,m,q,u)-c;J=J?J:.01;return Math.abs(l)<J?g:0<l?p(a,g,c,e,m,q,u,J):p(g,b,c,e,m,q,u,J)}function h(a,b,c,e,h){var g=1-a;return b*g*g*g+3*c*g*g*a+3*e*g*a*a+h*a*a*a}var G=u("__util"),q=u("__vec3");a.cY=function(a){var b={},c=a.data;a=c.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var e=a.order_u;b.order=e;a=a.points;var h=a.length/5,p=[],q=h+e,h=h+2;p[0]=0;for(var w=2;w<=q;w++)p[w-1]=w>e&&w<h?p[w-2]+1:p[w-
2];b.sA=p;"2D"==c.dimensions?b.Lm=!1:"3D"==c.dimensions?b.Lm=!0:G.J("Wrong curve dimensions");e=[];p=[];for(c=0;c<a.length;c+=5)e.push(a[c]),e.push(a[c+1]),e.push(a[c+2]),b.Lm&&e.push(a[c+3]),p.push(a[c+4]);b.LE=e;b.WI=p;a=[];for(var c=b.LE,e=b.Lm?4:3,p=b.WI,q=b.sA,h=b.order,w=c.length/e,u=w+h,l=0,I=q[u-1]/999,v=0;1E3>v;v++){5E-6>q[u-1]-l&&(l=q[u-1]);for(var K=m(h,l,q,p),k=0;k<e;k++)for(var D=a[e*v+k]=0;D<w;D++)a[e*v+k]+=K[D]*c[e*D+k];l+=I}e=b.Lm?4:3;p=new Float32Array(1E3);p[0]=0;for(c=1;1E3>c;c+=
1)q=a[(c-1)*e],h=a[(c-1)*e+1],w=a[(c-1)*e+2],u=a[c*e],l=a[c*e+1],I=a[c*e+2],p[c]=p[c-1]+Math.sqrt((u-q)*(u-q)+(l-h)*(l-h)+(I-w)*(I-w));b.lM=p;return b};a.i4=function(a,b,g){g||(g=[]);b=Math.min(b,c(a));var e=a.LE,h=a.Lm?4:3,p=a.WI,q=a.sA,w=a.order;a=e.length/h;var u=a+w;5E-6>q[u-1]-b&&(b=q[u-1]);u=new Float32Array(a);m(w,b,q,p,u);for(b=0;b<h;b++)for(p=g[b]=0;p<a;p++)g[b]+=u[p]*e[h*p+b]};a.f4=function(a,b,c){c||(c=[]);var e=a.LE,g=a.Lm?4:3,h=a.WI,m=a.sA,p=a.order;a=e.length/g;var q=a+p;5E-6>m[q-1]-
b&&(b=m[q-1]);var q=new Float32Array(a),l=b;b=q;var w=h.length;b||(b=new Float32Array(w));var v=new Float32Array(w),u=new Float32Array(w),k=v,A=u;k||(k=new Float32Array(w));A||(A=new Float32Array(w));for(var G=w+p,E=new Float32Array(G),S=new Float32Array(G),F=1;F<=G-1;F++)E[F-1]=l>=m[F-1]&&l<m[F+1-1]?1:0;l==m[G-1]&&(E[w-1]=1);for(var z=2;z<=p;z++)for(F=1;F<=G-z;F++){var C=E[F-1]?E[F-1]/(m[F+z-1-1]-m[F-1]):0,r=E[F+1-1]?-E[F+1-1]/(m[F+z-1]-m[F+1-1]):0,f=S[F-1]?(l-m[F-1])*S[F-1]/(m[F+z-1-1]-m[F-1]):
0,W=S[F+1-1]?(m[F+z-1]-l)*S[F+1-1]/(m[F+z-1]-m[F+1-1]):0;E[F-1]=(E[F-1]?(l-m[F-1])*E[F-1]/(m[F+z-1-1]-m[F-1]):0)+(E[F+1-1]?(m[F+z-1]-l)*E[F+1-1]/(m[F+z-1]-m[F+1-1]):0);S[F-1]=C+r+f+W}for(F=1;F<=w;F++)k[F-1]=E[F-1],A[F-1]=S[F-1];m=0;for(p=1;p<=w;p++)m+=v[p-1]*h[p-1];l=0;for(p=1;p<=w;p++)l+=u[p-1]*h[p-1];for(p=1;p<=w;p++)b[p-1]=m?u[p-1]*h[p-1]/m+v[p-1]*h[p-1]*l/(m*m):0;for(h=0;h<g;h++)for(m=c[h]=0;m<a;m++)c[h]+=q[m]*e[g*m+h]};a.Zda=c;a.h4=b;a.g4=function(a,h){if(0>=h)return 0;var g=c(a);if(h>=b(a))return g;
var e=a.lM,m=G.Rx(e,h,0,e.length-1);return g*(m+(h-e[m])/(e[m+1]-e[m]))/1E3};a.zA=function(a,b,c,e,h){return c+(h-e)*(a-c)/(b-e)};a.XO=function(a,b,c){var e=b[0];b=b[1];c=(c[1]-b)/(c[0]-e);return c*a+(b-c*e)};a.RK=function(a,b,c,e,m,q){return h(p(0,1,a,b[0],c[0],e[0],m[0],q),b[1],c[1],e[1],m[1])};a.rE=function(a,b,c,e,h){var g=new Float32Array(3),m=new Float32Array(3),p=new Float32Array(3),w=new Float32Array(3),l=new Float32Array(3),y=new Float32Array(3);q.copy(a[1],m);null==b?(q.copy(c[1],p),g[0]=
2*m[0]-p[0],g[1]=2*m[1]-p[1]):q.copy(b[1],g);null==c?(q.copy(b[1],g),p[0]=2*m[0]-g[0],p[1]=2*m[1]-g[1]):q.copy(c[1],p);q.subtract(m,g,w);q.subtract(p,m,l);b=q.length(w);c=q.length(l);0==b&&(b=1);0==c&&(c=1);if("AUTO"==e||"AUTO"==h)if(y[0]=l[0]/c+w[0]/b,y[1]=l[1]/c+w[1]/b,g=2.5614*q.length(y))"AUTO"==e&&q.scaleAndAdd(m,y,-(b/g),a[0]),"AUTO"==h&&q.scaleAndAdd(m,y,c/g,a[2]);"VECTOR"==e&&q.scaleAndAdd(m,w,-1/3,a[0]);"VECTOR"==h&&q.scaleAndAdd(m,l,1/3,a[2])};a.yX=function(a,b,c,e){var g=[],h=[],m,p,q;
g[0]=a[0]-b[0];g[1]=a[1]-b[1];h[0]=e[0]-c[0];h[1]=e[1]-c[1];q=e[0]-a[0];m=Math.abs(g[0]);p=Math.abs(h[0]);m+p&&m+p>q&&(m=q/(m+p),b[0]=a[0]-m*g[0],b[1]=a[1]-m*g[1],c[0]=e[0]-m*h[0],c[1]=e[1]-m*h[1])}};b4w.module.__logic_nodes=function(a,u){function m(){return function(a,b,c,d){c=d[0];var e=d[1];d=d[2];if(-2==c.state){for(var f=0;f<c.FB;f++)if(k.kd(a,b,f))for(var g=0;g<c.EB.length;g++)if(c.EB[g]==f){e.ip==c.WR?(L.qr(e.Na)&&(c.state=-1),d.xh.hh||(c.state=1,c.cw=c.BA[g])):(c.state=1,c.cw=c.BA[g]);return}c.state=0}}}function c(){return function(a,b,c,d){c=d[0];var e=d[1];d=d[2];for(var f=0;f<c.FB;f++)if(k.kd(a,b,f)&&f==c.xQ){if(L.qr(e.Na)&&e.ip==c.WR)c.state=-1;else if(!d.xh.hh||c.R.no_wait)c.state=
1;return}c.state=0}}function b(a,b){return{name:a.name,type:a.type,label:a.label,Wa:a.slot_idx_order,cw:a.slot_idx_jump,Ha:a.frame_range[0],sb:a.frame_range[1],JZ:a.frame_range_mask?a.frame_range_mask[0]:!0,IZ:a.frame_range_mask?a.frame_range_mask[1]:!0,state:-1,FB:-1,xQ:-1,Q1:a.param_name,J1:a.operation,dc:a.mute,yu:a.object,pa:null,Cc:null,Pc:null,tb:{},Jh:a.anim_name,Yc:x.vt,T1:a.parse_json_vars,S1:a.parse_json_paths,ad:a.objects_paths,yP:a.nodes_paths,Ba:a.floats,R:a.bools,U:a.variables,Rl:a.strings,
xG:a.materials_names,pR:a.shader_nd_type,rd:a.common_usage_names,kZ:a.encode_json_vars,jZ:a.encode_json_paths,WR:b,UP:za[a.type]?za[a.type]:q,qB:!1,MC:0,EB:null,Y0:a.links,BA:[]}}function p(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function h(a,b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function G(a,b,c){switch(b.state){case 2:c.ya=a.Wa}}function q(a,b,c){switch(b.state){case 1:I.error("Unknown node type: "+a.type);break;case 2:c.ya=a.Wa}}function w(a){return l.Gc(l.cd,a.yu||[],0)}function A(a,c){var d=a.b4w_logic_nodes,
e=c.qf;c.state=1;for(var f=0;f<d.length;f++){var g={sa:[],xh:{vb:a,ya:0,hh:!1,xI:f,G:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}};e.push(g);for(var h=e[e.length-1],k=d[f],l=0;l<k.length;l++){var m=b(k[l],h);h.sa.push(m)}for(k=0;k<h.sa.length;k++)m=h.sa[k],m.dc||m.UP(m,c,g.xh,0,0)}var d=a.timeline_markers,n;for(n in d)c.dw.push(d[n]);c.dw.sort(function(a,b){return a-b});c.state=2;ha.push(c)}function g(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);default:return null}}function e(a){switch(typeof a){case "string":return g(a,
1);case "number":return g(a,0);default:return g(a,1)}}function y(a){ga[a]||(ga[a]=0);var b=a+"_"+ga[a],b=b.replace(/ /g,"_").replace(/\//g,"_");ga[a]++;return b}var x=u("__animation"),P=u("__assets"),J=u("__camera"),L=u("__nla"),l=u("__objects"),I=u("__print"),v=u("__scenes"),K=u("__config"),k=u("__controls"),D=u("__batch"),M=u("__geometry"),E=u("__mat3"),S=u("__mat4"),F=u("__physics"),z=u("__quat"),C=u("__sfx"),r=u("__time"),f=u("__transform"),W=u("__tsr"),d=u("__util"),n=u("__vec3"),X=new Float32Array(4),
R=new Float32Array(3),t=new Float32Array(3),fa=new Float32Array(2),la=new Float32Array(9),H=new Float32Array(16);a.oU=0;a.pU=1;a.TT=0;a.bU=1;a.YT=2;a.OT=3;a.ZT=4;a.aU=5;a.ST=6;a.cU=7;a.QT=8;a.PT=9;a.RT=10;a.UT=11;a.WT=12;a.VT=13;a.$T=14;a.XT=15;a.NT=16;a.iU=0;a.hU=1;a.jU=2;a.kU=3;a.gU=4;a.CJ=0;a.EJ=1;a.DJ=2;a.FJ=3;a.GJ=4;a.BJ=5;a.nU=0;a.mU=1;a.lU=2;a.JT=0;a.KT=1;a.HT=2;a.IT=3;a.LT=0;a.MT=1;var za={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.ya=a.Wa}},HIDE:function(a,b,c){switch(b.state){case 1:a.pa=
w(a);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:a.R.ch?v.Yt(a.pa,!0):v.io(a.pa,!0),c.ya=a.Wa}},SHOW:function(a,b,c){switch(b.state){case 1:a.pa=w(a);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:a.R.ch?v.Yt(a.pa,!1):v.io(a.pa,!1),c.ya=a.Wa}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.U.vd;b=b.G;var e=c.G,f;a:{f=a.Q1;var k=a.Ba.ptp,l=a.R.hsh,m=K.get("url_params");if(m&&f in m)f=Number(m[f]);
else{if(l=l?location.hash:location.search)for(l=l.slice(1).split("&"),m=0;m<l.length;m++){var n=l[m].split("=");if(1<n.length&&n[0]==f){f=g(n[1],k);break a}}f=0}}h(d,b,e,f);c.ya=a.Wa}},SWITCH_SELECT:function(a,b,c){switch(b.state){case 1:a:{c=b.qf[c.xI];var d=l.Gz();a.EB=[];a.BA=[];for(var e in a.ad){var f=l.Gc(l.cd,a.ad[e],0),g=d.indexOf(f);if(-1==g){I.error("logic script error: non-selectable object:",a.ad[e][a.ad[e].length-1]);break a}a.EB.push(g);a.BA.push(a.Y0[e])}a.state=-1;a.FB=d.length;e=
[];for(g=0;g<d.length;g++)e.push(k.wy(d[g],!1));d=m();k.ga(f,"LOGIC_NODES_SWITCH_SELECT_"+y(a.label),k.Ch,e,k.Jy,d,[a,b,c])}break;case 2:if(-1==a.state){b=b.qf[c.xI].sa;for(f=0;f<b.length;f++)d=b[f],"SWITCH_SELECT"==d.type&&(d.state=-1);a.state=-2}if(0==a.state||1==a.state)c.ya=a.state?a.cw:a.Wa,a.state=-1}},SELECT:function(a,b,d){switch(b.state){case 1:d=b.qf[d.xI];var e=w(a),f=l.Gz(),g=f.indexOf(e);if(-1==g)I.error("logic script error: non-selectable object:",a.yu[a.yu.length-1]);else{a.state=-1;
a.FB=f.length;a.xQ=g;for(var g=[],h=0;h<f.length;h++)g.push(k.wy(f[h],!1));f=c();k.ga(e,"LOGIC_NODES_SELECT_"+y(a.label),k.Ch,g,k.Jy,f,[a,b,d])}break;case 2:0==a.state||1==a.state?(d.ya=a.state?a.cw:a.Wa,a.state=-1):a.R.not_wait&&(d.ya=a.Wa)}},PLAY:function(a,b,c,e){switch(b.state){case 1:L.HR();a.state=-1;a.R.not_wait||(a.R.not_wait=!1);break;case 2:switch(a.state){case -1:if(L.qr(b.Na))if(b.ZE==b.ip&&c.hh)break;else{var f=b.ip;if(f){f.xh.ya=f.sa[f.xh.ya].Wa;f.sa[f.xh.ya].state=-1;for(var f=b.ip.sa,
g=0;g<f.length;g++){var h=f[g];"PLAY"==h.type&&(h.state=-1)}}}c.hh=!a.R.not_wait;b.ip=b.ZE;a.state=0;a.JZ&&(L.x3(a.Ha),L.$Q(e));if(a.IZ)L.TH(a.sb);else{e=L.wz(e);var f=-1,k;for(k in b.dw)if(e<b.dw[k]){f=k;break}0<=f?L.TH(b.dw[f]):L.TH(L.tN())}L.e2();a.R.not_wait&&(c.ya=a.Wa,a.state=-1,c.hh=!1);break;case 0:L.qr()||(c.ya=a.Wa,a.state=-1,c.hh=!1);break;case 1:c.ya=a.Wa;a.state=-1;b.ip=null;c.hh=!1;break;default:d.J("Unknown state of "+a.name),a.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=
a.R.url?g(p(a.U.url,b.G,c.G),1):a.Rl.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var e=-1==a.U.v1[1]?a.Ba.inp1:g(p(a.U.v1,b.G,c.G),0),f=-1==a.U.v2[1]?a.Ba.inp2:g(p(a.U.v2,b.G,c.G),0),k=0;switch(a.J1){case 3:k=e+f;break;case 2:k=e*f;break;case 1:k=e-f;break;case 0:0==f&&d.J("Division by zero in Logic script");k=e/f;break;case 4:k=Math.random()*(f-e)+e;break;case 5:k=Math.sin(e);break;case 6:k=Math.cos(e);break;case 7:k=Math.tan(e);break;case 8:k=Math.asin(e);break;case 9:k=Math.acos(e);
break;case 10:k=Math.atan(e);break;case 11:k=Math.log(e);break;case 12:k=Math.min(e,f);break;case 13:k=Math.max(e,f);break;case 14:k=Math.round(e);break;case 15:k=e%f;break;case 16:k=Math.abs(e)}h(a.U.vd,b.G,c.G,k);c.ya=a.Wa}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=a.R.str?1:0,e=a.R.str?a.Rl:a.Ba,f=-1==a.U.v1[1]?e.inp1:g(p(a.U.v1,b.G,c.G),d);b=-1==a.U.v2[1]?e.inp2:g(p(a.U.v2,b.G,c.G),d);d=!1;switch(a.rd.condition){case 5:f==b&&(d=!0);break;case 4:f!=b&&(d=!0);break;case 3:f<b&&(d=!0);
break;case 2:f>b&&(d=!0);break;case 1:f<=b&&(d=!0);break;case 0:f>=b&&(d=!0)}c.ya=d?a.cw:a.Wa}},REGSTORE:function(a,b,c){switch(b.state){case 2:h([a.R.gl||a.U.vd[0],a.U.vd[1]],b.G,c.G,(1==a.rd.variable_type?a.Rl:a.Ba).inp1),c.ya=a.Wa}},PLAY_ANIM:function(a,b,c){switch(b.state){case 1:a.pa=a.R.env?l.Lz(a.yu[0],0):w(a);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:switch(0!=a.state||x.qr(a.pa,a.Yc)||(a.state=1),a.state){case -1:for(var e in b.qf){var f=
b.qf[e].xh.ya;-1!=f&&(f=b.qf[e].sa[f],"PLAY_ANIM"==f.type&&f!=a&&0==f.state&&f.pa==a.pa&&(f.state=1))}b=a.rd.param_anim_behavior;if(""==a.Jh)x.xK(a.pa),x.KH(a.pa,b,x.vt);else{a:{e=a.pa;for(var f=a.Jh,g=-1,h=0;8>h;h++){var k=e.za[h];if(k&&k.Jk&&x.LR(k.Jk)==x.LR(f))if(-1!=g)g=h;else{e=-1;break a}}e=g}-1==e?(a.Yc=x.U3(a.pa,a.Jh),x.apply(a.pa,null,a.Jh,a.Yc)):a.Yc=e;x.KH(a.pa,b,a.Yc)}a.R.not_wait||(c.hh=!0);x.play(a.pa,null,a.Yc);a.state=0;a.R.not_wait&&(c.ya=a.Wa,a.state=-1);break;case 0:break;case 1:a.R.not_wait||
(c.hh=!1);c.ya=a.Wa;a.state=-1;break;default:d.J("Unknown state of "+a.name),a.state=-1}}},SELECT_PLAY:G,SEND_REQ:function(a,b,c){function d(a,d,e,f,g){a=JSON.stringify(a);h(g[0].U.dst,b.G,c.G,a);g[0].state=1}switch(b.state){case 2:switch(a.state){case -1:a.state=0;var e=a.R.url?g(p(a.U.url,b.G,c.G),1):a.Rl.url,f={};a.R.ct&&(f["Content-Type"]=a.Rl.ct);"GET"==a.rd.request_type?P.enqueue([{id:e,type:P.am,url:e,an:f,Qb:[a,c.G]}],d,null,null,null):"POST"==a.rd.request_type&&P.enqueue([{id:e,type:P.am,
url:e,an:f,jk:"POST",mB:g(p(a.U.dst1,b.G,c.G),1),Qb:[a,c.G]}],d,null,null,null);break;case 1:a.state=-1,c.ya=a.Wa}}},INHERIT_MAT:function(a,b,c){switch(b.state){case 1:for(b=0;2>b;b++)a.tb["id"+b]=l.Gc(l.cd,a.ad["id"+b],0),a.tb["id"+b]||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:l.k0(a.tb.id0,a.xG.id0,a.tb.id1,a.xG.id1),c.ya=a.Wa}},SET_SHADER_NODE_PARAM:function(a,b,c){switch(b.state){case 1:a.ad.id0&&(a.tb.id0=l.Gc(l.cd,a.ad.id0,0),a.ad.id0||(I.error("Logic script error: object not found. Node: ",
a.name),a.dc=!0),a.yP.id0.unshift(a.xG.id0));break;case 2:var d=a.tb.id0,e=a.yP.id0,f=e[0],h=D.Cm(d,f);c.ya=a.Wa;if(null===h)I.error('Material "'+f+'" was not found in the object "'+d.name+'".');else{if("ShaderNodeRGB"==a.pR){var k=l.IF(h.ki,e,1);l.QH(d,f,k,a.R.id0?g(p(a.U.id0,b.G,c.G),0):a.Ba.id0,a.R.id1?g(p(a.U.id1,b.G,c.G),0):a.Ba.id1,a.R.id2?g(p(a.U.id2,b.G,c.G),0):a.Ba.id2)}"ShaderNodeValue"==a.pR&&(k=l.JF(h.li,e),l.RH(d,f,k,a.R.id0?g(p(a.U.id0,b.G,c.G),0):a.Ba.id0))}}},DELAY:function(a,b,c,
d,e){switch(b.state){case 2:-1==a.state?(a.state=0,a.MC=0,c.hh=!0):0==a.state&&(a.MC+=e,(a.R.dl?g(p(a.U.dl,b.G,c.G),0):a.Ba.dl)<a.MC&&(a.state=-1,c.ya=a.Wa,c.hh=!1))}},APPLY_SHAPE_KEY:function(a,b,c){switch(b.state){case 1:b=a.tb.id0=l.Gc(l.cd,a.ad.id0,0);b||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);c=a.rd.sk;M.xE(b)?M.b0(b,c)||(I.error("Wrong key name:",c),a.dc=!0):(I.error("No shape keys in object:",b.name),a.dc=!0);break;case 2:M.zK(a.tb.id0,a.rd.sk,a.R.skv?g(p(a.U.skv,
b.G,c.G),0):a.Ba.skv),c.ya=a.Wa}},OUTLINE:function(a,b,c){switch(b.state){case 1:var d=a.tb.id0=l.Gc(l.cd,a.ad.id0,0);d||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);d&&d.v&&d.v.Ad||(I.error("Can't evaluate 'Outline' logic node: wrong object"),a.dc=!0);break;case 2:d=a.tb.id0;switch(a.rd.outline_operation){case "PLAY":b=d.v.ek;l.wq(d,b.Ym,b.Zm,b.$m);break;case "STOP":l.$t(d);break;case "INTENSITY":d.v.cj=a.R["in"]?g(p(a.U["in"],b.G,c.G),0):a.Ba["in"]}c.ya=a.Wa}},MOVE_CAMERA:function(a,
b,c){function e(a,b,c,d){switch(J.Ti(a)){case J.Ob:J.XH(a,b,c);break;case J.Vc:case J.Ie:f.mk(a,d);break;case J.dd:n.sub(c,b,R),n.normalize(R,R),J.YQ(a,c),t[0]=R[0],t[1]=0,t[2]=R[2],b=n.dot(t,R),c=Math.acos(b/(n.length(t)*n.length(R))),b=R[2]?Math.atan(R[0]/R[2]):0<R[0]?0:Math.PI,0<R[2]&&0<R[0]?fa[1]=-(Math.PI+fa[1]):0<R[2]&&0>R[0]?fa[1]=-(Math.PI+fa[1]):0>R[2]&&0>R[0]?(fa[0]+=Math.PI,b=-(Math.PI-b)):0>R[2]&&0<R[0]&&(fa[0]+=Math.PI,b-=Math.PI),J.C3(a,b+Math.PI,-c)}f.V(a);F.Z(a)}function h(a,b,c,e){S.lookAt(b,
c,d.fc,H);S.invert(H,H);E.fromMat4(H,la);z.fromMat3(la,X);z.normalize(X,X);a=W.ge(a.v.C);W.si(b,a,X,e)}switch(b.state){case 1:var k=null,k=a.tb.ca=l.Gc(l.cd,a.ad.id0,0);k||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);a.tb.tr=l.Gc(l.cd,a.ad.id1,0);a.tb.tr||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);a.tb.ta=l.Gc(l.cd,a.ad.id2,0);a.tb.ta||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);a.state=-1;a.Pc={$R:new Float32Array(3),
ZR:new Float32Array(3),hG:new Float32Array(3),uI:new Float32Array(3),TR:new Float32Array(3),gG:new Float32Array(3),yn:new Float32Array(8),rk:new Float32Array(8),Yu:new Float32Array(8)};break;case 2:var m=a.tb.ca,k=W.W(a.tb.tr.v.C),q=W.W(a.tb.ta.v.C);switch(a.state){case -1:b=a.R.dur?g(p(a.U.dur,b.G,c.G),0):a.Ba.dur;if(0==b){h(m,k,q,a.Pc.rk);e(m,k,q,a.Pc.rk);c.ya=a.Wa;break}c=W.W(m.v.C);n.copy(c,a.Pc.$R);var w=J.Ti(m);w==J.dd?n.copy(m.v.Hc,a.Pc.uI):w==J.Ie||w==J.Vc?(W.copy(m.v.C,a.Pc.yn),h(m,k,q,a.Pc.rk)):
n.copy(m.v.pivot,a.Pc.uI);n.copy(k,a.Pc.ZR);n.copy(q,a.Pc.TR);a.state=0;var B=r.wj(0,1,1E3*b,function(b){v.Ua()&&(w==J.Ie||w==J.Vc?W.lr(a.Pc.yn,a.Pc.rk,d.nn(b),a.Pc.Yu):(a.Pc.gG=n.lerp(a.Pc.uI,a.Pc.TR,d.nn(b),a.Pc.gG),a.Pc.hG=n.lerp(a.Pc.$R,a.Pc.ZR,d.nn(b),a.Pc.hG)),e(m,a.Pc.hG,a.Pc.gG,a.Pc.Yu),1==b&&(a.state=1))});break;case 1:r.pm(B),a.state=-1,c.ya=a.Wa}}},SET_CAMERA_MOVE_STYLE:function(a,b,c){switch(b.state){case 1:var e;e=a.tb.ca=l.Gc(l.cd,a.ad.id0,0);e||(I.error("Logic script error: object not found. Node: ",
a.name),a.dc=!0);b=e.v;a.fL={pk:b.pk,use_panning:b.use_panning,hc:b.hc,Ya:b.Ya,Kb:b.Kb,wd:b.wd,xd:b.xd,he:b.he,Qh:b.Qh};break;case 2:e=a.tb.ca;var h=e.v,k=a.fL;J.Hw(e);switch(a.rd.camera_move_style){case 0:h.yb=J.Ie;break;case 2:h.yb=J.Vc;var m=W.W(h.C);J.M3(e,m,null,k.hc,k.Ya);break;case 3:h.yb=J.dd;var m=W.W(h.C),n=R;a.R.pvo?(n=l.Gc(l.cd,a.ad.id1,0),n=W.W(n.v.C)):(n[0]=a.R.pvx?g(p(a.U.pvx,b.G,c.G),0):a.Ba.pvx,n[1]=a.R.pvy?g(p(a.U.pvy,b.G,c.G),0):a.Ba.pvy,n[2]=a.R.pvz?g(p(a.U.pvz,b.G,c.G),0):a.Ba.pvz);
J.mR(e,m,n,k.Kb,k.Ya,k.wd,k.xd,k.Qh);break;case 1:h.yb=J.Ob,m=W.W(h.C),n=R,a.R.pvo?(n=l.Gc(l.cd,a.ad.id1,0),n=W.W(n.v.C)):(n[0]=a.R.pvx?g(p(a.U.pvx,b.G,c.G),0):a.Ba.pvx,n[1]=a.R.pvy?g(p(a.U.pvy,b.G,c.G),0):a.Ba.pvy,n[2]=a.R.pvz?g(p(a.U.pvz,b.G,c.G),0):a.Ba.pvz),J.nR(e,m,n,k.hc,k.Ya,k.Kb,k.he,k.use_panning)}t[0]=a.R.vtr?g(p(a.U.vtr,b.G,c.G),0):a.Ba.vtr;t[1]=a.R.vro?g(p(a.U.vro,b.G,c.G),0):a.Ba.vro;t[2]=a.R.vzo?g(p(a.U.vzo,b.G,c.G),0):a.Ba.vzo;t[0]=d.ja(t[0],0,Infinity);t[1]=d.ja(t[1],0,Infinity);t[2]=
d.ja(t[2],0,.99);h.Ps=t[0];h.Os=t[1];h.Qs=t[2];f.V(e);F.Z(e);J.kr(e);c.ya=a.Wa}},SET_CAMERA_LIMITS:function(a,b,c){switch(b.state){case 1:var d;d=a.tb.ca=l.Gc(l.cd,a.ad.id0,0);d||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);c=d.v;a.fL={pk:c.pk,use_panning:c.use_panning,hc:c.hc,Ya:c.Ya,Kb:c.Kb,wd:c.wd,xd:c.xd,he:c.he,Qh:c.Qh};break;case 2:d=a.tb.ca;switch(d.v.yb){case J.Ob:if(a.R.dsl){var e=a.R.dslmin?g(p(a.U.dslmin,b.G,c.G),0):a.Ba.dslmin,h=a.R.dslmax?g(p(a.U.dslmax,b.G,
c.G),0):a.Ba.dslmax,k={};k.min=Math.max(e,0);k.max=Math.max(h,0);J.JQ(d,k)}a.R.vrl&&(e=a.R.vrldown?g(p(a.U.vrldown,b.G,c.G),0):a.Ba.vrldown,h=a.R.vrlup?g(p(a.U.vrlup,b.G,c.G),0):a.Ba.vrlup,k={},k.down=e,k.up=h,k.camera_space="CAMERA"==a.rd.cam_lim_vert_rot_space_type,J.TB(d,k));a.R.hrl&&(e=a.R.hrlleft?g(p(a.U.hrlleft,b.G,c.G),0):a.Ba.hrlleft,h=a.R.hrlright?g(p(a.U.hrlright,b.G,c.G),0):a.Ba.hrlright,k={},k.left=e,k.right=h,k.camera_space="CAMERA"==a.rd.cam_lim_hor_rot_space_type,J.MB(d,k));a.R.pvl&&
(e=a.R.pvlmin?g(p(a.U.pvlmin,b.G,c.G),0):a.Ba.pvlmin,b=a.R.pvlmax?g(p(a.U.pvlmax,b.G,c.G),0):a.Ba.pvlmax,k={},k.min_z=e,k.max_z=b,J.cR(d,k));break;case J.dd:a.R.htl&&(e=a.R.htlmin?g(p(a.U.htlmin,b.G,c.G),0):a.Ba.htlmin,h=a.R.htlmax?g(p(a.U.htlmax,b.G,c.G),0):a.Ba.htlmax,k={},k.min=e,k.max=h,J.XQ(d,k));a.R.vtl&&(e=a.R.vtlmin?g(p(a.U.vtlmin,b.G,c.G),0):a.Ba.vtlmin,h=a.R.vtlmax?g(p(a.U.vtlmax,b.G,c.G),0):a.Ba.vtlmax,k={},k.min=e,k.max=h,J.iR(d,k));a.R.vrl&&(e=a.R.vrldown?g(p(a.U.vrldown,b.G,c.G),0):
a.Ba.vrldown,h=a.R.vrlup?g(p(a.U.vrlup,b.G,c.G),0):a.Ba.vrlup,k={},k.down=e,k.up=h,k.camera_space="CAMERA"==a.rd.cam_lim_vert_rot_space_type,J.bA(d,k));a.R.dsl&&(e=a.R.dslmin?g(p(a.U.dslmin,b.G,c.G),0):a.Ba.dslmin,h=a.R.dslmax?g(p(a.U.dslmax,b.G,c.G),0):a.Ba.dslmax,k={},k.min=Math.max(e,0),k.max=Math.max(h,0),J.aA(d,k));break;case J.Vc:a.R.vrl&&(e=a.R.vrldown?g(p(a.U.vrldown,b.G,c.G),0):a.Ba.vrldown,h=a.R.vrlup?g(p(a.U.vrlup,b.G,c.G),0):a.Ba.vrlup,k={},k.down=e,k.up=h,k.camera_space="CAMERA"==a.rd.cam_lim_vert_rot_space_type,
J.TB(d,k)),a.R.hrl&&(e=a.R.hrlleft?g(p(a.U.hrlleft,b.G,c.G),0):a.Ba.hrlleft,h=a.R.hrlright?g(p(a.U.hrlright,b.G,c.G),0):a.Ba.hrlright,k={},k.left=e,k.right=h,k.camera_space="CAMERA"==a.rd.cam_lim_hor_rot_space_type,J.MB(d,k))}f.V(d);F.Z(d);c.ya=a.Wa}},MOVE_TO:function(a,b,c){function e(a,b){f.mk(a,b);f.V(a);F.Z(a)}switch(b.state){case 1:a.tb.ob=l.Gc(l.cd,a.ad.id0,0);a.tb.ob||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);a.tb.de=l.Gc(l.cd,a.ad.id1,0);a.tb.de||(I.error("Logic script error: object not found. Node: ",
a.name),a.dc=!0);a.state=-1;a.Cc={vM:new Float32Array(8),eF:new Float32Array(8),uO:new Float32Array(8)};break;case 2:var h=a.tb.ob;W.copy(a.tb.ob.v.C,a.Cc.vM);W.copy(a.tb.de.v.C,a.Cc.eF);switch(a.state){case -1:b=a.R.dur?g(p(a.U.dur,b.G,c.G),0):a.Ba.dur;if(0==b){e(h,a.Cc.eF);c.ya=a.Wa;break}a.state=0;var k=r.wj(0,1,1E3*b,function(b){v.Ua()&&(a.Cc.Xba=W.lr(a.Cc.vM,a.Cc.eF,d.nn(b),a.Cc.uO),e(h,a.Cc.uO),1==b&&(a.state=1))});break;case 1:r.pm(k),a.state=-1,c.ya=a.Wa}}},TRANSFORM_OBJECT:function(a,b,c){function e(a,
b,c){0==c?f.mk(a,b):f.SB(a,b);f.V(a);F.Z(a)}switch(b.state){case 1:a.tb.ob=l.Gc(l.cd,a.ad.id0,0);a.tb.ob||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);a.state=-1;a.Cc={nC:0,yn:new Float32Array(8),rk:new Float32Array(8),Yu:new Float32Array(8)};break;case 2:var h=a.tb.ob;switch(a.state){case -1:t[0]=a.R.trx?g(p(a.U.trx,b.G,c.G),0):a.Ba.trx;t[1]=a.R["try"]?g(p(a.U["try"],b.G,c.G),0):a.Ba["try"];t[2]=a.R.trz?g(p(a.U.trz,b.G,c.G),0):a.Ba.trz;R[0]=a.R.rox?g(p(a.U.rox,b.G,c.G),
0)*Math.PI/180:a.Ba.rox;R[1]=a.R.roy?g(p(a.U.roy,b.G,c.G),0)*Math.PI/180:a.Ba.roy;R[2]=a.R.roz?g(p(a.U.roz,b.G,c.G),0)*Math.PI/180:a.Ba.roz;var k=a.R.sc?p(a.U.sc,b.G,c.G):a.Ba.sc;d.bl(R,X);W.si(t,k,X,a.Cc.rk);a.Cc.nC=a.rd.space_type;switch(a.Cc.nC){case 0:f.Gm(h,a.Cc.yn);break;case 1:f.Su(h,a.Cc.yn);break;case 2:f.Su(h,a.Cc.yn),W.multiply(a.Cc.yn,a.Cc.rk,a.Cc.rk)}b=a.R.dur?g(p(a.U.dur,b.G,c.G),0):a.Ba.dur;if(0==b){e(h,a.Cc.rk,a.Cc.nC);c.ya=a.Wa;break}a.state=0;k=r.wj(0,1,1E3*b,function(b){v.Ua()&&
(W.lr(a.Cc.yn,a.Cc.rk,d.nn(b),a.Cc.Yu),e(h,a.Cc.Yu,a.Cc.nC),1==b&&(a.state=1))});break;case 1:r.pm(k),a.state=-1,c.ya=a.Wa}}},SPEAKER_PLAY:function(a,b,c){switch(b.state){case 1:a.pa=l.Gc(l.cd,a.ad.id0,0);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);void 0==a.R.not_wait&&(a.R.not_wait=!0);break;case 2:switch(C.mG(a.pa)||0!=a.state||(a.state=1),a.state){case -1:for(var e in b.qf){var f=b.qf[e].xh.ya;-1!=f&&(f=b.qf[e].sa[f],"SPEAKER_PLAY"==f.type&&f!=a&&0==f.state&&
f.pa==a.pa&&(f.state=1))}a.R.not_wait||(c.hh=!0);C.lB(a.pa);a.state=0;break;case 0:a.R.not_wait&&(c.ya=a.Wa,a.state=-1);break;case 1:a.R.not_wait||(c.hh=!1);c.ya=a.Wa;a.state=-1;break;default:d.J("Unknown state of "+a.name),a.state=-1}}},SPEAKER_STOP:function(a,b,c){switch(b.state){case 1:a.pa=l.Gc(l.cd,a.ad.id0,0);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:C.stop(a.pa),c.ya=a.Wa}},STOP_ANIM:function(a,b,c){switch(b.state){case 1:a.pa=a.R.env?l.Lz(a.yu[0],
0):w(a);a.pa||(I.error("Logic script error: object not found. Node: ",a.name),a.dc=!0);break;case 2:x.stop(a.pa,x.vt),a.R.rst&&x.k3(a.pa,x.vt),c.ya=a.Wa}},STOP_TIMELINE:function(a,b,c,d){switch(b.state){case 2:a.R.rst&&L.$Q(d),L.HR(),c.ya=a.Wa}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d={},e;for(e in a.U)d[a.U[e][1]]=p(a.U[e],b.G,c.G);I.log(a.rd.msg,JSON.stringify(d));c.ya=a.Wa}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.R.id0?g(p(a.U.id0,b.G,c.G),1):a.Rl.id0,e=a.R.id1?
g(p(a.U.id1,b.G,c.G),1):a.Rl.id1,f=0;switch(a.rd.string_operation){case 0:f=d+e;break;case 1:f=d.indexOf(e);break;case 2:f=d.replace(e,a.R.id2?g(p(a.U.id2,b.G,c.G),1):a.Rl.id2);break;case 3:var k=a.U,f=d.substring(0,d.indexOf(e));h(k.dst1,b.G,c.G,d.substring(d.indexOf(e)+1,d.length));""==p(k.dst,b.G,c.G)&&(f=p(k.dst1,b.G,c.G),h(k.dst1,b.G,c.G,""));break;case 4:switch(a.rd.condition){case 5:f=d==e?1:0;break;case 4:f=d!=e?1:0;break;case 3:f=d<e?1:0;break;case 2:f=d>e?1:0;break;case 1:f=d<=e?1:0;break;
case 0:f=d>=e?1:0}}h(a.U.dst,b.G,c.G,f);c.ya=a.Wa}},GET_TIMELINE:function(a,b,c,d){switch(b.state){case 2:d=a.R.nla?g(L.wz(d),0):g(r.wz(d),0),h(a.U.vd,b.G,c.G,d),c.ya=a.Wa}},JSON:function(a,b,c){function d(a,b,c,d){for(var f=0;f<b.length;f++){for(var g=b[f].split("."),h=a,k=c[f],l=0;l<g.length&&(h=h[g[l]],void 0!==h&&null!==h);l++);h=e(h);d[k]=h}}function f(a,b,c,d){d||(d={});for(var f=0;f<b.length;f++){var g=b[f].split("."),h=d,k=c[f];if(k in a){for(var l=0;l<g.length-1;l++)void 0===h[g[l]]&&(h[g[l]]=
isNaN(g[l+1])?{}:[]),h=h[g[l]];h[g[g.length-1]]=e(a[k])}}}switch(b.state){case 2:switch(a.rd.json_operation){case "PARSE":try{var k=JSON.parse(g(p(a.U.jsn,b.G,c.G),1));d(k,a.S1,a.T1,c.G)}catch(wa){I.error("logic script error: non valid JSON string")}break;case "ENCODE":k={},f(c.G,a.jZ,a.kZ,k),k=g(JSON.stringify(k),1),h(a.U.jsn,b.G,c.G,k)}c.ya=a.Wa}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var d=a.R.cb?g(p(a.U.cb,b.G,c.G),1):a.Rl.cb,f=[],k=0,m="id"+k,n=a.rd.js_cb_params;m in n;)m=0==
n[m]?l.Gc(l.cd,a.ad[m],0):p(a.U[m],b.G,c.G),f.push(m),k++,m="id"+k;n=[];k=0;for(m="out"+k;m in a.U;)m=p(a.U[m],b.G,c.G),n.push(m),k++,m="out"+k;k=1;if(d in ua){if(k=!ua[d](f,n))for(d=0;d<n.length;d++)m="out"+d,m in a.U&&h(a.U[m],b.G,c.G,e(n[d]))}else I.error("logic script error: no custom callback with id "+d);k&&(c.ya=a.Wa)}},EMPTY:G,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date,e,f,g,k,l;"L"==a.rd.time_type?(e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),k=d.getHours(),l=d.getMinutes(),
d=d.getSeconds()):(e=d.getUTCFullYear(),f=d.getUTCMonth(),g=d.getUTCDate(),k=d.getUTCHours(),l=d.getUTCMinutes(),d=d.getUTCSeconds());a.R.y&&h(a.U.y,b.G,c.G,e);a.R.M&&h(a.U.M,b.G,c.G,f);a.R.d&&h(a.U.d,b.G,c.G,g);a.R.h&&h(a.U.h,b.G,c.G,k);a.R.m&&h(a.U.m,b.G,c.G,l);a.R.s&&h(a.U.s,b.G,c.G,d);c.ya=a.Wa}},ELAPSED:function(a,b,c,d,e){switch(b.state){case 2:h(a.U.s,b.G,c.G,e),c.ya=a.Wa}}},ha=[],ua={},ga={};a.p0=function(a,b){var c={Le:b,vQ:a.name,state:0,ip:null,vb:a,ZE:null,qf:[],dw:[],G:{}};a.u8=c;A(a,
c)};a.update=function(a,b){var c=L.N_();if(!(0>=c))for(var d=0;d<ha.length;d++)for(var e=d,f=a,g=b,h=c,k=ha[e],l=0;l<ha[e].qf.length;l++){k.ZE=ha[e].qf[l];var m=ha[e].qf[l],n=k,p=f,q=g,t=h,r=m.sa;if(r.length){for(var v=0;v<r.length;v++)r[v].qB=!1;for(v=0;v<r.length;v++){if(0<=m.xh.ya)var w=r[m.xh.ya];else break;if(w.qB)break;if(w.dc)if("ENTRYPOINT"==w.type)break;else m.xh.ya=w.Wa,w.qB=!0;else w.UP(w,n,m.xh,p,q,t),w.qB=!0}}}};a.B8=function(a,b){ua[a]=b};a.Nca=function(a){delete ua[a]};a.cda=function(a,
b){for(var c=0;c<ha.length;c++)if(ha[c].vQ==a){for(var c=ha[c],d=0;d<c.qf.length;d++){var e=c.qf[d].sa[0];if(e.name==b){e.R.js&&(e.dc=!1);c.qf[d].xh.ya=0;break}}break}};a.Ja=function(){ha.length=0;ua={};ga={}}};b4w.module.__nla=function(a,u){function m(a,b){for(var c=e.b_(),g=[],h=0,k=0;k<a.length;k++){var l=a[k];""!=l.Ct?l=v.Oe("uuid",l.Ct,c):(l=l.Jh,l=v.Oe("name",l,c)||v.Oe("name",l+"_B4W_BAKED",c));if(l){var l=l.fcurves,m=[],f;for(f in l)m.push(f);g.push(m)}}for(k=0;k<g.length;k++){c=!1;for(f=0;f<k;f++)if(v.cW(g[k],g[f])){a[k].Yc=a[f].Yc;c=!0;break}c||(a[k].Yc=b+h++)}return h}function c(){return{type:"CLIP",Ha:0,sb:0,Hl:!1,paused:!1,Jh:"",Ct:"",Yc:0,Dr:null,im:0,Tn:0,FM:0,EM:0,DS:!1,scale:1,repeat:1,
nK:0}}function b(a,c,e){if(a.animation_data){var g=a.animation_data.nla_tracks;if(g)for(var h=0;h<g.length;h++)g[h].Dr=e,c.push(g[h])}a=a.nodes;for(h=0;h<a.length;h++)if(g=a[h],g.node_group){var k=g.node_group.node_tree;if(k){var l=e.slice();l.push(g.name);b(k,c,l)}}}function p(a,b){var c=Math.round(a)-b.Ha;b.Xl&&(c%=b.Dm,0>c&&(c+=b.Dm));return b.qc+c}function h(a,b){var c=(b-k)*I.fe()+a.qc;c>a.Ha?(c-=a.Ha,a.be&&(c%=a.sb-a.Ha+1),c+=a.Ha):c=a.Ha;return c}function G(a,b){a=v.ja(a,b.Ha,b.sb);var c=a==
b.sb?b.nK:b.im+(a-b.Ha)/b.scale%(b.Tn-b.im);b.DS&&(c=b.Tn-c+b.im);return c}function q(a,b){for(var e=[],g=0;g<a.length;g++){var h=a[g],k=h.strips;if(k)for(var l=0;l<k.length;l++){var m=k[l],f=c();f.type=m.type;f.Ha=m.frame_start;f.sb=m.frame_end;f.Yc=b;f.im=m.action_frame_start;f.Tn=m.action_frame_end;f.DS=m.use_reverse;f.scale=m.scale;f.repeat=m.repeat;m.action&&(f.Jh=m.action.name,f.Ct=m.action.uuid,f.Dr=h.Dr);e.push(f)}}return e}function w(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&a.data.animation_data&&
a.data.animation_data.nla_tracks.length?!0:!1}function A(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],e=c.se;if(c=c.zh&&e)a:{if(e.animation_data&&(c=e.animation_data.nla_tracks)&&c.length){c=!0;break a}e=e.nodes;for(c=0;c<e.length;c++);c=!1}if(c)return!0}return!1}function g(a,b){var c=J.N();if(c.Na){var e=h(c.Na,b);c.Na.qc-=e-a;c.Na.Zq=!0}}var e=u("__animation"),y=u("__objects"),x=u("__obj_util"),P=u("__print"),J=u("__scenes"),L=u("__sfx"),
l=u("__textures"),I=u("__time"),v=u("__util"),K=[],k=-1;a.Ds=function(a,e){for(var g,h=null,k=e.P.length-1;0<=k&&(g=e.P[k],!g.vb.b4w_use_nla||(h=g,!g.vb.jK));k--);if(g=h){g.DP=!0;h=0;if((k=a.animation_data)&&k.nla_tracks.length){var l=k.nla_tracks;if(x.$u(e)||x.pb(e)||x.mf(e)||x.mr(e)||x.bv(e)||x.nr(e)||x.Qm(e)||x.pl(e))l=q(l,h),l.length&&(e.zg=e.zg.concat(l),h++)}w(a)&&(l=a.data.animation_data.nla_tracks,l=q(l,h),l.length&&(e.zg=e.zg.concat(l),h++));if(x.mf(e))for(var p=e.Bc,k=0;k<p.length;k++){var r=
p[k];r.zh&&r.se&&(l=[],b(r.se,l,[r.name]),l=q(l,h),l.length&&(h+=m(l,h),e.zg=e.zg.concat(l)))}if(x.pl(e))a.use_nodes&&a.node_tree&&(l=[],b(a.node_tree,l,[a.name]),l=q(l,h),l.length&&(m(l,h),e.zg=e.zg.concat(l)));else{for(k=0;k<a.particle_systems.length;k++)l=a.particle_systems[k],p=l.settings,"EMITTER"==p.type&&p.b4w_allow_nla&&(p=c(),p.type="CLIP",p.Ha=g.vb.frame_start,p.sb=g.vb.frame_end+1,p.Jh=l.name,p.Yc=h,p.im=p.Ha,p.Tn=p.sb,e.zg.push(p),h++);g=h+1;for(k=0;k<e.Fd.length;k++)l=e.Fd[k],l.CV&&(h=
g,p=c(),p.type="CLIP",p.Ha=l.Ha,p.sb=l.sb,p.Jh=l.name,p.Yc=h,p.im=p.Ha,p.Tn=p.sb,e.zg.push(p))}}};a.o5=function(a,b,e){a.Na||(a.Na={Ha:a.frame_start,sb:a.frame_end,qc:0,hv:-1,Iv:a.frame_end,Jv:a.frame_start,Js:null,be:b,tb:[],qa:[],vQ:a.name,Rm:!1,Zq:!1,CH:!0},K.push(a.Na));b=a.Na;for(var g=y.KN(a,"ALL",e),h=0;h<g.length;h++){var k=g[h];if(k.zg.length){b.tb[e]||(b.tb[e]=[]);for(var l=0;l<k.P.length;l++){var m=k.P[l];m.vb==a&&m.DP&&b.tb[e].push(k)}for(var l=k.zg,m=b,f=k.name,p=0;p<l.length;p++){var d=
l[p];m.Ha>d.sb||m.sb<d.Ha?(P.warn("NLA: Strip is out of scene range: "+(f+" ["+d.Ha+":"+d.sb+"]")),l.splice(p,1),p--):d.Jh||"CLIP"!=d.type||(P.warn('NLA: no action in strip for object "'+f+'".'),l.splice(p,1),p--)}k=k.zg;l=b;for(m=0;m<k.length;m++){for(var f=k[m],p=l.Ha,d=l.sb+1,n=0;n<k.length;n++){var q=k[n];f.Yc==q.Yc&&(q.sb<=f.Ha&&(p=f.Ha),q.Ha>=f.sb&&(d=Math.min(d,q.Ha)))}f.FM=p;f.EM=d;f.nK=f.repeat%1?f.im+f.repeat%1*(f.Tn-f.im):f.Tn}}}a=a.I.Ss;for(h=0;h<a.length;h++)g=a[h].I,g.Cn&&(g.qb||g.ie)&&
g.Fw==e&&(k=c(),k.type="VIDEO",g.Xl?(k.Ha=0,k.sb=b.sb):(k.Ha=v.ja(g.Ha,0,b.sb),k.sb=v.ja(g.Ha+g.Dm,0,b.sb)),k.Jh=a[h].name,b.qa.push(g))};a.start=function(){k=0};a.N_=function(){return k};a.xaa=function(a){return a.Na?a.Na.qc:null};a.lda=function(a,b){return a.Na?(a.Na.qc=b,!0):!1};a.update=function(a,b){if(!(0>k)){0==k&&(k=a);for(var c=0;c<K.length;c++){var m=K[c];m.Rm&&(m.qc-=I.fe()*b);var q=h(m,a);if((!m.Rm||m.Zq)&&q>=m.Iv)if(m.be){var q=m,w=a;q.Js&&q.Js();g(q.Jv,w);q.CH=!0;q=h(q,w)}else{var w=
m,x=q;w.Rm=!0;w.qc-=x-w.Iv;w.Js&&w.Js()}if(!m.Rm||m.Zq){for(var w=m,x=q,r=0;r<w.tb.length;r++){var f=w.tb[r];if(f)for(var y=0;y<f.length;y++){for(var d=f[y],n=d.zg,u=0;u<n.length;u++){var A=n[u];"SOUND"==A.type&&x<w.hv-1E-6&&(A.Hl=!1)}for(u=0;u<n.length;u++)switch(A=n[u],A.type){case "CLIP":if(A.FM<=x&&x<A.EM&&!A.Hl){var r=d,t=A,J=t.Dr;""!=t.Ct?e.YV(r,J,t.Ct,t.Yc):e.apply(r,J,t.Jh,t.Yc);e.KH(r,e.bT,t.Yc);J=G(t.Ha,t);e.LB(r,J,t.Yc);for(r=0;r<n.length;r++)n[r]!=A&&n[r].Yc==A.Yc&&(n[r].Hl=!1);A.Hl=!0}A.Hl&&
(t=d,J=G(x,A),1E-6<Math.abs(J-e.kN(t,A.Yc))&&e.LB(t,J,A.Yc));break;case "SOUND":if((x<w.hv-1E-6||w.hv<A.Ha)&&A.Ha<=x&&x<A.sb&&!A.Hl){var t=d,D=A,J=(D.Ha-x)/I.fe(),D=(D.sb-D.Ha)/I.fe();L.play(t,J,D);A.Hl=!0}w.hv<A.sb&&A.sb<=x&&A.Hl&&(A.Hl=!1)}}}w=a;x=m;f=q;for(y=0;y<x.qa.length;y++)if(d=x.qa[y],d.qb||d.ie){n=l.OS(d);u=d;A=v.ja(p(f,u),u.qc,u.qc+l.PS(u)-1);u.ie&&(A=l.H5(u,A),A==u.Vv&&A--);u=A;A=l.QS(d);t=r=!1;if(x.Zq||x.CH)t=!0;x.Rm||(J=p(f,d),J=d.qc<=J&&J<=d.qc+l.PS(d),D=l.RS(d),d.Xl&&u==A&&(t=!0),
D||n==u||(t=!0),J&&!D?l.NP(d):J&&D?r=!0:!J&&D&&(d.qb&&n<u?r=!0:l.eH(d)));t?(l.m3(d,u),d.ie&&(d.hn=l.GB(d,w))):r&&l.SS(d)&&(d.qb?l.uS(d):(n=l.GB(d,w),n!=d.hn&&(d.Jl=u,l.tS(d)),d.hn=n))}m.hv=q}m.Zq=!1;m.CH=!1}}};a.Ja=function(a){if(0==a)K.length=0,k=-1;else for(var b=0;b<K.length;b++)K[b].tb[a]=null};a.ZK=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||w(a)||A(a)?!0:!1};a.LB=g;a.wz=function(a){var b=J.N();return b.Na?h(b.Na,a):-1};a.HR=function(){var a=J.N();if(a.Na){a.Na.Rm=!0;for(var a=
a.Na.qa,b=0;b<a.length;b++)l.eH(a[b])}};a.e2=function(){var a=J.N();a.Na&&(a.Na.Rm=!1,a.Na.Js=null)};a.yaa=function(){var a=J.N();return a.Na?a.Na.Ha:-1};a.tN=function(){var a=J.N();return a.Na?a.Na.sb:-1};a.qr=function(){var a=J.N();return a.Na?!a.Na.Rm:!1};a.m9=function(){var a=J.N();return a.Na?a.b4w_use_nla:!1};a.l9=function(){var a=J.N();return a.Na?0<a.b4w_logic_nodes.length:!1};a.Ada=function(a,b){var c=J.N();if(c.Na)c.Na.Jv=a,c.Na.Iv=b;else return!1};a.TH=function(a){var b=J.N();b.Na&&(b.Na.Iv=
a)};a.x3=function(a){var b=J.N();b.Na&&(b.Na.Jv=a)};a.Sca=function(){var a=J.N();if(a.Na)a=a.Na,a.Jv=a.Ha,a.Iv=a.sb;else return!1};a.ida=function(a){var b=J.N();if(b.Na)b.Na.be=a;else return!1};a.s9=function(){var a=J.N();a.Na&&(a.Na.Js=null)};a.$Q=function(a){var b=J.N().Na;b&&(b.qc=-(a-k)*I.fe()+b.Jv,b.Zq=!0)};a.tN=function(){var a=J.N().Na;return a?a.sb:null}};b4w.module.__controls=function(a,u){function m(a,b){b||(b=y.qe());return{type:a,value:0,ea:null,element:b,eb:!1,key:0,Rb:"",Cj:!1,HE:null,GE:function(){},FE:null,IL:function(){},nk:null,from:new Float32Array(3),to:new Float32Array(3),zO:!1,dA:!1,Kv:0,dQ:function(){},axis:"",yh:0,Bs:new Float32Array(3),sB:new Float32Array(4),threshold:0,YP:new Float32Array(4),Nx:0,Mx:0,qQ:0,Ox:0,qh:0,repeat:!1,DM:!1,Ri:0,position:k.create(),orientation:l.create(),callback:function(){}}}function c(a){function b(){return{sm:new Float32Array(2),
Zo:!0,pa:null,identifier:-1,nA:!0}}a||(a=y.qe());for(var c=0;c<C.length;c++){var d=C[c];if(a==d.element)return d}d={element:a,cv:!0,xg:0,pA:!0,OA:0,PA:0,gp:0,hp:0,Bv:0,Cv:0,kj:new Float32Array(2),wf:new Float32Array(2),lj:new Float32Array(2),Wf:new Float32Array(2),PC:0,GI:0,XR:0,qg:new Uint8Array(256),rD:0,TF:null,ck:b(),Bp:Array(10),nG:!1,aO:l.create(),Sz:0,Rz:0,Qz:0,VF:0,UF:0,Pz:Infinity,ZG:null,YG:null,NG:null,JG:null,LG:null,EI:null,DI:null,MG:null,KG:null,kH:null,ica:null,FI:null,CI:null,BI:null,
El:{}};for(c=0;10>c;++c)d.Bp[c]=b();d.ZG=function(a){d.nG||(x.W_(a,d.aO),d.nG=!0)};d.YG=function(a){a=k.copy(a,W);d.Qz=a[0];d.Rz=a[1];d.Sz=a[2];Infinity==d.Pz&&(d.Pz=a[0],d.UF=a[1],d.VF=a[2])};d.NG=function(a){d.rD+=a*D.x1};d.JG=function(a){var b=x.$(x.Uc,d.element),b=x.$h(b,x.uj,r);d.OA=b[0];d.PA=b[1];d.gp=b[0];d.hp=b[1];if(3==d.xg||0==d.xg)d.xg=1;d.which=a};d.LG=function(){var a=x.$(x.Uc,d.element),a=x.$h(a,x.uj,r),a=y.ey(a[0],a[1],r);d.ck.Zo=!1;d.ck.sm[0]=a[0];d.ck.sm[1]=a[1]};d.EI=function(a){for(var b=
0;b<a.length;++b){for(var c=a[b],e=null,f=null,g=0;g<d.Bp.length;g++){var h=d.Bp[g];if(h.identifier==c.identifier){h.nA&&(f=h);break}else!e&&h.nA&&(e=h,e.identifier=c.identifier)}if(c=f||e)e=y.ey(a[b].clientX,a[b].clientY,r),c.Zo=!1,c.nA=!1,c.sm[0]=e[0],c.sm[1]=e[1]}};d.DI=function(a){for(var b=0;b<d.Bp.length;++b){for(var c=d.Bp[b],e=!1,f=0;f<a.length;++f)if(a[f].identifier==c.identifier){e=!0;break}e||(c.Zo=!0,c.nA=!0,c.pa=null)}};d.MG=function(a){var b=x.$(x.Uc,d.element),b=x.$h(b,x.uj,r);d.OA=
b[0];d.PA=b[1];d.gp=b[0];d.hp=b[1];0<d.xg&&(d.xg=3);d.which=a};d.KG=function(a){if(!M.cA||d.xg)d.gp=a[0],d.hp=a[1]};d.kH=function(a){d.Bv+=a[0];d.Cv+=a[1]};d.OO=function(a){2!=d.qg[a]&&(d.qg[a]=1,d.cv=!1)};d.QO=function(){for(var a=0;a<d.qg.length;a++)0!=d.qg[a]&&(d.qg[a]=3,d.cv=!1)};d.RO=function(a){d.cv=!1;d.qg[a]=3};d.FI=function(a){d.pA=!1;if(1==a.length)d.kj[0]=a[0].clientX,d.kj[1]=-1,d.lj[0]=a[0].clientY,d.lj[1]=-1;else if(1<a.length){d.PC=d.GI=A(a);d.kj[0]=a[0].clientX;d.kj[1]=a[1].clientX;
d.lj[0]=a[0].clientY;d.lj[1]=a[1].clientY;var b=a[0];a=a[1];d.XR=Math.atan2(b.clientY-a.clientY,b.clientX-a.clientX)}d.wf.set(d.kj);d.Wf.set(d.lj)};d.CI=function(a){1===a.length?(d.wf[0]=a[0].clientX,d.wf[1]=-1,d.Wf[0]=a[0].clientY,d.Wf[1]=-1):1<a.length&&(d.wf[0]=a[0].clientX,d.wf[1]=a[1].clientX,d.Wf[0]=a[0].clientY,d.Wf[1]=a[1].clientY,d.PC=A(a))};d.BI=function(a){0==a.length&&(d.pA=!0)};C.push(d);return d}function b(a,b){if(b in a.El&&0<a.El[b])a.El[b]+=1;else switch(a.El[b]=1,b){case "orientation_quat":var c=
x.$(x.sj);c&&x.Hd(c,x.nq,a.ZG);break;case "orientation_angles":(c=x.$(x.sj))&&x.Hd(c,x.nq,a.YG);break;case "mouse_wheel":(c=x.$(x.Uc,a.element))&&x.Hd(c,x.qt,a.NG);break;case "mouse_down_which":(c=x.$(x.Uc,a.element))&&x.Hd(c,x.fm,a.JG);break;case "mouse_select":(c=x.$(x.Uc,a.element))&&x.Hd(c,x.fm,a.LG);break;case "touch_select":if(c=x.$(x.Rg,a.element))x.Hd(c,x.hm,a.EI),x.Hd(c,x.Pn,a.DI);break;case "mouse_up_which":(c=x.$(x.Uc,a.element))&&x.Hd(c,x.pt,a.MG);break;case "mouse_location":(c=x.$(x.Uc,
a.element))&&x.Hd(c,x.uj,a.KG);break;case "mouse_pointerlock":(c=x.$(x.Uc,a.element))&&x.Hd(c,x.AJ,a.kH);break;case "keyboard_downed_keys":if(c=x.$(x.at,a.element))x.Hd(c,x.nt,a.OO),x.Hd(c,x.rJ,a.QO),x.Hd(c,x.ot,a.RO);break;case "touch_start":(c=x.$(x.Rg,a.element))&&x.Hd(c,x.hm,a.FI);break;case "touch_move":(c=x.$(x.Rg,a.element))&&x.Hd(c,x.yt,a.CI);break;case "touch_end":(c=x.$(x.Rg,a.element))&&x.Hd(c,x.Pn,a.BI)}}function p(a,b){if(b in a.El&&0<a.El[b]&&(--a.El[b],!a.El[b]))switch(b){case "orientation_quat":var c=
x.$(x.sj);c&&x.ne(c,x.ax,a.ZG);break;case "orientation_angles":(c=x.$(x.sj))&&x.ne(c,x.nq,a.YG);break;case "mouse_wheel":(c=x.$(x.Uc,a.element))&&x.ne(c,x.qt,a.NG);break;case "mouse_down_which":(c=x.$(x.Uc,a.element))&&x.ne(c,x.fm,a.JG);break;case "mouse_select":(c=x.$(x.Uc,a.element))&&x.ne(c,x.fm,a.LG);break;case "touch_select":if(c=x.$(x.Rg,a.element))x.ne(c,x.hm,a.EI),x.ne(c,x.Pn,a.DI);break;case "mouse_up_which":(c=x.$(x.Uc,a.element))&&x.ne(c,x.pt,a.MG);break;case "mouse_location":(c=x.$(x.Uc,
a.element))&&x.ne(c,x.uj,a.KG);break;case "mouse_pointerlock":(c=x.$(x.Uc,a.element))&&x.ne(c,x.AJ,a.kH);break;case "keyboard_downed_keys":if(c=x.$(x.at,a.element))x.ne(c,x.nt,a.OO),x.ne(c,x.rJ,a.QO),x.ne(c,x.ot,a.RO);break;case "touch_start":(c=x.$(x.Rg,a.element))&&x.ne(c,x.hm,a.FI);break;case "touch_move":(c=x.$(x.Rg,a.element))&&x.ne(c,x.yt,a.CI);break;case "touch_end":(c=x.$(x.Rg,a.element))&&x.ne(c,x.Pn,a.BI)}}function h(a,b){a.value=Number(b)}function G(a){for(var b=a.Il,c=a.W2,d=0;d<b.length;d++)c[d]=
b[d].value;return a.h1(c)}function q(a,b){a=a||S;var c=a.jj;if(c){var d=a.wp;if(b){var e=c[b];if(e){for(var f=e.Il,g=0;g<f.length;g++){var h=f[g],k;k=F.indexOf(h);k=-1<k?z[k]:[];1==k.length?(w(h),h=F.indexOf(h),-1<h?(F.splice(h,1),z.splice(h,1)):K.J("Sensors cache is corrupted")):1<k.length&&k.splice(k.indexOf(e),1)}delete c[b];g=d.indexOf(e);-1<g?d.splice(g,1):K.J("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(c=E.indexOf(a),-1<c?E.splice(c,1):J.error("Wrong object"))}}else{d=
[];for(g in c)d.push(g);for(g=0;g<d.length;g++)q(a,d[g])}n=!0}}function w(a){switch(a.type){case 90:L.tH(a.HE,a.Rb,a.GE);a.eb=!0;break;case 100:L.CE(a.FE);a.eb=!0;break;case 110:L.uH(a.Kv);a.eb=!0;break;case 140:a.eb=!0;break;case 20:var b=c(a.element);p(b,"keyboard_downed_keys");a.eb=!0;break;case 30:b=c(a.element);p(b,"mouse_wheel");a.eb=!0;break;case 40:b=c(a.element);p(b,"mouse_down_which");p(b,"mouse_up_which");p(b,"mouse_location");a.eb=!0;break;case 280:b=c(a.element);p(b,"mouse_pointerlock");
a.eb=!0;break;case 50:b=c(a.element);p(b,"mouse_down_which");p(b,"mouse_up_which");a.eb=!0;break;case 60:b=c(a.element);p(b,"touch_start");p(b,"touch_move");p(b,"touch_end");a.eb=!0;break;case 70:b=c(a.element);p(b,"touch_start");p(b,"touch_move");a.eb=!0;break;case 75:b=c(a.element);p(b,"touch_start");p(b,"touch_move");a.eb=!0;break;case 80:b=c(a.element);p(b,"touch_start");p(b,"touch_end");a.eb=!0;break;case 170:b=c(a.element);p(b,"mouse_select");p(b,"touch_select");p(b,"touch_start");p(b,"touch_end");
p(b,"mouse_down_which");p(b,"mouse_up_which");a.eb=!0;break;case 180:case 190:b=c(a.element);p(b,"orientation_angles");a.eb=!0;break;case 200:b=c(a.element);p(b,"orientation_quat");a.eb=!0;break;case 210:case 220:a.eb=!0}}function A(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function g(a){return 0==a?x.$(x.Mw):1==a?x.$(x.DD):2==a?x.$(x.ED):x.$(x.FD)}var e=u("__config"),y=u("__container"),x=u("__input"),P=u("__objects"),J=u("__print"),L=u("__physics"),
l=u("__quat"),I=u("__time"),v=u("__tsr"),K=u("__util"),k=u("__vec3"),D=e.controls,M=e.K,E=[],S={},F=[],z=[],C=[],r=new Float32Array(2),f=new Float32Array(2),W=k.create(),d=l.create(),n=!1,X=0;a.Qg=10;a.kb=20;a.Lw=30;a.Ch=40;a.Tp=50;a.CD=60;a.nx=0;a.mx=1;a.lx=2;a.PD=3;var R=1;a.update=function(b,e){for(var m=0;m<C.length;m++){var p=C[m];p.ck.Zo||(p.ck.pa=P.op(p.ck.sm[0],p.ck.sm[1]),p.ck.Zo=!0,p.TF=p.ck.pa);for(var q=0;10>q;++q){var t=p.Bp[q];t.Zo||(t.pa=P.op(t.sm[0],t.sm[1]),t.Zo=!0,p.TF=t.pa)}}for(m=
0;m<F.length;m++)if(p=F[m],t=b,q=e)switch(p.type){case 120:var w=p.nk,y=v.Yb(w.v.C,W),w=v.Db(w.v.C,d),u=k.dist(p.Bs,y),A=p.YP;l.invert(p.sB,A);l.multiply(w,A,A);l.normalize(A,A);A=Math.abs(2*Math.acos(A[3]));u/=q;p.Nx=K.Rc(u,p.Nx,q,.3);p.ea[0]=u;u=A/q;p.Mx=K.Rc(u,p.Mx,q,.3);p.ea[1]=u;p.Nx>=p.threshold||p.Mx>=p.qQ?h(p,1):h(p,0);k.copy(y,p.Bs);l.copy(w,p.sB);p.yh=t;break;case 130:w=p.nk;y=v.Yb(w.v.C,W);w=Math.abs(y[1]-p.Bs[1])/q;p.Ox=K.Rc(w,p.Ox,q,.3);p.ea=w;p.Ox>=p.threshold?h(p,1):h(p,0);k.copy(y,
p.Bs);p.yh=t;break;case 140:!p.eb&&0<=p.qh&&t-p.yh>=p.qh&&(h(p,1),p.repeat?p.yh=t:p.qh=-p.qh);break;case 150:p.yh||(p.yh=t);h(p,t-p.yh);p.yh=t;break;case 160:h(p,t);break;case 180:t=c(p.element);p.ea[0]=t.Sz-t.VF;p.ea[1]=t.Rz-t.UF;p.ea[2]=t.Qz-t.Pz;break;case 190:t=c(p.element);p.ea[0]=t.Sz;p.ea[1]=t.Rz;p.ea[2]=t.Qz;break;case 200:t=c(p.element);l.copy(t.aO,p.ea);break;case 210:q=x.$(x.Vb);x.$h(q,x.ex,p.ea);break;case 220:q=x.$(x.Vb);x.$h(q,x.fx,p.ea);break;case 240:q=g(p.Ri);p.value=x.B_(q,p.key);
break;case 250:q=g(p.Ri);p.value=x.A_(q,p.key);break;case 260:q=g(p.Ri);x.HF(q,p.ea);h(p,1);break;case 270:q=g(p.Ri);x.GF(q,p.ea);h(p,1);break;case 230:h(p,p.callback());break;case 30:t=c(p.element);h(p,t.rD);break;case 40:t=c(p.element);if(!M.cA||1==t.xg||2==t.xg)switch(y=t.gp-t.OA,w=t.hp-t.PA,p.ea.coords[0]=t.gp,p.ea.coords[1]=t.hp,p.axis){case "X":h(p,y);break;case "Y":h(p,w);break;case "XY":q=Math.sqrt(y*y+w*w),h(p,q)}break;case 280:t=c(p.element);y=t.Bv;w=t.Cv;u=K.Rc(y,0,q,.1*R);q=K.Rc(w,0,q,
.1*R);.01<Math.abs(y)||.01<Math.abs(w)?(t.Bv-=u,t.Cv-=q,p.ea.coords[0]=u,p.ea.coords[1]=q):(p.ea.coords[0]=0,p.ea.coords[1]=0);h(p,Math.sqrt(y*y+w*w));break;case 50:t=c(p.element);h(p,0<t.xg|0);p.ea.which=t.which;p.ea.coords[0]=t.gp;p.ea.coords[1]=t.hp;break;case 170:t=c(p.element);h(p,0);if(p.DM)t.TF==p.nk&&h(p,1);else if(t.xg&&t.ck.pa==p.nk)h(p,1);else if(!t.pA)for(q=0;10>q;++q)if(t.Bp[q].pa==p.nk){h(p,1);break}break;case 20:t=c(p.element);p.ea=t.qg[p.key];1==p.ea||t.qg[0]&&16==p.key?h(p,1):p.ea||
h(p,0);break;case 60:t=c(p.element);if(-1==t.wf[1]&&-1==t.Wf[1]){y=t.wf[0]-t.kj[0];w=t.Wf[0]-t.lj[0];q=Math.sqrt(y*y+w*w);if(-1!=t.kj[1]&&-1!=t.lj[1]){var u=t.wf[0]-t.kj[1],A=t.Wf[0]-t.lj[1],z=Math.sqrt(u*u+A*A);z<q&&(y=u,w=A,q=z)}p.ea.gesture=a.nx}else q=r,q[0]=(t.wf[0]+t.wf[1])/2,q[1]=(t.Wf[0]+t.Wf[1])/2,w=f,w[0]=(t.kj[0]+t.kj[1])/2,w[1]=(t.lj[0]+t.lj[1])/2,y=q[0]-w[0],w=q[1]-w[1],q=Math.sqrt(y*y+w*w),p.ea.gesture=a.lx;p.ea.coords[0]=t.wf[0];p.ea.coords[1]=t.Wf[0];switch(p.axis){case "X":h(p,y);
break;case "Y":h(p,w);break;case "XY":h(p,q)}break;case 70:t=c(p.element);q=t.PC-t.GI;p.ea=a.mx;h(p,q);break;case 75:t=c(p.element);-1!=t.wf[1]&&(q=Math.atan2(t.Wf[0]-t.Wf[1],t.wf[0]-t.wf[1]),p.ea=a.PD,h(p,q-t.XR));break;case 80:t=c(p.element),p.ea.coords[0]=t.wf[0],p.ea.coords[1]=t.Wf[0],t.pA?h(p,0):h(p,1)}for(m=0;m<E.length;m++)for(t=E[m],p=t.wp,q=0;q<p.length;q++)if(y=p[q],y.An!=X){y.An=X;A=y;w=0;switch(A.type){case a.Qg:w=(u=G(A))?1:0;break;case a.kb:w=A.rl;(u=G(A))?(w=1,A.rl=1):1==w?(w=-1,A.rl=
-1):w=0;break;case a.Lw:w=A.rl;(u=G(A))&&-1==w?(w=1,A.rl=1):u||1!=w?w=0:(w=-1,A.rl=-1);break;case a.Ch:w=A.rl;(u=G(A))&&-1==w?(w=1,A.rl=1):u||1!=w?w=0:(w=0,A.rl=-1);break;case a.Tp:u=G(A);A.UO!=u?(w=1,A.UO=u):w=0;break;case a.CD:u=A.Il;A=A.K0;for(z=0;z<u.length;z++){var J=u[z].value;w||J==A[z]||(w=1);A[z]=J}break;default:K.J("Wrong sensor manifold type: "+A.type)}if(w&&(u=t==S?null:t,n=!1,y.callback(u,y.id,w,y.LW),n)){m=-1;break}}for(m=0;m<E.length;m++)for(t=E[m],p=t.wp,q=0;q<p.length;q++)for(y=p[q],
t=y.Il,y=0;y<t.length;y++)switch(w=t[y],w.type){case 30:h(w,0);break;case 40:h(w,0);break;case 60:h(w,0);break;case 70:h(w,0);break;case 75:h(w,0);break;case 80:h(w,0);break;case 140:h(w,0)}for(m=0;m<C.length;m++){p=C[m];if(!p.cv){for(q=0;q<p.qg.length;q++)1==p.qg[q]?p.qg[q]=2:3==p.qg[q]&&(p.qg[q]=0);p.cv=!0}1==p.xg?p.xg=2:3==p.xg&&(p.xg=0);p.rD=0;p.OA=p.gp;p.PA=p.hp;p.qg[0]=0;p.kj.set(p.wf);p.lj.set(p.Wf);p.GI=p.PC;p.VF=p.Sz;p.UF=p.Rz;p.Pz=p.Qz;p.nG=!1}X++};a.nu=function(a){var b=m(10);h(b,a);return b};
a.sd=function(a){var b=m(20,document);b.key=a;b.eb=!0;return b};a.bc=function(a,b){var c=m(240,document);b=b||x.vz();c.Ri=b;c.key=a;c.eb=!0;return c};a.le=function(a,b){var c=m(250,document);b=void 0==b?x.vz():b;c.Ri=b;c.key=a;c.eb=!0;return c};a.ty=function(a){var b=m(260,document);a=void 0===a?x.vz():a;b.Ri=a;b.eb=!0;b.ea=k.create();return b};a.sy=function(a){var b=m(270,document);a=void 0===a?x.vz():a;b.Ri=a;b.eb=!0;b.ea=l.create();return b};a.NE=function(a,b,c){if(!a||!L.Ca(a))return J.error("Wrong collision object"),
null;var d=m(90);d.HE=a;d.Rb=b;d.Cj=c;d.ea={coll_obj:null,coll_pos:c?new Float32Array(3):null,coll_norm:c?new Float32Array(3):null,coll_dist:0};d.GE=function(a,b,c,e,f){h(d,a);a=d.ea;a.coll_obj=b;d.Cj&&(a.coll_pos.set(c),a.coll_norm.set(e),a.coll_dist=f)};d.eb=!0;return d};a.TL=function(a){if(!a||!a.L)return J.error("Wrong collision impulse object"),null;var b=m(100);b.FE=a;b.IL=function(a){h(b,a)};b.eb=!0;return b};a.aM=function(a,b,c,d,e,f,g){var k=m(110);k.nk=a;k.from=b;k.to=c;k.Rb=d;k.zO=e;k.Cj=
f;k.dA=g;k.ea={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),Kv:0};k.dQ=function(a,b,c,d,e,f){k.zO?h(k,-1==b?0:1):h(k,b);k.ea.hit_fract=b;k.ea.obj_hit=c;k.ea.hit_time=d;k.Cj&&(k.ea.hit_pos.set(e),k.ea.hit_norm.set(f))};k.eb=!0;return k};a.po=function(a){a=m(50,a);a.eb=!0;a.ea={coords:new Float32Array(2),which:null};return a};a.TE=function(a){a=m(30,a);a.eb=!0;return a};a.Vk=function(a,b){var c=m(40,b);c.axis=a||"XY";c.ea={coords:new Float32Array(2)};
c.eb=!0;return c};a.pu=function(a,b){var c=m(60,b);c.axis=a||"XY";c.ea={coords:new Float32Array(2),gesture:0};c.eb=!0;return c};a.zy=function(a){a=m(70,a);a.ea=0;a.eb=!0;return a};a.iM=function(a){a=m(75,a);a.ea=0;a.eb=!0;return a};a.hM=function(a){a=m(80,a);a.ea={coords:new Float32Array(2)};a.eb=!0;return a};a.XL=function(a,b,c){if(!a)return J.error("Wrong collision object"),null;var d=m(120);d.nk=a;var e=v.W(a.v.C);a=v.ha(a.v.C);d.YP=new Float32Array(4);d.Bs=new Float32Array(e);d.sB=new Float32Array(a);
d.Nx=0;d.Mx=0;d.threshold=b||.1;d.qQ=c||.1;d.yh=0;d.ea=new Float32Array([0,0]);return d};a.jM=function(a,b){if(!a)return J.error("Wrong collision object"),null;var c=m(130);c.nk=a;var d=v.W(a.v.C),e=v.ha(a.v.C);c.Bs=new Float32Array(d);c.sB=new Float32Array(e);c.Ox=0;c.threshold=b||1;c.yh=0;c.ea=0;return c};a.gM=function(a,b){var c=m(140);c.qh=a;c.repeat=b;c.eb=!0;return c};a.lQ=function(a,b,c,d){a=a||S;a=a.jj;if(!a||!a[b])return J.error("reset_timer_sensor(): wrong object"),null;b=a[b].Il[c];if(!b)return J.error("reset_timer_sensor(): sensor not found"),
null;b.yh=I.Ko();b.qh=d};a.um=function(){var a=m(150);a.yh=0;return a};a.WL=function(){var a=m(180,window);a.ea=new Float32Array(3);x.$(x.sj)?h(a,1):h(a,0);a.eb=!0;return a};a.VL=function(){var a=m(190,window);a.ea=new Float32Array(3);x.$(x.sj)?h(a,1):h(a,0);a.eb=!0;return a};a.OE=function(){var a=m(200,window);a.ea=l.create();x.$(x.sj)?h(a,1):h(a,0);a.eb=!0;return a};a.QE=function(){var a=m(210,window);a.ea=l.create();x.$(x.Vb)?h(a,1):h(a,0);a.eb=!0;return a};a.PE=function(){var a=m(220,window);
a.ea=k.create();x.$(x.Vb)?h(a,1):h(a,0);a.eb=!0;return a};a.yy=function(){return m(160)};a.wy=function(a,b){var c=m(170);c.nk=a;c.DM=b;c.eb=!0;return c};a.ME=function(a,b){var c=m(230);c.callback=a;h(c,b);return c};a.ZL=function(a){a=m(280,a);a.ea={coords:new Float32Array(2)};a.eb=!0;return a};a.$L=function(a){a=m(290,a);a.eb=!0;return a};a.V2=h;a.kd=function(a,b,c){a=a||S;a=a.jj;if(!a||!a[b])return J.error("get_sensor_value(): wrong object"),null;b=a[b].Il[c];return b?b.value:(J.error("get_sensor_value(): sensor not found"),
null)};a.jf=function(a,b,c){a=a||S;a=a.jj;if(!a||!a[b])return J.error("get_sensor_payload(): wrong object"),null;b=a[b].Il[c];return b?b.ea:(J.error("get_sensor_payload(): sensor not found"),null)};a.Ja=function(){E=[];S={};for(var a=0;a<F.length;a++)w(F[a]);F.length=0;z.length=0};a.om=function(a,b){a=a||S;if(!a.jj)return!1;if(b&&a.jj[b])return!0;if(!b)for(var c in a.jj)return!0;return!1};a.ga=function(a,d,e,f,g,h,k){a=a||S;a.wp=a.wp||[];a.jj=a.jj||{};var l=a.jj,m=a.wp;l[d]&&q(a,d);e={id:d,type:e,
Il:f.slice(0),h1:g,W2:Array(f.length),callback:h,LW:k,rl:-1,UO:0,K0:Array(f.length),An:-1};l[d]=e;m.push(e);-1==E.indexOf(a)&&E.push(a);for(a=0;a<e.Il.length;a++){l=d=e.Il[a];if(l.eb){switch(l.type){case 90:L.bE(l.HE,l.Rb,l.GE,l.Cj);break;case 100:L.cE(l.FE,l.IL);break;case 110:l.Kv=L.Gx(l.nk,l.from,l.to,l.Rb,l.dQ,!1,!1,l.Cj,l.dA);l.ea.Kv=l.Kv;break;case 140:l.yh=I.Ko();0>l.qh&&(l.qh=-l.qh);break;case 20:m=c(l.element);b(m,"keyboard_downed_keys");break;case 30:m=c(l.element);b(m,"mouse_wheel");break;
case 40:m=c(l.element);b(m,"mouse_down_which");b(m,"mouse_up_which");b(m,"mouse_location");break;case 280:m=c(l.element);b(m,"mouse_pointerlock");break;case 290:x.AV(l);break;case 50:m=c(l.element);b(m,"mouse_down_which");b(m,"mouse_up_which");break;case 60:m=c(l.element);b(m,"touch_start");b(m,"touch_move");b(m,"touch_end");break;case 70:m=c(l.element);b(m,"touch_start");b(m,"touch_move");break;case 75:m=c(l.element);b(m,"touch_start");b(m,"touch_move");break;case 80:m=c(l.element);b(m,"touch_start");
b(m,"touch_end");break;case 170:m=c(l.element);b(m,"mouse_select");b(m,"touch_select");b(m,"touch_start");b(m,"touch_end");b(m,"mouse_down_which");b(m,"mouse_up_which");break;case 180:case 190:m=c(l.element);b(m,"orientation_angles");break;case 200:m=c(l.element);b(m,"orientation_quat");break;case 240:case 260:case 270:0==l.Ri?x.$(x.Mw):1==l.Ri?x.$(x.DD):2==l.Ri?x.$(x.ED):x.$(x.FD)}l.eb=!1}l=F.indexOf(d);-1==l?(F.push(d),z.push([e])):z[l].push(e)}n=!0};a.Iy=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];
return a[a.length-1]};a.Jy=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};a.Cg=q;a.reset=function(){for(var a=0;a<E.length;a++){var b=E[a],c=b.jj,b=b.wp,d;for(d in c)delete c[d];b.length=0}for(a=0;a<F.length;a++)w(F[a]);E.length=0;F.length=0;z.length=0};a.debug=function(){J.log(String(E.length)+" objects with manifolds",E);J.log(String(F.length)+" sensors",F);for(var a=[],b=[],c=0;c<F.length;c++){var d=F[c];90==d.type&&a.push(d);110==d.type&&b.push(d)}J.log(String(a.length)+
" collision sensors",a);J.log(String(b.length)+" ray sensors",b)};a.eR=function(a){R=a}};b4w.module.__material=function(a,u){function m(){return{name:"",type:"",md:"",zh:!1,se:null,wh:[],xb:"",Mc:!1,cD:!1,Xa:!1,yf:!1,bD:!1,zw:!1,Fs:!1,df:!1,Fl:!1,Yj:!1,dv:!1,Xo:!1,ri:0,fk:0,Qd:0,If:"",gd:new Float32Array(3),pg:0,Py:0,Qy:0,CB:0,Ny:0,Oy:0,Ey:0,alpha:0,Vf:"",Eg:new Float32Array(3),fw:0,qC:0,rC:0,yp:0,oC:0,pC:0,Dg:0,ff:0,$e:0,ia:{Zj:!1,Uf:!1,Cx:0,Ni:0,UB:new Float32Array(3),XB:new Float32Array(3),VB:0,YB:0,Bo:new Float32Array(3),iz:0,uC:0,vC:0,WA:0,ba:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,
dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,jA:!1,XA:0,YA:0,My:0,Xy:!1,Qk:0,Pk:0},qk:{sr:!1,Bu:"",Au:""},rp:{pi:0,Ku:0,Lu:0},er:{size:0,Vu:0,BB:new Float32Array(3),AA:new Float32Array(3),AB:0,yA:0,xC:0,oA:!1,yC:0,zC:0},Rd:{Es:!1,tk:!1,Vh:0,Ph:0,Rb:"",Ej:0,Dj:0,Fj:0}}}var c=u("__util");a.q0=m;a.JX=function(){var a=m();a.name="DEFAULT";a.type="SURFACE";a.md=c.pz();a.zh=!1;a.se=
null;a.wh=[];a.xb="OPAQUE";a.Mc=!1;a.cD=!1;a.Xa=!0;a.zw=!1;a.Fs=!1;a.Fl=!1;a.Xo=!1;a.ri=0;a.fk=0;a.Qd=0;a.If="LAMBERT";a.gd.set([.8,.8,.8]);a.pg=.8;a.alpha=1;a.Vf="COOKTORR";a.Eg.set([1,1,1]);a.fw=.5;a.yp=50;a.Dg=1;a.ff=0;a.$e=1;a.ia.Zj=!1;a.qk.sr=!1;a.rp.pi=0;a.rp.Ku=0;a.rp.Lu=1.25;a.Rd.Es=!1;return a};a.f5=function(a,c){c.name=a.name;c.type=a.type;c.md=a.uuid;c.zh=a.use_nodes;c.se=a.node_tree;c.wh=a.texture_slots;c.xb=a.game_settings.alpha_blend;c.Mc=a.use_shadeless;c.cD=a.use_transparency;c.Xa=
a.game_settings.use_backface_culling;c.yf=a.use_tangent_shading;c.bD=a.use_orco_tex_coord;c.zw=a.use_vertex_color_paint;c.Fs=a.b4w_double_sided_lighting;c.df=a.b4w_do_not_render;c.Fl=a.b4w_render_above_all;c.Yj=a.b4w_lens_flares;c.dv=a.b4w_wettable;c.Xo=a.b4w_refractive;c.ri=a.b4w_refr_bump;c.fk=a.pass_index;c.Qd=a.offset_z;c.If=a.diffuse_shader;c.gd.set(a.diffuse_color);c.pg=a.diffuse_intensity;c.Py=a.diffuse_toon_size;c.Qy=a.diffuse_toon_smooth;c.CB=a.roughness;c.Ny=a.diffuse_fresnel;c.Oy=a.diffuse_fresnel_factor;
c.Ey=a.darkness;c.alpha=a.alpha;c.Vf=a.specular_shader;c.Eg.set(a.specular_color);c.fw=a.specular_intensity;c.qC=a.specular_toon_size;c.rC=a.specular_toon_smooth;c.yp=a.specular_hardness;c.oC=a.specular_ior;c.pC=a.specular_slope;c.Dg=a.specular_alpha;c.ff=a.emit;c.$e=a.ambient;var b=c.ia;b.Zj=a.b4w_water;b.Uf=a.b4w_water_shore_smoothing;b.Cx=a.b4w_water_absorb_factor;b.Ni=a.b4w_foam_factor;b.UB.set(a.b4w_shallow_water_col);b.XB.set(a.b4w_shore_water_col);b.VB=a.b4w_shallow_water_col_fac;b.YB=a.b4w_shore_water_col_fac;
b.Bo.set(a.b4w_water_fog_color);b.iz=a.b4w_water_fog_density;b.uC=a.b4w_water_sss_strength;b.vC=a.b4w_water_sss_width;b.WA=a.b4w_water_norm_uv_velocity;b.ba=a.b4w_water_dynamic;b.waves_height=a.b4w_waves_height;b.waves_length=a.b4w_waves_length;b.dst_noise_scale0=a.b4w_water_dst_noise_scale0;b.dst_noise_scale1=a.b4w_water_dst_noise_scale1;b.dst_noise_freq0=a.b4w_water_dst_noise_freq0;b.dst_noise_freq1=a.b4w_water_dst_noise_freq1;b.dir_min_shore_fac=a.b4w_water_dir_min_shore_fac;b.dir_freq=a.b4w_water_dir_freq;
b.dir_noise_scale=a.b4w_water_dir_noise_scale;b.dir_noise_freq=a.b4w_water_dir_noise_freq;b.dir_min_noise_fac=a.b4w_water_dir_min_noise_fac;b.dst_min_fac=a.b4w_water_dst_min_fac;b.waves_hor_fac=a.b4w_water_waves_hor_fac;b.jA=a.b4w_generated_mesh;b.XA=a.b4w_water_num_cascads;b.YA=a.b4w_water_subdivs;b.My=a.b4w_water_detailed_dist;b.Xy=a.b4w_water_enable_caust;b.Qk=a.b4w_water_caust_scale;b.Pk=a.b4w_water_caust_brightness;b=c.qk;b.sr=a.b4w_terrain;b.Bu=a.b4w_dynamic_grass_size;b.Au=a.b4w_dynamic_grass_color;
b=c.rp;b.pi=a.raytrace_mirror.reflect_factor;b.Ku=a.raytrace_mirror.fresnel;b.Lu=a.raytrace_mirror.fresnel_factor;b=c.er;b.size=a.halo.size;b.Vu=a.halo.hardness;b.BB.set(a.halo.b4w_halo_rings_color);b.AA.set(a.halo.b4w_halo_lines_color);b.AB=a.halo.ring_count;b.yA=a.halo.line_count;b.xC=a.halo.star_tip_count;b.oA=a.b4w_halo_sky_stars;b.yC=a.b4w_halo_stars_blend_height;b.zC=a.b4w_halo_stars_min_height;b=c.Rd;b.Es=a.b4w_collision;b.tk=a.b4w_use_ghost;b.Vh=a.physics.friction;b.Ph=a.physics.elasticity;
b.Rb=a.b4w_collision_id;b.Ej=a.b4w_collision_margin;b.Dj=a.b4w_collision_group;b.Fj=a.b4w_collision_mask};a.pX=function(a){a.name=a.name;a.type=a.type;a.md=a.md;a.zh=a.zh;a.se=a.se;a.wh=a.wh.slice();a.xb=a.xb;a.Mc=a.Mc;a.cD=a.cD;a.Xa=a.Xa;a.yf=a.yf;a.bD=a.bD;a.zw=a.zw;a.Fs=a.Fs;a.df=a.df;a.Fl=a.Fl;a.Yj=a.Yj;a.dv=a.dv;a.Xo=a.Xo;a.ri=a.ri;a.fk=a.fk;a.Qd=a.Qd;a.If=a.If;a.gd.set(a.gd);a.pg=a.pg;a.Py=a.Py;a.Qy=a.Qy;a.CB=a.CB;a.Ny=a.Ny;a.Oy=a.Oy;a.Ey=a.Ey;a.alpha=a.alpha;a.Vf=a.Vf;a.Eg.set(a.Eg);a.fw=a.fw;
a.qC=a.qC;a.rC=a.rC;a.yp=a.yp;a.oC=a.oC;a.pC=a.pC;a.Dg=a.Dg;a.ff=a.ff;a.$e=a.$e;var b=a.ia,c=a.ia;c.Zj=b.Zj;c.Uf=b.Uf;c.Cx=b.Cx;c.Ni=b.Ni;c.UB.set(b.UB);c.XB.set(b.XB);c.VB=b.VB;c.YB=b.YB;c.Bo=b.Bo;c.iz=b.iz;c.uC=b.uC;c.vC=b.vC;c.WA=b.WA;c.ba=b.ba;c.waves_height=b.waves_height;c.waves_length=b.waves_length;c.dst_noise_scale0=b.dst_noise_scale0;c.dst_noise_scale1=b.dst_noise_scale1;c.dst_noise_freq0=b.dst_noise_freq0;c.dst_noise_freq1=b.dst_noise_freq1;c.dir_min_shore_fac=b.dir_min_shore_fac;c.dir_freq=
b.dir_freq;c.dir_noise_scale=b.dir_noise_scale;c.dir_noise_freq=b.dir_noise_freq;c.dir_min_noise_fac=b.dir_min_noise_fac;c.dst_min_fac=b.dst_min_fac;c.waves_hor_fac=b.waves_hor_fac;c.jA=b.jA;c.XA=b.XA;c.YA=b.YA;c.My=b.My;c.Xy=b.Xy;c.Qk=b.Qk;c.Pk=b.Pk;c=b=a.qk;c.sr=b.sr;c.Bu=b.Bu;c.Au=b.Au;c=b=a.rp;c.pi=b.pi;c.Ku=b.Ku;c.Lu=b.Lu;c=b=a.er;c.size=b.size;c.Vu=b.Vu;c.BB.set(b.BB);c.AA.set(b.AA);c.AB=b.AB;c.yA=b.yA;c.xC=b.xC;c.oA=b.oA;c.yC=b.yC;c.zC=b.zC;c=b=a.Rd;c.Es=b.Es;c.tk=b.tk;c.Vh=b.Vh;c.Ph=b.Ph;
c.Rb=b.Rb;c.Ej=b.Ej;c.Dj=b.Dj;c.Fj=b.Fj;return a}};b4w.module.__data=function(a,u){function m(a,b){Pa[b.id]=null;Ja[b.id]=null}function c(a,b,c,d){a instanceof ArrayBuffer?(a=Oa.ZN(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);qa.log("%cLOAD IMAGE "+d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(ab)&&c&&qa.warn("image",b,"is not from app root.")}function b(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){if(d){qa.log("%cLOAD METADATA","color: #616",m);f=ra.IR(d.b4w_format_version);switch(ra.LS(f,Ea.ep)){case -1:f[0]<
Ea.ep[0]?ra.J("JSON version is too old relative to B4W engine: "+ra.En(f)+", required: "+ra.En(Ea.ep)+". Reexport scene with the latest B4W addon to fix it."):qa.warn("JSON version is a bit old relative to B4W engine: "+ra.En(f)+", required: "+ra.En(Ea.ep)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:f[0]>Ea.ep[0]?ra.J("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):qa.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}Ea.vG=
f;for(var n in d)a[n]=d[n];b.Sb&&(jb=ya.ez(a.scenes));(d=a.binaries[0].binfile)?b.UK=d:(ia.bC(b,"load_binaries"),ia.bC(b,"prepare_bindata"));Ea.is_mobile_device||ia.bC(b,"mobile_media_start");Ea.antialiasing&&Ea.smaa||ia.bC(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)n=a.b4w_export_errors[d],(b.Sb&&"PRIMARY"==n.type||"ALL"==n.type)&&qa.qZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=
0;d<a.b4w_export_warnings.length;d++)n=a.b4w_export_warnings[d],(b.Sb&&"PRIMARY"==n.type||"ALL"==n.type)&&qa.rZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.ih&&I(a);e(b,c)}else l==pa.Ws?(qa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),pa.enqueue([{id:k,type:pa.am,url:k,lf:b.ih}],h,null,g)):ia.lK(b)}var k=b.Oj;k||ra.J("Nothing requested");if(Ea.assets_gzip_available){d=k+".gz";var l=pa.Ws}else d=k,l=pa.am;pa.enqueue([{id:d,
type:l,url:d,lf:b.ih}],h,null,g)}function p(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){d?(qa.log("%cLOAD BINARY","color: #616",m),a.bin_data=d,f=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[f,d],f=ra.IR(a.b4w_format_version),d[0]!=f[0]&&ra.J("BIN version does not match to JSON version: "+ra.En(d)+", required: "+ra.En(Ea.ep)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=f[1]&&qa.warn("BIN version does not match to JSON version: "+ +ra.En(d)+", required: "+
ra.En(Ea.ep)+". Some compatibility issues can occur. Reexport scene to fix it."),e(b,c)):l==pa.Vs?(qa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),pa.enqueue([{id:k,type:pa.Rp,url:k,lf:b.ih}],h,null,g)):ia.lK(b)}var k=ma(b.Oj)+b.UK;k||ra.J("Binary data is missing");if(Ea.assets_gzip_available){d=k+".gz";var l=pa.Vs}else d=k,l=pa.Rp;pa.enqueue([{id:d,type:l,url:d,lf:b.ih}],h,null,g)}function h(a,b,c,d,e){Ha.sL()&&e(b,c)}function G(a,b,c,d,e){d=a.bin_data;var f=
a.binaries[0],g=a.objects,h=a.meshes;a=a.actions;for(var k=ra.$W(),l=["indices"],m=["position","texcoord","texcoord2","shade_tangs"],n=["normal","tangent"],p=["group"],r=["color"],t=0;t<h.length;t++)for(var w=h[t].submeshes,v=0;v<w.length;v++){for(var x in w[v]){var y=w[v][x][1];if(-1!=l.indexOf(x)){var u=w[v][x][0]*ra.lJ+f["int"]+12,A=w[v],z=x,J=d;if(k)var C=new Uint32Array(J,u,y);else for(var C=new Uint32Array(y),J=new DataView(J),B=0;B<y;B++)C[B]=J.getUint32(u+B*ra.lJ,!0);A[z]=C}else if(-1!=m.indexOf(x))u=
w[v][x][0]*ra.xk+f["float"]+12,w[v][x]=q(d,u,y,k);else if(-1!=n.indexOf(x)){u=w[v][x][0]*ra.ut+f["short"]+12;A=w[v];z=x;J=d;C=new Float32Array(y);J=new DataView(J);for(B=0;B<y;B++)C[B]=J.getInt16(u+B*ra.ut,!0)/32767;A[z]=C}else if(-1!=p.indexOf(x)){u=w[v][x][0]*ra.ut+f.ushort+12;A=w[v];z=x;J=d;C=new Float32Array(y);J=new DataView(J);for(B=0;B<y;B++)C[B]=J.getUint16(u+B*ra.ut,!0)/65535;A[z]=C}else if(-1!=r.indexOf(x)){u=w[v][x][0]*ra.yD+f.uchar+12;A=w[v];z=x;J=d;C=new Float32Array(y);J=new DataView(J);
for(B=0;B<y;B++)C[B]=J.getUint8(u+B*ra.yD)/255;A[z]=C}}y=w[v];if(h[t].b4w_shape_keys.length)for(u=y.base_length,A=y.normal.length/u/3,y.tbn=Ia.$q(y.normal.subarray(0,3*u),y.tangent.subarray(0,4*u),Ia.create(y.normal.length/3)),z=1;z<A;z++)for(J=z*u,C=0;C<u;C++){var E=y.normal.subarray(3*C,3*(C+1)),K=U.add(y.normal.subarray(3*(J+C),3*(J+C+1)),E,qb),B=Ia.identity(tc);if(y.tangent.length){var D=y.tangent.subarray(4*C,4*(C+1)),G=bb.add(y.tangent.subarray(4*(J+C),4*(J+C+1)),D,sc),E=Ia.$q(E,D),K=Ia.$q(K,
G);Ia.A1(K,E,B)}else K=Qa.rotationTo(E,K,Hb),Ia.Ec(B,K,0);Ia.lk(y.tbn,B,J+C)}else y.tbn=Ia.$q(y.normal,y.tangent);delete w[v].normal;delete w[v].tangent;"texcoord2"in w[v]&&(y=new Float32Array(w[v].texcoord.length+w[v].texcoord2.length),y.set(w[v].texcoord),y.set(w[v].texcoord2,w[v].texcoord.length),w[v].texcoord=y,delete w[v].texcoord2)}for(x=0;x<g.length;x++)for(h=g[x].particle_systems,l=0;l<h.length;l++)m=h[l],m.transforms=q(d,m.transforms[0]*ra.xk+f["float"]+12,m.transforms[1],k);for(g=0;g<a.length;g++){x=
a[g];h=x.fcurves;l=x.frame_range;n=l[0];p=l[1];r=oa.d_(n,p);l=null;0>r&&(r=0);var w=t=!1,F;for(F in h)t|=-1<F.indexOf("rotation_euler"),w|=-1<F.indexOf("rotation_quaternion");m=[];for(F in h)if(t&&w&&-1<F.indexOf("rotation_euler"))delete h[F];else{var v=h[F],L;for(L in v)y=v[L],u=q(d,f["float"]+y.bin_data_pos[0]*ra.xk+12,y.bin_data_pos[1],k),A=new Float32Array(r),l||(l=new Int8Array(r)),oa.aW(y,u,A,l,n,p),y.Wg=A;-1<F.indexOf("rotation_euler")&&(oa.AZ(h[F]),m.push(F))}for(n=0;n<m.length;n++)p=m[n],
r=p.replace("euler","quaternion"),h[r]=h[p],delete h[p];x.vV=l}e(b,c)}function q(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)d[e]=a.getFloat32(b+e*ra.xk,!0)}return d}function w(a,b,c,d,f){var h=a.cameras,k=a.groups,l=a.materials,m=a.meshes,n=a.node_groups,p=a.objects,q=a.particles,r=a.scenes,t=a.speakers,w=a.lamps,v=a.textures,y=a.worlds;n||(qa.warn('"node_groups" datablock undefined. reexport main scene.'),n=a.node_groups=[]);for(var u=
"actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),A={},z=0;z<u.length;z++)for(var J=a[u[z]],C=0;C<J.length;C++){var B=J[C];A[B.uuid]=B}for(var K=0;K<r.length;K++){for(var D=r[K],G=D.objects,F=0;F<G.length;F++)S(G,F,A);D.camera&&S(D,"camera",A);D.world&&S(D,"world",A)}for(K=0;K<k.length;K++)for(var L=k[K].objects,F=0;F<L.length;F++)S(L,F,A);for(K=0;K<p.length;K++){var H=p[K];H.dupli_group&&S(H,"dupli_group",
A);H.parent&&S(H,"parent",A);H.dg_parent&&S(H,"dg_parent",A);var T=H.animation_data;T&&M(T,A);switch(H.type){case "MESH":H.data||ra.J("mesh not found for object "+H.name);S(H,"data",A);for(var R=!1,N=H.modifiers,F=0;F<N.length;F++){var O=N[F];"ARMATURE"==O.type?(R&&qa.warn('Object "'+H.name+'" has more than one armature modifiers. Only the first one will be used.'),R=!0,S(O,"object",A)):"CURVE"==O.type&&S(O,"object",A)}var X=H.particle_systems;if(X)for(F=0;F<X.length;F++)S(X[F],"settings",A);break;
case "ARMATURE":S(H,"data",A);for(var Q=H.pose.bones,da=H.data.bones,F=0;F<Q.length;F++){var ba=Q[F];ba.bone=da[ba.bone];var W=ba.constraints;if(W)for(var aa=0;aa<W.length;aa++){var Eb=W[aa];Eb.target&&S(Eb,"target",A)}for(var U=ba.parent_recursive,aa=0;aa<U.length;aa++)U[aa]=Q[U[aa]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":S(H,"data",A)}if(W=H.constraints)for(F=0;F<W.length;F++)Eb=W[F],Eb.target&&S(Eb,"target",A);var ca=H.lod_levels;if(ca)for(F=0;F<ca.length;F++){var V=ca[F];
V.object&&S(V,"object",A)}}for(K=0;K<m.length;K++)for(var Z=m[K].materials,F=0;F<Z.length;F++)S(Z,F,A);for(K=0;K<l.length;K++){for(var wa=l[K],nb=wa.texture_slots,F=0;F<nb.length;F++)S(nb[F],"texture",A);var ja=wa.node_tree;ja&&E(ja,A)}for(K=0;K<n.length;K++)(ja=n[K].node_tree)&&E(ja,A);for(K=0;K<v.length;K++){var Ob=v[K],Y=Ob.type;"IMAGE"!=Y&&"ENVIRONMENT_MAP"!=Y||S(Ob,"image",A)}for(K=0;K<h.length;K++){var ga=h[K];ga.dof_object&&S(ga,"dof_object",A)}for(K=0;K<t.length;K++){var ea=t[K];ea.sound&&
S(ea,"sound",A);(T=ea.animation_data)&&M(T,A)}for(K=0;K<q.length;K++){for(var Fb=q[K],nb=Fb.texture_slots,F=0;F<nb.length;F++)S(nb[F],"texture",A);Fb.dupli_group&&S(Fb,"dupli_group",A);Fb.dupli_object&&S(Fb,"dupli_object",A)}for(K=0;K<w.length;K++)(T=w[K].animation_data)&&M(T,A);for(K=0;K<y.length;K++){var ha=y[K];if(nb=ha.texture_slots)for(F=0;F<nb.length;F++)S(nb[F],"texture",A);(T=ha.animation_data)&&M(T,A);(ja=ha.node_tree)&&E(ja,A)}Va.VW(a);I(a);for(var ic=ma(b.Oj),ua=a.textures,pa=b.Sb?a.scenes[0].b4w_anisotropic_filtering:
jb.b4w_anisotropic_filtering,za=0;za<ua.length;za++){var ia=ua[za];b.Sb||"SCENE"!=ia.b4w_source_type||(ia.b4w_source_id="");var qb=Ma.CY(ia,pa,a.scenes,b.id,ic);ia.I=qb}for(var na={},sa=a.objects,ub=0;ub<sa.length;ub++){var ta=sa[ub];if("MESH"===ta.type&&!ta.particle_systems.length)for(var xa=ta.data,Aa=xa.name,Ba=xa.submeshes,Hb=xa.materials,Da=0;Da<Ba.length;Da++)0!==Ba[Da].base_length||na[Aa]||(Hb[Da]&&qa.warn('material "'+Hb[Da].name+'" is not assigned to any face (object "'+ta.name+'").'),na[Aa]=
!0)}var Ea=[];a.materials=[];for(var sc=a.meshes,Fa=0;Fa<sc.length;Fa++){var Ha=sc[Fa];if(0==Ha.materials.length){var Ia=ka.JX();Ha.materials.push(Ia);-1==Ea.indexOf(Ia.md)&&(Ea.push(Ia.md),a.materials.push(Ia))}else for(var Ka=0;Ka<Ha.materials.length;Ka++){var Oa=Ha.materials[Ka],Na=ka.q0();ka.f5(Oa,Na);Ha.materials[Ka]=Na;-1==Ea.indexOf(Na.md)&&(Ea.push(Na.md),a.materials.push(Na))}}for(var tc=a.actions,Ra=b.id,Qa=0;Qa<tc.length;Qa++){var Sa=tc[Qa];Sa.wV=Ra;oa.FV(Sa)}for(var Ua={cP:[],DA:[]},hb=
a.scenes,Pa=0;Pa<hb.length;Pa++)for(var ab=hb[Pa],Za=hb[Pa].objects,Wa=0;Wa<Za.length;Wa++)fa(ab,Za,Za[Wa],null,Ua);for(Pa=0;Pa<Ua.DA.length;Pa++)for(var Ya=Ua.DA[Pa],Wa=0;Wa<Ya.ZA.length;Wa++){var kb=Ya.ZA[Wa],bb=Ya.vP[Wa],mb=Ya.HH[Wa],yb=Ya.VG[Wa];Ya.bP[Wa].object=bb;for(var Cb=0;Cb<yb.length;Cb++)ra.XV(yb[Cb],bb);for(var rb=kb,Db=mb,xb=0;xb<Db.length;xb++){for(var xc=Db[xb].objects,hd=0;hd<xc.length;hd++){var cc=xc[hd].dupli_group;cc&&la(rb,cc)}var Bc=xc.indexOf(rb);-1<Bc&&xc.splice(Bc,1)}}!b.Sb&&
1<a.scenes.length&&(a.scenes=[ya.ez(a.scenes)],qa.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var Id=b.Sb?jb:ya.ez(a.scenes);Ca.n3(jb.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(jb),1),a.scenes.unshift(jb));for(var Jd=0;Jd<a.scenes.length;Jd++){var yc=a.scenes[Jd];yc.I={};yc.jK=yc==Id;yc.xV=b.Sb;var od;if(od=Jb.enabled){var vd;if(vd="OFF"!=yc.b4w_enable_physics){var id;if(!(id="AUTO"!=yc.b4w_enable_physics))a:{for(var jd=e(yc),pd=0;pd<jd.length;pd++){if(jd[pd].b4w_collision){id=
!0;break a}var kd=jd[pd].data;if(kd.materials)for(var wd=0;wd<kd.materials.length;wd++)if(kd.materials[wd].Rd.Es){id=!0;break a}}id=!1}vd=id}od=vd}od&&(b.Sb||!Ga.DB(jb)&&yc==ya.ez(a))&&Ga.r0(yc)}for(var xd=0;xd<a.scenes.length;xd++){var qd=a.scenes[xd];if(qd.b4w_use_logic_editor){var Kd=e(qd);Va.eW(Kd,qd)}}for(var nc=0;nc<a.scenes.length;nc++){for(var rd=a.scenes[nc],Ld=e(rd),rc=0;rc<Ld.length;rc++){var Bb=Ld[rc];va.WW(Bb,rd,a)&&(Bb.ke||(Bb.ke=[]),Bb.ke.push(b.Sb?rd:jb))}for(var Md=Ld,Cc=0;Cc<Md.length;Cc++){var oc=
Md[Cc];if(oc.ke&&"WORLD"!=oc.type)for(var Nd=oc.particle_systems,ld=0;ld<Nd.length;ld++){var sd=Nd[ld].settings;if("HAIR"==sd.type)if("OBJECT"==sd.render_type){var md=sd.dupli_object;md.ke||(md.ke=oc.ke.slice())}else if("GROUP"==sd.render_type)for(var Od=sd.dupli_group,Fd=0;Fd<Od.objects.length;Fd++)md=Od.objects[Fd],md.ke||(md.ke=oc.ke.slice())}}}for(var be=a.scenes,Td=[],dc=0;dc<be.length;dc++)x(be[dc].objects,0,b.Sb,Td);Ja[b.id]=[];for(dc=0;dc<Td.length;dc++)for(var ce=Td[dc],yd=0;yd<ce.length;yd++)for(var de=
ce[yd],Ud=0;Ud<de.length;Ud++)Ja[b.id].push(de[Ud]);for(var Vd=a.particles,dc=0;dc<Vd.length;dc++){var Gd=Vd[dc].dupli_object;Gd&&(Gd.iK=!0,Ja[b.id].push(Gd));var ee=Vd[dc].dupli_group;if(ee)for(var fe=ee.objects,yd=0;yd<fe.length;yd++)Gd=fe[yd],Gd.iK=!0,Ja[b.id].push(Gd)}for(var Wd=Ja[b.id],dc=Wd.length-1;0<=dc;dc--)Wd[dc].ke||Wd.splice(dc,1);for(var Rd=Ja[b.id],nc=0;nc<Rd.length;nc++){Bb=Rd[nc];!b.Sb&&Bb.parent&&-1<Zc.indexOf(Bb.parent.type)&&(Bb.parent="");if("MESH"==Bb.type){var Xd=Va.$V(Bb);
Xd&&(a.meshes.push(Xd),Bb.data=Xd)}Bb.tq=va.eN(Bb,!1);Bb.Ek=va.$K(Bb)}for(nc=0;nc<Rd.length;nc++){for(var Bb=Rd[nc],Yd=Bb.Ek,rc=0;rc<Bb.lod_levels.length;rc++){var Sd=Bb.lod_levels[rc].object;Sd&&(Yd=Yd||Sd.Ek)}if(Yd)for(Bb.Ek=!0,rc=0;rc<Bb.lod_levels.length;rc++)if(Sd=Bb.lod_levels[rc].object)Sd.Ek=!0}for(var Oc=0;Oc<a.scenes.length;Oc++){var ge=a.scenes[Oc],Dc=ge.world;Dc.ke||(Dc.ke=[]);Dc.ke.push(b.Sb?ge:jb)}for(var Zd=[],Oc=0;Oc<a.worlds.length;Oc++)Dc=a.worlds[Oc],Dc.ke?(Dc.tq=va.eN(Dc,!0),Dc.Ek=
va.$K(Dc)):Zd.push(Dc);for(Oc=0;Oc<Zd.length;Oc++)Dc=Zd[Oc],a.worlds.splice(a.worlds.indexOf(Dc),1);for(var he=a.node_groups,ie=a.materials,zd=0;zd<he.length;zd++){var Hd=he[zd].node_tree;if(Hd){var Pd=[];g(Hd,Pd,!0);Hd.Ax=Pd}}for(zd=0;zd<ie.length;zd++)if(Hd=ie[zd].se)Pd=[],g(Hd,Pd,!1),Hd.Ax=Pd;for(var $d=0;$d<a.scenes.length;$d++){var je=a.scenes[$d],ae=b.Sb?je:jb;P(b.id,ae,"SPEAKER").length&&!ae.pd&&La.iW(ae)}f(b,c)}function A(a,b,c,e,f){e=ma(b.Oj);for(var g=[],h=[],k=0;k<a.speakers.length;k++){var l=
a.speakers[k],m=l.sound.uuid;if(-1==h.indexOf(m)){h.push(m);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var n=pa.vD;break;case "BACKGROUND_MUSIC":n=pa.wD}l=ra.Bl(e+l.sound.filepath);d(g,m,n,l,b.ih)}}g.length?pa.enqueue(g,function(){},function(){f(b,c)}):f(b,c)}function g(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d],f=e.type;if("GROUP"==f&&e.node_group){if(e=e.node_group.node_tree)if(c)g(e,b,!0);else for(e=e.Ax,f=0;f<e.length;f++){var h=e[f];-1==b.indexOf(h)&&b.push(h)}}else-1!=
Db.indexOf(f)&&-1==b.indexOf(f)&&b.push(f)}}function e(a){var b=[];-1==a.objects.indexOf(a.camera)&&a.objects.push(a.camera);y(a.objects,"ALL",b);return b}function y(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&y(e.objects,b,c)}}function x(a,b,c,d){d[b]=d[b]||[];for(var e=d[b],f=0;f<a.length;f++){var g=a[f],h=ja(g);e[h]=e[h]||[];(c||-1==Zc.indexOf(g.type))&&-1==e[h].indexOf(g)&&e[h].push(g);(g=g.dupli_group)&&x(g.objects,b+1,c,d)}}function P(a,b,
c){var d=[];a=Ja[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.type==c||"ALL"==c)for(var g=0;g<f.ke.length;g++)b==f.ke[g]&&d.push(f)}return d}function J(a,b,c,d,e){for(var f=Ja[b.id],g=0;g<f.length;g++){var h=va.YL(f[g]);h.v.Le=b.id}for(var k=a.worlds,g=0;g<k.length;g++)va.YL(k[g],!0);d=va.Pj("ALL",b.id);for(g=0;g<f.length;g++){var l=f[g],h=l.Oa;Fa.Ds(l,h)}for(g=0;g<k.length;g++)h=k[g],Fa.Ds(h,h.Oa);b.Sb&&L(a,b.id);for(g=0;g<f.length;g++)l=f[g],h=l.Oa,h.av||(na.j2(l,h),va.h5(l,h),sa.V(h)),"MESH"==
h.type&&va.YZ(l,h);for(a=0;a<f.length;a++){var m=f[a],k=m.Oa,g=k.v;if(N.mf(k)||N.mr(k)){var n=m.lod_levels.length;if(n){for(var k=[m],h=[0],p=Infinity,l=0;l<n;l++){var q=m.lod_levels[l].object,r=m.lod_levels[l].distance;if(!q){p=r;break}k.push(q);h.push(r)}h.push(p);for(l=0;l<k.length;l++)q=k[l],m=q.Oa.v,m.nl=!0,"DYNAMIC"==g.type&&0<l&&U.subtract(g.af.T,m.af.T,m.GA),m.kh=h[l],m.jh=h[l+1],n=h[l+1]-h[l],p=l==k.length-1?Infinity:h[l+2]-h[l+1],m.tl=Math.min(l?h[l]-h[l-1]:0,n),m.ul=Math.min(n,p)}}}for(f=
0;f<d.length;f++)if(a=d[f],"MESH"==a.type&&(g=a.Kx)){var g=g.v,k=a.v.Aj,h=[],t;for(t in k)l=k[t],h.push(4*l.dF,4*l.zj);g.KA.push(h);g.gs.push(a.v)}f=t=-1;a=oa.xN();for(g=0;g<d.length;g++)k=d[g],h=k.v,N.mf(k)&&h.Pm&&(k=h.Yi,k>t&&(t=k),a>=k&&k>f&&(f=k));for(g=0;g<d.length;g++)k=d[g],h=k.v,N.mf(k)&&h.Pm&&(h.Eo=!0,t<a?h.Yi=t:h.Yi<=a?h.Yi=f:(qa.warn('too many bones for "'+k.name+'" / '+h.Yi+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),h.Yi=t,
h.Eo=!1),h.Eo=h.Eo&&!Za.PM);for(t=0;t<d.length;t++)if(f=d[t],f.ug)if(a=f.Jg,"CHASSIS"==a.Ag){f.O={};f.O.Hu=a.Hu;f.O.St=a.St;f.O.pI=a.pI;f.O.rI=a.rI;f.O.qI=a.qI;f.O.XI=a.XI;f.O.DH=a.DH;f.O.DG=a.DG;f.O.Uq=0;f.O.Rt=1;f.O.us=0;f.O.speed=0;f.O.pp=[];f.O.Gv=[];f.O.ws=null;k=(g=N.Qj(f))?N.DF(g,d):d;for(g=0;g<k.length;g++)h=k[g],h.ug&&(l=h.Jg,Ga.x0(h)&&a.name==l.name?(l=Ga.U5(h.Jg.Ag),f.O.pp[l]=h,f.O.Gv[l]=new Float32Array(8)):Ga.LO(h)&&a.name==l.name?(f.O.ws=h,f.O.vs=l.vs,f.O.hw=l.hw,f.O.Zu=l.Zu,l=Da.invert(f.v.C,
Da.create()),h=Da.multiply(l,h.v.C,l),f.O.GR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.FR=l):Ga.KO(h)&&a.name==l.name?(f.O.iI=h,f.O.gw=l.gw,f.O.zr=l.zr,l=Da.invert(f.v.C,Da.create()),h=Da.multiply(l,h.v.C,l),f.O.BR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.AR=l):Ga.MO(h)&&a.name==l.name&&(f.O.sI=h,f.O.uu=l.uu,l=Da.invert(f.v.C,Da.create()),h=Da.multiply(l,h.v.C,l),f.O.RR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.QR=l));4!=f.O.pp.length&&ra.J("Not enough wheels for chassis "+f.name)}else if("HULL"==
a.Ag)for(f.O={},f.O.pp=[],f.O.Gv=[],f.O.Hu=a.Hu,f.O.St=a.St,f.O.Ao=a.Ao,f.O.Mp=a.Mp,f.O.Np=a.Np,f.O.Uq=0,f.O.Rt=1,f.O.us=0,f.O.speed=0,f.O.ws=null,k=(g=N.Qj(f))?N.DF(g,d):d,g=0;g<k.length;g++)h=k[g],h.ug&&(l=h.Jg,Ga.w0(h)&&a.name==l.name?(f.O.pp.push(h),f.O.Gv.push(new Float32Array(8))):Ga.LO(h)&&a.name==l.name?(f.O.ws=h,f.O.vs=l.vs,f.O.hw=l.hw,f.O.Zu=l.Zu,l=Da.invert(f.v.C,Da.create()),h=Da.multiply(l,h.v.C,l),f.O.GR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.FR=l):Ga.KO(h)&&a.name==l.name?(f.O.iI=
h,f.O.gw=l.gw,f.O.zr=l.zr,l=Da.invert(f.v.C,Da.create()),h=Da.multiply(l,h.v.C,l),f.O.BR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.AR=l):Ga.MO(h)&&a.name==l.name&&(f.O.sI=h,f.O.uu=l.uu,l=Da.invert(f.v.C,Da.create()),h=Da.multiply(l,h.v.C,l),f.O.RR=h,l=new Float32Array([1,0,0]),Da.Td(l,h,l),f.O.QR=l));for(t=0;t<d.length;t++)if(f=d[t],f.Uo&&(a=f.Yq,"MAIN_BODY"==a.Ag))for(f.Th={},f.Th.Ao=a.Ao,f.Th.Mp=a.Mp,f.Th.Np=a.Np,f.Th.Ux=[],g=(g=N.Qj(f))?N.DF(g,d):d,k=0;k<g.length;k++)h=g[k],h.Uo&&(l=h.Yq,
Ga.z0(h)&&a.name==l.name&&(f.Th.Ux.push(h),h.jE=h.Yq.PR));e(b,c)}function L(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=a.scenes[c],e=va.vc(d,"LAMP",b),f=Array(e.length),g=0;g<e.length;g++)f[g]=g;f.sort(function(a,b){var c=e[a].yd,d=e[b].yd;return d.Ep&&d.Ip&&(!c.Ep||!c.Ip)||!c.Ep&&(d.Ep||!c.Ip&&d.Ip)?1:0});for(g=0;g<f.length;g++)N.La(e[f[g]],d).lv=g}}function l(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];f.Dk=f.camera.Oa}for(d=0;d<a.scenes.length;d++){var f=b.Sb?a.scenes[d]:
jb,g=b.Sb?va.vc(f,"LAMP",b.id):va.vc(f,"LAMP",0),h=va.vc(f,"ALL",b.id),k=P(b.id,f,"MESH"),l=P(b.id,f,"EMPTY");b.Sb&&ya.LV(f,h,g,k,l);for(var h=!1,m=0;m<l.length;m++)for(var n=l[m].Oa,p=n.P,q=0;q<p.length;q++){var r=p[q].vb,t=ya.nS(r,n);f.name==r.name&&(h=h||t)}b.Sb&&f.I.Xd&&!h&&qa.warn('Scene "'+f.name+'" has water but has no wind. Using default settings.');l=[];ya.Zr(f);Q.XM(f,k,g,l);m=va.vc(f,"LINE",b.id);Q.WM(f,m);n=ya.yz(f);if(b.Sb){h=f.I.fC;m=f.world;if(h.hQ||h.procedural_skydome)p=m.Oa,Q.RV(f,
h,p),Q.ry(p,n,f);ya.UM(f,n);(h=f.I.Hn)&&(h.xw||h.Qe)&&Q.JV(f,m.Oa)}for(m=0;m<k.length;m++)Q.ry(k[m].Oa,n,f);for(m=0;m<l.length;m++)Q.ry(l[m],n,f),va.I1(l[m]);h=va.vc(f,"ALL",b.id);ya.GK(f,h,g);for(m=0;m<h.length;m++)n=h[m],n.v.Xf&&!n.AO&&va.MI(n),N.cX(n)&&(n.tP=!0),va.d5(n,f)}ya.MV(jb,a.textures,b.id);b.Sb&&jb.I.Ss.length&&(b.$F=!0);e(b,c)}function I(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.Fh="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==Ea.lo?"dds":""}if((Ra.cF&&
"dds"==Ea.lo||Ra.rB&&"pvr"==Ea.lo)&&Ea.yS)for(a=0;a<b.length;a++){for(var d=b[a],e=d.texture_slots,c=0;c<e.length;c++){var f=e[c],g=f.texture;if("IMAGE"==g.type||"ENVIRONMENT_MAP"==g.type){var h=g.image;h&&!h.Fh&&(f=!g.b4w_disable_compression&&!f.use_map_normal&&"ENVIRONMENT_MAP"!=g.type&&!g.b4w_shore_dist_map&&"MOVIE"!=h.source,v(h,f))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){e=d[c];f=!1;if("TEXTURE"==e.type){if((g=e.texture)&&(h=g.image)&&!h.Fh&&(f=!g.b4w_disable_compression&&"MOVIE"!=
g.image.source&&"ENVIRONMENT_MAP"!=g.type)){a:{f=e.outputs;for(e=0;e<f.length;e++)if(g=f[e],g.is_linked&&"Normal"==g.identifier){f=!0;break a}f=!1}f=!f}}else"TEX_IMAGE"==e.type?(h=e.image)&&!h.Fh&&(f="MOVIE"!=h.source):"TEX_ENVIRONMENT"==e.type&&(f=!1);h&&!h.Fh&&v(h,f)}}}function v(a,b){-1<a.filepath.indexOf(".dds")?a.Fh="dds":b?(a.Fh=Ea.lo,a.filepath="dds"==Ea.lo?a.filepath+".dds":a.filepath+".pvr"):a.Fh=""}function K(a,b,c,d,e){d=a.groups;for(var f=a.objects,g={},h={},l={},m={},n=0;n<d.length;n++){var p=
d[n];g[p.uuid]=p;l[p.uuid]=p}for(n=0;n<f.length;n++)p=f[n],h[p.uuid]=p,m[p.uuid]=p;a=a.scenes;for(n=0;n<a.length;n++)k(a[n].objects,null,m,l,null);for(var q in l)q in g||d.push(l[q]);for(q in m)q in h||f.push(m[q]);e(b,c)}function k(a,b,c,d,e){for(var f=[],g=0;g<a.length;g++){var h=a[g],l=c[h.uuid];if(h=l.proxy){b&&-1==f.indexOf(h.uuid)&&f.push(h.uuid);for(var m=c[h.uuid],n=m.constraints,h=0;h<n.length;h++){var p=ra.X(n[h]);p.name=p.name+"_CLONE";l.constraints.push(p)}"b4w_proxy_inherit_anim"in l&&
!l.b4w_proxy_inherit_anim||(l.animation_data&&(m.animation_data=ra.X(l.animation_data)),m.b4w_use_default_animation=l.b4w_use_default_animation,m.b4w_auto_skel_anim=l.b4w_auto_skel_anim,m.b4w_anim_behavior=l.b4w_anim_behavior,m.b4w_cyclic_animation=l.b4w_cyclic_animation)}}for(g=0;g<f.length;g++)l=ra.D_(a,f[g]),-1<l&&a.splice(l,1);f={};if(b)for(g=0;g<a.length;g++)h=a[g],l=c[h.uuid],n=ra.X(l),m="origin_name"in l?l.origin_name:l.name,n.name=N.TM(b.name,m),n.origin_name=m,n.dg_parent={uuid:b.uuid},D(n),
c[n.uuid]=n,f[h.uuid]=n.uuid,h.uuid=n.uuid,e&&e[l.uuid]&&(n.b4w_cluster_data=e[l.uuid]);for(g=0;g<a.length;g++)h=a[g],l=c[h.uuid],l.dupli_group&&(h=l.dupli_group,e=d[h.uuid],n=ra.X(e),n.name=ra.rw(e.name+"_CLONE"),n.uuid=Ba.hO("Group"+n.name),d[n.uuid]=n,h.uuid=n.uuid,k(n.objects,l,c,d,l.b4w_cluster_data));if(b)for(g=0;g<a.length;g++){h=a[g];l=c[h.uuid];l.parent&&l.parent.uuid in f?l.parent.uuid=f[l.parent.uuid]:l.parent&&(qa.warn("Object's \""+l.name+'" parent is not in dupli group. Disabling parenting.'),
l.parent=null);n=l.constraints;for(h=0;h<n.length;h++)b=n[h],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);if(b=l.pose)for(d=b.bones,h=0;h<d.length;h++)if(e=d[h].constraints)for(n=0;n<e.length;n++)b=e[n],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);b=l.modifiers;for(h=0;h<b.length;h++)d=b[h],d.object&&d.object.uuid in f&&(d.object.uuid=f[d.object.uuid]);if((l=l.lod_levels)&&l.length)for(h=0;h<l.length;h++)b=l[h],b.object&&b.object.uuid in f&&(b.object.uuid=f[b.object.uuid])}for(var q in f)ub[q]=
f[q]}function D(a){a.uuid=Ba.hO("Object"+a.name)}function M(a,b){a.action&&S(a,"action",b);if(a.nla_tracks)for(var c=0;c<a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],e=0;e<d.strips.length;e++)d.strips[e].action&&S(d.strips[e],"action",b)}function E(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var e=c[d];"TEXTURE"==e.type&&e.texture&&S(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in ub&&(e.lamp.uuid=ub[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&S(e,"node_group",
b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||S(e,"image",b)}e=a.links;for(d=0;d<e.length;d++){var f=e[d];F(f,"from_node",c);F(f,"to_node",c);z(f,"from_socket",f.from_node.outputs);z(f,"to_socket",f.to_node.inputs)}(c=a.animation_data)&&M(c,b)}function S(a,b,c){a[b]&&((c=c[a[b].uuid])||qa.error("Dangling link found:",b,a),a[b]=c)}function F(a,b,c){c=ra.Oe("name",a[b].name,c);a[b]=c}function z(a,b,c){c=ra.Oe("identifier",a[b].identifier,c);a[b]=c}function C(a,b,d,e,f,g){var h=[],k=[],
l={};e=a.images;for(var m=Ma.wN(),n=ma(b.Oj),p=0;p<e.length;p++){var q=e[p],t=q.uuid;if(t){var w=ra.Bl(n+q.filepath),v=pa.sC(w),x=v[1].toLowerCase(),y=q.source;if("FILE"===y){y=q.Fh?pa.Rp:pa.Sp;if(!pa.bX(x)){qa.error('image "'+q.name+'" has unsupported format or broken path.');continue}Ra.HG&&Ea.use_min50&&(w=r(v))}else if("MOVIE"===y)if(Ea.Wv)w=v[0]+".altconv.seq",y=pa.Jw;else{y=La.gF(x);if(""==y){qa.error("failed to load video file (unsupported format)",w);continue}w=y!=x?v[0]+".altconv."+y:v[0]+
"."+v[1];y=pa.Kw}else{qa.error('Image "'+q.name+'" has unsupported format "'+y+'".');continue}t in l||(l[t]=[]);for(v=0;v<m.length;v++)x=m[v],(!Ma.i_(x)&&x.Im==q.Fh&&x.No==t||b.ih)&&l[t].push(x);q.Fh&&Ea.assets_gzip_available&&(y=pa.Vs,w+=".gz");l[t].length&&h.push({id:t,type:y,url:w,lf:b.ih})}}if(h.length){var u=0,A=function(e,f,m,n){if(e){if(b.ih)f=m;else{f=l[f];for(var p=0;p<f.length;p++){var q=f[p];if(m==pa.Jw)q.Uv=e.Oi,Ma.tw(q,e.images,b.id);else if(Ma.tw(q,e,b.id),"ENVIRONMENT_MAP"==q.source&&
b.Sb)for(var r=0;r<a.scenes.length;r++)ya.YC(a.scenes[r]);Ma.b3(q)}f=f[0].Im}m==pa.Kw||m==pa.Jw?(m==pa.Kw?(f=e.videoWidth,e=e.videoHeight):(f=e.images[0].width,e=e.images[0].height),qa.log("%cLOAD VIDEO "+f+"x"+e,"color: #"+(2048<f||2048<e?"a00":1024<f||1024<e?"aa0":"0a0"),n),-1==n.indexOf(ab)&&qa.warn("video",n,"is not from app root.")):c(e,n,!0,f)}else{a:{e=b.ih;n=n.split("?v")[0];m=pa.sC(n);if("gz"==m[1])n=m[0],m=pa.Rp;else if("dds"==m[1]||"pvr"==m[1])for(n=m[0],m=pa.Sp,p=l[f],q=0;q<p.length;q++)p[q].Im=
"";else if(-1!=n.indexOf(".min50"))n=n.split(".min50"),n=n[0]+n[1],m=pa.Sp;else{f=null;break a}f={id:f,type:m,url:n,lf:e}}f&&(qa.warn("Trying to load fallback image",f.url),k.push(f))}f=++u/(h.length+k.length);g(b,d,f)},z=function(){k.length?(pa.enqueue(k,A,z),k.length=0):(qa.log("%cLOADED ALL IMAGES","color: #0a0"),f(b,d))};pa.enqueue(h,A,z)}else f(b,d)}function r(a){return"dds"==a[1]?(a=pa.sC(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function f(a,b,c,d,e){a=ya.Ez();for(d=0;d<a.length;d++){var f=
a[d];if(f.b4w_use_nla){var g=f.b4w_nla_cyclic;f.b4w_use_logic_editor&&(g=!1);Fa.o5(f,g,b.id)}}e(b,c)}function W(a,b,c,e,f,g){a=ma(b.Oj);var h=[],k={};e=va.Pj("ALL",b.id);for(var l=0;l<e.length;l++){var m=e[l];if(n(m)){var p=m.ka.md;"BACKGROUND_MUSIC"==La.PF(m)?(p=ra.pz(),b.WF=!0):"NONE"!=La.PF(m)&&Ea.eG&&(b.dG=!0);if(!(p in k)){k[p]=[];var q=ra.Bl(a+m.ka.Oj);switch(La.zR(m)){case La.uD:var r=pa.vD;break;case La.$I:r=pa.wD}d(h,p,r,q,b.ih)}k[p].push(m)}}if(h.length){var t=0;pa.enqueue(h,function(a,
d,e,f){if(a)for(qa.log("%cLOAD SOUND","color: #0aa",f),-1==f.indexOf(ab)&&qa.warn("sound",f,"is not from app root."),d=k[d],e=0;e<d.length;e++)La.t5(d[e],a);a=++t/h.length;g(b,c,a)},function(){qa.log("%cLOADED ALL SOUNDS","color: #0aa");f(b,c)})}else f(b,c)}function d(a,b,c,d,e){var f=pa.sC(d),g=f[1].toLowerCase(),h=La.fF(g);""!=h?(d=h!=g?f[0]+".altconv."+h:f[0]+"."+f[1],a.push({id:b,type:c,url:d,lf:e})):qa.error("failed to load audio file (unsupported format)",d)}function n(a){return N.Qm(a)&&La.zR(a)!=
La.aJ}function X(a,b,c){a=va.vc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];N.Qm(d)&&(La.v0(d)||c)&&La.lB(d)}}function R(a,b){for(var c=a.I.Ss,d=0;d<c.length;d++){var e=c[d].I;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=e.Fw||(Ma.mQ(e),Ma.NP(e))}}function t(a,b,c,d,e){Fa.start();qa.log("%cSTART NLA","color: #0a0");e(b,c)}function fa(a,b,c,d,e){for(var f=c.lod_levels.length,g=0;g<f;g++){var h=c.lod_levels[g],k=h.object;if(k){var l=e.cP.indexOf(c);if(-1==l){e.cP.push(c);var m=
{ZA:[],vP:[],bP:[],HH:[],VG:[]};e.DA.push(m)}else m=e.DA[l];var n=m.ZA.indexOf(k);-1!=l&&-1!=n?(m.HH[n].push(a),m.VG[n].push(b)):(l=ra.cu(k),l.name=c.name+"_LOD_"+String(g+1),l.b4w_cluster_data=c.b4w_cluster_data,D(l),l.lod_levels=[],d&&(l.dg_parent=d),m.ZA.push(k),m.vP.push(l),m.bP.push(h),m.HH.push([a]),m.VG.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)fa(a,b,b[d],c,e)}function la(a,b){var c=b.objects,d=c.indexOf(a);-1<d&&c.splice(d,1);for(d=0;d<c.length;d++)(b=c[d].dupli_group)&&
la(a,b)}function H(a,b,c,d,e){d=!0;for(var f=0;f<a.scenes.length;f++)if(!Ga.fX(a.scenes[f])){d=!1;break}d&&(e(b,c),qa.log("%cPHYSICS READY","color: #0a0"))}function za(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];if(b.Sb)var g=Ga.DB(f);else g=Ga.DB(jb)||Ga.DB(f),f=jb;if(Jb.enabled&&g)for(g=0;g<mb.length;g++)for(var h=va.vc(f,mb[g],b.id),k=0;k<h.length;k++){var l=h[k];l.v.Le==b.id&&(Ga.jm(l,f),b.YO&&Ga.Ca(l)&&Ga.jF(l))}}e(b,c)}function ha(a,b,d,e,f){var g={};e=[];for(var h=a.scenes,
k=0;k<a.scenes.length;k++){var l=h[k];if(l.I.Xd){var m=l.I.Xd.kn;if(m&&"FILE"===m.source){var l=m.uuid,n=ra.Bl(ma(b.Oj)+m.filepath);e.push({id:l,type:m.Fh?pa.Rp:pa.Sp,url:n});g[l]=m}}}e.length?pa.enqueue(e,function(a,d,e,f){if(a){c(a,f,!0);e=[];f=Ma.wN();for(var k=0;k<f.length;k++){var l=f[k];l.uri===d&&e.push(l)}for(d=0;d<e.length;d++)Ma.tw(e[d],a,b.id);for(d=0;d<h.length;d++)if(e=h[d],e.I.Xd&&(f=e.I.Xd.kn,f===m)){var l=a,n=document.createElement("canvas");f=m.size[0];k=m.size[1];n.width=f;n.height=
k;n=n.getContext("2d");n.drawImage(l,0,0);l=n.getImageData(0,0,f,k).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;n[2]=1/255;n[3]=1;f*=k;for(var k=new Float32Array(f),p=0;p<f;p++)k[p]=n[1]*l[4*p+2]+n[2]*l[4*p+3];e.I.dI=k}}else for(a=g[d],d=0;d<h.length;d++)e=h[d],f=e.I.Xd.kn,f===a&&(e.I.Xd.kn=null,qa.warn("image",f.filepath," was not found. Disabling water shore effects."))},function(){f(b,d)}):f(b,d)}function ua(a,b,d,e,f){e=a.scenes[0];a=[];for(var g=[Sa.qx,Sa.wt,Sa.rx,Sa.QD],h=0;h<g.length;h++){var k=
ya.Xb(e,g[h]);k&&a.push(k)}if(a.length){e=[];h=pa.Sp;e.push({id:"SEARCH_TEXTURE",type:h,url:xa.Rf.smaa_search_texture_path,lf:b.ih});e.push({id:"AREA_TEXTURE",type:h,url:xa.Rf.smaa_area_texture_path,lf:b.ih});for(h=0;h<a.length;h++)if(g=a[h],g.type==Sa.wt){a=g.nb;for(h=0;h<a.length;h++)if(g=a[h],"u_search_tex"==g.to)var l=g.fb;else if("u_area_tex"==g.to)var m=g.fb;break}e.length?pa.enqueue(e,function(a,d,e,f){a&&(c(a,f,!1),d="SEARCH_TEXTURE"==d?l:m,d.source="IMAGE",Ma.tw(d,a,b.id),Ma.NH(d,Ma.S,Ma.S))},
function(){f(b,d)}):f(b,d)}else f(b,d)}function ga(a,b,c,d){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.Sb||(e=jb);for(var f=va.vc(e,"LAMP",b.id),g=0;g<f.length;g++){var h=f[g];h.v.Le==b.id&&d.YD.push({vb:e,pa:h})}f=va.vc(e,"ALL",b.id);for(g=0;g<f.length;g++)h=f[g],"LAMP"!=h.type&&h.v.Le==b.id&&(b.YO&&N.mf(h)&&ya.io(h,!0),d.YD.push({vb:e,pa:h}))}}function B(a,b,c,d,e,f){var g=d.YD;e=d.BP;if(g.length){a=g[e].pa;var h=g[e].vb;e=N.La(a,h);ya.jm(h,a);a.anchor&&!h.I.anaglyph_use&&ca.append(a);d=
++d.BP/g.length;a.v.iO&&ya.Yt(a,!0);g=e.Wk;if(-1!=a.v.Ke&&g){var k=U.copy(a.v.af.T,qb);ya.mS(g,k)}g=a.Nv;if(g.length&&h.I.fj)for(h=Da.W(a.v.C),a=Da.ha(a.v.C),e=e.gk,k=0;k<e.length;k++)ya.pS(e[k],h,a),N.qS(g,e[k].F.Kc)}else d=1;f(b,c,d)}function Z(a,b,c,d,e){if(b.Sb){a=ya.Si();ya.YC(a);d=ya.Ez();for(var f=0;f<d.length;f++){var g=d[f];ya.YC(g);ya.k2(g,a)}ya.Zr(a)}else ya.sS(jb);a=va.Pj("ALL",b.id);va.i5(a);e(b,c)}function ea(a,b,c,d,e){if(b.Sb)for(a=ya.Ez(),d=0;d<a.length;d++)for(var f=a[d],g=va.vc(f,
"WORLD",0),h=0;h<g.length;h++)ya.o0(f,g[h]),ya.YC(f);e(b,c)}function Aa(a,b,c,d,e){if(b.Sb)for(a=ya.Ez(),d=0;d<a.length;d++){var f=a[d];f.b4w_use_logic_editor&&Ka.p0(f,b.id)}e(b,c)}function da(a,b,c,d,e){if(b.Sb)for(d=0;d<a.scenes.length;d++)R(a.scenes[d],b.id),X(a.scenes[d],b.id,!1);else R(jb,b.id),X(jb,b.id,!1);e(b,c)}function ba(a,b,c,d,e){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;Ea.media_auto_activation&&(b.$F||b.WF||b.dG)?hb||wa(a,e,b,c):e(b,c)}function wa(a,b,c,d){var e=rb.parentElement;
yb=e.style.zIndex;e.style.zIndex="999";hb=document.createElement("div");hb.style.position="relative";hb.style.height="88px";hb.style.width="88px";var f=Math.round(rb.offsetWidth/2-44);hb.style.top=Math.round(rb.offsetHeight/2-44).toString()+"px";hb.style.left=f.toString()+"px";hb.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
hb.style.backgroundSize="88px";kb=document.createElement("div");kb.style.position="relative";kb.style.height=rb.offsetHeight.toString()+"px";kb.style.width=rb.offsetWidth.toString()+"px";kb.style.background="rgba(0, 0, 0, 0.5)";kb.style.zIndex="999";e.appendChild(kb);kb.appendChild(hb);Cb=function(){c.$F&&(Ma.play(),Ma.pause(),Ma.reset());if(c.WF){if(c.Sb)for(var e=0;e<a.scenes.length;e++)X(a.scenes[e],c.id,!0);else X(jb,c.id,!0);La.pause()}c.dG&&La.MP();T();b(c,d)};Y.Hh(hb,Cb)}function T(){if(hb){var a=
rb.parentElement;a.style.zIndex=yb;Y.yB(hb,Cb);kb.removeChild(hb);a.removeChild(kb);hb=kb=null;yb=0}}function ma(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function aa(a){oa.wO(a)&&oa.remove(a);V.w2(a);va.$t(a);O.om(a)&&O.Cg(a);Ga.Ca(a)&&Ga.sp(a);ya.gQ(a);N.Qm(a)&&La.a4(a);ca.u0(a)&&ca.remove(a)}function ja(a){var b=oa.dN(a);return(a=b&&b.parent==a?null:a.parent||b)?1+ja(a):0}var ca=u("__anchors"),oa=u("__animation"),pa=u("__assets"),Q=u("__batch"),xa=u("__config"),na=u("__constraints"),
O=u("__controls"),Oa=u("__texcomp"),Na=u("__debug"),ta=u("__extensions"),Y=u("__input"),ia=u("__loader"),ka=u("__material"),Ba=u("__md5"),Fa=u("__nla"),Ka=u("__logic_nodes"),V=u("__particles"),Ya=u("__nodemat"),va=u("__objects"),N=u("__obj_util"),Ga=u("__physics"),qa=u("__print"),Qa=u("__quat"),Va=u("__reformer"),Ua=u("__renderer"),ya=u("__scenes"),La=u("__sfx"),Ha=u("__shaders"),Sa=u("__subscene"),Ia=u("__tbn"),Ma=u("__textures"),Ca=u("__time"),sa=u("__transform"),Da=u("__tsr"),ra=u("__util"),U=
u("__vec3"),bb=u("__vec4"),Za=xa.Yn,Ea=xa.K,Ra=xa.Je,Jb=xa.L,xb=xa.ka,Pa=null,Ja=null,ab="",jb=null,ub={},qb=new Float32Array(3),sc=new Float32Array(4),Hb=new Float32Array(4),tc=Ia.create(),hb=null,kb=null,yb=0,Wa=!1,Cb=null,Zc=["LAMP"],mb=["MESH","CAMERA","EMPTY"],Db=["BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],rb=null;a.Vi=function(a){return ia.Vi(a)};a.update=function(){ia.p5(Pa)};a.L3=function(a){rb=a};a.g5=function(a,b){if(hb){kb.style.height=b.toString()+"px";kb.style.width=a.toString()+
"px";var c=Math.round(a/2-44);hb.style.top=Math.round(b/2-44).toString()+"px";hb.style.left=c.toString()+"px"}};a.load=function(a,c,d,e,g){var k={load_main:{Tb:ia.Ah,$b:!1,inputs:[],cc:!1,lc:500,wc:!1,oc:b},duplicate_objects:{Tb:ia.Ye,$b:!1,inputs:["load_main"],cc:!1,lc:50,wc:!1,oc:K},load_binaries:{Tb:ia.Ah,$b:!1,inputs:["load_main"],cc:!1,lc:500,wc:!1,oc:p},wait_for_shaders:{Tb:ia.Ye,$b:!1,inputs:[],cc:!1,lc:50,wc:!0,nm:h},prepare_bindata:{Tb:ia.Ye,$b:!1,inputs:["duplicate_objects","load_binaries"],
cc:!1,lc:100,wc:!1,oc:G},prepare_bpy_data:{Tb:ia.Ye,$b:!1,inputs:["duplicate_objects","prepare_bindata"],cc:!1,lc:100,wc:!1,oc:w},process_objects:{Tb:ia.Ye,$b:!1,inputs:["prepare_bpy_data"],cc:!1,lc:150,wc:!1,oc:J},process_scenes:{Tb:ia.Ye,$b:!1,inputs:["process_objects","wait_for_shaders"],cc:!1,lc:300,wc:!1,oc:l},load_smaa_textures:{Tb:ia.Ah,$b:!1,inputs:["process_scenes"],cc:!1,lc:30,wc:!0,oc:ua},load_shoremap:{Tb:ia.Ah,$b:!1,inputs:["process_scenes"],cc:!1,lc:30,wc:!0,oc:ha},load_images:{Tb:ia.Ah,
$b:!0,inputs:["process_scenes"],cc:!0,lc:500,wc:!1,oc:C},update_scenes_nla:{Tb:ia.Ye,$b:!1,inputs:["process_scenes","load_images"],cc:!1,lc:50,wc:!1,oc:f},wait_physics_workers:{Tb:ia.Ye,$b:!1,inputs:["load_shoremap"],cc:!1,lc:20,wc:!1,nm:H},add_physics_objects:{Tb:ia.Ye,$b:!1,inputs:["wait_physics_workers"],cc:!1,lc:50,wc:!1,oc:za},add_objects:{Tb:ia.Ye,$b:!1,inputs:["add_physics_objects"],cc:!1,lc:600,wc:!1,oc:ga,nm:B,Wt:Z,Xt:{YD:[],BP:0}},init_cube_sky_dynamic_props:{Tb:ia.Ye,$b:!1,inputs:["add_objects",
"load_images"],cc:!1,lc:50,wc:!1,oc:ea},init_logic_nodes:{Tb:ia.Ye,$b:!1,inputs:["update_scenes_nla","add_objects"],cc:!1,lc:50,wc:!1,oc:Aa},load_speakers:{Tb:ia.Ah,$b:!0,inputs:["add_objects"],cc:!0,lc:100,wc:!1,oc:W},mobile_media_start:{Tb:ia.Ye,$b:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],cc:!0,lc:5,wc:!1,oc:ba,nm:ba},synchronize_media:{Tb:ia.Ye,$b:!0,inputs:["mobile_media_start"],cc:!0,lc:50,wc:!1,oc:da},start_nla:{Tb:ia.Ye,$b:!0,inputs:["mobile_media_start"],
cc:!1,lc:5,wc:!0,oc:t}},n=ia.OF();n||(n=ia.bM(),Pa={},Ja={},ub={});Pa[n.Ig.length]={};return ia.fM(k,a,c,d,m,e||xb.JK,Ea.do_not_load_resources,g,!1)};a.WC=function(a){var b=ia.OF();if(!b||!b.Ig.length||a&&!ia.z4(b.Ig[a]))qa.error("Unable to unload data!");else{if(0==a)qa.log("%cUNLOAD ALL","color: #00a"),ca.Ja(),oa.Ja(),La.Ja(),Q.Ja(),ya.Ja(),ia.Ja(),O.Ja(),Ga.Ja(),va.Ja(),ra.Ja(),Ua.Ja(),Ya.Ja(),Ha.Ja(),ta.Ja(),pa.Ja(),Ma.Ja(),Ka.Ja(),V.Ja(),Y.Ja(),Na.Ja(),Ja=null,ub={},Pa=jb=null,Wa=!1;else{qa.log("%cUNLOAD DATA "+
a,"color: #00a");oa.t2(a);for(var b=va.Pj("ALL",va.Tc),c=0;c<b.length;c++){var d=b[c];N.KF(d)!=a&&va.Mr(d,!1,!1,!1)}b=va.Pj("ALL",a);for(c=b.length-1;0<=c;c--)d=b[c],aa(d),va.sp(d);b=va.Pj("ALL",va.Tc);for(c=0;c<b.length;c++)va.Mr(b[c],!0,!0,!0)}Fa.Ja(a);T()}};a.QP=aa;a.IQ=function(a){ab=a};a.pK=function(){Wa||Ea.media_auto_activation||(Ma.play(),Ma.pause(),Ma.reset(),X(jb,va.Tc,!0),La.pause(),Ea.eG&&La.MP(),Wa=!0)};a.reset=function(){rb=null};a.PP=function(a,c,d){var e={load_main:{Tb:ia.Ah,$b:!1,
inputs:[],cc:!1,lc:500,wc:!1,oc:b},load_binaries:{Tb:ia.Ah,$b:!1,inputs:["load_main"],cc:!1,lc:500,wc:!1,oc:p},load_images:{Tb:ia.Ah,$b:!1,inputs:["load_main"],cc:!1,lc:500,wc:!1,oc:C},preload_sounds:{Tb:ia.Ah,$b:!1,inputs:["load_main"],cc:!1,lc:500,wc:!1,oc:A}},f=ia.OF();f||(f=ia.bM(),Pa={},Ja={},ub={});Pa[f.Ig.length]={};return ia.fM(e,a,c,d,m,!1,Ea.do_not_load_resources,!1,!0)};a.iS=function(){pa.lX()}};b4w.module.__loader=function(a,u){function m(b,e,g,h){var k=I,l=P.create(),m;for(m in e){var p=c(e[m]);if(h&&p.cc||!b&&p.wc)p.aw=!0;P.Y(l,p)}for(m in e)for(p=e[m],p.name=m,b=0;b<p.inputs.length;b++)P.H(l,e[p.inputs[b]],p,null);e=c({name:"out",Tb:a.fT,oc:function(a,b,c,e,d){b.Sb&&(k.lI=!0);x(b)||(b.status=2);b.$O(b.id,!0);d(b,c);J.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},lc:5});if(g)g=P.Ru(l);else{m=P.clone(l);do{g=P.Ru(m);p=[];for(b=0;b<g.length;b++){h=g[b];var q=P.jb(m,h);q.$b&&
p.push(h)}for(b=0;b<p.length;b++)P.Bg(m,p[b]);p.length&&P.BE(m)}while(p.length)}P.Y(l,e);for(b=0;b<g.length;b++)h=g[b],q=P.jb(l,h),e.inputs.push(q.name),P.H(l,q,e,null);return l}function c(a){a.$b=a.$b||!1;a.Tb||0===a.Tb||(a.Tb=a.Ye);a.inputs=a.inputs||[];a.To=a.To||!1;a.aw=a.aw||!1;a.lc=a.lc||0;a.cc=a.cc||!1;a.wc=a.wc||!1;a.status=0;a.pca=0;a.ZO=0;a.Xt=a.Xt||null;return a}function b(a,b,c){b.KL(c,b);b.status=3;a.XD--;l.debug_loading&&J.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.mw)+"ms","color: #f0f;");b.jI=null;b.KL=null;l.debug_loading||(b.ui=null);b.Ql=null}function p(a,b){for(var c=[],e=[],g=0;g<b.length;g++){var h=b[g];P.jb(a.ui,h).To&&(P.xn(a.ui,h,function(e){var g=!0;P.Wl(a.ui,e,function(a,b){if(!b.To)return g=!1,1});g&&-1==c.indexOf(e)&&-1==b.indexOf(e)&&c.push(e)}),e.push(g))}for(g=e.length-1;0<=g;g--)b.splice(e[g],1);return c}function h(a){function b(b,c){var e=P.jb(a.ui,b),g=P.jb(a.ui,c),h=g.Tb-e.Tb;h||(h=e.$b-g.$b);return h}var c=[],e=a.Ql,g=!1;do{var h=p(a,
e);c.push.apply(c,e);0<h.length&&(g=!0);e=h}while(0<h.length);g&&c.sort(b);a.Ql=c;return a.Ql.length}function G(a,b,c){if(b.aw)return b.To=!0,l.debug_loading&&J.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),w(a,b),!1;if(l.debug_loading&&0==b.status){var e=q(a);J.log("%cTHREAD "+a.id+": "+e+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.mw)+"ms ","color: #f0f;")}if(!b.oc&&!b.nm&&!b.Wt)return w(a,b),!1;if(0==b.status&&(b.status++,b.oc))return b.oc(c,a,b,b.Xt,w,A),!0;
if(1==b.status){if(b.nm)return b.nm(c,a,b,b.Xt,w,A),!0;b.status++}return 2==b.status&&(b.status++,b.Wt)?(b.Wt(c,a,b,b.Xt,w,A),!0):!1}function q(a){if(0==a.wC)return 100;var b=0;P.fa(a.ui,function(c,e){a.do_not_load_resources&&e.cc||(b+=e.ZO*e.lc)});return L.trunc(100*b/a.wC)}function w(a,b){b.To=!0;b.status=3;g(a,b,1);if(l.debug_loading){var c=q(a);J.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.mw)+"ms ","color: #f0f;")}}function A(a,b,c){1>c?g(a,b,c):
b.status++}function g(a,b,c){var e=I;if(b.oc||b.nm||b.Wt)if(b.ZO=c,b=q(a),a.mM!=b||1==c)a.jI(b,performance.now()-a.mw,a.id),a.mM=b,e.wG=!0}function e(a,b){var c=null;P.fa(a.ui,function(a,e){if(e.name==b)return c=e,1});return c}function y(){return 0==I.XD}function x(a){return a&&(3==a.status||4==a.status)}var P=u("__graph"),J=u("__print"),L=u("__util"),l=u("__config").K;a.Ye=0;a.Ah=1;a.fT=2;var I=null;a.OF=function(){return I};a.bM=function(){var a={Ig:[],aF:0,XD:0,lI:!1,wG:!1};return I=a};a.fM=function(a,
b,c,e,g,h,l,p,q){var k=I,r=k.Ig.length,f={id:r,Sb:0==r,status:0,Oj:b,UK:"",$O:c||function(){},YO:p||!1,Rea:h,mw:0,mM:0,wC:0,BH:!1,jI:e||function(){},KL:g||function(){},ui:null,Ql:null,$F:!1,WF:!1,dG:!1,ih:q};a=m(f.Sb,a,h,l);f.ui=a;b=[];c=P.M_(a);for(e=0;e<c.length;e++)b.push(c[e]);f.Ql=b;P.fa(a,function(a,b){!(b.oc||b.nm||b.Wt)||f.do_not_load_resources&&b.cc||(f.wC+=b.lc)});k.Ig.push(f);k.XD++;return f.id};a.p5=function(c){var e=I;if(e&&!y())if(e.wG)e.wG=!1;else{var g=performance.now();do{var m=e.Ig[e.aF],
p=c[m.id];if(!x(m))if(0==m.status&&(m.status=1,m.mw=performance.now(),m.jI(0,0,m.id),l.debug_loading&&J.log("%cTHREAD "+m.id+": 0% LOADING START 0ms","color: #f0f;")),h(m)){var q=m,w=q.Ql.length;do{var v=P.jb(q.ui,q.Ql[0]),u=G(q,v,p);v.Tb==a.Ah&&(q.BH=!0);v=q.Ql.shift();q.Ql.push(v);w--}while(!u&&0!=w)}else b(e,m,p);e.lI&&(e.aF=(e.aF+1)%e.Ig.length);if(m.BH){m.BH=!1;break}}while(16>performance.now()-g)}};a.lK=function(a){var c=I;b(c,a,null);a.status=4;a.Sb&&(c.lI=!0);a.$O(a.id,!1)};a.aea=A;a.bC=function(a,
b){var c=e(a,b);null!==c&&(c.aw=!0)};a.To=y;a.z4=x;a.Vi=function(a){var b=I;if(!b)return!1;a|=0;return b.Ig[a]&&(3==b.Ig[a].status||2==b.Ig[a].status)};a.V_=function(b){if(l.debug_loading){var c=I;return c&&c.Ig[b]&&c.Ig[b].ui?P.qM(c.Ig[b].ui,function(b,c){if(c.aw)return"SKIPPED\n("+c.name+")";var e=c.name+"\n",g=[];g.push(c.Tb==a.Ah?"ASYNC":"SYNC");c.$b&&g.push("BKG");c.cc&&g.push("RES");return e+g.join(" | ")},null):null}J.error("Debug mode isn't enabled. Can not retrieve the graph.")};a.Ja=function(){I=
null}};b4w.module.__md5=function(a){function u(a,h){var q=a[0],u=a[1],g=a[2],e=a[3],q=c(q,u,g,e,h[0],7,-680876936),e=c(e,q,u,g,h[1],12,-389564586),g=c(g,e,q,u,h[2],17,606105819),u=c(u,g,e,q,h[3],22,-1044525330),q=c(q,u,g,e,h[4],7,-176418897),e=c(e,q,u,g,h[5],12,1200080426),g=c(g,e,q,u,h[6],17,-1473231341),u=c(u,g,e,q,h[7],22,-45705983),q=c(q,u,g,e,h[8],7,1770035416),e=c(e,q,u,g,h[9],12,-1958414417),g=c(g,e,q,u,h[10],17,-42063),u=c(u,g,e,q,h[11],22,-1990404162),q=c(q,u,g,e,h[12],7,1804603682),e=c(e,q,u,g,
h[13],12,-40341101),g=c(g,e,q,u,h[14],17,-1502002290),u=c(u,g,e,q,h[15],22,1236535329),q=b(q,u,g,e,h[1],5,-165796510),e=b(e,q,u,g,h[6],9,-1069501632),g=b(g,e,q,u,h[11],14,643717713),u=b(u,g,e,q,h[0],20,-373897302),q=b(q,u,g,e,h[5],5,-701558691),e=b(e,q,u,g,h[10],9,38016083),g=b(g,e,q,u,h[15],14,-660478335),u=b(u,g,e,q,h[4],20,-405537848),q=b(q,u,g,e,h[9],5,568446438),e=b(e,q,u,g,h[14],9,-1019803690),g=b(g,e,q,u,h[3],14,-187363961),u=b(u,g,e,q,h[8],20,1163531501),q=b(q,u,g,e,h[13],5,-1444681467),e=
b(e,q,u,g,h[2],9,-51403784),g=b(g,e,q,u,h[7],14,1735328473),u=b(u,g,e,q,h[12],20,-1926607734),q=m(u^g^e,q,u,h[5],4,-378558),e=m(q^u^g,e,q,h[8],11,-2022574463),g=m(e^q^u,g,e,h[11],16,1839030562),u=m(g^e^q,u,g,h[14],23,-35309556),q=m(u^g^e,q,u,h[1],4,-1530992060),e=m(q^u^g,e,q,h[4],11,1272893353),g=m(e^q^u,g,e,h[7],16,-155497632),u=m(g^e^q,u,g,h[10],23,-1094730640),q=m(u^g^e,q,u,h[13],4,681279174),e=m(q^u^g,e,q,h[0],11,-358537222),g=m(e^q^u,g,e,h[3],16,-722521979),u=m(g^e^q,u,g,h[6],23,76029189),q=
m(u^g^e,q,u,h[9],4,-640364487),e=m(q^u^g,e,q,h[12],11,-421815835),g=m(e^q^u,g,e,h[15],16,530742520),u=m(g^e^q,u,g,h[2],23,-995338651),q=p(q,u,g,e,h[0],6,-198630844),e=p(e,q,u,g,h[7],10,1126891415),g=p(g,e,q,u,h[14],15,-1416354905),u=p(u,g,e,q,h[5],21,-57434055),q=p(q,u,g,e,h[12],6,1700485571),e=p(e,q,u,g,h[3],10,-1894986606),g=p(g,e,q,u,h[10],15,-1051523),u=p(u,g,e,q,h[1],21,-2054922799),q=p(q,u,g,e,h[8],6,1873313359),e=p(e,q,u,g,h[15],10,-30611744),g=p(g,e,q,u,h[6],15,-1560198380),u=p(u,g,e,q,h[13],
21,1309151649),q=p(q,u,g,e,h[4],6,-145523070),e=p(e,q,u,g,h[11],10,-1120210379),g=p(g,e,q,u,h[2],15,718787259),u=p(u,g,e,q,h[9],21,-343485551);a[0]=q+a[0]&4294967295;a[1]=u+a[1]&4294967295;a[2]=g+a[2]&4294967295;a[3]=e+a[3]&4294967295}function m(a,b,c,h,g,e){b=(b+a&4294967295)+(h+e&4294967295)&4294967295;return(b<<g|b>>>32-g)+c&4294967295}function c(a,b,c,h,g,e,p){return m(b&c|~b&h,a,b,g,e,p)}function b(a,b,c,h,g,e,p){return m(b&h|c&~h,a,b,g,e,p)}function p(a,b,c,h,g,e,p){return m(c^(b|~h),a,b,g,
e,p)}var h="0123456789abcdef".split("");a.hO=function(a){var b=a,c=b.length;a=[1732584193,-271733879,-1732584194,271733878];var m;for(m=64;m<=b.length;m+=64){var g,e=b.substring(m-64,m),p=[];for(g=0;64>g;g+=4)p[g>>2]=e.charCodeAt(g)+(e.charCodeAt(g+1)<<8)+(e.charCodeAt(g+2)<<16)+(e.charCodeAt(g+3)<<24);u(a,p)}b=b.substring(m-64);g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(m=0;m<b.length;m++)g[m>>2]|=b.charCodeAt(m)<<(m%4<<3);g[m>>2]|=128<<(m%4<<3);if(55<m)for(u(a,g),m=0;16>m;m++)g[m]=0;g[14]=8*c;u(a,
g);for(b=0;b<a.length;b++){c=a[b];m="";for(g=0;4>g;g++)m+=h[c>>8*g+4&15]+h[c>>8*g&15];a[b]=m}return a.join("")}};b4w.module.config=function(a,u){var m=u("__config"),c=u("__compat"),b=u("__debug"),p=u("__data"),h=u("__print");a.gm=m.gm;a.Ak=m.Ak;a.On=m.On;a.MJ=m.MJ;a.tt=m.tt;a.set=m.set;a.get=m.get;a.reset=m.reset;a.AH=m.AH;a.aba=m.AF;a.AF=m.AF;a.xq=function(a){p.Vi()?h.error("Cannot change quality profile after a scene is loaded."):(m.set("quality",a),b.xz()&&(m.xq(),c.WQ(b.xz(),!1)))}};b4w.module.constraints=function(a,u){var m=u("__camera"),c=u("__constraints"),b=u("__obj_util"),p=u("__physics"),h=u("__print"),G=u("__transform"),q=u("__util"),w=u("__vec3");a.G8=function(a,g,e,m,q){b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(e=e||new Float32Array(3),q=q||1,m=m?m:[0,0,0,1],g instanceof Array&&2==g.length?c.SV(a,g[0],g[1],e,m,q):c.tK(a,g,e,m,q),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.PV=function(a,g,e,m,w,u,J,L){b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(w=q.Of(w)?w:Math.PI/2,u=q.Of(u)?u:-Math.PI/2,J=q.Of(J)?J:Math.PI/2,L=q.Of(L)?L:-Math.PI/2,e=e||new Float32Array(3),m=m?new Float32Array(m):null,c.QV(a,g,e,m,w,u,J,L),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.F8=function(b,c,e,p,q,w,u,G){h.Jf("append_semi_stiff_cam",
"append_semi_stiff");m.Ne(b)?a.PV(b,c,e,p,q,w,u,G):h.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};a.E8=function(b,c,e,p){h.Jf("append_semi_soft_cam","append_semi_soft");m.Ne(b)?a.NV(b,c,e,p):h.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};a.NV=function(a,g,e,m){if(b.ba(a))if(c.Ji(a,g))if(c.Ii(a,g)){if(!q.Of(m)||0>m)m=.25;e=e||new Float32Array(3);c.OV(a,g,e,m);G.V(a);p.Z(a)}else h.error("Constraint recursion is forbidden.");
else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.TV=function(a,g){var e=[0,0,.5];b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(e=e||new Float32Array(3),c.UV(a,g,e),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.y8=function(a,g,e,m,q){if(b.ba(a))if(c.Ji(a,g))if(c.Ii(a,g)){m=m||!1;e=
e||"XYZ";q=q||1;var w=G.Me(a,new Float32Array(3)),u=new Float32Array(3);u[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;u[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;u[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.GV(a,g,w,u,m,q);G.V(a);p.Z(a)}else h.error("Constraint recursion is forbidden.");else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.A8=function(a,g,e){b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(c.IV(a,
g,e||1),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.z8=function(a,g,e,m,q){if(b.ba(a))if(c.Ji(a,g))if(c.Ii(a,g)){e=e||"XYZ";var w=new Float32Array(3);w[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;w[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;w[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.HV(a,g,w,m||!1,q||1);G.V(a);p.Z(a)}else h.error("Constraint recursion is forbidden.");
else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.H8=function(a,g,e,m){b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(e=e||new Float32Array(3),m=m?new Float32Array(m):[0,0,0,1],c.VV(a,g,e,m),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.I8=function(a,g,e,m,u,P){if(b.ba(a))if(c.Ji(a,
g))if(c.Ii(a,g)){var x=q.Fe;"-Y"==e?x=q.Bh:"Y"==e?x=q.Fe:"-X"==e?x=q.Xs:"X"==e?x=q.Bf:"-Z"==e?x=q.mc:"Z"==e&&(x=q.fc);e=q.fc;"X"==m?e=q.Bf:"Y"==m&&(e=q.Fe);1==Math.abs(w.dot(x,e))?h.error("Can not use parallel vectors for track and up axes."):(c.WV(a,g,x,e,u||!1,P||1),G.V(a),p.Z(a))}else h.error("Constraint recursion is forbidden.");else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.C8=function(a,g,e,m){b.ba(a)?
c.Ji(a,g)?c.Ii(a,g)?(c.KV(a,g,e,m),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.uK=function(a,g,e){b.ba(a)?c.Ji(a,g)?c.Ii(a,g)?(e=e||{},c.uK(a,g,e),G.V(a),p.Z(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.remove=function(a,
b){b=b||!1;a.zc&&c.remove(a,b);b&&G.V(a)}};b4w.module.scenes=function(a,u){function m(){var a=h.Xh();return w.op(a.clientWidth/2,a.clientHeight/2)}function c(a){return A.So(a)||A.mr(a)||A.bv(a)||A.nr(a)}var b=u("__batch"),p=u("__camera"),h=u("__container"),G=u("__data"),q=u("__graph"),w=u("__objects"),A=u("__obj_util"),g=u("__print"),e=u("__scenes"),y=u("__scenegraph"),x=u("__subscene"),P=u("__util");a.Tc=w.Tc;a.Zr=function(a){var b=e.Pu();e.Zr(P.Oe("name",a,b))};a.N=function(){return e.Ua()?e.N().name:""};a.Vaa=function(){for(var a=e.Pu(),
b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};a.il=function(){if(e.Ua())return e.Fm(e.N());g.error("No active scene");return!1};a.Haa=function(a,b){var c=w.Gc(w.LD,a,b|0,!0);if(c)return c;g.error("get object "+a+": not found")};a.Faa=function(a,b,c){if(a=w.Gc(w.KD,a,b,c|0))return a;g.error("get object "+b+": not found")};a.Gaa=function(a,b){var c=w.Gc(w.cd,a,b|0);if(c)return c;g.error("get object "+a+": not found")};a.Lz=function(a,b){var c=w.Lz(a,b|0);if(c)return c;g.error("get object "+a+
": not found")};a.KF=function(a){return A.KF(a)};a.op=function(a,b){var c=e.Si();return c?(c=e.Xb(c,x.Eh))&&c.enable_hmd_stereo?(g.va("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),m()):w.op(a,b):(g.error("No active scene"),null)};a.W1=m;a.M1=function(a){return a&&a.v&&a.v.Ad};a.bR=function(a,b){a&&a.v&&a.v.Ad?w.bR(a,b):g.error("set_outline_intensity(): wrong object")};a.Oaa=function(a){if(a&&a.v&&a.v.Ad)return a.v.cj;g.error("get_outline_intensity(): wrong object");
return 0};a.wq=function(a,b,c,e){a&&a.v&&a.v.Ad?w.wq(a,b,c,e):g.error("apply_outline_anim(): wrong object")};a.K8=function(a){if(a&&a.v&&a.v.Ad){var b=a.v.ek;w.wq(a,b.Ym,b.Zm,b.$m)}else g.error("apply_outline_anim_def(): wrong object")};a.$t=function(a){a&&a.v&&a.v.Ad?w.$t(a):g.error("clear_outline_anim(): wrong object")};a.aR=e.aR;a.Naa=function(a){var b=e.N();if(b=e.Xb(b,x.pq))return a=a||new Float32Array(3),a.set(b.bj),a};a.$r=function(a){e.Ua()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof
Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),e.$r(a)):g.error("No active scene")};a.Waa=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N(),b=e.Xb(a,x.$d);if(!b)return null;var c=a.I.Cd,
h=e.Xb(a,x.Wb),m=e.Xb(a,x.Ug),p={};p.csm_resolution=c.csm_resolution;p.self_shadow_polygon_offset=b.self_shadow_polygon_offset;m&&(p.self_shadow_normal_offset=m.self_shadow_normal_offset);p.enable_csm=c.enable_csm;p.csm_num=c.csm_num;p.csm_first_cascade_border=c.csm_first_cascade_border;p.first_cascade_blur_radius=c.first_cascade_blur_radius;p.csm_last_cascade_border=c.csm_last_cascade_border;p.last_cascade_blur_radius=c.last_cascade_blur_radius;p.fade_last_cascade=c.fade_last_cascade;p.blend_between_cascades=
c.blend_between_cascades;c.enable_csm?(p.csm_borders=e.m_(a,h.F),p.blur_radii=new Float32Array(c.csm_num),p.blur_radii.set(h.F.Sr.subarray(0,c.csm_num))):(p.csm_borders=null,p.blur_radii=null);return p};a.Hda=function(a){if(e.Ua()){var c=e.N();"number"==typeof a.self_shadow_polygon_offset&&q.fa(c.I.Ia,function(b,c){c.type==x.$d&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var h=e.vh(c,[x.Ug]),m=0;m<h.length;m++){var w=h[m];"number"==typeof a.self_shadow_normal_offset&&(w.self_shadow_normal_offset=
a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(w.pcf_blur_radius=a.pcf_blur_radius)}h=e.vh(c,[x.Gd]);for(m=0;m<h.length;m++){var u=h[m];"number"==typeof a.self_shadow_normal_offset&&(u.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(u.pcf_blur_radius=a.pcf_blur_radius);u.Ta=!0}h=c.I.Cd;"number"==typeof a.csm_first_cascade_border&&(h.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&(h.first_cascade_blur_radius=
a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(h.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(h.last_cascade_blur_radius=a.last_cascade_blur_radius);if(w){u=w.ib;for(m=0;m<u.length;m++)for(var k=u[m].Ra,y=0;y<k.length;y++){var J=k[y];if(J.oh.ze){var E=J.Fa;b.HK(E,h);b.Ed(E);x.qd(w,J)}}w.Ta=!0}w=A.La(c.Dk,c).na;for(m=0;m<w.length;m++)p.NI(w[m],h);e.JH(c)}else g.error("No active scene")};a.oN=function(){if(!e.Ua())return g.error("No active scene"),
[];var a=e.N();return e.oN(a)};a.MH=function(a,b,c){if(e.Ua()){var h=e.N(),l=e.Xb(h,x.Wb);e.MH(h,a||0==a?parseFloat(a):l.eh,b||0==b?b:l.re,c||0==c?c:l.Ee)}else g.error("No active scene")};a.rN=function(a){if(!e.Ua())return g.error("No active scene"),!1;var b=e.N();return e.rN(b,a)};a.OH=function(a){if(e.Ua()){var b=e.N();e.OH(b,a)}else g.error("No active scene")};a.waa=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N(),b={};b.fog_intensity=e.w_(a);b.fog_depth=e.u_(a);b.fog_start=
e.x_(a);b.fog_height=e.v_(a);return b};a.kda=function(a){if(e.Ua()){var b=e.N();"number"==typeof a.fog_intensity&&e.OQ(b,a.fog_intensity);"number"==typeof a.fog_depth&&e.MQ(b,a.fog_depth);"number"==typeof a.fog_start&&e.PQ(b,a.fog_start);"number"==typeof a.fog_height&&e.NQ(b,a.fog_height)}else g.error("No active scene")};a.NN=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.NN(a)};a.Mda=function(a){if(e.Ua()){var c=e.N(),h=e.vh(c,[x.sx]),c=e.vh(c,[x.SD]);if(!h.length)return g.error("SSAO is not enabled on the scene"),
0;for(var m=0;m<h.length;m++){var p=h[m],q=c[m],k=a,w=e.N(),u=p.ib[0].Ra[0],A=u.Fa,J=q.ib[0].Ra[0],F=J.Fa;if("quality"in k){var z=k.quality;8===z||16===z||24===z||32===z?(p.zp=z,b.Sf(A,"SSAO_QUALITY","SSAO_QUALITY_"+z),b.Ed(A),x.qd(p,u)):g.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in k&&(p.rs=k.use_hemisphere,b.Sf(A,"SSAO_HEMISPHERE",k.use_hemisphere|0),b.Ed(A),x.qd(p,u));"use_blur_depth"in k&&(q.os=k.use_blur_depth,b.Sf(F,"SSAO_BLUR_DEPTH",k.use_blur_depth|0),b.Ed(F),x.qd(q,
J),y.mo(w.I.Ia,q,F));"ssao_white"in k&&(p.ssao_white=k.ssao_white,b.Sf(A,"SSAO_WHITE",k.ssao_white|0),b.Ed(A),x.qd(p,u));"blur_discard_value"in k&&(q.ps=k.blur_discard_value);"radius_increase"in k&&(p.ts=k.radius_increase);"influence"in k&&(p.ss=k.influence);"dist_factor"in k&&(p.qs=k.dist_factor);if("boolean"==typeof k.ssao_only){w=e.Xb(w,x.Wb);w.ssao_only=k.ssao_only;u=w.ib;A=[];for(J=0;J<u.length;J++)for(F=u[J].Ra,z=0;z<F.length;z++){var C=F[z].Fa;b.Sf(C,"SSAO_ONLY",k.ssao_only|0);b.Ed(C);A.push(F[z])}for(J=
0;J<A.length;J++)x.qd(w,A[J])}p.Ta=!0;q.Ta=!0}}else g.error("No active scene")};a.maa=function(){if(!e.Ua())return g.error("No active scene"),null;var a=e.N(),a=e.Xb(a,x.AD);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};a.gda=function(a){if(e.Ua()){var b=e.N();if(b=e.Xb(b,x.AD))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in
a&&(b.saturation=a.saturation),b.Ta=!0}else g.error("No active scene")};a.MN=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.MN(a)};a.Kda=function(a){if(e.Ua()){var b=e.N(),c=e.Xb(b,x.Xe);c&&("color"in a&&c.mn.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),
"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.Ta=!0,c.Er=!0,e.s5(b,c))}else g.error("No active scene")};a.lN=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.Xb(a,x.dt)?
e.lN(a):null};a.KQ=function(a){if(e.Ua()){var b=e.N();e.KQ(b,a)}else g.error("No active scene")};a.vN=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.Xb(a,x.mq)?e.vN(a):null};a.UQ=function(a){if(e.Ua()){var b=e.N();e.UQ(b,a)}else g.error("No active scene")};a.cN=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.Xb(a,x.Ys)?e.cN(a):null};a.zQ=function(a){if(e.Ua()){var b=e.N();e.zQ(b,a)}else g.error("No active scene")};a.uN=function(){if(!e.Ua())return g.error("No active scene"),
!1;var a=e.N();return e.Xb(a,x.ft)?e.uN(a):null};a.TQ=function(a){if(e.Ua()){var b=e.N();e.TQ(b,a)}else g.error("No active scene")};a.$N=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.$N(a)};a.kR=function(a){if(e.Ua()){var b=e.N();w.kR(b,a)}else g.error("No active scene")};a.YN=function(a,b){if(!e.Ua())return g.error("No active scene"),0;var c=e.N();return c.I.Xd?e.YN(c,a,b):(g.error("No water parameters on the active scene"),0)};a.jR=function(a){if(e.Ua()){var b=
e.N();e.jR(b,a)}else g.error("No active scene")};a.XN=function(a){if(e.Ua()){var b=e.N();e.XN(b,a)}else g.error("No active scene")};a.Fea=function(){if(e.Ua()){var a=e.N();e.sS(a)}else g.error("No active scene")};a.Eba=function(a,b){b=b||!1;c(a)?b?e.io(a,!0):e.Yt(a,!0):g.error("show/hide is only supported for dynamic objects.")};a.Vda=function(a,b){b=b||!1;c(a)?b?e.io(a,!1):e.Yt(a,!1):g.error("show/hide is only supported for dynamic objects.")};a.lG=function(a){if(c(a))return e.lG(a);g.error("show/hide is only supported for dynamic meshes/empties and lamps");
return!1};a.vr=function(a){return a.v.vr};a.p9=function(a,b){return w.Gc(w.LD,a,b|0,!0)?!0:!1};a.n9=function(a,b,c){return w.Gc(w.KD,a,b,c|0)?!0:!1};a.o9=function(a,b){return w.Gc(w.cd,a,b|0)?!0:!1};a.Pj=function(a,b){var c=e.N();a||(a="ALL");b||0===b||(b=w.Tc);return w.KN(c,a,b)};a.Jaa=function(a){return a?a.Qf:(g.error("Wrong object name"),"")};a.Kaa=function(a){if(!a)return g.error("Wrong object name"),null;for(var b=[];a;)b.push(a.Qf),a=A.Qj(a);return b.reverse()};a.Laa=function(a){return a&&
a.type?a.type:(g.error("Wrong object"),"UNDEFINED")};a.Iaa=function(a){return a.bf.slice(0)};a.uz=function(){return w.uz(e.N())};a.LN=function(a,b){b||0===b||(b=1);if(!e.Ua())return g.error("No active scene"),0;var c=e.N();return e.LN(c,a,b)};a.fN=function(){return e.fN()};a.eba=function(a){return A.mf(a)?a.v.type:""};a.Jo=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.Jo(a)};a.Qu=function(){if(!e.Ua())return g.error("No active scene"),!1;var a=e.N();return e.Qu(a)};
a.jm=function(a,b){if(b)var c=e.Pu(),c=P.Oe("name",b,c);else c=e.N();e.jm(c,a,!0)};a.sp=function(a){A.So(a)||A.mr(a)||A.bv(a)?(w.Mr(a,a.v.iA,!1,!1),G.QP(a),w.Mr(a,!0,!0,!0),w.sp(a)):g.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};a.iP=function(a){var b=e.N();if(b.timeline_markers&&a in b.timeline_markers)return e.iP(b,a);g.error('"'+a+'" marker not found.');return 0};a.Caa=function(){var a=e.N();return(a=e.Xb(a,x.tj))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:
null};a.tda=function(a){var b=e.N(),b=e.vh(b,[x.tj]);if(b.length)for(var c=0;c<b.length;c++){var h=b[c];"number"==typeof a.mb_decay_threshold&&(h.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&(h.mb_factor=a.mb_factor)}else g.error("The motion blur subscene doesn't exist.")};a.gL=function(){var a=e.N();return!!e.Xb(a,x.Cf)}};b4w.module.container=function(a,u){var m=u("__container"),c=u("__print");a.Xh=m.Xh;a.gN=m.gN;a.qe=m.qe;a.Xu=function(a,p){2!=arguments.length?c.error("insert_to_container(): two arguments required"):a&&p&&m.Xu(a,p)};a.AQ=function(a,p){c.va("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return m.AQ(a,p)};a.lS=function(){c.va("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
m.lS()};a.ey=function(a,c,h){h||(h=new Float32Array(2));return m.ey(a,c,h)};a.GL=function(a,c,h,u){u||(u=new Float32Array(2));return m.GL(a,c,h,u)};a.jN=function(a,c,h){h||(h=new Float32Array(2));return m.jN(a,c,h)};a.uF=function(){c.va("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");m.uF()};a.resize=function(a,c,h){m.resize(a,c,h)};a.Gl=function(a){m.Gl(a||!1)}};b4w.module.input=function(a,u){function m(a){q.Jf("enable_split_screen","screen.request_split_screen");var k=c.$(c.Vb);if(!k)return!1;if(y)return!0;var l=c.$h(k,c.jJ,g),m=c.$h(k,c.kJ,e);b.PH(a,l,m);if(l=c.tg(k,J))m=w.N(),a=G.La(a,m).na,b.KB(a,l);a={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c.tg(k,c.Sg)&(c.em|c.zk|c.oq)&&(a.distortion_coefs=[k.distortion_coefs[0],k.distortion_coefs[1]],a.chromatic_aberration_coefs=[k.chromatic_aberration_coefs[0],k.chromatic_aberration_coefs[1],
k.chromatic_aberration_coefs[2],k.chromatic_aberration_coefs[3]],k.Op||(k.xj&&k.Vj&&k.yj?a.base_line_factor=(k.xj-k.yj)/k.Vj:k.yj||(a.base_line_factor=k.xj/k.Vj)),k.Ui&&k.Gn&&!k.Op&&(a.inter_lens_factor=k.Ui/k.Gn),x.enabled||(l=1+k.distortion_coefs[0]+k.distortion_coefs[1],w.RA(l,l)));w.$r(a);h.Gl(!0);c.zH(k);return y=!0}var c=u("__input"),b=u("__camera"),p=u("__config"),h=u("__container"),G=u("__obj_util"),q=u("__print"),w=u("__scenes"),A=u("__vec4"),g=A.create(),e=A.create(),y=!1,x=p.so,P=p.K;a.aq=
c.aq;a.bq=c.bq;a.eq=c.eq;a.cq=c.cq;a.hq=c.hq;a.Xp=c.Xp;a.Yp=c.Yp;a.gq=c.gq;a.jq=c.jq;a.Mn=c.Mn;a.iq=c.iq;a.Ln=c.Ln;a.kq=c.kq;a.lq=c.lq;a.Zp=c.Zp;a.$p=c.$p;a.fq=c.fq;a.Rw=c.Rw;a.Sw=c.Sw;a.Tw=c.Tw;a.Uw=c.Uw;a.Vw=c.Vw;a.Ww=c.Ww;a.Xw=c.Xw;a.Yw=c.Yw;a.Zw=c.Zw;a.hJ=c.hJ;a.iJ=c.iJ;a.fJ=c.fJ;a.gJ=c.gJ;a.cm=c.cm;a.Jn=c.Jn;a.dm=c.dm;a.Kn=c.Kn;a.Vp=c.Vp;a.Wp=c.Wp;a.it=c.it;a.jt=c.jt;a.kt=c.kt;a.lt=c.lt;a.gt=c.gt;a.ht=c.ht;a.ex=c.ex;a.fx=c.fx;a.Sg=c.Sg;a.oq=c.oq;a.zk=c.zk;a.em=c.em;a.Nn=c.Nn;a.jx=c.jx;var J=
c.mt;a.mt=J;a.dx=c.dx;a.bx=c.bx;a.hx=c.hx;a.ix=c.ix;a.gx=c.gx;a.cx=c.cx;a.uj=c.uj;a.fm=c.fm;a.pt=c.pt;a.qt=c.qt;a.ot=c.ot;a.nt=c.nt;a.hm=c.hm;a.yt=c.yt;a.Pn=c.Pn;a.ax=c.ax;a.nq=c.nq;var L={};L[c.Vb]=[c.ex,c.fx];L[c.Uc]=[c.uj];var l={};l[c.Vb]=[c.Sg];var I={};I[c.Uc]=[c.uj,c.fm,c.pt,c.qt];I[c.at]=[c.ot,c.nt];I[c.Rg]=[c.hm,c.yt,c.Pn];I[c.sj]=[c.ax,c.nq];var v={};v[c.Vb]=[c.dx,c.mt,c.bx,c.hx,c.ix,c.gx,c.cx];a.sj=c.sj;a.Vb=c.Vb;a.Uc=c.Uc;a.at=c.at;a.Rg=c.Rg;a.Ok=c.Ok;a.$=c.$;a.jw=function(a,b){a&&c.jw(a,
b)};a.Mca=function(){q.va("input.register_device() deprecated")};a.zH=function(a){a&&a.type==c.Vb?c.zH(a):q.error("reset_device is undefined for device.")};a.$h=function(a,b,e){if(a&&a.type in L&&0<=L[a.type].indexOf(b))return c.$h(a,b,e);q.error("device hasn't param: ",b);return null};a.tg=function(a,b){if(a&&a.type in l&&0<=l[a.type].indexOf(b))return c.tg(a,b);q.error("device hasn't param: ",b);return null};a.Hd=function(a,b,e){e=e||null;if(a&&a.type in I&&0<=I[a.type].indexOf(b))return c.Hd(a,
b,e);q.error("device hasn't param: ",b)};a.ne=function(a,b,e){e=e||null;if(a&&a.type in I&&0<=I[a.type].indexOf(b))return c.ne(a,b,e);q.error("device hasn't param: ",b)};a.kk=function(a,b,e){if(a&&a.type in v&&0<=v[a.type].indexOf(b))return c.kk(a,b,e);q.error("device hasn't config: ",b)};a.kQ=function(){q.Jf("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(w.Ua()){var a=w.Fm(w.N());if(a&&(m(a),a=c.$(c.Vb))){var b=a.Yd;b&&!b.isPresenting&&(b.capabilities.canPresent?(a=h.Xh(),b.requestPresent([{source:a}]).then(function(){if(!P.is_mobile_device){var a=
b.getEyeParameters("left"),c=b.getEyeParameters("right");h.resize(2*Math.max(a.renderWidth,c.renderWidth),Math.max(a.renderHeight,c.renderHeight),!1)}},function(){q.error("HMD fullscreen request failed.")})):q.error("HMD fullscreen request failed."))}}};a.z$=m;a.Q9=function(){q.Jf("disable_split_screen","screen.exit_split_screen");var a=c.$(c.Vb);if(!y||!a||!a.rh)return!1;w.$r({enable_hmd_stereo:!1});a=1/(1+a.distortion_coefs[0]+a.distortion_coefs[1]);w.RA(a,a);h.Gl(!0);return!0};a.Yv=function(a,
b,e){switch(a){case 0:a=c.Mw;break;case 1:a=c.DD;break;case 2:a=c.ED;break;case 3:a=c.FD;break;default:a=c.Mw}a=c.$(a);c.kk(a,b,e)};a.MF=c.MF;a.Bz=c.Bz;a.HF=c.HF;a.GF=c.GF;a.ZW=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};a.WN=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,e=0;4>c;c++){var g=
b[c];if(g&&(""==g.id||"OpenVR Gamepad"==g.id||"Oculus Touch (Left)"==g.id||"Oculus Touch (Right)"==g.id)){if(e==a)return e;e++}}return a};a.Hh=function(a,b){a&&b&&c.Hh(a,b)};a.yB=function(a,b){a&&b&&c.yB(a,b)}};b4w.module.rgb=function(a,u){var m=u("__util"),c=new Float32Array(3);a.create=function(){return new Float32Array(3)};a.lz=function(a,c,h){var b=new Float32Array(3);b[0]=a;b[1]=c;b[2]=h;return b};a.set=function(a,c,h,m){m[0]=a;m[1]=c;m[2]=h;return m};a.H9=function(a,c,h,u){u=u||new Float32Array(3);u[0]=a/255;u[1]=c/255;u[2]=h/255;m.DR(u,u);return u};a.Tca=function(a){a=m.uG(a,c);return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]};a.Uca=function(a){function b(a){a=Math.round(255*
a).toString(16);return 1==a.length?"0"+a:a}a=m.uG(a,c);return"#"+b(a[0])+b(a[1])+b(a[2])}};
b4w.module.rgba=function(a,u){var m=u("__util"),c=new Float32Array(3);a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.lz=function(a,c,h,m){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=h;b[3]=m;return b};a.set=function(a,c,h,m,q){q[0]=a;q[1]=c;q[2]=h;q[3]=m;return q};a.I9=function(a,c,h,u,q){q=q||new Float32Array(4);q[0]=a/255;q[1]=c/255;q[2]=h/255;q[3]=u;m.DR(q,q);return q};a.Vca=function(a){var b=m.uG(a,c);return[Math.round(255*b[0]),Math.round(255*b[1]),Math.round(255*b[2]),a[3]]}};b4w.module.objects=function(a,u){var m=u("__geometry"),c=u("__objects"),b=u("__batch"),p=u("__obj_util"),h=u("__print"),G=u("__scenes"),q=u("__util");a.Jo=function(a){if(a)return c.Jo(a)};a.Qu=function(a){if(a)return c.Qu(a)};a.copy=function(a,b,g){return p.mf(a)?p.ba(a)?m.XF(a)||m.xE(a)||!g?-1==c.vc(G.N(),"MESH",c.Tc).indexOf(a)?(h.error('object "'+a.name+'" does not belong to the active scene.'),!1):c.copy(a,b||"",g):(h.error('object "'+a.name+'" has not dynamic geometry for deep copying.'),!1):
(h.error('object "'+a.name+'" is not dynamic.'),!1):(h.error('object "'+a.name+'" is not of type "MESH".'),!1)};a.RH=function(a,m,g){h.Jf("set_nodemat_value","material.set_nodemat_value");if(p.So(a)){var e=m[0],q=b.Cm(a,e);if(null===q)return h.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;q=c.JF(q.li,m);if(null===q)return h.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;c.RH(a,e,q,g)}else h.error('The type of the object "'+a.name+
'" is not "MESH" or it is not dynamic.')};a.AN=function(a,m){h.Jf("get_nodemat_value","material.get_nodemat_value");if(!p.So(a))return h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),0;var g=m[0],e=b.Cm(a,g);if(null===e)return h.error('Material "'+g+'" was not found in the object "'+a.name+'".'),0;g=c.JF(e.li,m);return null===g?(h.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),0):c.AN(e,g)};a.QH=function(a,m,g,e,q){h.Jf("set_nodemat_rgb",
"material.set_nodemat_rgb");if(p.So(a)){var w=m[0],u=b.Cm(a,w);null===u?h.error('Material "'+w+'" was not found in the object "'+a.name+'".'):(u=c.IF(u.ki,m,1),null===u?h.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'):c.QH(a,w,u,g,e,q))}else h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.zN=function(a,m,g){h.Jf("get_nodemat_rgb","material.get_nodemat_rgb");if(!p.So(a))return h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),
null;var e=m[0],q=b.Cm(a,e);if(null===q)return h.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;e=c.IF(q.ki,m);if(null===e)return h.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;g||(g=new Float32Array(3));return c.zN(q,e,g)};a.MI=function(a){p.mf(a)?m.XF(a)||m.xE(a)?c.MI(a):h.error('object "'+a.name+'" has not dynamic geometry.'):h.error('The type of the object "'+a.name+'" is not "MESH".')};a.CN=p.CN;a.Qj=p.Qj;a.mf=p.mf;a.$u=p.$u;a.Qm=
p.Qm;a.pb=p.pb;a.nr=p.nr;a.mr=p.mr;a.bv=p.bv;a.pl=p.pl;a.Gz=function(){return c.Gz()};a.BN=function(){return c.BN()};a.ba=p.ba;a.Qda=function(a,m){if(p.So(a)){var g=a.v;if(g.Af){if("number"==typeof m.angle){var e=b.WS(q.cf(m.angle),g.Lk,g.C[3]);g.Mg=e}"number"==typeof m.main_frequency&&(g.Ng=m.main_frequency);"number"==typeof m.detail_frequency&&(g.og=m.detail_frequency);"number"==typeof m.detail_amplitude&&(g.ng=m.detail_amplitude);"number"==typeof m.branch_amplitude&&(g.hg=m.branch_amplitude);c.p3(a)}else h.error('The "'+
a.name+"\" object doesn't have wind bending parameters.")}else h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.pba=function(a){a=a.v;if(!a.Af)return null;var c={},g=q.vB(b.T5(a.Mg,a.Lk,a.C[3]));c.angle=g;c.main_frequency=a.Ng;c.detail_frequency=a.og;c.detail_amplitude=a.ng;c.branch_amplitude=a.hg;return c};a.SE=function(a){return c.SE(a)};a.Cba=function(a){a=c.Pj("ALL",a);for(var b=0;b<a.length;b++)G.io(a[b],!0)};a.Tda=function(a){a=c.Pj("ALL",a);for(var b=0;b<
a.length;b++)G.io(a[b],!1)}};b4w.module.controls=function(a,u){var m=u("__controls"),c=u("__physics"),b=u("__print");a.Qg=m.Qg;a.kb=m.kb;a.Lw=m.Lw;a.Ch=m.Ch;a.Tp=m.Tp;a.CD=m.CD;a.H6=8;a.w7=9;a.Q6=13;a.s7=16;a.L6=17;a.F6=18;a.o7=19;a.J6=20;a.T6=27;a.u7=32;a.vJ=37;a.yJ=38;a.wJ=39;a.uJ=40;a.v6=49;a.w6=50;a.x6=51;a.y6=52;a.z6=53;a.A6=54;a.B6=55;a.C6=56;a.D6=57;a.sJ=65;a.G6=66;a.yT=67;a.tJ=68;a.P6=69;a.zT=70;a.V6=71;a.X6=72;a.Y6=73;a.Z6=74;a.AT=75;a.BT=76;a.a7=77;a.c7=78;a.n7=79;a.DT=80;a.q7=81;a.ET=82;a.xJ=83;a.GT=84;a.x7=85;a.y7=
86;a.zJ=87;a.z7=88;a.A7=89;a.B7=90;a.d7=96;a.e7=97;a.f7=98;a.g7=99;a.h7=100;a.i7=101;a.j7=102;a.k7=103;a.l7=104;a.m7=105;a.b7=106;a.E6=107;a.v7=109;a.N6=110;a.O6=111;a.r7=186;a.S6=187;a.K6=188;a.M6=189;a.p7=190;a.U6=191;a.W6=192;a.CT=219;a.I6=220;a.FT=221;a.t7=222;a.nx=m.nx;a.mx=m.mx;a.lx=m.lx;a.PD=m.PD;a.Iy=m.Iy;a.Jy=m.Jy;a.bc=m.bc;a.le=m.le;a.ty=m.ty;a.sy=m.sy;a.nu=m.nu;a.sd=m.sd;a.NE=function(a,b,c){return m.NE(a,b||"ANY",c||!1)};a.TL=m.TL;a.aM=function(a,h,u,q,w,A,g){if(a&&!c.Ca(a))b.va("No physics for object "+
a.name);else return m.aM(a,h,u,q||"ANY",w||!1,A||!1,g||!1)};a.po=m.po;a.TE=m.TE;a.Vk=m.Vk;a.ZL=m.ZL;a.$L=m.$L;a.pu=m.pu;a.zy=m.zy;a.iM=m.iM;a.hM=m.hM;a.XL=m.XL;a.jM=m.jM;a.VL=m.VL;a.OE=m.OE;a.WL=m.WL;a.QE=m.QE;a.PE=m.PE;a.gM=function(a,b){return m.gM(a,b||!1)};a.lQ=m.lQ;a.um=m.um;a.yy=m.yy;a.wy=function(a,b){return m.wy(a,b||!1)};a.ME=function(a,b){return m.ME(a,b||0)};a.hda=function(a,b){m.V2(a,b)};a.oaa=function(a){return a.value};a.kd=m.kd;a.jf=m.jf;a.ga=function(a,b,c,q,w,u,g){w=w||m.Iy;m.ga(a,
b,c,q,w,u,void 0===g?null:g)};a.Iq=function(a,b,c,q,w){q=m.sd(q);m.ga(a,b,c,[q],m.Iy,w,null)};a.q9=function(a){return m.om(a,null)};a.om=m.om;a.Cg=m.Cg;a.reset=m.reset;a.eR=m.eR};b4w.module.data=function(a,u){var m=u("__data"),c=u("__loader");a.load=m.load;a.WC=function(a){m.WC(a|0)};a.IQ=m.IQ;a.Vi=m.Vi;a.cca=c.To;a.mca=m.load;a.Ja=a.WC;a.pK=m.pK;a.PP=m.PP;a.iS=m.iS};b4w.module.debug=function(a,u){function m(a,b,c,d){M.group(r.CC(a),d);for(a=0;a<c.length;a++){var e=c[a],f=e.v;if(f.type==d)for(var g=!1,h=0;h<b.length;h++){for(var k=b[h].Ra,l=0;l<k.length;l++){var m=k[l];if(m.pc&&m.oh==f){"STATIC"==d?M.Pd(e.Qf,e):M.Pd(e.name,e);g=!0;break}}if(g)break}}M.groupEnd()}function c(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var e=d.split(" ")[0];e in b||(b[e]=0);b[e]++}}d=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=
b[e];a+=b[e];break;case "ATTRIB":d+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function b(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;M.error(c.responseText);throw"Error POST XHR: "+c.status;}function p(a){a.sort(function(a,b){return b.vF.ALL_OPS-a.vF.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.vF,e=c.N5,f=h(c.FY),f=
f.length?"\t\t("+f.join(", ")+")":"\t\t(NA)";M.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,f);M.groupCollapsed("directives");for(var g=c.mb.Li.slice().sort(),f=0;f<g.length;f++){var k=g[f];M.Pd(k[0],k[1])}M.groupEnd();M.groupCollapsed("node elements");g=c.mb.Pf;for(f=0;f<g.length;f++)M.Pd(g[f]);M.groupEnd();M.groupCollapsed("vert source");M.Pd(c.L5);M.groupEnd();M.groupCollapsed("vert translated source");M.Pd(c.M5);M.groupEnd();
f=["ALL_OPS","TEX_OPS","ATTRIBS"];M.groupCollapsed("vert ops stats");for(var l in e)-1==f.indexOf(l)&&M.Pd(l,e[l]);M.groupEnd();M.groupCollapsed("vert assembly");M.Pd(c.K5);M.groupEnd();M.groupCollapsed("frag source");M.Pd(c.OZ);M.groupEnd();M.groupCollapsed("frag translated source");M.Pd(c.PZ);M.groupEnd();M.groupCollapsed("frag ops stats");for(l in d)-1==f.indexOf(l)&&M.Pd(l,d[l]);M.groupEnd();M.groupCollapsed("frag assembly");M.Pd(c.GZ);M.groupEnd();M.groupEnd()}}function h(a){for(var b=[],c=S.Pu(),
d=0;d<c.length;d++)for(var e=c[d],f=K.vc(e,"MESH",K.Tc),g=0;g<f.length;g++){var h=k.La(f[g],e);if(h&&h.aa.length)for(var h=h.aa,l=0;l<h.length;l++){var m=h[l];if(m.zb==a)for(var n=0;n<m.Ac.length;n++){var p=m.Ac[n];-1==b.indexOf(p)&&b.push(p)}}}return b}function G(a){function b(){ha.push(b);return a.apply(a,arguments)}return b}function q(a,b,c,d,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var f=
0;f<a.length;f++){if("number"!=typeof b[f]||isNaN(b[f]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[f]||isNaN(a[f]))throw"debug.eqv: wrong result data type";if(b[f]>a[f]+c||b[f]<a[f]-c)throw"debug.eqv: wrong result";}w(d,e,"eqv")}function w(a,b,c){a=a||"";b=b||"";if(Z){if(""==a)throw"debug."+c+': no error is expected, but got "'+ga+'"';if(ga!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+ga+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';
if(B){if(""==b)throw"debug."+c+': no warning is expected, but got "'+ua+'"';if(ua!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+ua+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';Z=B=!1}function A(){H&&(K.Mr(H,!1,!1,!1),J.QP(H),K.Mr(H,!0,!0,!0),K.sp(H),H=null)}var g=u("__batch"),e=u("__config"),y=u("__compat"),x=u("__controls"),P=u("__container"),J=u("__data"),L=u("__debug"),l=u("__extensions"),I=u("__geometry"),v=u("__loader"),K=u("__objects"),
k=u("__obj_util"),D=u("__physics"),M=u("__print"),E=u("__renderer"),S=u("__scenes"),F=u("__scenegraph"),z=u("__sfx"),C=u("__shaders"),r=u("__subscene"),f=u("__textures"),W=u("__transform"),d=u("__tsr"),n=u("__util"),X=u("__vec3"),R=d.create(),t=new Float32Array(2),fa=X.create(),la=X.create(),H=null,za=e.K,ha=[],ua="",ga="",B=!1,Z=!1,ea=!0,Aa=new Uint8Array(4);a.Pw=L.Pw;a.JD=L.JD;a.Qw=L.Qw;a.ID=L.ID;a.Ow=L.Ow;a.HD=L.HD;a.GD=L.GD;a.et=L.et;a.Ica=function(){D.MY()};a.Hca=function(a){M.log("O",D.DZ(a));
var b=D.a_();if(b)for(var b=b.Oc.Ra,c=0;c<b.length;c++){var d=b[c];d.L.ma==a&&M.log("B",d)}else M.error("No active physics scene.")};a.Qea=function(){for(var a=S.N(),b=K.vc(a,"MESH",K.Tc),a=S.vh(a,[r.Wb,r.Gd,r.Ge]),c=0;c<a.length;c++){var d=a[c],e=d.ib;e.length&&(m(d,e,b,"DYNAMIC"),m(d,e,b,"STATIC"))}};a.Cca=function(a){for(var b=S.N(),c=K.vc(b,"MESH",K.Tc),d=0;d<c.length;d++){var e=c[d];if(e.name==a){M.log("Object",e);for(var f=S.yF(b),g=0;g<f.length;g++){for(var h=f[g],k=[],l=h.ib,m=0;m<l.length;m++)for(var n=
l[m].Ra,p=0;p<n.length;p++)n[p].oh==e.v&&k.push(n[p]);M.log("Subscene "+h.type,k)}}}};a.Dca=function(){var a=S.N();M.log("Armatures: "+K.vc(a,"ARMATURE",K.Tc).length);M.log("Cameras: "+K.vc(a,"CAMERA",K.Tc).length);M.log("Curves: "+K.vc(a,"CURVE",K.Tc).length);M.log("Empties: "+K.vc(a,"EMPTY",K.Tc).length);M.log("Lamps: "+K.vc(a,"LAMP",K.Tc).length);M.log("Meshes: "+K.vc(a,"MESH",K.Tc).length);M.log("Speakers: "+K.vc(a,"SPEAKER",K.Tc).length)};a.sv=function(){for(var a=0,b=S.N(),b=S.vh(b,[r.Wb,r.Gd,
r.Ge]),c=0;c<b.length;c++)for(var d=b[c].ib,e=0;e<d.length;e++)for(var f=d[e].Ra,g=0;g<f.length;g++){var h=f[g].Fa;h&&(a+=h.sv)}return a};a.jp=function(){for(var a=0,b=S.N(),b=S.vh(b,[r.Wb,r.Gd,r.Ge]),c=0;c<b.length;c++)for(var d=b[c].ib,e=0;e<d.length;e++)for(var f=d[e].Ra,g=0;g<f.length;g++){var h=f[g].Fa;h&&(a+=h.jp)}return a};a.wca=function(){for(var a=S.N(),b=S.vh(a,[r.Wb,r.Gd,r.Ge,r.He,r.Tg]),c=0,d=0;d<b.length;d++)for(var e=b[d],e=e.ib,f=0;f<e.length;f++)c+=e[f].Ra.length;a=S.vh(a,[r.Zd,r.ag]);
for(d=0;d<a.length;d++)for(e=a[d],e=e.ib,f=0;f<e.length;f++)c+=6*e[f].Ra.length;return c};a.yca=function(){return n.kl(C.hN())};a.aaa=function(){for(var a=S.N(),b=S.yF(a),a={},c=0;c<b.length;c++){var d=b[c];if(d.type!=r.Bk&&d.type!=r.Ai)for(var e=d.ib,f=0;f<e.length;f++)for(var g=e[f].Ra,h=0;h<g.length;h++){var k=g[h].Fa,l=g[h].oh;k&&(d.type!=r.Cf&&d.type!=r.Bi||l.bB||l.aB)&&(a[k.id]=k)}}var c=b=0,m;for(m in a)d=a[m].Ga,d.Kq&&(c+=d.Kq/1048576),b+=d.Nq/1048576;return{vbo_memory:b,ibo_memory:c}};a.zca=
function(){for(var a=[],b=0,c=S.N(),c=S.vh(c,[r.Wb,r.Gd,r.Ge]),d=0;d<c.length;d++)for(var e=c[d].ib,f=0;f<e.length;f++)for(var g=e[f].Ra,h=0;h<g.length;h++){var k=g[h].Fa;if(k)for(var k=k.qa,l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var n=m.Mb;-1===a.indexOf(n)&&(a.push(n),m=m.width*m.height*4/1048576/m.iu,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};a.xca=function(){for(var a=[],b=0,c=S.N(),c=S.yF(c),d=0;d<c.length;d++){var e=c[d];if(e.type!=r.Bk){var g=
e.F,h=[g.tc,g.mg];h.push.apply(h,e.wi);for(e=0;e<h.length;e++){var k=h[e];f.ur(k)&&-1==a.indexOf(k)&&(a.push(k),b+=g.width*g.height*f.P_(k))}}}return{number:a.length,memory:b/1024/1024}};a.i1=function(){var a=S.N();(a=S.Xb(a,r.Wb))&&S.fP(a.F,a,[1,1,0])};a.k1=function(){var a=S.N(),b=S.Xb(a,r.Wb),a=S.vh(a,[r.$d]);if(b)for(var c=0;c<a.length;c++){var d=a[c],e;switch(c){case 0:e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,0,1];break;default:e=[1,0,1]}S.fP(d.F,b,e)}};a.eda=function(){for(var a=S.Pu(),
b=0;b<a.length;b++)M.log("\n"+F.KY(S.yz(a[b])))};a.oca=function(a){M.log("\n"+v.V_(a|0))};a.A9=x.debug;a.Bca=function(a,b){var c=d.W(a.v.C),e=d.W(b.v.C);return X.dist(c,e)};a.Pb=L.Pb;a.dz=L.dz;a.TP=L.TP;a.jH=L.jH;a.M$=function(a,b){function c(){L.dz("FBRES",a());setTimeout(c,b)}b||(b=16);c()};a.S8=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),f=new Float32Array([0,-1,0]),g=new Float32Array([0,
0,-1]);if(!n.qm(new Float32Array(3),n.TD))throw"Wrong VEC3_IDENT";if(!n.qm(a,n.ox))throw"Wrong QUAT4_IDENT";if(!n.qm(b,n.Bf))throw"Wrong AXIS_X";if(!n.qm(c,n.Fe))throw"Wrong AXIS_Y";if(!n.qm(d,n.fc))throw"Wrong AXIS_Z";if(!n.qm(e,n.Xs))throw"Wrong AXIS_MX";if(!n.qm(f,n.Bh))throw"Wrong AXIS_MY";if(!n.qm(g,n.mc))throw"Wrong AXIS_MZ";};a.vca=function(){for(var a=z.Iz(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==z.PF(c)&&z.dc(c,!0)}};a.nL=L.nL;a.jda=function(a){var b=S.N(),b=S.vh(b,[r.Ai]);if(b.length)for(var c=
0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case L.Pw:case L.JD:case L.Qw:case L.ID:case L.Ow:case L.HD:case L.GD:case L.et:S.e3(d,a.debug_view_mode);break;default:M.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&S.d3(d,a.debug_colors_seed);"number"==typeof a.D2&&S.z3(d,a.D2);"object"==typeof a.wireframe_edge_color&&S.K3(d,n.Rh(a.wireframe_edge_color))}else M.error("Debugging is not available on the scene.")};
a.saa=function(){return M.r_()};a.nba=function(){return M.S_()};a.EL=function(){return M.EL()};a.v8=function(a){var d=C.hN(),e=0,f;for(f in d)a&&-1===f.indexOf(a)||e++;var e="of "+e+" analyzing...",g={};for(f in d)if(!a||-1!==f.indexOf(a)){var h=d[f],k;k=h.mD;var m=h.mz,n=l.n_();if(n){var q=n.getTranslatedShaderSource(k),n=n.getTranslatedShaderSource(m);if(y.ym())var q=q.replace("#version","#version 300 //"),n=n.replace("#version","#version 300 //"),r=b("/analyze_shader/vert_gles",q),t=b("/analyze_shader/frag_gles",
n);else q=q.replace("#version","#version 400 //"),n=n.replace("#version","#version 400 //"),r=b("/analyze_shader/vert",q),t=b("/analyze_shader/frag",n);var w=c(r),u=c(t);k={L5:L.xz().getShaderSource(k),M5:q,K5:r,N5:w,OZ:L.xz().getShaderSource(m),PZ:n,GZ:t,vF:u}}else M.warn("WEBGL_debug_shaders extension not found"),k=void 0;if(k){var m=h.mb,v=m.Kg+" + "+m.gf;k.FY=h;k.mb=m;h=g[v]=g[v]||[];h.push(k);M.Pd(e)}}for(v in g)M.group("%c"+v,"color: #800"),h=g[v],p(h),M.groupEnd()};a.JM=L.JM;a.UR=function(b){if(C.sL())if(l.EF()){var c=
za.gl_debug;za.gl_debug=!0;var d=F.WX();S.UM(null,d);for(var e=F.uc(d,r.st),f=e.F,d=0;5>d;d++)E.Tq(e);za.gl_debug=c;window.setTimeout(function(){L.l2(e);var a=e.lg;b(a,f.width*f.height*40/(a/1E3)/Math.pow(10,9))},100)}else b(0,0);else window.setTimeout(function(){a.UR(b)},100)};a.dL=L.dL;a.uR=L.uR;a.SP=L.SP;a.bea=function(a){ha=[];ea=!0;a=u(a);for(var b in a)"function"===typeof a[b]&&(a[b]=G(a[b]))};a.k9=function(){return ea};a.test=function(a,b){var c=u("__print"),d=c.error,e=c.va,f=c.warn;c.error=
c.va=function(){ga=c.LL(arguments,"B4W ERROR").join(" ");Z=!0};c.warn=function(){ua=c.LL(arguments,"B4W WARN").join(" ");B=!0};Z=B=!1;try{b();var g=!0}catch(ca){ea=!1,console.error('Test "'+a+'" failed with exception: "'+ca+'"'),Z=B=g=!1}c.error=d;c.va=e;c.warn=f;return g};a.Jca=function(a){var b=P.UN(),c=P.TN(),d=b/2,e=c/2;P.resize(b,c,!1);b=S.N().I.Ia;(c=F.EZ(b))||n.J("Couldn't find onscreen subscene");b=c.F;d=P.Vt(d,e,t,c.F);d[1]=b.height-d[1];d=E.wB(b.Lf,d[0],d[1],1,1,Aa);q(a,d,1)};a.C$=function(a,
b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";w(c,d,"eqs")};a.D$=q;a.B$=function(a,b,c,d,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";w(d,e,"eqf")};a.A$=function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";w(c,d,"eq")};a.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";w(b,c,"ok")};a.stat=function(a){var b=
[];a=u(a);for(var c in a)-1==ha.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){M.groupCollapsed(b.length+" function(s) not tested.");for(c=0;c<b.length;c++)M.Pd(b[c]);M.groupEnd()}else M.group("All functions were tested.")};a.Uda=function(a,b,c,e){A();b=g.Cm(a,b);if(!I.XF(a)||!b)return M.error("Normals are not avaliable for the dynamic object:",a.name),!1;var f=b.Ga;if(!(f&&f.bd&&f.bd.a_position&&f.bd.a_tbn))return M.error("Normals are not avaliable for the object:",a.name),!1;b=
I.GM(f,"a_position");var f=I.GM(f,"a_normal"),h=W.Gm(a,R);H=K.SE("normal_line");a=new Float32Array(2*b.length);for(var k=0;k<b.length;k+=3){var l=fa;l[0]=b[k+0];l[1]=b[k+1];l[2]=b[k+2];var m=d.Lc(l,h,la);a[2*k+0]=m[0];a[2*k+1]=m[1];a[2*k+2]=m[2];m=X.scale(f.subarray(k,k+3),c,la);l=X.add(l,m,la);l=d.Lc(l,h,la);a[2*k+3]=l[0];a[2*k+4]=l[1];a[2*k+5]=l[2]}c=g.s_(H);I.YY(c,a);E.FK(c);c.gd.set([1,1,1,1]);c.mv=e};a.Dba=A};b4w.module.main=function(a,u){function m(){}function c(){}function b(){}function p(){window.performance||(f.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(f.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});t.hR(0)}function h(a,b){for(var c=null,d=b?da:Aa,e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,ha)}catch(pa){}if(c)break}c&&L.RY(c);return c}function G(a,b,h){a.addEventListener("webglcontextlost",
function(a){a.preventDefault();f.error("WebGL context lost");w()},!1);k.sh(h);var m=k.Fz();m&&f.log("%cRENDERER INFO:","color: #00a",h.getParameter(m.UNMASKED_VENDOR_WEBGL)+", "+h.getParameter(m.UNMASKED_RENDERER_WEBGL));W.sh(h);D.sh(h);R.sh(h);X.sh(h);l.sh(h);K.sh(h);v.L3(a);l.Mf(a,b);d.lR(a.width,a.height,1);n.Mf();M.Mf();c=e();g()}function q(){m=function(){}}function w(){A()||(B=performance.now()/1E3,n.pause(),r.pause(),R.pause(),y.pause())}function A(){return Z<B}function g(){var a="HMD"===ua.stereo&&
M.T_();a?a.requestAnimationFrame(g):wa(g);var b=performance.now()/1E3;ga||(ga=b);var e=b-ga;if(!(e<1/ua.max_fps)){for(var f=t.Ko(),h=0;h<ea.length;h++)ea[h](f,e);A()||(Z>ga&&(e-=Z-Math.max(B,ga)),t.h3(e),f+=e,t.hR(f),K.update(),P.update(),v.update(),h=e,v.Vi()&&(E.reset(),fa.update(h),z.update(f,h),S.update(f,h),n.update(f,h),h&&x.update(h),v.Vi()&&(r.update(f,h),v.Vi()&&(M.update(f),I.update(f,h),v.Vi()&&(y.update(!1),C.update(f,h),za.update(),m(h,f),v.Vi()&&(d.update(f,h),y.vS(),F.frame()))))),
c(e));ga=b;a&&a.isPresenting&&a.submitFrame()}}function e(){var a=60,c=0,d=ua.OM,e=ua.HZ;return function(f){f<1/ua.max_fps||(a=la.Rc(1/f,a,f,d),f=r.y_(),(c=(c+1)%e)||b(Math.round(a),f))}}var y=u("__anchors"),x=u("__animation"),P=u("__assets"),J=u("__config"),L=u("__compat"),l=u("__container"),I=u("__controls"),v=u("__data"),K=u("__debug"),k=u("__extensions"),D=u("__geometry"),M=u("__input"),E=u("__hud"),S=u("__nla"),F=u("__main"),z=u("__logic_nodes"),C=u("__objects"),r=u("__physics"),f=u("__print"),
W=u("__renderer"),d=u("__scenes"),n=u("__sfx"),X=u("__shaders"),R=u("__textures"),t=u("__time"),fa=u("__transform"),la=u("__util"),H=u("__version"),za=u("__particles"),ha=J.context,ua=J.K,ga=0,B=0,Z=0,ea=[],Aa=["webgl","experimental-webgl"],da=["webgl2","experimental-webgl2"],ba=null,wa=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,
1E3/ua.max_fps)}}();a.Mf=function(a,b){f.I3(ua.console_verbose);var c=H.Cw()+" "+H.type()+" ("+H.bF()+")";f.log("%cINIT ENGINE","color: #00a",c);f.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;p();b?E.Mf(b):(J.K.show_hud_debug_info=!1,J.ka.MA=!1);L.ZV();L.yE("Chrome")||L.yE("Firefox")||(ua.Nb=!1);c=h(a,ua.Nb);!c&&ua.Nb&&(ua.Nb=!1,c=h(a,!1));if(!c)return null;f.log("%cINIT WEBGL "+(ua.Nb?"2":"1"),"color: #00a");ba=c;G(a,b,c);J.xq();L.WQ(c,!0);J.u3();
X.$0();ua.cA&&(a.style["touch-action"]="none");f.log("%cSET PRECISION:","color: #00a",ua.precision);return c};a.l3=function(a){b=a};a.t9=function(){b=function(){}};a.y3=function(a){m=a};a.u9=function(){q()};a.pause=w;a.resume=function(){A()&&(Z=performance.now()/1E3,n.resume(),r.resume(),R.play(!0),y.resume())};a.pr=A;a.reset=function(){v.WC(0);v.reset();k.reset();W.reset();D.reset();R.K2();X.reset();K.reset();l.reset();v.reset();l.reset();t.reset();n.reset();Z=B=ga=0;b=function(){};c=function(){};
m=function(){};ea.length=0;ba=null};a.tE=function(a,b,c,d){F.tE(a,b,c,d)};a.ym=function(){return L.ym()};a.Dt=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==a)return;ea.push(a)};a.u2=function(a){for(var b=0;b<ea.length;b++)if(ea[b]==a){ea.splice(b,1);break}};a.Fz=function(){var a=k.Fz();return a?{vendor:ba.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:ba.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}};b4w.module.__main=function(a,u){function m(a,b,e){var g=c.Xh();if(g.toBlob)g.toBlob(a,b,e);else{e=atob(g.toDataURL(b,e).split(",")[1]);for(var g=new Uint8Array(e.length),h=0;h<e.length;h++)g[h]=e.charCodeAt(h);a(new Blob([g],{type:b||"image/png"}))}}var c=u("__container"),b=null,p="image/png",h=1,G="",q=!1,w=!1;a.tE=function(a,c,e,m){q=w="undefined"===typeof m?m:!0;b=a;p=c||p;h=e||h};a.frame=function(){var a=b;a&&(q&&URL.revokeObjectURL(G),m(function(b){G=URL.createObjectURL(b);a(G)},p,h),b=null,
p="image/png",h=1)}};b4w.module.physics=function(a,u){function m(a,b,c,g){return h.WY(a,g[c[0]],g[c[1]],g[c[2]])}function c(a,b,c,g,e){b=Math.abs(a[2]-b[2]);return b<e&&G.E0(a,c,g)?b:Number.MAX_VALUE}var b=u("__physics"),p=u("__print"),h=u("__util"),G=u("__navmesh");a.cT=0;a.b6=1;a.a6=2;a.cJ=3;a.CM=function(a){b.Ca(a)?b.CM(a):p.va("No physics for object "+a.name)};a.jF=function(a){b.Ca(a)?b.jF(a):p.va("No physics for object "+a.name)};a.wba=function(a){return b.Ca(a)};a.ZF=function(a){return b.ZF(a)};a.eO=function(a){return b.eO(a)};
a.VQ=function(a,c){b.Ca(a)?b.VQ(a,c):p.va("No physics for object "+a.name)};a.PB=function(a,c,h){b.Ca(a)?b.PB(a,c,h):p.va("No physics for object "+a.name)};a.Z=function(a){b.Ca(a)?b.Z(a):p.va("No physics for object "+a.name)};a.BK=function(a,c,h,g){b.Ca(a)?b.BK(a,c,h,g):p.va("No physics for object "+a.name)};a.CK=function(a,c,h,g){b.Ca(a)?b.CK(a,c,h,g):p.va("No physics for object "+a.name)};a.dE=function(a,c,h,g){b.Ca(a)?b.dE(a,c,h,g,!1):p.va("No physics for object "+a.name)};a.J8=function(a,c,h,
g){b.Ca(a)?b.dE(a,c,h,g,!0):p.va("No physics for object "+a.name)};a.AK=function(a,c,h,g){b.Ca(a)?b.AK(a,c,h,g):p.va("No physics for object "+a.name)};a.yQ=function(a,c,h,g){b.Ca(a)?b.yQ(a,c,h,g):p.va("No physics for object "+a.name)};a.Ns=function(a,c){b.Ca(a)?(b.vg(a)||b.wg(a)||p.error("Wrong object"),b.Ns(a,h.ja(c,-1,1))):p.va("No physics for object "+a.name)};a.Oea=function(a,c,m){if(b.Ca(a)){b.vg(a)||b.wg(a)||p.error("Wrong object");c=h.ja(c,0,1);var g=a.O.Uq;-1==m||1==m?g=Math.max(-1,Math.min(g+
m*c,1)):!m&&0<=g?g=Math.max(0,g-c):!m&&0>g?g=Math.min(0,g+c):p.error("Wrong steering direction");b.Ns(a,h.ja(g,-1,1))}else p.va("No physics for object "+a.name)};a.Ms=function(a,c){b.Ca(a)?(b.vg(a)||b.wg(a)||p.error("Wrong object"),b.Ms(a,h.ja(c,-1,1))):p.va("No physics for object "+a.name)};a.Nea=function(a,c,m){if(b.Ca(a)){b.vg(a)||b.wg(a)||p.error("Wrong object");c=h.ja(c,0,1);var g=a.O.us;-1==m||1==m?g=Math.max(-1,Math.min(g+m*c,1)):!m&&0<=g?g=Math.max(0,g-c):!m&&0>g?g=Math.min(0,g+c):p.error("Wrong steering direction");
b.Ms(a,h.ja(g,-1,1))}else p.va("No physics for object "+a.name)};a.SI=function(a,c){b.Ca(a)?(b.vg(a)||b.wg(a)||p.error("Wrong object"),b.SI(a,h.ja(c,0,1))):p.va("No physics for object "+a.name)};a.Mea=function(a,c){if(b.Ca(a)){b.vg(a)||b.wg(a)||p.error("Wrong object");c=h.ja(c,-1,1);var m=a.O.Rt;b.SI(a,h.ja(m+m*c,0,1))}else p.va("No physics for object "+a.name)};a.vg=function(a){return b.vg(a)};a.wg=function(a){return b.wg(a)};a.hba=function(a){if(!b.Ca(a))return p.va("No physics for object "+a.name),
null;if(b.vg(a)||b.wg(a))return a.Jg.name;p.error("Wrong object");return null};a.jba=function(a){if(!b.Ca(a))return p.va("No physics for object "+a.name),null;if(b.vg(a)||b.wg(a))return a.O.Uq;p.error("Wrong object");return null};a.iba=function(a){if(!b.Ca(a))return p.va("No physics for object "+a.name),0;if(b.vg(a)||b.wg(a))return a.O.us;p.error("Wrong object");return 0};a.gba=function(a){if(!b.Ca(a))return p.va("No physics for object "+a.name),0;if(b.vg(a)||b.wg(a))return a.O.Rt;p.error("Wrong object");
return 0};a.SN=function(a){if(!b.Ca(a))return p.va("No physics for object "+a.name),0;if(b.vg(a)||b.wg(a))return b.SN(a);p.error("Wrong object");return 0};a.ml=function(a){return b.cO(a)};a.LH=function(a,c,h){b.Ca(a)?b.LH(a,c,h):p.va("No physics for object "+a.name)};a.IB=function(a,c){b.Ca(a)?b.IB(a,c):p.va("No physics for object "+a.name)};a.FQ=function(a,c){b.Ca(a)?b.FQ(a,c):p.va("No physics for object "+a.name)};a.EQ=function(a,c){b.Ca(a)?b.EQ(a,c):p.va("No physics for object "+a.name)};a.BQ=
function(a,c){b.Ca(a)?b.BQ(a,c):p.va("No physics for object "+a.name)};a.jL=function(a){b.Ca(a)?b.jL(a):p.va("No physics for object "+a.name)};a.kL=function(a,c,h){b.Ca(a)?b.kL(a,c,h):p.va("No physics for object "+a.name)};a.JB=function(a,c,h){b.Ca(a)?b.JB(a,c,h):p.va("No physics for object "+a.name)};a.DQ=function(a,c){b.Ca(a)?b.DQ(a,c):p.va("No physics for object "+a.name)};a.CQ=function(a,c){b.Ca(a)?b.CQ(a,c):p.va("No physics for object "+a.name)};a.bE=function(a,c,h,g){b.Ca(a)?b.bE(a,c||"ANY",
h,g||!1):p.va("No physics for object "+a.name)};a.tH=function(a,c,h){b.Ca(a)?b.tH(a,c||"ANY",h):p.va("No physics for object "+a.name)};a.cE=function(a,c){b.Ca(a)?b.cE(a,c):p.va("No physics for object "+a.name)};a.CE=function(a){b.Ca(a)?b.CE(a):p.va("No physics for object "+a.name)};a.Gx=function(a,c,h,g,e,m){a=a||null;return null==a||b.Ca(a)?b.Gx(a,c,h,g||"ANY",e,m||!1,!1,!1,!1):(p.va("No physics for object "+a.name),0)};a.D8=function(a,c,h,g,e,m,u,G,J){a=a||null;return null==a||b.Ca(a)?b.Gx(a,c,
h,g||"ANY",e,m||!1,u||!1,G||!1,J||!1):(p.va("No physics for object "+a.name),0)};a.uH=function(a){b.JO(a)?b.uH(a):p.error("Wrong ray test ID")};a.iL=function(a,c,h){b.JO(a)?b.iL(a,c,h):p.error("Wrong ray test ID")};a.wK=function(a,c,h,g,e,m,u,G,J,L){b.Ca(c)&&b.Ca(e)?b.wK(a,c,h,g,e,m,u,G,J,L):p.error("Wrong objects")};a.DL=function(a){b.Ca(a)&&b.Y_(a)?b.DL(a):p.error("Wrong object")};a.WP=function(a,c,h,g,e,m){b.Ca(a)&&b.Ca(g)?b.WP(a,c,h,g,e,m):p.error("Wrong objects")};a.rP=function(a,c,h){h||(h=
m);if(b.Ca(a)){var g=a.L.pv;return g?G.rP(g,c,h):(p.error(a.name+" is not a navigation mesh object"),null)}p.va("No physics for object "+a.name)};a.qP=function(a,h,u,g){if(b.Ca(a)){var e=a.L.pv;if(!e)return p.error(a.name+" is not a navigation mesh object"),null;g=g||{};a={};a.do_not_pull_string=!!g.do_not_pull_string;a.distance_to_closest=g.distance_to_closest||m;a.distance_to_farthest=g.distance_to_farthest||c;a.island=g.island||0;a.allowed_distance=g.allowed_distance||Number.MAX_VALUE;a.return_normals=
g.return_normals||!1;return G.qP(e,h,u,a)}p.va("No physics for object "+a.name)}};b4w.module.screen=function(a,u){function m(){}function c(){}function b(a,b,c){function e(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",e,!1),document.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),document.removeEventListener("MSFullscreenChange",e,!1),c())}a=a||q.qe();
b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",e,!1);document.addEventListener("webkitfullscreenchange",e,!1);document.addEventListener("mozfullscreenchange",e,!1);document.addEventListener("MSFullscreenChange",e,!1);a.xH=a.xH||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.xH?a.xH():x.error("B4W App: request fullscreen method is not supported")}function p(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
document.msExitFullscreen;"function"!=typeof a&&x.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function h(a){var b=g.$(g.Vb);if(b&&!I){var c=g.tg(b,g.Sg);if(c&g.jx){var e=b.Yd,h=e.getEyeParameters("left"),e=e.getEyeParameters("right");q.resize(2*Math.max(h.renderWidth,e.renderWidth),Math.max(h.renderHeight,e.renderHeight),!1)}else h=q.Xh(),h=Math.max(2*h.height,h.width),q.resize(h,h/2,!1);h=g.$h(b,g.jJ,L);e=g.$h(b,g.kJ,l);G.PH(a,h,e,!(c&g.jx));h={base_line_factor:.5,
inter_lens_factor:.5,enable_hmd_stereo:!0};c&(g.em|g.zk|g.oq)&&(h.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],h.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Op||(b.xj&&b.Vj&&b.yj?h.base_line_factor=(b.xj-b.yj)/b.Vj:b.yj||(h.base_line_factor=b.xj/b.Vj)),b.Ui&&b.Gn&&!b.Op&&(h.inter_lens_factor=b.Ui/b.Gn));v.enabled||P.RA(.5,1);P.$r(h);if(b=g.tg(b,g.mt))c=P.N(),a=y.La(a,
c).na,G.KB(a,b);P.x2();I=!0}}var G=u("__camera"),q=u("__container"),w=u("__config"),A=u("__hud"),g=u("__input"),e=u("__main"),y=u("__obj_util"),x=u("__print"),P=u("__scenes"),J=u("__vec4"),L=J.create(),l=J.create(),I=!1,v=w.so;a.zM=A.zM;a.OP=A.OP;a.yH=b;a.oF=p;a.Eq=g.Eq;a.kQ=function(a,c,e){if("HMD"!=!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var h=g.$(g.Vb);if(h&&g.tg(h,g.Sg)&g.Nn){var k=h.Yd;k&&!k.isPresenting&&(c=c||function(){},e=e||function(){},m=function(){k.isPresenting?
c():(window.removeEventListener("vrdisplaypresentchange",m),e())},window.addEventListener("vrdisplaypresentchange",m,!1),k.capabilities.canPresent?(a=q.Xh(),k.requestPresent([{source:a}]).then(function(){},function(){x.error("HMD fullscreen request failed.")})):x.error("HMD fullscreen request failed."))}else b(a,c,e)}};a.nZ=function(){if("HMD"!=!w.get("stereo")||"NONE"==w.get("stereo")&&w.get("is_mobile_device")){var a=g.$(g.Vb);a&&g.tg(a,g.Sg)&g.Nn?(a=a.Yd)&&a.isPresenting&&(a.exitPresent(),q.Gl(!0)):
p()}};a.vE=function(){var a=g.$(g.Vb),b=g.tg(a,g.Sg)&g.Nn;return a&&(b&&a.Yd||!b&&g.Eq())?!0:!1};a.J2=function(a){var b=g.$(g.Vb);if(b&&!I&&(c=void 0,P.Ua())){var e=P.Fm(P.N());e&&(b.rh?(h(e),a&&a()):(g.I2(b),b.Ov=function(){h(e);a&&a()}))}};a.oZ=function(){var a=g.$(g.Vb);I&&a&&a.rh&&(P.$r({enable_hmd_stereo:!1}),I=!1,c&&c(),P.y2(),v.enabled||P.RA(2,1),q.Gl(!0))};a.Sda=function(a,b){a=a||"image/png";e.tE(function(b){var c=window.document.createElement("a");document.body.appendChild(c);c.style.display=
"none";c.href=b;c.download="screenshot."+a.split("/")[1];c.click();document.body.removeChild(c)},a,b||1,!0)}};b4w.module.transform=function(a,u){var m=u("__boundings"),c=u("__obj_util"),b=u("__physics"),p=u("__print"),h=u("__quat"),G=u("__transform"),q=u("__tsr"),w=u("__util"),A=q.create(),g=new Float32Array(3),e=new Float32Array(4);a.je=function(a,e,h,m){c.ba(a)?(g[0]=e,g[1]=h,g[2]=m,G.je(a,g),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.QB=function(a,e,h,m){c.ba(a)?(g[0]=e,g[1]=h,g[2]=m,G.QB(a,g),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.RB=function(a,
e){c.ba(a)?(G.je(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Oda=function(a,e){c.ba(a)?(G.QB(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Nda=function(a,e,h,m,u){c.ba(a)?(g[0]=e,g[1]=h,g[2]=m,e=q.W(u.v.C),u=q.ha(u.v.C),w.Lc(g,1,u,e,g),G.je(a,g),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Me=function(a,b){b||(b=new Float32Array(3));G.Me(a,b);return b};a.QN=function(a,b){b||(b=new Float32Array(3));G.QN(a,b);
return b};a.Ll=function(a,g,h,m,q){c.ba(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=q,G.Ll(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.NB=function(a,g,h,m,q){c.ba(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=q,G.NB(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Zv=function(a,e){c.ba(a)?(G.Ll(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Eda=function(a,e){c.ba(a)?(G.NB(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.Taa=function(a,b){if(c.ba(a))return G.NF(a,b),b;p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Rj=function(a,b){b||(b=new Float32Array(4));G.Rj(a,b);return b};a.NF=function(a,b){b||(b=new Float32Array(4));G.NF(a,b);return b};a.UH=function(a,e,h,m){c.ba(a)?(g[0]=e,g[1]=h,g[2]=m,G.UH(a,g),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.GN=function(a,b){b||(b=new Float32Array(3));G.GN(a,b);return b};a.HN=function(a,b){b||(b=new Float32Array(3));G.HN(a,b);return b};
a.VH=function(a,e,h,m){c.ba(a)?(g[0]=e,g[1]=h,g[2]=m,G.VH(a,g),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Cda=function(a,e){c.ba(a)?(G.UH(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Bda=function(a,e){c.ba(a)?(G.VH(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Ue=function(a,b){c.ba(a)?(G.Ue(a,b),G.V(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.WH=function(a,b){c.ba(a)?(G.WH(a,b),G.V(a)):p.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.ge=function(a){return G.ge(a)};a.JN=function(a){return G.JN(a)};a.v$=function(a){if("EMPTY"!=a.type)p.error("Wrong object: "+a.name);else{for(var e=0;e<a.bf.length;e++)if(!c.ba(a.bf[e])){p.error('Wrong object: "'+a.bf[e].name+'" is not dynamic.');return}G.je(a,[0,0,0]);G.Ll(a,[0,0,0,1]);G.Ue(a,1);G.V(a);b.Z(a)}};a.LF=function(a){return c.mf(a)?G.LF(a):(p.error("Wrong object: "+a.name),0)};a.Dz=function(a,b,e){if(!c.mf(a))return p.error("Wrong object: "+a.name),null;
e||(e=new Float32Array(3));return G.Dz(a,b,e)};a.yg=function(a,e,g,h){c.ba(a)?(G.yg(a,e,g,h),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.$ca=function(a,g){if(c.ba(a)){var m=h.setAxisAngle(w.Bf,g,e);G.FH(a,m);G.V(a);b.Z(a)}else p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.ada=function(a,g){if(c.ba(a)){var m=h.setAxisAngle(w.Bh,g,e);G.FH(a,m);G.V(a);b.Z(a)}else p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.bda=function(a,g){if(c.ba(a)){var m=h.setAxisAngle(w.fc,
g,e);G.FH(a,m);G.V(a);b.Z(a)}else p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Eaa=function(a){return m.fy(a.v.Hi)};a.mk=function(a,e){c.ba(a)?(G.mk(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.SB=function(a,e){c.ba(a)?(G.SB(a,e),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Gm=function(a,b){b||(b=new Float32Array(8));G.Gm(a,b);return b};a.Su=function(a,b){b||(b=new Float32Array(8));G.Su(a,b);return b};a.distance=function(a,b){return G.distance(a,
b)};a.rda=function(a,e){c.ba(a)?(q.Wh(e,A),G.mk(a,A),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.sda=function(a,e){c.ba(a)?(q.Wh(e,A),G.SB(a,A),G.V(a),b.Z(a)):p.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Aaa=function(a,b){b||(b=new Float32Array(16));G.Gm(a,A);q.NC(A,b);return b};a.Baa=function(a,b){b||(b=new Float32Array(16));G.Su(a,A);q.NC(A,b);return b}};b4w.module.util=function(a,u){var m=u("__compat"),c=u("__print"),b=u("__quat"),p=u("__tbn"),h=u("__util"),G=u("__vec3");a.Bf=new Float32Array([1,0,0]);a.Fe=new Float32Array([0,1,0]);a.fc=new Float32Array([0,0,1]);a.Xs=new Float32Array([-1,0,0]);a.Bh=new Float32Array([0,-1,0]);a.mc=new Float32Array([0,0,-1]);a.WJ=h.WJ;a.cK=h.cK;a.dK=h.dK;a.YJ=h.YJ;a.$J=h.$J;a.fK=h.fK;a.XJ=h.XJ;a.bK=h.bK;a.VD=h.VD;a.ZJ=h.ZJ;a.aK=h.aK;a.eK=h.eK;a.Rh=function(a){return h.Rh(a||0)};a.assert=h.assert;a.SO=h.SO;a.Oe=h.Oe;
a.yG=function(a){return h.yG(a)};a.bl=function(a,b){b||(b=new Float32Array(4));return h.bl(a,b)};a.XG=function(a,c,m){m||(m=b.create());return h.XG(a,c,m)};a.$P=function(a,b,c){c||(c=G.create());return h.$P(a,b,c)};a.Hv=function(a,b){b||(b=new Float32Array(3));return h.Hv(a,b)};a.sign=h.sign;a.ja=h.ja;a.Jc=h.Jc;a.rba=function(a,b){return h.tB(a,h.mc,h.fc,h.Fe,b)};a.sE=function(a,b){return h.sE(a,b)};a.tB=function(a,b,m,g,e){return 0!=G.dot(m,g)?(c.error("Wrong in-plane direction"),null):h.tB(a,b,
m,g,e)};a.gO=h.gO;a.Rc=h.Rc;a.mC=h.mC;a.Wi=h.Wi;a.KE=h.KE;a.ZP=h.ZP;a.bQ=h.bQ;a.lO=h.lO;a.Ih=h.Ih;a.Ei=h.Ei;a.nn=h.nn;a.lerp=h.lerp;a.cf=h.cf;a.vB=h.vB;a.hF=h.hF;a.Wo=m.Wo;a.X$=p.get;a.trunc=h.trunc};b4w.module.camera_anim=function(a,u){function m(a,b,e,g,h){e=A.Ih(b-e);e=Math.min(e,2*Math.PI-e);b=A.Ih(g-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(e)||1E-6>2*Math.PI-Math.abs(e))e=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;c.Ne(a)?(h[0]=b,h[1]=e):(h[0]=e,h[1]=b);return h}var c=u("camera"),b=u("controls"),p=u("print"),h=u("scenes"),G=u("time"),q=u("transform"),w=u("tsr"),A=u("util"),g=u("vec3"),e=new Float32Array(2),y=new Float32Array(2),x=new Float32Array(3),P=new Float32Array(3),
J=new Float32Array(3),L=w.create(),l=w.create(),I=w.create(),v={},K=!1,k=!1,D=!1,M=!1;a.wea=function(a,h,k,l,m,r,f,u){if(c.Ne(a)){if(A.Wi(h))var d=h;else d=x,q.Dz(h,!1,d);k=k||1;l=l||2;m=m||1;r=r||1;var n=q.Me(a,P);h=g.subtract(d,n,J);var d=c.jl(a,e),v=c.j_(h,y),w=v[0]-d[0],t=v[1]-d[1],z=Math.abs(Math.acos(Math.cos(w)*Math.cos(t))/k),C=g.length(h)*(1-1/l),F=function(a){return 6*a*(1-a)},E=G.Ko(),D=0,I=function(){b.Cg(a,"TRACK_TO_TARGET");f&&f()};k=b.yy();l=b.um();b.ga(a,"TRACK_TO_TARGET",b.kb,[k,
l],null,function(d,e,f){c.Ne(d)?1==f&&(f=b.kd(d,e,0)-E,e=b.kd(d,e,1),f<z?(f=F(f/z),c.Dc(a,f*w*e/z,f*t*e/z)):f<z+m?(D||(c.Dc(a,v[0],v[1],!0),D++),f=F(f-z/m),e=f*C*e/m,q.yg(d,0,0,-e)):f<z+m+r?1>=D&&(c.Dc(a,v[0],v[1],!0),c.sF(a,n),q.yg(d,0,0,-C),u&&u(),D++):f<z+m+r+m?(2>=D&&(c.Dc(a,v[0],v[1],!0),c.sF(a,n),q.yg(d,0,0,-C),D++),f=F(f-z-m-r/m),e=f*C*e/m,q.yg(d,0,0,e)):(c.Dc(a,v[0],v[1],!0),c.sF(a,n),I())):I()})}else p.error("track_to_target(): Wrong camera object or camera move style")};a.KK=function(a){function g(a,
d,g){if(1==g)if(g=c.Ti(a),g==c.Ie)k();else if(g!=c.Ob&&g!=c.Vc||!c.a0(a))q=null,d=b.kd(a,d,0),c.Dc(a,.3*d,0);else{g=g==c.Vc?c.xZ(a,v):c.u4(a,v);if(null===q||g.left!=q.left||g.right!=q.right){q=q||{};q.left=g.left;q.right=g.right;r=Math.min(.2,A.Ih(q.right-q.left)/2);g=l;var h=q,n=c.jl(g,e)[0];g=m(g,n,h.left,h.right,y);f=.3*Math.min(1,g[0]/.2,g[1]/.2)}d=b.kd(a,d,0);g=c.jl(a,e)[0];g=m(a,g,q.left,q.right,y);g[1]>r&&g[0]>r?f=.3*A.sign(f):g[1]<r?f-=Math.pow(.3,2)/.4*d:g[0]<r&&(f+=Math.pow(.3,2)/.4*d);
c.Dc(a,d*f,0)}}function k(){b.Cg(l,"AUTO_ROTATE");b.Cg(l,"DISABLE_AUTO_ROTATE");a()}a=a||function(){};var l=h.il();if(c.Yo(l))p.error("auto_rotate(): Wrong camera move style");else{var q={},r=0,f=0;if(b.om(l,"AUTO_ROTATE"))k();else{var u=b.Vk("X"),d=b.Vk("Y"),n=b.po(),w=b.pu(),x=b.zy(),t=b.um(),E=b.nu(0);b.ga(l,"DISABLE_AUTO_ROTATE",b.Tp,[u,d,n,w,x,E],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},k);b.ga(l,"AUTO_ROTATE",b.kb,[t],function(a){return a[0]},g)}}};a.xO=function(){var a=
h.il();return b.om(a,"AUTO_ROTATE")};a.SW=function(){var a=h.il();return c.Ti(a)==c.Ie?!1:!0};a.tca=function(a,b,e,h,k){if(c.Ti(a)!=c.Ie)p.error("move_camera_to_point(): wrong camera type");else if(!K)if(a)if(b){e=e||1;h=h||.01;var m=A.Wi(a)?a:q.Gm(a,L),f=A.Wi(b)?b:q.Gm(b,l);b=g.distance(w.W(m),w.W(f))/e;e=A.Jc(w.ha(m),A.mc,x);var u=A.Jc(w.ha(f),A.mc,P);e=Math.min(Math.abs(g.dot(e,u)),1);h=1E3*Math.max(b,Math.acos(e)/h);K=!0;var d=G.wj(0,1,h,function(b){var c=w.lr(m,f,A.nn(b),I);D?(G.pm(d),K=D=!1):
(q.mk(a,c),1==b&&(K=!1,k&&k()))})}else p.error("move_camera_to_point(): you must specify the point object");else p.error("move_camera_to_point(): you must specify the camera object")};a.Dc=function(a,b,e,g,h){if(c.Ti(a)==c.Ie)p.error("rotate_camera(): not supported for STATIC cameras");else if(!k)if(a)if(b||e){k=!0;var l=0,f=0,m=b?b:e,d=G.wj(0,m,g||1E3,function(g){M?(G.pm(d),k=M=!1):(l-=g,f-=g,e&&b?c.Dc(a,l,f):e?c.Dc(a,0,f):b&&c.Dc(a,l,0),f=l=g,g==m&&(k=!1,h&&h()))})}else p.error("rotate_camera(): you must specify the rotation angle");
else p.error("rotate_camera(): you must specify the camera object")};a.fea=function(){D=!0};a.gea=function(){M=!0};a.eca=function(){return K};a.gca=function(){return k}};b4w.module.time=function(a,u){var m=u("__time");a.OB=m.OB;a.Fq=m.Fq;a.Ko=m.Ko;a.wj=m.wj;a.pm=m.pm};b4w.module.tsr=function(a,u){var m=u("__mat4"),c=u("__tsr");a.create=c.create;a.lz=c.lz;a.copy=c.copy;a.identity=c.identity;a.si=c.si;a.Bd=c.Bd;a.Ue=c.Ue;a.jn=c.jn;a.Ec=c.Ec;a.W=c.W;a.ge=c.ge;a.ha=c.ha;a.invert=c.invert;a.NC=function(a,p){p||(p=m.create());c.NC(a,p);return p};a.Wh=c.Wh;a.multiply=c.multiply;a.Lc=c.Lc;a.bS=c.bS;a.wn=c.wn;a.II=c.II;a.Td=c.Td;a.JI=c.JI;a.translate=c.translate;a.lr=function(a,m,h,u){u||(u=c.create());c.lr(a,m,h,u);return u}};b4w.module.gp_conf=function(a,u){function m(){z.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&z.push(a[b]);return z}function c(a){var b=P.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)x.Yv(a,c,b[c])}else c=JSON.stringify(L),P.set(a+"_gmpd_stngs",c,"b4w")}function b(a){W=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),
g=document.createElement("div"),h=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),q=document.createElement("div"),u=document.createElement("div"),v=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("div"),F=document.createElement("div"),G=document.createElement("div"),E=document.createElement("div"),I=document.createElement("div"),
K=document.createElement("div"),L=document.createElement("div");D=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";g.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";k.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";n.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";q.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";u.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";v.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";z.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";F.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";G.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";E.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";I.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";K.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";L.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(K);b.appendChild(L);c.appendChild(d);c.appendChild(e);c.appendChild(g);c.appendChild(h);b.appendChild(c);k.appendChild(m);k.appendChild(n);k.appendChild(p);k.appendChild(q);b.appendChild(k);b.appendChild(u);b.appendChild(v);b.appendChild(y);b.appendChild(z);b.appendChild(A);b.appendChild(F);b.appendChild(G);a.appendChild(b);b.appendChild(E);b.appendChild(I);C.length=0;l.length=0;r.length=0;f.length=0;C.push(p,
n,q,m,A,F,E,G,y,z,u,v,d,g,h,e,I);l.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
r.push(u,u,v,v);f.push(K,L);for(a=0;a<C.length;a++)C[a].setAttribute("id","pad_btn_"+a),C[a].setAttribute("data-colorstate","B"),C[a].setAttribute("data-key",a),C[a].setAttribute("data-svgid",a);K.setAttribute("id","pad_left_axis");K.setAttribute("data-colorstate","GR");K.setAttribute("data-key",x.cm);K.setAttribute("data-svgid",l.length);L.setAttribute("id","pad_right_axis");L.setAttribute("data-colorstate","GR");L.setAttribute("data-key",x.dm);L.setAttribute("data-svgid",l.length+1);l.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
w(C,J);w(f,"#e6e6e6")}function p(a){return[y.bc(x.Xp,a),y.bc(x.Yp,a),y.bc(x.gq,a),y.bc(x.hq,a),y.bc(x.iq,a),y.bc(x.jq,a),y.bc(x.Ln,a),y.bc(x.Mn,a),y.bc(x.kq,a),y.bc(x.lq,a),y.bc(x.Zp,a),y.bc(x.$p,a),y.bc(x.aq,a),y.bc(x.bq,a),y.bc(x.cq,a),y.bc(x.eq,a),y.bc(x.fq,a),y.bc(x.Rw,a),y.bc(x.Sw,a),y.bc(x.Tw,a),y.bc(x.Uw,a),y.bc(x.Vw,a),y.bc(x.Ww,a),y.bc(x.Xw,a),y.bc(x.Yw,a),y.bc(x.Zw,a)]}function h(a){return[y.le(x.cm,a),y.le(x.Jn,a),y.le(x.dm,a),y.le(x.Kn,a),y.le(x.Vp,a),y.le(x.Wp,a),y.le(x.it,a),y.le(x.jt,
a),y.le(x.kt,a),y.le(x.lt,a),y.le(x.gt,a),y.le(x.ht,a)]}function G(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function q(a){k.removeChild(D);D=null;switch(a){case "PAD":S.checked=!0;b(k);break;case "WHEEL":E.checked=
!0;var c=k;W=!1;var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),q=document.createElement("div"),u=document.createElement("div"),v=document.createElement("div"),y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("div"),F=document.createElement("div"),G=document.createElement("div"),I=
document.createElement("div"),K=document.createElement("div"),L=document.createElement("div"),M=document.createElement("div"),P=document.createElement("div"),ca=document.createElement("div"),oa=document.createElement("div"),pa=document.createElement("div"),Q=document.createElement("div");a=document.createElement("div");var xa=document.createElement("div"),na=document.createElement("div"),O=document.createElement("div"),Oa=document.createElement("div"),Na=document.createElement("div");D=d;var ta="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";d.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=ta+"top: 132px;left: 331px;";g.style.cssText=ta+"top: 122px;left: 315px;";h.style.cssText=ta+"top: 122px;left: 347px;";m.style.cssText=ta+"top: 113px;left: 331px;";n.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";p.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";q.style.cssText=ta+"top: 107px;left: 141px;";u.style.cssText=ta+"top: 107px;left: 90px;";v.style.cssText=ta+"top: 185px;left: 321px;";y.style.cssText=ta+"top: 185px;left: 340px;";z.style.cssText=ta+"top: 179px;left: 358px;";A.style.cssText=ta+"top: 178px;left: 303px;";F.style.cssText=ta+"top: 210px;left: 299px;";G.style.cssText=ta+"top: 279px;left: 299px;";I.style.cssText=ta+"top: 210px;left: 321px;";K.style.cssText=ta+
"top: 279px;left: 321px;";L.style.cssText=ta+"top: 210px;left: 344px;";M.style.cssText=ta+"top: 278px;left: 344px;";P.style.cssText=ta+"top: 124px;left: 147px;";ca.style.cssText=ta+"top: 138px;left: 133px;";oa.style.cssText=ta+"top: 124px;left: 82px;";pa.style.cssText=ta+"top: 138px;left: 96px;";Q.style.cssText=ta+"top: 278px;left: 367px;";ta="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=ta+"top: 291px;left: 50px;";xa.style.cssText=ta+"top: 291px;left: 111px;";na.style.cssText=ta+"top: 291px;left: 171px;";O.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";Oa.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Na.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";c.appendChild(d);d.appendChild(a);d.appendChild(xa);d.appendChild(na);d.appendChild(O);d.appendChild(Oa);d.appendChild(Na);d.appendChild(e);d.appendChild(g);d.appendChild(h);d.appendChild(m);d.appendChild(n);d.appendChild(p);d.appendChild(q);d.appendChild(u);d.appendChild(v);d.appendChild(y);d.appendChild(z);d.appendChild(A);d.appendChild(F);d.appendChild(G);d.appendChild(I);d.appendChild(K);d.appendChild(L);d.appendChild(M);
d.appendChild(P);d.appendChild(ca);d.appendChild(oa);d.appendChild(pa);d.appendChild(Q);C.length=0;l.length=0;r.length=0;f.length=0;C.push(e,g,h,m,n,p,q,u,v,y,z,A,F,G,I,K,L,M,P,ca,oa,pa,Q);l.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
f.push(O,a,na,xa,Oa,Na);for(c=0;c<C.length;c++)C[c].setAttribute("id","wheel_btn_"+c),C[c].setAttribute("data-colorstate","B"),C[c].setAttribute("data-key",c),C[c].setAttribute("data-svgid",c);for(c=0;c<f.length;c++)C[c].setAttribute("id","wheel_axis_"+c),C[c].setAttribute("data-colorstate","GR");O.setAttribute("data-key",x.cm);O.setAttribute("data-svgid",l.length);a.setAttribute("data-key",x.Jn);a.setAttribute("data-svgid",l.length+1);na.setAttribute("data-key",x.dm);na.setAttribute("data-svgid",
l.length+2);xa.setAttribute("data-key",x.Kn);xa.setAttribute("data-svgid",l.length+3);Oa.setAttribute("data-key",x.Vp);Oa.setAttribute("data-svgid",l.length+4);Na.setAttribute("data-key",x.Wp);Na.setAttribute("data-svgid",l.length+5);l.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
w(C,J);w(f,"#e6e6e6")}}function w(a,b){function c(a){a=a.target;if(!(0>I||"G"==a.getAttribute("data-colorstate")))if(K){if("R"==a.getAttribute("data-colorstate")&&(v=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",K=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(v.getAttribute("data-svgid"));v.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c])+"')";v.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));v=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),d="B"==a.getAttribute("data-colorstate")?1:2;K=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";v=a}}for(var d=0;d<a.length;d++)x.Hh(a[d],c)}function A(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function g(){var a=window.innerWidth,b=window.innerHeight;k.style.zoom=750>=b&&400<b||750>=
a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var e=u("container"),y=u("controls"),x=u("input"),P=u("storage"),J=RegExp("#5276cf","g"),L={};L[x.aq]=x.aq;L[x.bq]=x.bq;L[x.eq]=x.eq;L[x.cq]=x.cq;L[x.hq]=x.hq;L[x.Xp]=x.Xp;L[x.Yp]=x.Yp;L[x.gq]=x.gq;L[x.jq]=x.jq;L[x.Mn]=x.Mn;L[x.iq]=x.iq;L[x.Ln]=x.Ln;L[x.kq]=x.kq;L[x.lq]=x.lq;L[x.Zp]=x.Zp;L[x.$p]=x.$p;L[x.fq]=x.fq;var l=[],I=-1,v=null,K=0,k=null,D=null,M=null,E=null,S=null,F=null,z=[],C=[],r=[],f=[],W=!0,d={};d[x.cm]=-2;d[x.Jn]=-2;d[x.dm]=-2;d[x.Kn]=-2;d[x.Vp]=
-2;d[x.Wp]=-2;d[x.it]=-2;d[x.jt]=-2;d[x.kt]=-2;d[x.lt]=-2;d[x.gt]=-2;d[x.ht]=-2;a.show=function(){var a=document.createElement("div");k=a;a.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
e.Xu(a,"LAST");b(a);var u=document.createElement("div");u.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var w=document.createElement("div");w.innerHTML="Select a device";w.style.cssText="color: #fff;display: inline-block;";u.appendChild(w);for(w=0;4>w;w++){var t=p(w),z=function(){return!0},
D=function(a,b){if(b==I)for(var c=0;c<C.length;c++){var d=C[c],e=y.kd(a,b,c),f=c;if(K)e=x.MF(I),0<=e&&v&&1==K&&(d=v.getAttribute("data-key"),x.Yv(I,d,e),f=P.get(I+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,P.set(I+"_gmpd_stngs",JSON.stringify(f),"b4w"),v=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",K=0);else{if(e&&"B"==d.getAttribute("data-colorstate")){var g=l[f];d.style.backgroundImage="url('data:image/svg+xml;base64,"+
btoa(g.replace(J,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(g=l[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(g)+"')",d.setAttribute("data-colorstate","B"))}}};y.ga(null,w,y.kb,t,z,D)}0<m().length&&(I=0);var H=[],w=document.createElement("div");w.style.cssText="margin-top: 20px;";for(t=0;4>t;t++)D=A(t),t==I&&(D.style.backgroundColor="green",M=D),c(t),w.appendChild(D),D.setAttribute("data-device_type","PAD"),H.push(D),x.Hh(D,
function(a){var b=m();a=a.target;for(var d=0;d<b.length;d++)H[d]==a&&(I=d,M=a,c(I),q(a.getAttribute("data-device_type")))});u.appendChild(w);F=document.createElement("label");F.style.cssText="position: relative;display: block;color: white;";u.appendChild(F);w=document.createElement("div");w.style.cssText="margin-top: 20px;";t=G(w,"Pad");D=G(w,"Wheel");t.setAttribute("checked","true");t.onchange=function(){q("PAD");M&&M.setAttribute("data-device_type","PAD")};D.onchange=function(){q("WHEEL");M&&M.setAttribute("data-device_type",
"WHEEL")};t.setAttribute("id","test");S=t;E=D;t=document.createElement("label");t.style.cssText+="color: #fff;display: block;";w.appendChild(t);t.textContent="Click on the buttons & arrows to setup your controller";t.setAttribute("id","action_label");u.appendChild(w);a.appendChild(u);a=y.um();y.ga(null,"UPDATE_GAMEPAD_DATA",y.kb,[a],z,function(){var a=m(),b=a.length;-1==I&&a.length&&(I=a[0].index,M=H[I]);for(var c=0;c<H.length;c++)c<b?(H[c].textContent=a[c].index,H[c]==M?(H[c].style.backgroundColor=
"green",F.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):H[c].style.backgroundColor="blue"):H[c].style.backgroundColor="black";b||(I=-1,F.textContent="")});for(w=0;4>w;w++)t=h(w),D=function(a,b){if(b=="AXES"+I){for(var c=0;c<r.length;c+=2){var e=r[c],g=a,h=b,k=c,m=20*y.kd(g,h,k),g=20*y.kd(g,h,k+1);e.style.transform="translate3d("+m+"px, "+g+"px, 0px) rotate(0rad)"}if(W)for(c=0;12>c;c+=2){if(g=a,h=b,e=c,!(e+1>2*f.length)){m=y.kd(g,h,e);g=y.kd(g,h,e+1);if(-2<d[e]){var n=m-d[e],p=g-d[e+
1],h=f[Math.floor(e/2)],k=h.getAttribute("data-svgid");K?2==K&&(n=x.Bz(I),0<=n&&(n%2&&n--,K=0,h.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[k])+"')",h=parseFloat(v.getAttribute("data-key")),x.Yv(I,h,n),x.Yv(I,h+1,n+1),v=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):h.style.backgroundImage=n||p?"url('data:image/svg+xml;base64,"+btoa(l[k].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(l[k])+
"')"}d[e]=m;d[e+1]=g}}else for(c=0;12>c;c++)(e=c,e>=f.length)||(m=y.kd(a,b,e),-2<d[e]&&((k=m-d[e],g=f[e],h=g.getAttribute("data-svgid"),K)?2==K&&(k=x.Bz(I),0<=k&&(K=0,g.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(l[h])+"')",g=parseFloat(v.getAttribute("data-key")),x.Yv(I,g,k),v=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):g.style.backgroundImage=k?"url('data:image/svg+xml;base64,"+btoa(l[h].replace("#e6e6e6","#00ff00"))+
"')":"url('data:image/svg+xml;base64,"+btoa(l[h])+"')"),d[e]=m)}},y.ga(null,"AXES"+w,y.kb,t,function(){return!0},D);g();window.addEventListener("resize",g)};a.ci=function(){K=0;I=-1;S=E=v=M=null;r.length=0;C.length=0;f.length=0;e.qe().removeChild(k);k=null;y.Cg(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)y.Cg(null,a),y.Cg(null,"AXES"+a);window.removeEventListener("resize",g)};a.update=function(){for(var a=0;4>a;a++)c(a)}};b4w.module.storage=function(a,u){function m(a){return p[a?a:b]?JSON.parse(p[a?a:b]):{}}var c=u("__print"),b="b4w",p=null;a.Mf=function(a){a?"b4w"!==a?b=a:c.error("b4w prefix denied"):c.warn("Prefix should be a string. Last declared storage prefix will be used.")};a.set=function(a,c,q){var h=m(q);h[a]=String(c);p[q?q:b]=JSON.stringify(h)};a.Ja=function(a){delete p[a?a:b]};a.get=function(a,b){var c=m(b);return c[a]?c[a]:""};a.debug=function(a){c.log(m(a?a:b))};try{p=window.localStorage;try{p.tmp=null,
delete p.tmp}catch(h){c.warn("localStorage quota is limited. Disabling localStorage"),p=null}}catch(h){c.warn("Applying chrome localStorage bug workaround"),p=null}p||(c.warn("localStorage is not available, initializing temporary storage"),p={})};b4w.module.hmd=function(a,u){function m(){p.Cg(null,"VR_CONTROLLERS")}function c(a,c){function h(c,d,f){if(0<f&&(f=q.il())&&b.Ne(f)){var h=p.jf(c,d,1);c=p.jf(c,d,2);c=e.add(c,S,l);A.RB(f,c);if(h)if(1==a){var h=G.multiply(E,h,M),m=e.transformQuat(g.Bh,h,l);b.YH(f,m);A.Zv(f,h)}else if(2==a||3==a){c=A.Rj(f,k);c=G.invert(c,k);d=G.multiply(y,c,k);c=b.Q_(f,l);Math.abs(c[2])<Math.PI/4?m=e.cross(c,g.Bh,I):Math.abs(c[1])<Math.PI/4&&(m=e.cross(c,g.fc,I));e.normalize(m,m);d=e.transformQuat(m,d,v);var n=e.dot(c,
d);d=e.scaleAndAdd(d,c,-n,v);e.normalize(d,d);c=e.cross(c,m,l);m=Math.acos(g.ja(e.dot(m,d),0,1));c=g.sign(e.dot(d,c));x+=m*c;m=G.setAxisAngle(g.fc,-x,k);3==a?h=G.multiply(m,h,K):(c=g.tB(h,g.mc,g.fc,g.Fe,D),c=G.invert(c,D),h=G.multiply(c,h,D),h=G.multiply(m,h,K));m=e.transformQuat(g.Bh,h,l);b.YH(f,m);A.Zv(f,h);G.copy(h,y)}}}if(c){var f=q.il();f&&w.J2(function(){b.Ne(f)||(P=b.Ic(f),J=b.ld(f),L=b.Yo(f),b.yZ(f));var a=p.um(),d=p.PE();y=A.Rj(f,y);p.ga(null,"HMD_ROTATE_CAMERA",p.kb,[a,c,d],null,h)})}}var b=
u("camera"),p=u("controls"),h=u("input"),G=u("quat"),q=u("scenes"),w=u("screen"),A=u("transform"),g=u("util"),e=u("vec3"),y=G.create(),x=0,P=!1,J=!1,L=!1,l=e.create(),I=e.create(),v=e.create(),K=G.create(),k=G.create(),D=G.create(),M=G.create(),E=G.create(),S=e.create(),F={pivot:e.create()};a.q6=0;a.gT=1;a.t6=2;a.p6=3;a.iZ=function(a){var b;if(b=h.$(h.Vb))b=h.tg(b,h.Sg)&(h.zk|h.oq|h.Nn)?p.QE():p.OE(),c(a,b)};a.j9=function(){return!!h.Ok(h.Vb)};a.w$=function(a,b){m();if(a||b){var c=h.WN(0),f=p.ty(c),
c=p.sy(c),g=h.WN(1),d=p.ty(g),g=p.sy(g);p.ga(null,"VR_CONTROLLERS",p.kb,[f,d,c,g],null,function(c,d){if(a){var f=p.jf(c,d,0),g=p.jf(c,d,2);e.add(S,f,f);A.RB(a,f);A.Zv(a,g)}b&&(f=p.jf(c,d,1),g=p.jf(c,d,3),e.add(S,f,f),A.RB(b,f),A.Zv(b,g))})}};a.O9=m;a.TY=function(){if(p.om(null,"HMD_ROTATE_CAMERA")){p.Cg(null,"HMD_ROTATE_CAMERA");w.oZ();var a=q.il();P?b.y4(a,F):J?b.oO(a,F):L&&b.l4(a,F);b.YH(a,g.fc);var c=A.Rj(a,K);A.Zv(a,c)}};a.A3=function(a){G.copy(a,E)};a.Saa=function(a){G.copy(E,a);return a};a.v3=
function(a){G.copy(a,S)};a.Raa=function(a){G.copy(S,a);return a}};b4w.module.hmd_conf=function(a,u){function m(){if(!y.Ok(y.Vb))return!1;var a=y.$(y.Vb),a=y.tg(a,y.Sg);return a&(y.em|y.zk|y.oq)&&!(a&y.Nn)}function c(a){a=a.target.value;var b=M[a],c;for(c in k)if(c in b){var e=document.getElementById(c+"_slider");e&&(e.disabled="custom"!==a,e.value=b[c]);if(e=document.getElementById(c+"_number"))e.disabled="custom"!==a,e.value=b[c];k[c]=b[c]}}function b(){e.Cg(null,"UPDATE_HMD_RENDERING");h();q();L&&(L=!1,g.qe().removeChild(l),document.head.removeChild(I),I=v=l=
null)}function p(){h(!0);q();for(var a in k){var b=document.getElementById(a+"_slider");b&&(b.value=k[a]);if(b=document.getElementById(a+"_number"))b.value=k[a]}}function h(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,e=0,f=0,g=0,d;a:{d=S;var h=navigator.userAgent||navigator.vendor||window.opera;if(1==d.format&&d.devices&&d.devices.length)for(var l=0;l<d.devices.length;l++){var m=d.devices[l];
if(m.rules&&("ios"==m.type&&D||"android"==m.type)){for(var p=!1,q=0;q<m.rules.length;q++){var u=m.rules[q];if(u.ua&&0<=h.indexOf(u.ua)||!u.ua&&u.res&&u.res[0]&&u.res[1]&&Math.min(b,c)==Math.min(u.res[0],u.res[1])&&Math.max(b,c)==Math.max(u.res[0],u.res[1])){p=!0;break}}if(p){d=l;break a}}}else x.error("DPDB isn't correct.");d=-1}-1!=d&&(g=S.devices[d],f=g.dpi[1]||g.dpi,e=Math.round(25.4*b/(g.dpi[0]||g.dpi)),f=Math.round(25.4*c/f),g=Math.round(g.bw));b=P.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");
a?(k.first_distortion=.34,k.second_distortion=.55,k.bevel_size=g||4,k.screen_width=e||110,k.screen_height=f||65,k.screen_lense=50,k.ipd=64,k.baseline=32):(k.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,k.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,k.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):g||4,k.screen_width="screen_width"in b?parseFloat(b.screen_width):e||110,k.screen_height="screen_height"in b?parseFloat(b.screen_height):
f||65,k.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,k.ipd="ipd"in b?parseFloat(b.ipd):64,k.baseline="baseline"in b?parseFloat(b.baseline):32);K=!0}function G(){P.set("hmd_conf",JSON.stringify(k),"b4w");b()}function q(){if(K){var a=y.$(y.Vb);a&&(y.kk(a,y.dx,[k.first_distortion,k.second_distortion]),y.tg(a,y.Sg)&(y.em|y.zk)&&(y.kk(a,y.cx,.001*k.bevel_size),y.kk(a,y.ix,.001*k.screen_width),y.kk(a,y.gx,.001*k.screen_height),y.kk(a,y.hx,.001*k.screen_lense),y.kk(a,y.mt,.001*k.ipd),y.kk(a,
y.bx,.001*k.baseline)));K=!1}}function w(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in k&&k[b]!=a.target.value&&(K=!0,k[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function A(a,b,c){var e=document.createElement("button");e.onclick=a;e.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";e.innerHTML=b;return e}var g=u("container"),e=u("controls"),y=u("input"),x=u("print"),P=u("storage"),J=u("util"),L=!1,l=null,I=null,v=null,K=!0,k={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},D=/iPad|iPhone|iPod/.test(navigator.platform),M={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},E=[{label:"Tray to lens-center distance.",or:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",or:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
or:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",or:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",or:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",or:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];a.check=m;a.show=function(a){if(m()){var u=g.qe();I=document.createElement("style");
I.innerHTML="."+a+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+a+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(I);if(!L){L=!0;h();var x=
y.$(y.Uc,u);y.jw(x,!1);x=y.$(y.Rg,u);y.jw(x,!1);l=document.createElement("div");l.className=a;u.appendChild(l);v=document.createElement("div");l.appendChild(v);v.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";a=P.get("hmd_conf","b4w");a=JSON.parse(a?a:"{}").profile||"custom";u=document.createElement("div");x=document.createElement("label");x.innerHTML=
"Profile: ";x.className="text_label";x.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";u.appendChild(x);x=document.createElement("select");u.appendChild(x);x.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
var r=y.$(y.Vb);if(r)for(var f in M)if(0==M[f].type||y.tg(r,y.Sg)&(y.em|y.zk)&&1==M[f].type){var D=document.createElement("option");D.value=f;D.text=M[f].name;x.appendChild(D)}x.value=a;J.Wo()?x.onchange=c:x.oninput=c;v.appendChild(u);f=y.$(y.Vb);for(a=0;a<E.length;a++)if(y.tg(f,y.Sg)&(y.em|y.zk)||!E[a].or){u=E[a];r=a;x=document.createElement("div");D=document.createElement("label");D.className="text_label";var d="8px";r%2&&(d="0");D.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
D.textContent=u.label;x.appendChild(D);x.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+d+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";for(r=0;r<u.inputs.length;r++){D=u.inputs[r];d=document.createElement("div");d.className="row";var n=document.createElement("input");n.className="input_slider";n.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";
n.setAttribute("id",D.id+"_slider");n.setAttribute("type","range");n.setAttribute("min","0.00");n.setAttribute("step",D.step);n.setAttribute("value",k[D.id]);n.setAttribute("max",D.max);d.appendChild(n);var F=document.createElement("input");F.className="input_text";F.setAttribute("id",D.id+"_number");F.setAttribute("type","number");F.setAttribute("min","0.00");F.setAttribute("step",D.step);F.setAttribute("value",k[D.id]);F.setAttribute("max",D.max);d.appendChild(F);F.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
J.Wo()?(n.onchange=w,F.onchange=w):(n.oninput=w,F.oninput=w);x.appendChild(d)}v.appendChild(x)}f=document.createElement("div");a=A(G,"SAVE","4px");u=A(b,"CANCEL","4px");x=A(p,"RESET","0px");f.className="row";f.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";f.appendChild(a);f.appendChild(u);f.appendChild(x);v.appendChild(f);f=e.yy();e.ga(null,"UPDATE_HMD_RENDERING",e.kb,[f],null,q)}}};a.ci=b;a.reset=p;a.update=function(){h();q()};var S={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",
format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],
dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},
{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],
dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,
256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},
{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},
{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},
{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],
dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],
dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,
164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},
{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],
bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}};b4w.module.sfx=function(a,u){var m=u("__obj_util"),c=u("__scenes"),b=u("__sfx"),p=u("__print");a.play=function(a,c,m){b.play(a,c||0,m||0)};a.lB=function(a){b.lB(a)};a.mG=function(a){return b.mG(a)};a.stop=function(a){b.stop(a)};a.pause=function(a){b.Z3(a)};a.resume=function(a){b.b4(a)};a.eP=function(a,c,m){b.eP(a,c||0,m||!1)};a.iH=function(a,c){b.iH(a,c)};a.DN=function(a){return b.DN(a)};a.be=function(a,c){b.be(a,c)};a.kG=function(a){return b.kG(a)};a.lca=function(){b.xr()};a.xr=function(){b.xr()};
a.Yda=function(a){b.hI(a)};a.hI=function(a){b.hI(a)};a.VN=function(a){return a&&"object"===typeof a?b.VN(a):b.G_()};a.$H=function(a,c){a&&"object"===typeof a?b.$H(a,c):b.t3(c)};a.dc=function(a,c){a&&"object"===typeof a?b.dc(a,c):b.B1(c)};a.IO=function(a){return a&&"object"===typeof a?b.IO(a):b.C0()};a.Iz=function(){return b.Iz().slice(0)};a.mL=b.mL;a.GQ=function(a){b.GQ(c.N(),a)};a.iN=function(){return b.iN(c.N())};a.AM=function(a,c,m){a&&"object"===typeof a?b.AM(a,c,m):b.aZ(c,m)};a.hS=function(a){a&&
"object"===typeof a?b.hS(a):b.H4()};a.yK=b.yK;a.FL=b.FL;a.fF=b.fF;a.gF=b.gF;a.fR=b.fR;a.EN=b.EN;a.LQ=b.LQ;a.qN=b.qN;a.pN=b.pN;a.mN=function(a){return a&&m.Qm(a)?b.mN(a):(p.error('Object "'+(a?a.name:void 0)+'" is not a valid speaker'),0)}};b4w.module.version=function(a,u){var m=u("__version");a.version=m.version;a.Cw=m.Cw;a.type=m.type;a.pM=m.pM;a.bF=m.bF;a.get_build_version=m.get_build_version};b4w.register("embed_main",function(a,u){function m(a,b){qa=document.querySelector("#circle_container");Qa=document.querySelector("#preloader_caption");Va=document.querySelector("#first_stage");Ua=document.querySelector("#second_stage");ya=document.querySelector("#third_stage");La=document.querySelector("#load_container");Ha=document.querySelector("#preloader_container");Sa=document.querySelector("#opened_button");Ia=document.querySelector("#logo_container");Ma=document.querySelector("#buttons_container");
Ca=document.querySelector("#quality_buttons_container");sa=document.querySelector("#stereo_buttons_container");Da=document.querySelector("#help_info_container");ra=document.querySelector("#help_button");U=document.querySelector("#hor_button_section");if(b){aa.pause();var d=document.querySelector("#rel_version");Oa.Cw()&&(d.innerHTML=Oa.Cw());d=document.querySelector("#fullscreen_on_button");oa.Eq()||oa.vE()||d.parentElement.removeChild(d);d=Q.get("quality");d&&"CUSTOM"!=d||(d="HIGH",Q.set("quality",
d));Ca.className="control_panel_button";switch(d){case "LOW":Ca.classList.add("low_mode_button");break;case "HIGH":Ca.classList.add("high_mode_button");break;case "ULTRA":Ca.classList.add("ultra_mode_button")}p();h();c();ba.update();if(d=q())w(d),window.addEventListener("resize",z),z()}else if((d=ga.Jz(!0))&&d.fallback_image){var e=document.createElement("div");e.className="image_wrapper";document.body.appendChild(e);Ha.style.display="none";e.style.backgroundImage="url("+d.fallback_image+")"}else if(d&&
d.fallback_video){var e=document.createElement("div"),f=document.createElement("video");e.className="video_wrapper";e.appendChild(f);f.autoplay=!0;for(var g=0;g<d.fallback_video.length;g++){var k=document.createElement("source");k.src=d.fallback_video[g];f.appendChild(k)}document.body.appendChild(e);Ha.style.display="none"}else ua("Browser could not initialize WebGL","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup")}function c(){var a=Ya;if(a.length){var b=["t",
"f","g","v","w"],a=a.filter(function(a){return 0<=b.indexOf(a)});if(a.length){for(var c=["tw_button","fb_button","g_button","vk_button","weibo_button"],d=[],e=[],f=0;f<a.length;f++)switch(a[f]){case "t":d.push("tw_button");break;case "f":d.push("fb_button");break;case "g":d.push("g_button");break;case "v":d.push("vk_button");break;case "w":d.push("weibo_button")}for(f=0;f<c.length;f++)0>d.indexOf(c[f])&&e.push(c[f]);for(f=0;f<e.length;f++)a=document.getElementById(e[f]),a.parentElement.removeChild(a);
[].slice.call(document.querySelector("#vert_section_button").children).sort(function(a,b){return d.indexOf(a.id)-d.indexOf(b.id)}).forEach(function(a){document.querySelector("#vert_section_button").appendChild(a)})}}}function b(){var a=document.querySelector("#auto_rotate_on_button");B.SW()||a.parentElement.removeChild(a)}function p(a){a=a||Q.get("stereo")||"NONE";sa.className="control_panel_button";switch(a){case "NONE":sa.classList.add("def_mode_button");break;case "ANAGLYPH":sa.classList.add("anag_mode_button");
break;case "HMD":sa.classList.add("hmd_mode_button")}}function h(){window.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1};G();for(var a=0;a<Ja.length;a++){var b=Ja[a],c=document.getElementById(b.id);c&&(A(c),function(a){ma.Hh(c,function(b){a.callback(b,a)})}(b))}}function G(){for(var a=document.querySelectorAll(".control_panel_button a"),b=0;b<a.length;b++){var c=a[b];c.hasAttribute("href")&&(c.href+=document.location.href);A(c.parentNode)}}function q(){var a=Z.get("built_in_module_name");
if(b4w.module_check(a)){var a=u(a).data.main_file,b=document.getElementById("built_in_scripts");b.parentElement.removeChild(b);return a}a=ga.Jz();Ia.style.display="block";if(a&&a.load)return a=a.load;if(ab.load&&"__ASSETS_LOADING_PATH__"!=ab.load)return a=ab.load;ua("Please specify a scene to load","https://www.blend4web.com/doc/en/web_player.html#scene-errors");return null}function w(a){ga.Oh(Ia,"opacity",0,1,300,"","",function(){Qa.style.display="block";ga.Oh(Qa,"opacity",0,1,300,"","",function(){aa.resume();
da.load(a,d,X,!1)})})}function A(a){a&&(aa.ym()?(a.addEventListener("touchstart",function(){a.classList.add("hover");E()}),a.addEventListener("touchend",function(){a.classList.remove("hover");M()})):(a.addEventListener("mouseenter",function(){a.classList.add("hover")}),a.addEventListener("mouseout",function(){a.classList.remove("hover")})))}function g(a){if(!D()){var b=a?a.target:document.querySelector("#auto_rotate_on_button");B.KK(function(){b&&J(b)});b&&J(b);aa.pr()&&(y(),L())}}function e(a){D()||
(B.KK(),a&&J(a.target))}function y(a){D()||(aa.resume(),a&&J(a.target))}function x(){D()||(oa.vE()?oa.kQ(document.body,P,P):oa.yH(document.body,P,P))}function P(){!I("buttons_container")&&ka&&M();var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button");a&&J(a)}function J(a){var b=a.id,c;a:{for(c=0;c<Ja.length;c++)if(Ja[c].id==a.id){c=Ja[c];break a}c=null}var d=c.callback;a.id=c.id=c.Qv;c.Qv=b;I(a.id)||a.classList.remove("hover");c.callback=c.Pv;c.Pv=
d}function L(){var a=document.querySelector("#play_button")||document.querySelector("#pause_button");a&&J(a)}function l(){var a=document.querySelector("#auto_rotate_on_button")||document.querySelector("#auto_rotate_off_button");a&&J(a)}function I(a){var b=!1;if(document.querySelectorAll)for(var c=document.querySelectorAll(":hover"),d=0;d<c.length;d++)if(c[d].id==a){b=!0;break}return b}function v(){if(!D()){Ma.removeEventListener("mouseleave",M);Ma.removeEventListener("mouseenter",E);document.body.removeEventListener("touchmove",
M);S();F();var a=document.querySelector("#vert_section_button").firstElementChild,b=function(a){ka=!0;ga.Oh(a,"marginRight",0,-45,50,"","px");ga.Oh(a,"opacity",1,0,50,"","",function(){a.previousElementSibling&&"opened_button"!=a.previousElementSibling.id?b(a.previousElementSibling):setTimeout(function(){Y=ka=!1;k();U.style.display=""},100)})},c=function(a){ia=!0;ga.Oh(a,"marginBottom",0,-45,50,"","px");ga.Oh(a,"opacity",1,0,50,"","",function(){a.nextElementSibling&&"opened_button"!=a.nextElementSibling.id?
c(a.nextElementSibling):setTimeout(function(){ta=ia=!1;k()},100)})};b(document.querySelector("#help_button"));V||c(a)}}function K(){E();if(!D())if(ma.yB(Sa,K),ta||Y)v();else{var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button")||document.querySelector("#quality_buttons_container"),b=document.querySelector("#vert_section_button").lastElementChild,c=function(a){ka=!0;a.style.marginRight="-45px";"help_button"==a.id&&Ka?setTimeout(function(){ka=!1;Y=!0;
k()},100):(a.style.display="block",ga.Oh(a,"marginRight",-45,0,50,"","px",function(){a.nextElementSibling?c(a.nextElementSibling):setTimeout(function(){ka=!1;Y=!0;k()},100)}),ga.Oh(a,"opacity",0,1,50,"",""))},d=function(a){ia=!0;a.style.marginBottom="-45px";a.style.display="block";ga.Oh(a,"marginBottom",-45,0,50,"","px",function(){a.previousElementSibling?d(a.previousElementSibling):setTimeout(function(){ia=!1;ta=!0;k()},100)});ga.Oh(a,"opacity",0,1,50,"","")};U.style.display="block";c(a);V||d(b);
aa.ym()?document.body.addEventListener("touchmove",M):(Ma.addEventListener("mouseleave",M),Ma.addEventListener("mouseenter",E))}}function k(){D()||(ma.Hh(Sa,K),(!I("buttons_container")&&(ta||Y)||aa.ym()&&(ta||Y))&&M())}function D(){return ia||ka}function M(){D()||(E(),Na=setTimeout(v,2E3))}function E(){clearTimeout(Na)}function S(a){if(!D()&&Ba){Ba=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_q")[0];Ca.style.marginRight="0px";for(var b=0,c=Ca.children;b<c.length;b++)c[b].style.display=
"none",c[b].style.opacity=0;Ca.className="control_panel_button "+a.id}}function F(a){if(!D()&&Fa){Fa=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_s")[0];sa.style.marginRight="0px";for(var b=0,c=sa.children;b<c.length;b++)c[b].style.display="none",c[b].style.opacity=0;sa.className="control_panel_button "+a.id}}function z(){ea.Gl()}function C(){if(ca.gL()){var a=ea.Xh(),a=ma.$(ma.Uc,a),a=ma.$h(a,ma.uj,Ea);W(a[0],a[1])}}function r(a){if(ca.gL())for(var b=0;b<a.length;b++)W(a[b].clientX,
a[b].clientY)}function f(){var a=ea.Xh(),b=ma.$(ma.Uc,a);b&&ma.Hd(b,ma.fm,C);(a=ma.$(ma.Rg,a))&&ma.Hd(a,ma.hm,r)}function W(a,b){var c=bb;c&&ca.M1(c)&&ca.$t(c);bb=Pa(a,b)}function d(a,c){if(c){f();b();ga.hZ();aa.y3(t);z();var d=Aa.Vk(),e=Aa.po(),h=ea.qe();Aa.ga(null,"MOUSE_MOVE",Aa.Ch,[e,d],function(a){return a[0]&&a[1]},function(){h.className="move"});Aa.ga(null,"MOUSE_STOP",Aa.Lw,[e],function(a){return a[0]},function(a,b,c){-1==c&&(h.className="")});((d=ga.Jz())&&"autorotate"in d||"__AUTOROTATE__"!=
ab.autorotate)&&g();d=ca.Jo();d.title&&(document.title=d.title);n()}else ua("Could not load the scene","https://www.blend4web.com/doc/en/web_player.html#scene-errors")}function n(){var a=document.querySelector("#hmd_mode_button");ma.Ok(ma.Vb)||a.parentElement.removeChild(a)}function X(a){Qa.innerHTML=a+"%";33>a?(va||(va=!0,qa.style.display="block"),Va.style.width=4.7*a+"px",qa.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",qa.style.transform="rotate("+(3.6*a-503)+"deg)"):66>a?(N||(N=!0,Va.style.width=
"142px",Ua.style.backgroundColor="#000",Ua.style.marginTop="135px"),0<135-4.5*(a-33)&&(Ua.style.marginTop=135-3.5*(a-33)+"px"),qa.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",qa.style.transform="rotate("+(3.6*a-503)+"deg)"):100!=a&&(Ga||(Ga=!0,Ua.style.marginTop="0px",ya.style.backgroundColor="#000",ya.style.height="0px"),75<a&&(ya.style.height=.1*a+"px"),qa.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",qa.style.transform="rotate("+(3.6*a-503)+"deg)");100==a&&(pa.Iz().length||(a=document.querySelector("#sound_on_button"),
a.parentElement.removeChild(a)),Va.parentElement.removeChild(Va),Ua.parentElement.removeChild(Ua),ya.parentElement.removeChild(ya),qa.parentElement.removeChild(qa),La.style.backgroundColor="#000",a=[{elem:Qa,duration:300},{elem:La,duration:300,cb:function(){Sa.style.display="block";ga.Oh(Sa,"transform",0,1,300,"scale(",")")}},{elem:Ia,duration:300},{elem:Ha,duration:300,cb:function(){Ha.parentElement.removeChild(Ha);K()}}],R(a),ga.aQ(a))}function R(a){for(var b={type:"css",prop:"opacity",from:1,to:0},
c=a.length;c--;)for(var d in b)a[c][d]=b[d]}function t(){}function fa(a){if(Z.get("quality")!=a){switch(a){case Z.gm:var b="LOW";break;case Z.Ak:b="HIGH";break;case Z.On:b="ULTRA"}Q.set("quality",b);H()}}function la(a){M();if(Za!=a){switch(a){case "NONE":Q.set("stereo","NONE");"ANAGLYPH"==Za?H():(wa.TY(),Pa=ca.op);break;case "ANAGLYPH":Q.set("stereo","ANAGLYPH");H();break;case "HMD":if(Q.set("stereo","NONE"),"NONE"==Za){ma.Ok(ma.Vb)&&T.update();B.xO()&&(e(),l());var b=ca.il(),c=xa.Me(b,Ra),b=xa.Rj(b,
xb),b=O.transformQuat(na.Bf,b,Jb);b[2]=0;O.normalize(b,b);b=ja.rotationTo(na.Bf,b,xb);wa.v3(c);wa.A3(b);wa.iZ(wa.gT);Pa=ca.W1;document.querySelector("#fullscreen_on_button")&&x()}else Q.set("stereo","NONE"),H()}Za=a;p(a)}}function H(){setTimeout(function(){window.location.reload()},100)}function za(){var a=Q.get("quality");a&&"CUSTOM"!=a||(a="HIGH",Q.set("quality",a));switch(a){case "LOW":var b=Z.gm;break;case "HIGH":b=Z.Ak;break;case "ULTRA":b=Z.On}Z.set("quality",b)}function ha(){var a=Q.get("stereo")||
"NONE";Za=a;"NONE"==a&&ma.Ok(ma.Vb)&&(a="HMD");Z.set("stereo",a)}function ua(a,b){var c=document.querySelector("#error_name"),d=document.querySelector("#error_info"),e=document.querySelector("#error_container");qa.style.display="none";c.innerHTML=a;d.innerHTML="For more info visit <a href="+b+">"+b.replace("https://www.","")+"</a>";e.style.display="block";Ia.style.opacity=1;Ia.style.marginTop="-90px"}var ga=u("app"),B=u("camera_anim"),Z=u("config"),ea=u("container"),Aa=u("controls"),da=u("data"),
ba=u("gp_conf"),wa=u("hmd"),T=u("hmd_conf"),ma=u("input"),aa=u("main"),ja=u("quat"),ca=u("scenes"),oa=u("screen"),pa=u("sfx"),Q=u("storage"),xa=u("transform"),na=u("util"),O=u("vec3"),Oa=u("version"),Na=null,ta=!1,Y=!1,ia=!1,ka=!1,Ba=!1,Fa=!1,Ka=!1,V=!1,Ya=[],va=!1,N=!1,Ga=!1,qa,Qa,Va,Ua,ya,La,Ha,Sa,Ia,Ma,Ca,sa,Da,ra,U,bb,Za,Ea=new Float32Array(2),Ra=new Float32Array(3),Jb=new Float32Array(3),xb=new Float32Array(4),Pa=ca.op,Ja=[{type:"simple_button",id:"opened_button",callback:K},{type:"simple_button",
id:"help_button",callback:function(){D()||(aa.ym()?Da.className="touch":Da.className="",Da.style.display="block",ra.style.display="none",Ka=!0)}},{type:"simple_button",id:"close_help",callback:function(){Ka&&(Da.style.display="none",ra.style.display="block",Ka=!1)}},{type:"trigger_button",id:"fullscreen_on_button",callback:x,Qv:"fullscreen_off_button",Pv:function(){D()||(oa.vE()?oa.nZ():oa.oF())}},{type:"trigger_button",id:"pause_button",callback:function(a){D()||(aa.pause(),a&&J(a.target),B.xO()&&
(e(),l()))},Qv:"play_button",Pv:y},{type:"trigger_button",id:"auto_rotate_on_button",callback:g,Qv:"auto_rotate_off_button",Pv:e},{type:"trigger_button",id:"sound_on_button",callback:function(a){D()||(pa.dc(null,!0),J(a.target))},Qv:"sound_off_button",Pv:function(a){D()||(pa.dc(null,!1),J(a.target))}},{type:"menu_button",id:"stereo_buttons_container",callback:function(a,b){if(!D()){S();Fa=!0;sa.style.marginRight="-30px";for(var c=b.AE,d=b.zE,e=0;e<c.length;e++){var f=document.getElementById(c[e]);
f&&(sa.classList.contains(c[e])?(f.className="active_elem_s",ma.Hh(f,F)):(f.className="qual_button",ma.Hh(f,d[e])))}e="";ma.Ok(ma.Vb)||(e="no_hmd");sa.className="stereo_buttons_container "+e;e=0;for(c=sa.children;e<c.length;e++)c[e].style.display="block",c[e].style.opacity=1}},AE:["def_mode_button","anag_mode_button","hmd_mode_button"],zE:[function(){la("NONE")},function(){la("ANAGLYPH")},function(){la("HMD")}]},{type:"menu_button",id:"quality_buttons_container",callback:function(a,b){if(!D()){F();
Ba=!0;Ca.style.marginRight="-30px";for(var c=b.AE,d=b.zE,e=0;e<c.length;e++){var f=document.getElementById(c[e]);Ca.classList.contains(c[e])?(f.className="active_elem_q",ma.Hh(f,S)):ma.Hh(f,d[e])}Ca.className="quality_buttons_container";e=0;for(c=Ca.children;e<c.length;e++)c[e].style.display="block",c[e].style.opacity=1}},AE:["low_mode_button","high_mode_button","ultra_mode_button"],zE:[function(){fa(Z.gm)},function(){fa(Z.Ak)},function(){fa(Z.On)}]}],ab={load:"__ASSETS_LOADING_PATH__",compressed_textures_pvr:"__COMPRESSED_TEXTURES_PVR__",
compressed_textures_dds:"__COMPRESSED_TEXTURES_DDS__",show_fps:"__SHOW_FPS__",no_social:"__NO_SOCIAL__",alpha:"__ALPHA__",min_capabilities:"__MIN_CAPABILITIES__",autorotate:"__AUTOROTATE__",compressed_gzip:"__COMPRESSED_GZIP__"};a.Mf=function(){var a="DEBUG"==Oa.type(),b=b4w.module_check(Z.get("built_in_module_name")),c=ga.Jz(),d="";"__ASSETS_LOADING_PATH__"!=ab.load?d=ab.load:d=window.location.href;var e="__SHOW_FPS__"!=ab.show_fps,f="__ALPHA__"!=ab.alpha,g="__COMPRESSED_TEXTURES_DDS__"!=ab.compressed_textures_dds,
h="__MIN_CAPABILITIES__"!=ab.min_capabilities,k="__COMPRESSED_TEXTURES_PVR__"!=ab.compressed_textures_pvr,l="__COMPRESSED_GZIP__"!=ab.compressed_gzip;V="__NO_SOCIAL__"!=ab.no_social;var n=!1;!g&&!k||b||a||(n=!0);c&&(b||a||(!g&&"compressed_textures"in c&&(g=n=!0),!k&&"compressed_textures_pvr"in c&&(k=n=!0),!l&&"compressed_gzip"in c&&(l=!0)),!e&&"show_fps"in c&&(e=!0),!V&&"no_social"in c&&(V=!0),!f&&"alpha"in c&&(f=!0),"load"in c&&(d=c.load),!h&&"min_capabilities"in c&&(h=!0),"socials"in c&&(Ya=c.socials.split("").filter(function(a,
b,c){return c.indexOf(a)==b})));Q.Mf("b4w_webplayer:"+d);ha();za();f||Z.set("background_color",[.224,.224,.224,1]);ga.Mf({canvas_container_id:"main_canvas_container",callback:m,gl_debug:a,physics_enabled:!b,show_fps:e,report_init_failure:!1,console_verbose:a,error_purge_elements:["control_panel"],alpha:f,key_pause_enabled:!1,fps_elem_id:"fps_container",fps_wrapper_id:"fps_wrapper",assets_pvr_available:k,assets_dds_available:g,assets_min50_available:n,min_capabilities:h,assets_gzip_available:l})}});
window.addEventListener("load",function(){b4w.require("embed_main").Mf()});
